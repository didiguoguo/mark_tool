function Session() {
    var t = function (t, e) {
            this.transition("authenticating");
            var n = {
                    username: t,
                    password_hash: e
                },
                i = this;
            $.ajax({
                url: "/py/login.py",
                type: "POST",
                data: n,
                dataType: "json",
                success: function (t, e) {
                    i.handle(t.status, t)
                }
            })
        },
        e = {
            initialState: "uninitialized",
            states: {
                uninitialized: {
                    INIT: "check_saved_credentials"
                },
                check_saved_credentials: {
                    _onEnter: function (t) {
                        $.cookie("username") && $.cookie("password_hash") ? this.login($.cookie("username"), $.cookie("password_hash")) : this.transition("logged_out")
                    },
                    LOGIN: t
                },
                logged_out: {
                    _onEnter: function (t) {
                        $.removeCookie("user_id"),
                            $.removeCookie("username"),
                            $.removeCookie("password_hash")
                    },
                    PROMPT_LOGIN: "awaiting_login_info",
                    PROMPT_REGISTRATION: "awaiting_registration_info"
                },
                awaiting_login_info: {
                    _onEnter: function () {},
                    LOGIN: t,
                    CANCEL_PROMPT: "logged_out"
                },
                awaiting_registration_info: {
                    _onEnter: function () {},
                    REGISTER: function (t, e, n, i, r) {
                        this.transition("registering");
                        var o = {
                                username: t,
                                password_hash: e,
                                first_name: n,
                                last_name: i,
                                email: r
                            },
                            s = this;
                        $.ajax({
                            url: "/py/register.py",
                            type: "POST",
                            data: o,
                            dataType: "json",
                            success: function (t, e) {
                                s.handle(t.status, t)
                            },
                            error: function (t) {}
                        })
                    },
                    CANCEL_PROMPT: "logged_out"
                },
                authenticating: {
                    _onEnter: function () {},
                    LOGIN_SUCCESSFUL: function (t) {
                        this.transition("logged_in", t)
                    },
                    BAD_LOGIN: "logged_out"
                },
                registering: {
                    _onEnter: function () {},
                    REGISTER_SUCCESSFUL: function (t) {
                        this.transition("logged_in", t)
                    },
                    USERNAME_TAKEN: "logged_out",
                    BAD_REGISTER: "logged_out"
                },
                logged_in: {
                    _onEnter: function (t) {
                        this.user_id = t.user_id,
                            this.username = t.username,
                            this.password_hash = t.password_hash,
                            $.cookie("user_id", this.user_id, {
                                expires: 5
                            }),
                            $.cookie("username", this.username, {
                                expires: 5
                            }),
                            $.cookie("password_hash", this.password_hash, {
                                expires: 5
                            })
                    },
                    LOGOUT: "logged_out"
                }
            },
            init: function () {
                this.handle("INIT")
            },
            promptLogin: function () {
                this.handle("PROMPT_LOGIN")
            },
            promptRegistration: function () {
                this.handle("PROMPT_REGISTRATION")
            },
            cancelPrompt: function () {
                this.handle("CANCEL_PROMPT")
            },
            login: function (t, e) {
                this.handle("LOGIN", t, e)
            },
            register: function (t, e, n, i, r) {
                this.handle("REGISTER", t, e, n, i, r)
            },
            badLogin: function () {
                this.handle("BAD_LOGIN")
            },
            badRegister: function () {
                this.handle("BAD_REGISTER")
            },
            loginSuccessful: function () {
                this.handle("LOGIN_SUCCESSFUL")
            },
            registerSuccessful: function () {
                this.handle("REGISTER_SUCCESSFUL")
            },
            logout: function () {
                this.handle("LOGOUT")
            },
            isLoggedIn: function () {
                return "logged_in" == this.compositeState()
            }
        },
        n = new machina.Fsm(e);
    return n.logoutIsDisabled = !1,
        n
}

function cssPropertyValueSupported(t, e) {
    var n = document.createElement("div");
    return n.style[t] = e,
        n.style[t] === e
}

function createCssImage(t, e, n, i) {
    var r = cssPropertyValueSupported("mask-image", "url(" + e + ")");
    return r ? (t.css("mask-image", "url(" + e + ")"),
            t.css("mask-repeat", "no-repeat"),
            t.css("mask-position", "center"),
            t.css("mask-size", n + "px " + i + "px")) : (t.css("background-image", "url(" + e + ")"),
            t.css("background-color", "transparent")),
        r
}

function setBackgroundImage(t, e) {
    cssPropertyValueSupported("mask-image", "url(" + e + ")") ? t.css("mask-image", "url(" + e + ")") : t.css("background-image", "url(" + e + ")")
}

function Vector2(t, e) {
    this.x = t,
        this.y = e
}

function LineSegment(t, e) {
    this.startPoint = t,
        this.endPoint = e
}

function Line(t, e) {
    this.startPoint = t,
        this.endPoint = e
}

function pointInPolygon(t, e) {
    for (var n = t[0], i = t[1], r = !1, o = 0, s = e.length - 1; o < e.length; s = o++) {
        var a = e[o][0],
            l = e[o][1],
            c = e[s][0],
            u = e[s][1];
        l > i != u > i && n < (c - a) * (i - l) / (u - l) + a && (r = !r)
    }
    return r
}

function polyResetVars(t) {
    t.draggedPoint = null,
        t.draggedAnnotation = null,
        t.isDrawing = !1,
        t.isColliding = !1,
        t.lastPoint = null,
        t.isSnapped = !1,
        t.snapPoint = null,
        t.activeShape = null,
        t.currentPoly = [],
        t.shapes = [],
        t.hoverShapes = [],
        t.canReleaseDrag = !0,
        t.__pointsBeingDrawn = []
}

function pointsWithinDist(t, e, n) {
    var i = e.x - t.x,
        r = e.y - t.y;
    return i * i + r * r <= n * n
}

function disableQuill() {
    suppressQuillEvents = !0,
        quill.enable(!1),
        quill.setText("Use the Select Tool to select an annotation and edit its text using this textbox."),
        $(".ql-editor").css("background-color", "#DDD")
}

function enableQuill() {
    suppressQuillEvents = !1,
        quill.enable(!0),
        $(".ql-editor").css("background-color", "white")
}

function pointsWithinDist(t, e, n) {
    var i = e.x - t.x,
        r = e.y - t.y;
    return i * i + r * r <= n * n
}

function isEquivalent(t, e) {
    var n = Object.getOwnPropertyNames(t),
        i = Object.getOwnPropertyNames(e);
    if (n.length != i.length)
        return !1;
    for (var r = 0; r < n.length; r++) {
        var o = n[r];
        if ("object" == typeof t[o] && "object" == typeof e[o]) {
            if (!isEquivalent(t[o], e[o]))
                return !1
        } else if (t[o] !== e[o])
            return !1
    }
    return !0
}! function (t, e) {
    "use strict";
    "object" == typeof module && "object" == typeof module.exports ? module.exports = t.document ? e(t, !0) : function (t) {
            if (!t.document)
                throw new Error("jQuery requires a window with a document");
            return e(t)
        } :
        e(t)
}("undefined" != typeof window ? window : this, function (t, e) {
    "use strict";

    function n(t, e) {
        var n = (e = e || et).createElement("script");
        n.text = t,
            e.head.appendChild(n).parentNode.removeChild(n)
    }

    function i(t) {
        var e = !!t && "length" in t && t.length,
            n = ft.type(t);
        return "function" !== n && !ft.isWindow(t) && ("array" === n || 0 === e || "number" == typeof e && e > 0 && e - 1 in t)
    }

    function r(t, e) {
        return t.nodeName && t.nodeName.toLowerCase() === e.toLowerCase()
    }

    function o(t, e, n) {
        return ft.isFunction(e) ? ft.grep(t, function (t, i) {
            return !!e.call(t, i, t) !== n
        }) : e.nodeType ? ft.grep(t, function (t) {
            return t === e !== n
        }) : "string" != typeof e ? ft.grep(t, function (t) {
            return st.call(e, t) > -1 !== n
        }) : Et.test(e) ? ft.filter(e, t, n) : (e = ft.filter(e, t),
            ft.grep(t, function (t) {
                return st.call(e, t) > -1 !== n && 1 === t.nodeType
            }))
    }

    function s(t, e) {
        for (;
            (t = t[e]) && 1 !== t.nodeType;)
        ;
        return t
    }

    function a(t) {
        var e = {};
        return ft.each(t.match(St) || [], function (t, n) {
                e[n] = !0
            }),
            e
    }

    function l(t) {
        return t
    }

    function c(t) {
        throw t
    }

    function u(t, e, n, i) {
        var r;
        try {
            t && ft.isFunction(r = t.promise) ? r.call(t).done(e).fail(n) : t && ft.isFunction(r = t.then) ? r.call(t, e, n) : e.apply(void 0, [t].slice(i))
        } catch (t) {
            n.apply(void 0, [t])
        }
    }

    function h() {
        et.removeEventListener("DOMContentLoaded", h),
            t.removeEventListener("load", h),
            ft.ready()
    }

    function d() {
        this.expando = ft.expando + d.uid++
    }

    function f(t) {
        return "true" === t || "false" !== t && ("null" === t ? null : t === +t + "" ? +t : Lt.test(t) ? JSON.parse(t) : t)
    }

    function p(t, e, n) {
        var i;
        if (void 0 === n && 1 === t.nodeType)
            if (i = "data-" + e.replace(Rt, "-$&").toLowerCase(),
                "string" == typeof (n = t.getAttribute(i))) {
                try {
                    n = f(n)
                } catch (t) {}
                Nt.set(t, e, n)
            } else
                n = void 0;
        return n
    }

    function g(t, e, n, i) {
        var r, o = 1,
            s = 20,
            a = i ? function () {
                return i.cur()
            } :
            function () {
                return ft.css(t, e, "")
            },
            l = a(),
            c = n && n[3] || (ft.cssNumber[e] ? "" : "px"),
            u = (ft.cssNumber[e] || "px" !== c && +l) && qt.exec(ft.css(t, e));
        if (u && u[3] !== c) {
            c = c || u[3],
                n = n || [],
                u = +l || 1;
            do {
                u /= o = o || ".5",
                    ft.style(t, e, u + c)
            } while (o !== (o = a() / l) && 1 !== o && --s)
        }
        return n && (u = +u || +l || 0,
                r = n[1] ? u + (n[1] + 1) * n[2] : +n[2],
                i && (i.unit = c,
                    i.start = u,
                    i.end = r)),
            r
    }

    function _(t) {
        var e, n = t.ownerDocument,
            i = t.nodeName,
            r = Ft[i];
        return r || (e = n.body.appendChild(n.createElement(i)),
            r = ft.css(e, "display"),
            e.parentNode.removeChild(e),
            "none" === r && (r = "block"),
            Ft[i] = r,
            r)
    }

    function y(t, e) {
        for (var n, i, r = [], o = 0, s = t.length; o < s; o++)
            (i = t[o]).style && (n = i.style.display,
                e ? ("none" === n && (r[o] = It.get(i, "display") || null,
                        r[o] || (i.style.display = "")),
                    "" === i.style.display && $t(i) && (r[o] = _(i))) : "none" !== n && (r[o] = "none",
                    It.set(i, "display", n)));
        for (o = 0; o < s; o++)
            null != r[o] && (t[o].style.display = r[o]);
        return t
    }

    function v(t, e) {
        var n;
        return n = void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e || "*") : void 0 !== t.querySelectorAll ? t.querySelectorAll(e || "*") : [],
            void 0 === e || e && r(t, e) ? ft.merge([t], n) : n
    }

    function m(t, e) {
        for (var n = 0, i = t.length; n < i; n++)
            It.set(t[n], "globalEval", !e || It.get(e[n], "globalEval"))
    }

    function b(t, e, n, i, r) {
        for (var o, s, a, l, c, u, h = e.createDocumentFragment(), d = [], f = 0, p = t.length; f < p; f++)
            if ((o = t[f]) || 0 === o)
                if ("object" === ft.type(o))
                    ft.merge(d, o.nodeType ? [o] : o);
                else if (Yt.test(o)) {
            for (s = s || h.appendChild(e.createElement("div")),
                a = (Ht.exec(o) || ["", ""])[1].toLowerCase(),
                l = zt[a] || zt._default,
                s.innerHTML = l[1] + ft.htmlPrefilter(o) + l[2],
                u = l[0]; u--;)
                s = s.lastChild;
            ft.merge(d, s.childNodes),
                (s = h.firstChild).textContent = ""
        } else
            d.push(e.createTextNode(o));
        for (h.textContent = "",
            f = 0; o = d[f++];)
            if (i && ft.inArray(o, i) > -1)
                r && r.push(o);
            else if (c = ft.contains(o.ownerDocument, o),
            s = v(h.appendChild(o), "script"),
            c && m(s),
            n)
            for (u = 0; o = s[u++];)
                Wt.test(o.type || "") && n.push(o);
        return h
    }

    function w() {
        return !0
    }

    function x() {
        return !1
    }

    function E() {
        try {
            return et.activeElement
        } catch (t) {}
    }

    function k(t, e, n, i, r, o) {
        var s, a;
        if ("object" == typeof e) {
            "string" != typeof n && (i = i || n,
                n = void 0);
            for (a in e)
                k(t, a, n, i, e[a], o);
            return t
        }
        if (null == i && null == r ? (r = n,
                i = n = void 0) : null == r && ("string" == typeof n ? (r = i,
                i = void 0) : (r = i,
                i = n,
                n = void 0)), !1 === r)
            r = x;
        else if (!r)
            return t;
        return 1 === o && (s = r,
                (r = function (t) {
                    return ft().off(t),
                        s.apply(this, arguments)
                }).guid = s.guid || (s.guid = ft.guid++)),
            t.each(function () {
                ft.event.add(this, e, r, i, n)
            })
    }

    function T(t, e) {
        return r(t, "table") && r(11 !== e.nodeType ? e : e.firstChild, "tr") ? ft(">tbody", t)[0] || t : t
    }

    function O(t) {
        return t.type = (null !== t.getAttribute("type")) + "/" + t.type,
            t
    }

    function C(t) {
        var e = ee.exec(t.type);
        return e ? t.type = e[1] : t.removeAttribute("type"),
            t
    }

    function S(t, e) {
        var n, i, r, o, s, a, l, c;
        if (1 === e.nodeType) {
            if (It.hasData(t) && (o = It.access(t),
                    s = It.set(e, o),
                    c = o.events)) {
                delete s.handle,
                    s.events = {};
                for (r in c)
                    for (n = 0,
                        i = c[r].length; n < i; n++)
                        ft.event.add(e, r, c[r][n])
            }
            Nt.hasData(t) && (a = Nt.access(t),
                l = ft.extend({}, a),
                Nt.set(e, l))
        }
    }

    function j(t, e) {
        var n = e.nodeName.toLowerCase();
        "input" === n && Vt.test(t.type) ? e.checked = t.checked : "input" !== n && "textarea" !== n || (e.defaultValue = t.defaultValue)
    }

    function A(t, e, i, r) {
        e = rt.apply([], e);
        var o, s, a, l, c, u, h = 0,
            d = t.length,
            f = d - 1,
            p = e[0],
            g = ft.isFunction(p);
        if (g || d > 1 && "string" == typeof p && !dt.checkClone && te.test(p))
            return t.each(function (n) {
                var o = t.eq(n);
                g && (e[0] = p.call(this, n, o.html())),
                    A(o, e, i, r)
            });
        if (d && (o = b(e, t[0].ownerDocument, !1, t, r),
                s = o.firstChild,
                1 === o.childNodes.length && (o = s),
                s || r)) {
            for (l = (a = ft.map(v(o, "script"), O)).length; h < d; h++)
                c = o,
                h !== f && (c = ft.clone(c, !0, !0),
                    l && ft.merge(a, v(c, "script"))),
                i.call(t[h], c, h);
            if (l)
                for (u = a[a.length - 1].ownerDocument,
                    ft.map(a, C),
                    h = 0; h < l; h++)
                    c = a[h],
                    Wt.test(c.type || "") && !It.access(c, "globalEval") && ft.contains(u, c) && (c.src ? ft._evalUrl && ft._evalUrl(c.src) : n(c.textContent.replace(ne, ""), u))
        }
        return t
    }

    function P(t, e, n) {
        for (var i, r = e ? ft.filter(e, t) : t, o = 0; null != (i = r[o]); o++)
            n || 1 !== i.nodeType || ft.cleanData(v(i)),
            i.parentNode && (n && ft.contains(i.ownerDocument, i) && m(v(i, "script")),
                i.parentNode.removeChild(i));
        return t
    }

    function D(t, e, n) {
        var i, r, o, s, a = t.style;
        return (n = n || oe(t)) && ("" !== (s = n.getPropertyValue(e) || n[e]) || ft.contains(t.ownerDocument, t) || (s = ft.style(t, e)), !dt.pixelMarginRight() && re.test(s) && ie.test(e) && (i = a.width,
                r = a.minWidth,
                o = a.maxWidth,
                a.minWidth = a.maxWidth = a.width = s,
                s = n.width,
                a.width = i,
                a.minWidth = r,
                a.maxWidth = o)),
            void 0 !== s ? s + "" : s
    }

    function I(t, e) {
        return {
            get: function () {
                if (!t())
                    return (this.get = e).apply(this, arguments);
                delete this.get
            }
        }
    }

    function N(t) {
        if (t in he)
            return t;
        for (var e = t[0].toUpperCase() + t.slice(1), n = ue.length; n--;)
            if ((t = ue[n] + e) in he)
                return t
    }

    function L(t) {
        var e = ft.cssProps[t];
        return e || (e = ft.cssProps[t] = N(t) || t),
            e
    }

    function R(t, e, n) {
        var i = qt.exec(e);
        return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : e
    }

    function M(t, e, n, i, r) {
        var o, s = 0;
        for (o = n === (i ? "border" : "content") ? 4 : "width" === e ? 1 : 0; o < 4; o += 2)
            "margin" === n && (s += ft.css(t, n + Bt[o], !0, r)),
            i ? ("content" === n && (s -= ft.css(t, "padding" + Bt[o], !0, r)),
                "margin" !== n && (s -= ft.css(t, "border" + Bt[o] + "Width", !0, r))) : (s += ft.css(t, "padding" + Bt[o], !0, r),
                "padding" !== n && (s += ft.css(t, "border" + Bt[o] + "Width", !0, r)));
        return s
    }

    function q(t, e, n) {
        var i, r = oe(t),
            o = D(t, e, r),
            s = "border-box" === ft.css(t, "boxSizing", !1, r);
        return re.test(o) ? o : (i = s && (dt.boxSizingReliable() || o === t.style[e]),
            "auto" === o && (o = t["offset" + e[0].toUpperCase() + e.slice(1)]),
            (o = parseFloat(o) || 0) + M(t, e, n || (s ? "border" : "content"), i, r) + "px")
    }

    function B(t, e, n, i, r) {
        return new B.prototype.init(t, e, n, i, r)
    }

    function $() {
        fe && (!1 === et.hidden && t.requestAnimationFrame ? t.requestAnimationFrame($) : t.setTimeout($, ft.fx.interval),
            ft.fx.tick())
    }

    function U() {
        return t.setTimeout(function () {
                de = void 0
            }),
            de = ft.now()
    }

    function F(t, e) {
        var n, i = 0,
            r = {
                height: t
            };
        for (e = e ? 1 : 0; i < 4; i += 2 - e)
            r["margin" + (n = Bt[i])] = r["padding" + n] = t;
        return e && (r.opacity = r.width = t),
            r
    }

    function V(t, e, n) {
        for (var i, r = (W.tweeners[e] || []).concat(W.tweeners["*"]), o = 0, s = r.length; o < s; o++)
            if (i = r[o].call(n, e, t))
                return i
    }

    function H(t, e) {
        var n, i, r, o, s;
        for (n in t)
            if (i = ft.camelCase(n),
                r = e[i],
                o = t[n],
                Array.isArray(o) && (r = o[1],
                    o = t[n] = o[0]),
                n !== i && (t[i] = o,
                    delete t[n]),
                (s = ft.cssHooks[i]) && "expand" in s) {
                o = s.expand(o),
                    delete t[i];
                for (n in o)
                    n in t || (t[n] = o[n],
                        e[n] = r)
            } else
                e[i] = r
    }

    function W(t, e, n) {
        var i, r, o = 0,
            s = W.prefilters.length,
            a = ft.Deferred().always(function () {
                delete l.elem
            }),
            l = function () {
                if (r)
                    return !1;
                for (var e = de || U(), n = Math.max(0, c.startTime + c.duration - e), i = 1 - (n / c.duration || 0), o = 0, s = c.tweens.length; o < s; o++)
                    c.tweens[o].run(i);
                return a.notifyWith(t, [c, i, n]),
                    i < 1 && s ? n : (s || a.notifyWith(t, [c, 1, 0]),
                        a.resolveWith(t, [c]), !1)
            },
            c = a.promise({
                elem: t,
                props: ft.extend({}, e),
                opts: ft.extend(!0, {
                    specialEasing: {},
                    easing: ft.easing._default
                }, n),
                originalProperties: e,
                originalOptions: n,
                startTime: de || U(),
                duration: n.duration,
                tweens: [],
                createTween: function (e, n) {
                    var i = ft.Tween(t, c.opts, e, n, c.opts.specialEasing[e] || c.opts.easing);
                    return c.tweens.push(i),
                        i
                },
                stop: function (e) {
                    var n = 0,
                        i = e ? c.tweens.length : 0;
                    if (r)
                        return this;
                    for (r = !0; n < i; n++)
                        c.tweens[n].run(1);
                    return e ? (a.notifyWith(t, [c, 1, 0]),
                            a.resolveWith(t, [c, e])) : a.rejectWith(t, [c, e]),
                        this
                }
            }),
            u = c.props;
        for (H(u, c.opts.specialEasing); o < s; o++)
            if (i = W.prefilters[o].call(c, t, u, c.opts))
                return ft.isFunction(i.stop) && (ft._queueHooks(c.elem, c.opts.queue).stop = ft.proxy(i.stop, i)),
                    i;
        return ft.map(u, V, c),
            ft.isFunction(c.opts.start) && c.opts.start.call(t, c),
            c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always),
            ft.fx.timer(ft.extend(l, {
                elem: t,
                anim: c,
                queue: c.opts.queue
            })),
            c
    }

    function z(t) {
        return (t.match(St) || []).join(" ")
    }

    function Y(t) {
        return t.getAttribute && t.getAttribute("class") || ""
    }

    function K(t, e, n, i) {
        var r;
        if (Array.isArray(e))
            ft.each(e, function (e, r) {
                n || Te.test(t) ? i(t, r) : K(t + "[" + ("object" == typeof r && null != r ? e : "") + "]", r, n, i)
            });
        else if (n || "object" !== ft.type(e))
            i(t, e);
        else
            for (r in e)
                K(t + "[" + r + "]", e[r], n, i)
    }

    function G(t) {
        return function (e, n) {
            "string" != typeof e && (n = e,
                e = "*");
            var i, r = 0,
                o = e.toLowerCase().match(St) || [];
            if (ft.isFunction(n))
                for (; i = o[r++];)
                    "+" === i[0] ? (i = i.slice(1) || "*",
                        (t[i] = t[i] || []).unshift(n)) : (t[i] = t[i] || []).push(n)
        }
    }

    function X(t, e, n, i) {
        function r(a) {
            var l;
            return o[a] = !0,
                ft.each(t[a] || [], function (t, a) {
                    var c = a(e, n, i);
                    return "string" != typeof c || s || o[c] ? s ? !(l = c) : void 0 : (e.dataTypes.unshift(c),
                        r(c), !1)
                }),
                l
        }
        var o = {},
            s = t === Me;
        return r(e.dataTypes[0]) || !o["*"] && r("*")
    }

    function Z(t, e) {
        var n, i, r = ft.ajaxSettings.flatOptions || {};
        for (n in e)
            void 0 !== e[n] && ((r[n] ? t : i || (i = {}))[n] = e[n]);
        return i && ft.extend(!0, t, i),
            t
    }

    function Q(t, e, n) {
        for (var i, r, o, s, a = t.contents, l = t.dataTypes;
            "*" === l[0];)
            l.shift(),
            void 0 === i && (i = t.mimeType || e.getResponseHeader("Content-Type"));
        if (i)
            for (r in a)
                if (a[r] && a[r].test(i)) {
                    l.unshift(r);
                    break
                }
        if (l[0] in n)
            o = l[0];
        else {
            for (r in n) {
                if (!l[0] || t.converters[r + " " + l[0]]) {
                    o = r;
                    break
                }
                s || (s = r)
            }
            o = o || s
        }
        if (o)
            return o !== l[0] && l.unshift(o),
                n[o]
    }

    function J(t, e, n, i) {
        var r, o, s, a, l, c = {},
            u = t.dataTypes.slice();
        if (u[1])
            for (s in t.converters)
                c[s.toLowerCase()] = t.converters[s];
        for (o = u.shift(); o;)
            if (t.responseFields[o] && (n[t.responseFields[o]] = e), !l && i && t.dataFilter && (e = t.dataFilter(e, t.dataType)),
                l = o,
                o = u.shift())
                if ("*" === o)
                    o = l;
                else if ("*" !== l && l !== o) {
            if (!(s = c[l + " " + o] || c["* " + o]))
                for (r in c)
                    if ((a = r.split(" "))[1] === o && (s = c[l + " " + a[0]] || c["* " + a[0]])) {
                        !0 === s ? s = c[r] : !0 !== c[r] && (o = a[0],
                            u.unshift(a[1]));
                        break
                    }
            if (!0 !== s)
                if (s && t.throws)
                    e = s(e);
                else
                    try {
                        e = s(e)
                    } catch (t) {
                        return {
                            state: "parsererror",
                            error: s ? t : "No conversion from " + l + " to " + o
                        }
                    }
        }
        return {
            state: "success",
            data: e
        }
    }
    var tt = [],
        et = t.document,
        nt = Object.getPrototypeOf,
        it = tt.slice,
        rt = tt.concat,
        ot = tt.push,
        st = tt.indexOf,
        at = {},
        lt = at.toString,
        ct = at.hasOwnProperty,
        ut = ct.toString,
        ht = ut.call(Object),
        dt = {},
        ft = function (t, e) {
            return new ft.fn.init(t, e)
        },
        pt = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
        gt = /^-ms-/,
        _t = /-([a-z])/g,
        yt = function (t, e) {
            return e.toUpperCase()
        };
    ft.fn = ft.prototype = {
            jquery: "3.2.1",
            constructor: ft,
            length: 0,
            toArray: function () {
                return it.call(this)
            },
            get: function (t) {
                return null == t ? it.call(this) : t < 0 ? this[t + this.length] : this[t]
            },
            pushStack: function (t) {
                var e = ft.merge(this.constructor(), t);
                return e.prevObject = this,
                    e
            },
            each: function (t) {
                return ft.each(this, t)
            },
            map: function (t) {
                return this.pushStack(ft.map(this, function (e, n) {
                    return t.call(e, n, e)
                }))
            },
            slice: function () {
                return this.pushStack(it.apply(this, arguments))
            },
            first: function () {
                return this.eq(0)
            },
            last: function () {
                return this.eq(-1)
            },
            eq: function (t) {
                var e = this.length,
                    n = +t + (t < 0 ? e : 0);
                return this.pushStack(n >= 0 && n < e ? [this[n]] : [])
            },
            end: function () {
                return this.prevObject || this.constructor()
            },
            push: ot,
            sort: tt.sort,
            splice: tt.splice
        },
        ft.extend = ft.fn.extend = function () {
            var t, e, n, i, r, o, s = arguments[0] || {},
                a = 1,
                l = arguments.length,
                c = !1;
            for ("boolean" == typeof s && (c = s,
                    s = arguments[a] || {},
                    a++),
                "object" == typeof s || ft.isFunction(s) || (s = {}),
                a === l && (s = this,
                    a--); a < l; a++)
                if (null != (t = arguments[a]))
                    for (e in t)
                        n = s[e],
                        s !== (i = t[e]) && (c && i && (ft.isPlainObject(i) || (r = Array.isArray(i))) ? (r ? (r = !1,
                                o = n && Array.isArray(n) ? n : []) : o = n && ft.isPlainObject(n) ? n : {},
                            s[e] = ft.extend(c, o, i)) : void 0 !== i && (s[e] = i));
            return s
        },
        ft.extend({
            expando: "jQuery" + ("3.2.1" + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function (t) {
                throw new Error(t)
            },
            noop: function () {},
            isFunction: function (t) {
                return "function" === ft.type(t)
            },
            isWindow: function (t) {
                return null != t && t === t.window
            },
            isNumeric: function (t) {
                var e = ft.type(t);
                return ("number" === e || "string" === e) && !isNaN(t - parseFloat(t))
            },
            isPlainObject: function (t) {
                var e, n;
                return !(!t || "[object Object]" !== lt.call(t)) && (!(e = nt(t)) || "function" == typeof (n = ct.call(e, "constructor") && e.constructor) && ut.call(n) === ht)
            },
            isEmptyObject: function (t) {
                var e;
                for (e in t)
                    return !1;
                return !0
            },
            type: function (t) {
                return null == t ? t + "" : "object" == typeof t || "function" == typeof t ? at[lt.call(t)] || "object" : typeof t
            },
            globalEval: function (t) {
                n(t)
            },
            camelCase: function (t) {
                return t.replace(gt, "ms-").replace(_t, yt)
            },
            each: function (t, e) {
                var n, r = 0;
                if (i(t))
                    for (n = t.length; r < n && !1 !== e.call(t[r], r, t[r]); r++)
                ;
                else
                    for (r in t)
                        if (!1 === e.call(t[r], r, t[r]))
                            break;
                return t
            },
            trim: function (t) {
                return null == t ? "" : (t + "").replace(pt, "")
            },
            makeArray: function (t, e) {
                var n = e || [];
                return null != t && (i(Object(t)) ? ft.merge(n, "string" == typeof t ? [t] : t) : ot.call(n, t)),
                    n
            },
            inArray: function (t, e, n) {
                return null == e ? -1 : st.call(e, t, n)
            },
            merge: function (t, e) {
                for (var n = +e.length, i = 0, r = t.length; i < n; i++)
                    t[r++] = e[i];
                return t.length = r,
                    t
            },
            grep: function (t, e, n) {
                for (var i = [], r = 0, o = t.length, s = !n; r < o; r++)
                    !e(t[r], r) !== s && i.push(t[r]);
                return i
            },
            map: function (t, e, n) {
                var r, o, s = 0,
                    a = [];
                if (i(t))
                    for (r = t.length; s < r; s++)
                        null != (o = e(t[s], s, n)) && a.push(o);
                else
                    for (s in t)
                        null != (o = e(t[s], s, n)) && a.push(o);
                return rt.apply([], a)
            },
            guid: 1,
            proxy: function (t, e) {
                var n, i, r;
                if ("string" == typeof e && (n = t[e],
                        e = t,
                        t = n),
                    ft.isFunction(t))
                    return i = it.call(arguments, 2),
                        r = function () {
                            return t.apply(e || this, i.concat(it.call(arguments)))
                        },
                        r.guid = t.guid = t.guid || ft.guid++,
                        r
            },
            now: Date.now,
            support: dt
        }),
        "function" == typeof Symbol && (ft.fn[Symbol.iterator] = tt[Symbol.iterator]),
        ft.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (t, e) {
            at["[object " + e + "]"] = e.toLowerCase()
        });
    var vt = function (t) {
        function e(t, e, n, i) {
            var r, o, s, a, l, u, d, f = e && e.ownerDocument,
                p = e ? e.nodeType : 9;
            if (n = n || [],
                "string" != typeof t || !t || 1 !== p && 9 !== p && 11 !== p)
                return n;
            if (!i && ((e ? e.ownerDocument || e : B) !== P && A(e),
                    e = e || P,
                    I)) {
                if (11 !== p && (l = gt.exec(t)))
                    if (r = l[1]) {
                        if (9 === p) {
                            if (!(s = e.getElementById(r)))
                                return n;
                            if (s.id === r)
                                return n.push(s),
                                    n
                        } else if (f && (s = f.getElementById(r)) && M(e, s) && s.id === r)
                            return n.push(s),
                                n
                    } else {
                        if (l[2])
                            return X.apply(n, e.getElementsByTagName(t)),
                                n;
                        if ((r = l[3]) && b.getElementsByClassName && e.getElementsByClassName)
                            return X.apply(n, e.getElementsByClassName(r)),
                                n
                    }
                if (b.qsa && !H[t + " "] && (!N || !N.test(t))) {
                    if (1 !== p)
                        f = e,
                        d = t;
                    else if ("object" !== e.nodeName.toLowerCase()) {
                        for ((a = e.getAttribute("id")) ? a = a.replace(mt, bt) : e.setAttribute("id", a = q),
                            o = (u = k(t)).length; o--;)
                            u[o] = "#" + a + " " + h(u[o]);
                        d = u.join(","),
                            f = _t.test(t) && c(e.parentNode) || e
                    }
                    if (d)
                        try {
                            return X.apply(n, f.querySelectorAll(d)),
                                n
                        } catch (t) {} finally {
                            a === q && e.removeAttribute("id")
                        }
                }
            }
            return O(t.replace(ot, "$1"), e, n, i)
        }

        function n() {
            function t(n, i) {
                return e.push(n + " ") > w.cacheLength && delete t[e.shift()],
                    t[n + " "] = i
            }
            var e = [];
            return t
        }

        function i(t) {
            return t[q] = !0,
                t
        }

        function r(t) {
            var e = P.createElement("fieldset");
            try {
                return !!t(e)
            } catch (t) {
                return !1
            } finally {
                e.parentNode && e.parentNode.removeChild(e),
                    e = null
            }
        }

        function o(t, e) {
            for (var n = t.split("|"), i = n.length; i--;)
                w.attrHandle[n[i]] = e
        }

        function s(t, e) {
            var n = e && t,
                i = n && 1 === t.nodeType && 1 === e.nodeType && t.sourceIndex - e.sourceIndex;
            if (i)
                return i;
            if (n)
                for (; n = n.nextSibling;)
                    if (n === e)
                        return -1;
            return t ? 1 : -1
        }

        function a(t) {
            return function (e) {
                return "form" in e ? e.parentNode && !1 === e.disabled ? "label" in e ? "label" in e.parentNode ? e.parentNode.disabled === t : e.disabled === t : e.isDisabled === t || e.isDisabled !== !t && xt(e) === t : e.disabled === t : "label" in e && e.disabled === t
            }
        }

        function l(t) {
            return i(function (e) {
                return e = +e,
                    i(function (n, i) {
                        for (var r, o = t([], n.length, e), s = o.length; s--;)
                            n[r = o[s]] && (n[r] = !(i[r] = n[r]))
                    })
            })
        }

        function c(t) {
            return t && void 0 !== t.getElementsByTagName && t
        }

        function u() {}

        function h(t) {
            for (var e = 0, n = t.length, i = ""; e < n; e++)
                i += t[e].value;
            return i
        }

        function d(t, e, n) {
            var i = e.dir,
                r = e.next,
                o = r || i,
                s = n && "parentNode" === o,
                a = U++;
            return e.first ? function (e, n, r) {
                    for (; e = e[i];)
                        if (1 === e.nodeType || s)
                            return t(e, n, r);
                    return !1
                } :
                function (e, n, l) {
                    var c, u, h, d = [$, a];
                    if (l) {
                        for (; e = e[i];)
                            if ((1 === e.nodeType || s) && t(e, n, l))
                                return !0
                    } else
                        for (; e = e[i];)
                            if (1 === e.nodeType || s)
                                if (h = e[q] || (e[q] = {}),
                                    u = h[e.uniqueID] || (h[e.uniqueID] = {}),
                                    r && r === e.nodeName.toLowerCase())
                                    e = e[i] || e;
                                else {
                                    if ((c = u[o]) && c[0] === $ && c[1] === a)
                                        return d[2] = c[2];
                                    if (u[o] = d,
                                        d[2] = t(e, n, l))
                                        return !0
                                }
                    return !1
                }
        }

        function f(t) {
            return t.length > 1 ? function (e, n, i) {
                    for (var r = t.length; r--;)
                        if (!t[r](e, n, i))
                            return !1;
                    return !0
                } :
                t[0]
        }

        function p(t, n, i) {
            for (var r = 0, o = n.length; r < o; r++)
                e(t, n[r], i);
            return i
        }

        function g(t, e, n, i, r) {
            for (var o, s = [], a = 0, l = t.length, c = null != e; a < l; a++)
                (o = t[a]) && (n && !n(o, i, r) || (s.push(o),
                    c && e.push(a)));
            return s
        }

        function _(t, e, n, r, o, s) {
            return r && !r[q] && (r = _(r)),
                o && !o[q] && (o = _(o, s)),
                i(function (i, s, a, l) {
                    var c, u, h, d = [],
                        f = [],
                        _ = s.length,
                        y = i || p(e || "*", a.nodeType ? [a] : a, []),
                        v = !t || !i && e ? y : g(y, d, t, a, l),
                        m = n ? o || (i ? t : _ || r) ? [] : s : v;
                    if (n && n(v, m, a, l),
                        r)
                        for (c = g(m, f),
                            r(c, [], a, l),
                            u = c.length; u--;)
                            (h = c[u]) && (m[f[u]] = !(v[f[u]] = h));
                    if (i) {
                        if (o || t) {
                            if (o) {
                                for (c = [],
                                    u = m.length; u--;)
                                    (h = m[u]) && c.push(v[u] = h);
                                o(null, m = [], c, l)
                            }
                            for (u = m.length; u--;)
                                (h = m[u]) && (c = o ? Q(i, h) : d[u]) > -1 && (i[c] = !(s[c] = h))
                        }
                    } else
                        m = g(m === s ? m.splice(_, m.length) : m),
                        o ? o(null, s, m, l) : X.apply(s, m)
                })
        }

        function y(t) {
            for (var e, n, i, r = t.length, o = w.relative[t[0].type], s = o || w.relative[" "], a = o ? 1 : 0, l = d(function (t) {
                    return t === e
                }, s, !0), c = d(function (t) {
                    return Q(e, t) > -1
                }, s, !0), u = [function (t, n, i) {
                    var r = !o && (i || n !== C) || ((e = n).nodeType ? l(t, n, i) : c(t, n, i));
                    return e = null,
                        r
                }]; a < r; a++)
                if (n = w.relative[t[a].type])
                    u = [d(f(u), n)];
                else {
                    if ((n = w.filter[t[a].type].apply(null, t[a].matches))[q]) {
                        for (i = ++a; i < r && !w.relative[t[i].type]; i++)
                        ;
                        return _(a > 1 && f(u), a > 1 && h(t.slice(0, a - 1).concat({
                            value: " " === t[a - 2].type ? "*" : ""
                        })).replace(ot, "$1"), n, a < i && y(t.slice(a, i)), i < r && y(t = t.slice(i)), i < r && h(t))
                    }
                    u.push(n)
                }
            return f(u)
        }

        function v(t, n) {
            var r = n.length > 0,
                o = t.length > 0,
                s = function (i, s, a, l, c) {
                    var u, h, d, f = 0,
                        p = "0",
                        _ = i && [],
                        y = [],
                        v = C,
                        m = i || o && w.find.TAG("*", c),
                        b = $ += null == v ? 1 : Math.random() || .1,
                        x = m.length;
                    for (c && (C = s === P || s || c); p !== x && null != (u = m[p]); p++) {
                        if (o && u) {
                            for (h = 0,
                                s || u.ownerDocument === P || (A(u),
                                    a = !I); d = t[h++];)
                                if (d(u, s || P, a)) {
                                    l.push(u);
                                    break
                                }
                            c && ($ = b)
                        }
                        r && ((u = !d && u) && f--,
                            i && _.push(u))
                    }
                    if (f += p,
                        r && p !== f) {
                        for (h = 0; d = n[h++];)
                            d(_, y, s, a);
                        if (i) {
                            if (f > 0)
                                for (; p--;)
                                    _[p] || y[p] || (y[p] = K.call(l));
                            y = g(y)
                        }
                        X.apply(l, y),
                            c && !i && y.length > 0 && f + n.length > 1 && e.uniqueSort(l)
                    }
                    return c && ($ = b,
                            C = v),
                        _
                };
            return r ? i(s) : s
        }
        var m, b, w, x, E, k, T, O, C, S, j, A, P, D, I, N, L, R, M, q = "sizzle" + 1 * new Date,
            B = t.document,
            $ = 0,
            U = 0,
            F = n(),
            V = n(),
            H = n(),
            W = function (t, e) {
                return t === e && (j = !0),
                    0
            },
            z = {}.hasOwnProperty,
            Y = [],
            K = Y.pop,
            G = Y.push,
            X = Y.push,
            Z = Y.slice,
            Q = function (t, e) {
                for (var n = 0, i = t.length; n < i; n++)
                    if (t[n] === e)
                        return n;
                return -1
            },
            J = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
            tt = "[\\x20\\t\\r\\n\\f]",
            et = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",
            nt = "\\[" + tt + "*(" + et + ")(?:" + tt + "*([*^$|!~]?=)" + tt + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + et + "))|)" + tt + "*\\]",
            it = ":(" + et + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + nt + ")*)|.*)\\)|)",
            rt = new RegExp(tt + "+", "g"),
            ot = new RegExp("^" + tt + "+|((?:^|[^\\\\])(?:\\\\.)*)" + tt + "+$", "g"),
            st = new RegExp("^" + tt + "*," + tt + "*"),
            at = new RegExp("^" + tt + "*([>+~]|" + tt + ")" + tt + "*"),
            lt = new RegExp("=" + tt + "*([^\\]'\"]*?)" + tt + "*\\]", "g"),
            ct = new RegExp(it),
            ut = new RegExp("^" + et + "$"),
            ht = {
                ID: new RegExp("^#(" + et + ")"),
                CLASS: new RegExp("^\\.(" + et + ")"),
                TAG: new RegExp("^(" + et + "|[*])"),
                ATTR: new RegExp("^" + nt),
                PSEUDO: new RegExp("^" + it),
                CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + tt + "*(even|odd|(([+-]|)(\\d*)n|)" + tt + "*(?:([+-]|)" + tt + "*(\\d+)|))" + tt + "*\\)|)", "i"),
                bool: new RegExp("^(?:" + J + ")$", "i"),
                needsContext: new RegExp("^" + tt + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + tt + "*((?:-\\d)?\\d*)" + tt + "*\\)|)(?=[^-]|$)", "i")
            },
            dt = /^(?:input|select|textarea|button)$/i,
            ft = /^h\d$/i,
            pt = /^[^{]+\{\s*\[native \w/,
            gt = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
            _t = /[+~]/,
            yt = new RegExp("\\\\([\\da-f]{1,6}" + tt + "?|(" + tt + ")|.)", "ig"),
            vt = function (t, e, n) {
                var i = "0x" + e - 65536;
                return i !== i || n ? e : i < 0 ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320)
            },
            mt = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
            bt = function (t, e) {
                return e ? "\0" === t ? "�" : t.slice(0, -1) + "\\" + t.charCodeAt(t.length - 1).toString(16) + " " : "\\" + t
            },
            wt = function () {
                A()
            },
            xt = d(function (t) {
                return !0 === t.disabled && ("form" in t || "label" in t)
            }, {
                dir: "parentNode",
                next: "legend"
            });
        try {
            X.apply(Y = Z.call(B.childNodes), B.childNodes),
                Y[B.childNodes.length].nodeType
        } catch (t) {
            X = {
                apply: Y.length ? function (t, e) {
                    G.apply(t, Z.call(e))
                } : function (t, e) {
                    for (var n = t.length, i = 0; t[n++] = e[i++];)
                    ;
                    t.length = n - 1
                }
            }
        }
        b = e.support = {},
            E = e.isXML = function (t) {
                var e = t && (t.ownerDocument || t).documentElement;
                return !!e && "HTML" !== e.nodeName
            },
            A = e.setDocument = function (t) {
                var e, n, i = t ? t.ownerDocument || t : B;
                return i !== P && 9 === i.nodeType && i.documentElement ? (P = i,
                    D = P.documentElement,
                    I = !E(P),
                    B !== P && (n = P.defaultView) && n.top !== n && (n.addEventListener ? n.addEventListener("unload", wt, !1) : n.attachEvent && n.attachEvent("onunload", wt)),
                    b.attributes = r(function (t) {
                        return t.className = "i", !t.getAttribute("className")
                    }),
                    b.getElementsByTagName = r(function (t) {
                        return t.appendChild(P.createComment("")), !t.getElementsByTagName("*").length
                    }),
                    b.getElementsByClassName = pt.test(P.getElementsByClassName),
                    b.getById = r(function (t) {
                        return D.appendChild(t).id = q, !P.getElementsByName || !P.getElementsByName(q).length
                    }),
                    b.getById ? (w.filter.ID = function (t) {
                            var e = t.replace(yt, vt);
                            return function (t) {
                                return t.getAttribute("id") === e
                            }
                        },
                        w.find.ID = function (t, e) {
                            if (void 0 !== e.getElementById && I) {
                                var n = e.getElementById(t);
                                return n ? [n] : []
                            }
                        }
                    ) : (w.filter.ID = function (t) {
                            var e = t.replace(yt, vt);
                            return function (t) {
                                var n = void 0 !== t.getAttributeNode && t.getAttributeNode("id");
                                return n && n.value === e
                            }
                        },
                        w.find.ID = function (t, e) {
                            if (void 0 !== e.getElementById && I) {
                                var n, i, r, o = e.getElementById(t);
                                if (o) {
                                    if ((n = o.getAttributeNode("id")) && n.value === t)
                                        return [o];
                                    for (r = e.getElementsByName(t),
                                        i = 0; o = r[i++];)
                                        if ((n = o.getAttributeNode("id")) && n.value === t)
                                            return [o]
                                }
                                return []
                            }
                        }
                    ),
                    w.find.TAG = b.getElementsByTagName ? function (t, e) {
                        return void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t) : b.qsa ? e.querySelectorAll(t) : void 0
                    } :
                    function (t, e) {
                        var n, i = [],
                            r = 0,
                            o = e.getElementsByTagName(t);
                        if ("*" === t) {
                            for (; n = o[r++];)
                                1 === n.nodeType && i.push(n);
                            return i
                        }
                        return o
                    },
                    w.find.CLASS = b.getElementsByClassName && function (t, e) {
                        if (void 0 !== e.getElementsByClassName && I)
                            return e.getElementsByClassName(t)
                    },
                    L = [],
                    N = [],
                    (b.qsa = pt.test(P.querySelectorAll)) && (r(function (t) {
                            D.appendChild(t).innerHTML = "<a id='" + q + "'></a><select id='" + q + "-\r\\' msallowcapture=''><option selected=''></option></select>",
                                t.querySelectorAll("[msallowcapture^='']").length && N.push("[*^$]=" + tt + "*(?:''|\"\")"),
                                t.querySelectorAll("[selected]").length || N.push("\\[" + tt + "*(?:value|" + J + ")"),
                                t.querySelectorAll("[id~=" + q + "-]").length || N.push("~="),
                                t.querySelectorAll(":checked").length || N.push(":checked"),
                                t.querySelectorAll("a#" + q + "+*").length || N.push(".#.+[+~]")
                        }),
                        r(function (t) {
                            t.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                            var e = P.createElement("input");
                            e.setAttribute("type", "hidden"),
                                t.appendChild(e).setAttribute("name", "D"),
                                t.querySelectorAll("[name=d]").length && N.push("name" + tt + "*[*^$|!~]?="),
                                2 !== t.querySelectorAll(":enabled").length && N.push(":enabled", ":disabled"),
                                D.appendChild(t).disabled = !0,
                                2 !== t.querySelectorAll(":disabled").length && N.push(":enabled", ":disabled"),
                                t.querySelectorAll("*,:x"),
                                N.push(",.*:")
                        })),
                    (b.matchesSelector = pt.test(R = D.matches || D.webkitMatchesSelector || D.mozMatchesSelector || D.oMatchesSelector || D.msMatchesSelector)) && r(function (t) {
                        b.disconnectedMatch = R.call(t, "*"),
                            R.call(t, "[s!='']:x"),
                            L.push("!=", it)
                    }),
                    N = N.length && new RegExp(N.join("|")),
                    L = L.length && new RegExp(L.join("|")),
                    e = pt.test(D.compareDocumentPosition),
                    M = e || pt.test(D.contains) ? function (t, e) {
                        var n = 9 === t.nodeType ? t.documentElement : t,
                            i = e && e.parentNode;
                        return t === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : t.compareDocumentPosition && 16 & t.compareDocumentPosition(i)))
                    } :
                    function (t, e) {
                        if (e)
                            for (; e = e.parentNode;)
                                if (e === t)
                                    return !0;
                        return !1
                    },
                    W = e ? function (t, e) {
                        if (t === e)
                            return j = !0,
                                0;
                        var n = !t.compareDocumentPosition - !e.compareDocumentPosition;
                        return n || (1 & (n = (t.ownerDocument || t) === (e.ownerDocument || e) ? t.compareDocumentPosition(e) : 1) || !b.sortDetached && e.compareDocumentPosition(t) === n ? t === P || t.ownerDocument === B && M(B, t) ? -1 : e === P || e.ownerDocument === B && M(B, e) ? 1 : S ? Q(S, t) - Q(S, e) : 0 : 4 & n ? -1 : 1)
                    } :
                    function (t, e) {
                        if (t === e)
                            return j = !0,
                                0;
                        var n, i = 0,
                            r = t.parentNode,
                            o = e.parentNode,
                            a = [t],
                            l = [e];
                        if (!r || !o)
                            return t === P ? -1 : e === P ? 1 : r ? -1 : o ? 1 : S ? Q(S, t) - Q(S, e) : 0;
                        if (r === o)
                            return s(t, e);
                        for (n = t; n = n.parentNode;)
                            a.unshift(n);
                        for (n = e; n = n.parentNode;)
                            l.unshift(n);
                        for (; a[i] === l[i];)
                            i++;
                        return i ? s(a[i], l[i]) : a[i] === B ? -1 : l[i] === B ? 1 : 0
                    },
                    P) : P
            },
            e.matches = function (t, n) {
                return e(t, null, null, n)
            },
            e.matchesSelector = function (t, n) {
                if ((t.ownerDocument || t) !== P && A(t),
                    n = n.replace(lt, "='$1']"),
                    b.matchesSelector && I && !H[n + " "] && (!L || !L.test(n)) && (!N || !N.test(n)))
                    try {
                        var i = R.call(t, n);
                        if (i || b.disconnectedMatch || t.document && 11 !== t.document.nodeType)
                            return i
                    } catch (t) {}
                return e(n, P, null, [t]).length > 0
            },
            e.contains = function (t, e) {
                return (t.ownerDocument || t) !== P && A(t),
                    M(t, e)
            },
            e.attr = function (t, e) {
                (t.ownerDocument || t) !== P && A(t);
                var n = w.attrHandle[e.toLowerCase()],
                    i = n && z.call(w.attrHandle, e.toLowerCase()) ? n(t, e, !I) : void 0;
                return void 0 !== i ? i : b.attributes || !I ? t.getAttribute(e) : (i = t.getAttributeNode(e)) && i.specified ? i.value : null
            },
            e.escape = function (t) {
                return (t + "").replace(mt, bt)
            },
            e.error = function (t) {
                throw new Error("Syntax error, unrecognized expression: " + t)
            },
            e.uniqueSort = function (t) {
                var e, n = [],
                    i = 0,
                    r = 0;
                if (j = !b.detectDuplicates,
                    S = !b.sortStable && t.slice(0),
                    t.sort(W),
                    j) {
                    for (; e = t[r++];)
                        e === t[r] && (i = n.push(r));
                    for (; i--;)
                        t.splice(n[i], 1)
                }
                return S = null,
                    t
            },
            x = e.getText = function (t) {
                var e, n = "",
                    i = 0,
                    r = t.nodeType;
                if (r) {
                    if (1 === r || 9 === r || 11 === r) {
                        if ("string" == typeof t.textContent)
                            return t.textContent;
                        for (t = t.firstChild; t; t = t.nextSibling)
                            n += x(t)
                    } else if (3 === r || 4 === r)
                        return t.nodeValue
                } else
                    for (; e = t[i++];)
                        n += x(e);
                return n
            },
            (w = e.selectors = {
                cacheLength: 50,
                createPseudo: i,
                match: ht,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function (t) {
                        return t[1] = t[1].replace(yt, vt),
                            t[3] = (t[3] || t[4] || t[5] || "").replace(yt, vt),
                            "~=" === t[2] && (t[3] = " " + t[3] + " "),
                            t.slice(0, 4)
                    },
                    CHILD: function (t) {
                        return t[1] = t[1].toLowerCase(),
                            "nth" === t[1].slice(0, 3) ? (t[3] || e.error(t[0]),
                                t[4] = +(t[4] ? t[5] + (t[6] || 1) : 2 * ("even" === t[3] || "odd" === t[3])),
                                t[5] = +(t[7] + t[8] || "odd" === t[3])) : t[3] && e.error(t[0]),
                            t
                    },
                    PSEUDO: function (t) {
                        var e, n = !t[6] && t[2];
                        return ht.CHILD.test(t[0]) ? null : (t[3] ? t[2] = t[4] || t[5] || "" : n && ct.test(n) && (e = k(n, !0)) && (e = n.indexOf(")", n.length - e) - n.length) && (t[0] = t[0].slice(0, e),
                                t[2] = n.slice(0, e)),
                            t.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function (t) {
                        var e = t.replace(yt, vt).toLowerCase();
                        return "*" === t ? function () {
                                return !0
                            } :
                            function (t) {
                                return t.nodeName && t.nodeName.toLowerCase() === e
                            }
                    },
                    CLASS: function (t) {
                        var e = F[t + " "];
                        return e || (e = new RegExp("(^|" + tt + ")" + t + "(" + tt + "|$)")) && F(t, function (t) {
                            return e.test("string" == typeof t.className && t.className || void 0 !== t.getAttribute && t.getAttribute("class") || "")
                        })
                    },
                    ATTR: function (t, n, i) {
                        return function (r) {
                            var o = e.attr(r, t);
                            return null == o ? "!=" === n : !n || (o += "",
                                "=" === n ? o === i : "!=" === n ? o !== i : "^=" === n ? i && 0 === o.indexOf(i) : "*=" === n ? i && o.indexOf(i) > -1 : "$=" === n ? i && o.slice(-i.length) === i : "~=" === n ? (" " + o.replace(rt, " ") + " ").indexOf(i) > -1 : "|=" === n && (o === i || o.slice(0, i.length + 1) === i + "-"))
                        }
                    },
                    CHILD: function (t, e, n, i, r) {
                        var o = "nth" !== t.slice(0, 3),
                            s = "last" !== t.slice(-4),
                            a = "of-type" === e;
                        return 1 === i && 0 === r ? function (t) {
                                return !!t.parentNode
                            } :
                            function (e, n, l) {
                                var c, u, h, d, f, p, g = o !== s ? "nextSibling" : "previousSibling",
                                    _ = e.parentNode,
                                    y = a && e.nodeName.toLowerCase(),
                                    v = !l && !a,
                                    m = !1;
                                if (_) {
                                    if (o) {
                                        for (; g;) {
                                            for (d = e; d = d[g];)
                                                if (a ? d.nodeName.toLowerCase() === y : 1 === d.nodeType)
                                                    return !1;
                                            p = g = "only" === t && !p && "nextSibling"
                                        }
                                        return !0
                                    }
                                    if (p = [s ? _.firstChild : _.lastChild],
                                        s && v) {
                                        for (m = (f = (c = (u = (h = (d = _)[q] || (d[q] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[t] || [])[0] === $ && c[1]) && c[2],
                                            d = f && _.childNodes[f]; d = ++f && d && d[g] || (m = f = 0) || p.pop();)
                                            if (1 === d.nodeType && ++m && d === e) {
                                                u[t] = [$, f, m];
                                                break
                                            }
                                    } else if (v && (m = f = (c = (u = (h = (d = e)[q] || (d[q] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[t] || [])[0] === $ && c[1]), !1 === m)
                                        for (;
                                            (d = ++f && d && d[g] || (m = f = 0) || p.pop()) && ((a ? d.nodeName.toLowerCase() !== y : 1 !== d.nodeType) || !++m || (v && ((u = (h = d[q] || (d[q] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[t] = [$, m]),
                                                d !== e));)
                                    ;
                                    return (m -= r) === i || m % i == 0 && m / i >= 0
                                }
                            }
                    },
                    PSEUDO: function (t, n) {
                        var r, o = w.pseudos[t] || w.setFilters[t.toLowerCase()] || e.error("unsupported pseudo: " + t);
                        return o[q] ? o(n) : o.length > 1 ? (r = [t, t, "", n],
                            w.setFilters.hasOwnProperty(t.toLowerCase()) ? i(function (t, e) {
                                for (var i, r = o(t, n), s = r.length; s--;)
                                    t[i = Q(t, r[s])] = !(e[i] = r[s])
                            }) : function (t) {
                                return o(t, 0, r)
                            }
                        ) : o
                    }
                },
                pseudos: {
                    not: i(function (t) {
                        var e = [],
                            n = [],
                            r = T(t.replace(ot, "$1"));
                        return r[q] ? i(function (t, e, n, i) {
                            for (var o, s = r(t, null, i, []), a = t.length; a--;)
                                (o = s[a]) && (t[a] = !(e[a] = o))
                        }) : function (t, i, o) {
                            return e[0] = t,
                                r(e, null, o, n),
                                e[0] = null, !n.pop()
                        }
                    }),
                    has: i(function (t) {
                        return function (n) {
                            return e(t, n).length > 0
                        }
                    }),
                    contains: i(function (t) {
                        return t = t.replace(yt, vt),
                            function (e) {
                                return (e.textContent || e.innerText || x(e)).indexOf(t) > -1
                            }
                    }),
                    lang: i(function (t) {
                        return ut.test(t || "") || e.error("unsupported lang: " + t),
                            t = t.replace(yt, vt).toLowerCase(),
                            function (e) {
                                var n;
                                do {
                                    if (n = I ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang"))
                                        return (n = n.toLowerCase()) === t || 0 === n.indexOf(t + "-")
                                } while ((e = e.parentNode) && 1 === e.nodeType);
                                return !1
                            }
                    }),
                    target: function (e) {
                        var n = t.location && t.location.hash;
                        return n && n.slice(1) === e.id
                    },
                    root: function (t) {
                        return t === D
                    },
                    focus: function (t) {
                        return t === P.activeElement && (!P.hasFocus || P.hasFocus()) && !!(t.type || t.href || ~t.tabIndex)
                    },
                    enabled: a(!1),
                    disabled: a(!0),
                    checked: function (t) {
                        var e = t.nodeName.toLowerCase();
                        return "input" === e && !!t.checked || "option" === e && !!t.selected
                    },
                    selected: function (t) {
                        return t.parentNode && t.parentNode.selectedIndex, !0 === t.selected
                    },
                    empty: function (t) {
                        for (t = t.firstChild; t; t = t.nextSibling)
                            if (t.nodeType < 6)
                                return !1;
                        return !0
                    },
                    parent: function (t) {
                        return !w.pseudos.empty(t)
                    },
                    header: function (t) {
                        return ft.test(t.nodeName)
                    },
                    input: function (t) {
                        return dt.test(t.nodeName)
                    },
                    button: function (t) {
                        var e = t.nodeName.toLowerCase();
                        return "input" === e && "button" === t.type || "button" === e
                    },
                    text: function (t) {
                        var e;
                        return "input" === t.nodeName.toLowerCase() && "text" === t.type && (null == (e = t.getAttribute("type")) || "text" === e.toLowerCase())
                    },
                    first: l(function () {
                        return [0]
                    }),
                    last: l(function (t, e) {
                        return [e - 1]
                    }),
                    eq: l(function (t, e, n) {
                        return [n < 0 ? n + e : n]
                    }),
                    even: l(function (t, e) {
                        for (var n = 0; n < e; n += 2)
                            t.push(n);
                        return t
                    }),
                    odd: l(function (t, e) {
                        for (var n = 1; n < e; n += 2)
                            t.push(n);
                        return t
                    }),
                    lt: l(function (t, e, n) {
                        for (var i = n < 0 ? n + e : n; --i >= 0;)
                            t.push(i);
                        return t
                    }),
                    gt: l(function (t, e, n) {
                        for (var i = n < 0 ? n + e : n; ++i < e;)
                            t.push(i);
                        return t
                    })
                }
            }).pseudos.nth = w.pseudos.eq;
        for (m in {
                radio: !0,
                checkbox: !0,
                file: !0,
                password: !0,
                image: !0
            })
            w.pseudos[m] = function (t) {
                return function (e) {
                    return "input" === e.nodeName.toLowerCase() && e.type === t
                }
            }(m);
        for (m in {
                submit: !0,
                reset: !0
            })
            w.pseudos[m] = function (t) {
                return function (e) {
                    var n = e.nodeName.toLowerCase();
                    return ("input" === n || "button" === n) && e.type === t
                }
            }(m);
        return u.prototype = w.filters = w.pseudos,
            w.setFilters = new u,
            k = e.tokenize = function (t, n) {
                var i, r, o, s, a, l, c, u = V[t + " "];
                if (u)
                    return n ? 0 : u.slice(0);
                for (a = t,
                    l = [],
                    c = w.preFilter; a;) {
                    i && !(r = st.exec(a)) || (r && (a = a.slice(r[0].length) || a),
                            l.push(o = [])),
                        i = !1,
                        (r = at.exec(a)) && (i = r.shift(),
                            o.push({
                                value: i,
                                type: r[0].replace(ot, " ")
                            }),
                            a = a.slice(i.length));
                    for (s in w.filter)
                        !(r = ht[s].exec(a)) || c[s] && !(r = c[s](r)) || (i = r.shift(),
                            o.push({
                                value: i,
                                type: s,
                                matches: r
                            }),
                            a = a.slice(i.length));
                    if (!i)
                        break
                }
                return n ? a.length : a ? e.error(t) : V(t, l).slice(0)
            },
            T = e.compile = function (t, e) {
                var n, i = [],
                    r = [],
                    o = H[t + " "];
                if (!o) {
                    for (e || (e = k(t)),
                        n = e.length; n--;)
                        (o = y(e[n]))[q] ? i.push(o) : r.push(o);
                    (o = H(t, v(r, i))).selector = t
                }
                return o
            },
            O = e.select = function (t, e, n, i) {
                var r, o, s, a, l, u = "function" == typeof t && t,
                    d = !i && k(t = u.selector || t);
                if (n = n || [],
                    1 === d.length) {
                    if ((o = d[0] = d[0].slice(0)).length > 2 && "ID" === (s = o[0]).type && 9 === e.nodeType && I && w.relative[o[1].type]) {
                        if (!(e = (w.find.ID(s.matches[0].replace(yt, vt), e) || [])[0]))
                            return n;
                        u && (e = e.parentNode),
                            t = t.slice(o.shift().value.length)
                    }
                    for (r = ht.needsContext.test(t) ? 0 : o.length; r-- && (s = o[r], !w.relative[a = s.type]);)
                        if ((l = w.find[a]) && (i = l(s.matches[0].replace(yt, vt), _t.test(o[0].type) && c(e.parentNode) || e))) {
                            if (o.splice(r, 1), !(t = i.length && h(o)))
                                return X.apply(n, i),
                                    n;
                            break
                        }
                }
                return (u || T(t, d))(i, e, !I, n, !e || _t.test(t) && c(e.parentNode) || e),
                    n
            },
            b.sortStable = q.split("").sort(W).join("") === q,
            b.detectDuplicates = !!j,
            A(),
            b.sortDetached = r(function (t) {
                return 1 & t.compareDocumentPosition(P.createElement("fieldset"))
            }),
            r(function (t) {
                return t.innerHTML = "<a href='#'></a>",
                    "#" === t.firstChild.getAttribute("href")
            }) || o("type|href|height|width", function (t, e, n) {
                if (!n)
                    return t.getAttribute(e, "type" === e.toLowerCase() ? 1 : 2)
            }),
            b.attributes && r(function (t) {
                return t.innerHTML = "<input/>",
                    t.firstChild.setAttribute("value", ""),
                    "" === t.firstChild.getAttribute("value")
            }) || o("value", function (t, e, n) {
                if (!n && "input" === t.nodeName.toLowerCase())
                    return t.defaultValue
            }),
            r(function (t) {
                return null == t.getAttribute("disabled")
            }) || o(J, function (t, e, n) {
                var i;
                if (!n)
                    return !0 === t[e] ? e.toLowerCase() : (i = t.getAttributeNode(e)) && i.specified ? i.value : null
            }),
            e
    }(t);
    ft.find = vt,
        ft.expr = vt.selectors,
        ft.expr[":"] = ft.expr.pseudos,
        ft.uniqueSort = ft.unique = vt.uniqueSort,
        ft.text = vt.getText,
        ft.isXMLDoc = vt.isXML,
        ft.contains = vt.contains,
        ft.escapeSelector = vt.escape;
    var mt = function (t, e, n) {
            for (var i = [], r = void 0 !== n;
                (t = t[e]) && 9 !== t.nodeType;)
                if (1 === t.nodeType) {
                    if (r && ft(t).is(n))
                        break;
                    i.push(t)
                }
            return i
        },
        bt = function (t, e) {
            for (var n = []; t; t = t.nextSibling)
                1 === t.nodeType && t !== e && n.push(t);
            return n
        },
        wt = ft.expr.match.needsContext,
        xt = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
        Et = /^.[^:#\[\.,]*$/;
    ft.filter = function (t, e, n) {
            var i = e[0];
            return n && (t = ":not(" + t + ")"),
                1 === e.length && 1 === i.nodeType ? ft.find.matchesSelector(i, t) ? [i] : [] : ft.find.matches(t, ft.grep(e, function (t) {
                    return 1 === t.nodeType
                }))
        },
        ft.fn.extend({
            find: function (t) {
                var e, n, i = this.length,
                    r = this;
                if ("string" != typeof t)
                    return this.pushStack(ft(t).filter(function () {
                        for (e = 0; e < i; e++)
                            if (ft.contains(r[e], this))
                                return !0
                    }));
                for (n = this.pushStack([]),
                    e = 0; e < i; e++)
                    ft.find(t, r[e], n);
                return i > 1 ? ft.uniqueSort(n) : n
            },
            filter: function (t) {
                return this.pushStack(o(this, t || [], !1))
            },
            not: function (t) {
                return this.pushStack(o(this, t || [], !0))
            },
            is: function (t) {
                return !!o(this, "string" == typeof t && wt.test(t) ? ft(t) : t || [], !1).length
            }
        });
    var kt, Tt = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
    (ft.fn.init = function (t, e, n) {
        var i, r;
        if (!t)
            return this;
        if (n = n || kt,
            "string" == typeof t) {
            if (!(i = "<" === t[0] && ">" === t[t.length - 1] && t.length >= 3 ? [null, t, null] : Tt.exec(t)) || !i[1] && e)
                return !e || e.jquery ? (e || n).find(t) : this.constructor(e).find(t);
            if (i[1]) {
                if (e = e instanceof ft ? e[0] : e,
                    ft.merge(this, ft.parseHTML(i[1], e && e.nodeType ? e.ownerDocument || e : et, !0)),
                    xt.test(i[1]) && ft.isPlainObject(e))
                    for (i in e)
                        ft.isFunction(this[i]) ? this[i](e[i]) : this.attr(i, e[i]);
                return this
            }
            return (r = et.getElementById(i[2])) && (this[0] = r,
                    this.length = 1),
                this
        }
        return t.nodeType ? (this[0] = t,
            this.length = 1,
            this) : ft.isFunction(t) ? void 0 !== n.ready ? n.ready(t) : t(ft) : ft.makeArray(t, this)
    }).prototype = ft.fn,
        kt = ft(et);
    var Ot = /^(?:parents|prev(?:Until|All))/,
        Ct = {
            children: !0,
            contents: !0,
            next: !0,
            prev: !0
        };
    ft.fn.extend({
            has: function (t) {
                var e = ft(t, this),
                    n = e.length;
                return this.filter(function () {
                    for (var t = 0; t < n; t++)
                        if (ft.contains(this, e[t]))
                            return !0
                })
            },
            closest: function (t, e) {
                var n, i = 0,
                    r = this.length,
                    o = [],
                    s = "string" != typeof t && ft(t);
                if (!wt.test(t))
                    for (; i < r; i++)
                        for (n = this[i]; n && n !== e; n = n.parentNode)
                            if (n.nodeType < 11 && (s ? s.index(n) > -1 : 1 === n.nodeType && ft.find.matchesSelector(n, t))) {
                                o.push(n);
                                break
                            }
                return this.pushStack(o.length > 1 ? ft.uniqueSort(o) : o)
            },
            index: function (t) {
                return t ? "string" == typeof t ? st.call(ft(t), this[0]) : st.call(this, t.jquery ? t[0] : t) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function (t, e) {
                return this.pushStack(ft.uniqueSort(ft.merge(this.get(), ft(t, e))))
            },
            addBack: function (t) {
                return this.add(null == t ? this.prevObject : this.prevObject.filter(t))
            }
        }),
        ft.each({
            parent: function (t) {
                var e = t.parentNode;
                return e && 11 !== e.nodeType ? e : null
            },
            parents: function (t) {
                return mt(t, "parentNode")
            },
            parentsUntil: function (t, e, n) {
                return mt(t, "parentNode", n)
            },
            next: function (t) {
                return s(t, "nextSibling")
            },
            prev: function (t) {
                return s(t, "previousSibling")
            },
            nextAll: function (t) {
                return mt(t, "nextSibling")
            },
            prevAll: function (t) {
                return mt(t, "previousSibling")
            },
            nextUntil: function (t, e, n) {
                return mt(t, "nextSibling", n)
            },
            prevUntil: function (t, e, n) {
                return mt(t, "previousSibling", n)
            },
            siblings: function (t) {
                return bt((t.parentNode || {}).firstChild, t)
            },
            children: function (t) {
                return bt(t.firstChild)
            },
            contents: function (t) {
                return r(t, "iframe") ? t.contentDocument : (r(t, "template") && (t = t.content || t),
                    ft.merge([], t.childNodes))
            }
        }, function (t, e) {
            ft.fn[t] = function (n, i) {
                var r = ft.map(this, e, n);
                return "Until" !== t.slice(-5) && (i = n),
                    i && "string" == typeof i && (r = ft.filter(i, r)),
                    this.length > 1 && (Ct[t] || ft.uniqueSort(r),
                        Ot.test(t) && r.reverse()),
                    this.pushStack(r)
            }
        });
    var St = /[^\x20\t\r\n\f]+/g;
    ft.Callbacks = function (t) {
            t = "string" == typeof t ? a(t) : ft.extend({}, t);
            var e, n, i, r, o = [],
                s = [],
                l = -1,
                c = function () {
                    for (r = r || t.once,
                        i = e = !0; s.length; l = -1)
                        for (n = s.shift(); ++l < o.length;)
                            !1 === o[l].apply(n[0], n[1]) && t.stopOnFalse && (l = o.length,
                                n = !1);
                    t.memory || (n = !1),
                        e = !1,
                        r && (o = n ? [] : "")
                },
                u = {
                    add: function () {
                        return o && (n && !e && (l = o.length - 1,
                                    s.push(n)),
                                function e(n) {
                                    ft.each(n, function (n, i) {
                                        ft.isFunction(i) ? t.unique && u.has(i) || o.push(i) : i && i.length && "string" !== ft.type(i) && e(i)
                                    })
                                }(arguments),
                                n && !e && c()),
                            this
                    },
                    remove: function () {
                        return ft.each(arguments, function (t, e) {
                                for (var n;
                                    (n = ft.inArray(e, o, n)) > -1;)
                                    o.splice(n, 1),
                                    n <= l && l--
                            }),
                            this
                    },
                    has: function (t) {
                        return t ? ft.inArray(t, o) > -1 : o.length > 0
                    },
                    empty: function () {
                        return o && (o = []),
                            this
                    },
                    disable: function () {
                        return r = s = [],
                            o = n = "",
                            this
                    },
                    disabled: function () {
                        return !o
                    },
                    lock: function () {
                        return r = s = [],
                            n || e || (o = n = ""),
                            this
                    },
                    locked: function () {
                        return !!r
                    },
                    fireWith: function (t, n) {
                        return r || (n = [t, (n = n || []).slice ? n.slice() : n],
                                s.push(n),
                                e || c()),
                            this
                    },
                    fire: function () {
                        return u.fireWith(this, arguments),
                            this
                    },
                    fired: function () {
                        return !!i
                    }
                };
            return u
        },
        ft.extend({
            Deferred: function (e) {
                var n = [
                        ["notify", "progress", ft.Callbacks("memory"), ft.Callbacks("memory"), 2],
                        ["resolve", "done", ft.Callbacks("once memory"), ft.Callbacks("once memory"), 0, "resolved"],
                        ["reject", "fail", ft.Callbacks("once memory"), ft.Callbacks("once memory"), 1, "rejected"]
                    ],
                    i = "pending",
                    r = {
                        state: function () {
                            return i
                        },
                        always: function () {
                            return o.done(arguments).fail(arguments),
                                this
                        },
                        catch: function (t) {
                            return r.then(null, t)
                        },
                        pipe: function () {
                            var t = arguments;
                            return ft.Deferred(function (e) {
                                ft.each(n, function (n, i) {
                                        var r = ft.isFunction(t[i[4]]) && t[i[4]];
                                        o[i[1]](function () {
                                            var t = r && r.apply(this, arguments);
                                            t && ft.isFunction(t.promise) ? t.promise().progress(e.notify).done(e.resolve).fail(e.reject) : e[i[0] + "With"](this, r ? [t] : arguments)
                                        })
                                    }),
                                    t = null
                            }).promise()
                        },
                        then: function (e, i, r) {
                            function o(e, n, i, r) {
                                return function () {
                                    var a = this,
                                        u = arguments,
                                        h = function () {
                                            var t, h;
                                            if (!(e < s)) {
                                                if ((t = i.apply(a, u)) === n.promise())
                                                    throw new TypeError("Thenable self-resolution");
                                                h = t && ("object" == typeof t || "function" == typeof t) && t.then,
                                                    ft.isFunction(h) ? r ? h.call(t, o(s, n, l, r), o(s, n, c, r)) : (s++,
                                                        h.call(t, o(s, n, l, r), o(s, n, c, r), o(s, n, l, n.notifyWith))) : (i !== l && (a = void 0,
                                                            u = [t]),
                                                        (r || n.resolveWith)(a, u))
                                            }
                                        },
                                        d = r ? h : function () {
                                            try {
                                                h()
                                            } catch (t) {
                                                ft.Deferred.exceptionHook && ft.Deferred.exceptionHook(t, d.stackTrace),
                                                    e + 1 >= s && (i !== c && (a = void 0,
                                                            u = [t]),
                                                        n.rejectWith(a, u))
                                            }
                                        };
                                    e ? d() : (ft.Deferred.getStackHook && (d.stackTrace = ft.Deferred.getStackHook()),
                                        t.setTimeout(d))
                                }
                            }
                            var s = 0;
                            return ft.Deferred(function (t) {
                                n[0][3].add(o(0, t, ft.isFunction(r) ? r : l, t.notifyWith)),
                                    n[1][3].add(o(0, t, ft.isFunction(e) ? e : l)),
                                    n[2][3].add(o(0, t, ft.isFunction(i) ? i : c))
                            }).promise()
                        },
                        promise: function (t) {
                            return null != t ? ft.extend(t, r) : r
                        }
                    },
                    o = {};
                return ft.each(n, function (t, e) {
                        var s = e[2],
                            a = e[5];
                        r[e[1]] = s.add,
                            a && s.add(function () {
                                i = a
                            }, n[3 - t][2].disable, n[0][2].lock),
                            s.add(e[3].fire),
                            o[e[0]] = function () {
                                return o[e[0] + "With"](this === o ? void 0 : this, arguments),
                                    this
                            },
                            o[e[0] + "With"] = s.fireWith
                    }),
                    r.promise(o),
                    e && e.call(o, o),
                    o
            },
            when: function (t) {
                var e = arguments.length,
                    n = e,
                    i = Array(n),
                    r = it.call(arguments),
                    o = ft.Deferred(),
                    s = function (t) {
                        return function (n) {
                            i[t] = this,
                                r[t] = arguments.length > 1 ? it.call(arguments) : n,
                                --e || o.resolveWith(i, r)
                        }
                    };
                if (e <= 1 && (u(t, o.done(s(n)).resolve, o.reject, !e),
                        "pending" === o.state() || ft.isFunction(r[n] && r[n].then)))
                    return o.then();
                for (; n--;)
                    u(r[n], s(n), o.reject);
                return o.promise()
            }
        });
    var jt = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
    ft.Deferred.exceptionHook = function (e, n) {
            t.console && t.console.warn && e && jt.test(e.name) && t.console.warn("jQuery.Deferred exception: " + e.message, e.stack, n)
        },
        ft.readyException = function (e) {
            t.setTimeout(function () {
                throw e
            })
        };
    var At = ft.Deferred();
    ft.fn.ready = function (t) {
            return At.then(t).catch(function (t) {
                    ft.readyException(t)
                }),
                this
        },
        ft.extend({
            isReady: !1,
            readyWait: 1,
            ready: function (t) {
                (!0 === t ? --ft.readyWait : ft.isReady) || (ft.isReady = !0, !0 !== t && --ft.readyWait > 0 || At.resolveWith(et, [ft]))
            }
        }),
        ft.ready.then = At.then,
        "complete" === et.readyState || "loading" !== et.readyState && !et.documentElement.doScroll ? t.setTimeout(ft.ready) : (et.addEventListener("DOMContentLoaded", h),
            t.addEventListener("load", h));
    var Pt = function (t, e, n, i, r, o, s) {
            var a = 0,
                l = t.length,
                c = null == n;
            if ("object" === ft.type(n)) {
                r = !0;
                for (a in n)
                    Pt(t, e, a, n[a], !0, o, s)
            } else if (void 0 !== i && (r = !0,
                    ft.isFunction(i) || (s = !0),
                    c && (s ? (e.call(t, i),
                        e = null) : (c = e,
                        e = function (t, e, n) {
                            return c.call(ft(t), n)
                        }
                    )),
                    e))
                for (; a < l; a++)
                    e(t[a], n, s ? i : i.call(t[a], a, e(t[a], n)));
            return r ? t : c ? e.call(t) : l ? e(t[0], n) : o
        },
        Dt = function (t) {
            return 1 === t.nodeType || 9 === t.nodeType || !+t.nodeType
        };
    d.uid = 1,
        d.prototype = {
            cache: function (t) {
                var e = t[this.expando];
                return e || (e = {},
                        Dt(t) && (t.nodeType ? t[this.expando] = e : Object.defineProperty(t, this.expando, {
                            value: e,
                            configurable: !0
                        }))),
                    e
            },
            set: function (t, e, n) {
                var i, r = this.cache(t);
                if ("string" == typeof e)
                    r[ft.camelCase(e)] = n;
                else
                    for (i in e)
                        r[ft.camelCase(i)] = e[i];
                return r
            },
            get: function (t, e) {
                return void 0 === e ? this.cache(t) : t[this.expando] && t[this.expando][ft.camelCase(e)]
            },
            access: function (t, e, n) {
                return void 0 === e || e && "string" == typeof e && void 0 === n ? this.get(t, e) : (this.set(t, e, n),
                    void 0 !== n ? n : e)
            },
            remove: function (t, e) {
                var n, i = t[this.expando];
                if (void 0 !== i) {
                    if (void 0 !== e) {
                        n = (e = Array.isArray(e) ? e.map(ft.camelCase) : (e = ft.camelCase(e)) in i ? [e] : e.match(St) || []).length;
                        for (; n--;)
                            delete i[e[n]]
                    }
                    (void 0 === e || ft.isEmptyObject(i)) && (t.nodeType ? t[this.expando] = void 0 : delete t[this.expando])
                }
            },
            hasData: function (t) {
                var e = t[this.expando];
                return void 0 !== e && !ft.isEmptyObject(e)
            }
        };
    var It = new d,
        Nt = new d,
        Lt = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
        Rt = /[A-Z]/g;
    ft.extend({
            hasData: function (t) {
                return Nt.hasData(t) || It.hasData(t)
            },
            data: function (t, e, n) {
                return Nt.access(t, e, n)
            },
            removeData: function (t, e) {
                Nt.remove(t, e)
            },
            _data: function (t, e, n) {
                return It.access(t, e, n)
            },
            _removeData: function (t, e) {
                It.remove(t, e)
            }
        }),
        ft.fn.extend({
            data: function (t, e) {
                var n, i, r, o = this[0],
                    s = o && o.attributes;
                if (void 0 === t) {
                    if (this.length && (r = Nt.get(o),
                            1 === o.nodeType && !It.get(o, "hasDataAttrs"))) {
                        for (n = s.length; n--;)
                            s[n] && 0 === (i = s[n].name).indexOf("data-") && (i = ft.camelCase(i.slice(5)),
                                p(o, i, r[i]));
                        It.set(o, "hasDataAttrs", !0)
                    }
                    return r
                }
                return "object" == typeof t ? this.each(function () {
                    Nt.set(this, t)
                }) : Pt(this, function (e) {
                    var n;
                    if (o && void 0 === e) {
                        if (void 0 !== (n = Nt.get(o, t)))
                            return n;
                        if (void 0 !== (n = p(o, t)))
                            return n
                    } else
                        this.each(function () {
                            Nt.set(this, t, e)
                        })
                }, null, e, arguments.length > 1, null, !0)
            },
            removeData: function (t) {
                return this.each(function () {
                    Nt.remove(this, t)
                })
            }
        }),
        ft.extend({
            queue: function (t, e, n) {
                var i;
                if (t)
                    return e = (e || "fx") + "queue",
                        i = It.get(t, e),
                        n && (!i || Array.isArray(n) ? i = It.access(t, e, ft.makeArray(n)) : i.push(n)),
                        i || []
            },
            dequeue: function (t, e) {
                e = e || "fx";
                var n = ft.queue(t, e),
                    i = n.length,
                    r = n.shift(),
                    o = ft._queueHooks(t, e);
                "inprogress" === r && (r = n.shift(),
                        i--),
                    r && ("fx" === e && n.unshift("inprogress"),
                        delete o.stop,
                        r.call(t, function () {
                            ft.dequeue(t, e)
                        }, o)), !i && o && o.empty.fire()
            },
            _queueHooks: function (t, e) {
                var n = e + "queueHooks";
                return It.get(t, n) || It.access(t, n, {
                    empty: ft.Callbacks("once memory").add(function () {
                        It.remove(t, [e + "queue", n])
                    })
                })
            }
        }),
        ft.fn.extend({
            queue: function (t, e) {
                var n = 2;
                return "string" != typeof t && (e = t,
                        t = "fx",
                        n--),
                    arguments.length < n ? ft.queue(this[0], t) : void 0 === e ? this : this.each(function () {
                        var n = ft.queue(this, t, e);
                        ft._queueHooks(this, t),
                            "fx" === t && "inprogress" !== n[0] && ft.dequeue(this, t)
                    })
            },
            dequeue: function (t) {
                return this.each(function () {
                    ft.dequeue(this, t)
                })
            },
            clearQueue: function (t) {
                return this.queue(t || "fx", [])
            },
            promise: function (t, e) {
                var n, i = 1,
                    r = ft.Deferred(),
                    o = this,
                    s = this.length,
                    a = function () {
                        --i || r.resolveWith(o, [o])
                    };
                for ("string" != typeof t && (e = t,
                        t = void 0),
                    t = t || "fx"; s--;)
                    (n = It.get(o[s], t + "queueHooks")) && n.empty && (i++,
                        n.empty.add(a));
                return a(),
                    r.promise(e)
            }
        });
    var Mt = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
        qt = new RegExp("^(?:([+-])=|)(" + Mt + ")([a-z%]*)$", "i"),
        Bt = ["Top", "Right", "Bottom", "Left"],
        $t = function (t, e) {
            return "none" === (t = e || t).style.display || "" === t.style.display && ft.contains(t.ownerDocument, t) && "none" === ft.css(t, "display")
        },
        Ut = function (t, e, n, i) {
            var r, o, s = {};
            for (o in e)
                s[o] = t.style[o],
                t.style[o] = e[o];
            r = n.apply(t, i || []);
            for (o in e)
                t.style[o] = s[o];
            return r
        },
        Ft = {};
    ft.fn.extend({
        show: function () {
            return y(this, !0)
        },
        hide: function () {
            return y(this)
        },
        toggle: function (t) {
            return "boolean" == typeof t ? t ? this.show() : this.hide() : this.each(function () {
                $t(this) ? ft(this).show() : ft(this).hide()
            })
        }
    });
    var Vt = /^(?:checkbox|radio)$/i,
        Ht = /<([a-z][^\/\0>\x20\t\r\n\f]+)/i,
        Wt = /^$|\/(?:java|ecma)script/i,
        zt = {
            option: [1, "<select multiple='multiple'>", "</select>"],
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };
    zt.optgroup = zt.option,
        zt.tbody = zt.tfoot = zt.colgroup = zt.caption = zt.thead,
        zt.th = zt.td;
    var Yt = /<|&#?\w+;/;
    ! function () {
        var t = et.createDocumentFragment().appendChild(et.createElement("div")),
            e = et.createElement("input");
        e.setAttribute("type", "radio"),
            e.setAttribute("checked", "checked"),
            e.setAttribute("name", "t"),
            t.appendChild(e),
            dt.checkClone = t.cloneNode(!0).cloneNode(!0).lastChild.checked,
            t.innerHTML = "<textarea>x</textarea>",
            dt.noCloneChecked = !!t.cloneNode(!0).lastChild.defaultValue
    }();
    var Kt = et.documentElement,
        Gt = /^key/,
        Xt = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
        Zt = /^([^.]*)(?:\.(.+)|)/;
    ft.event = {
            global: {},
            add: function (t, e, n, i, r) {
                var o, s, a, l, c, u, h, d, f, p, g, _ = It.get(t);
                if (_)
                    for (n.handler && (n = (o = n).handler,
                            r = o.selector),
                        r && ft.find.matchesSelector(Kt, r),
                        n.guid || (n.guid = ft.guid++),
                        (l = _.events) || (l = _.events = {}),
                        (s = _.handle) || (s = _.handle = function (e) {
                            return void 0 !== ft && ft.event.triggered !== e.type ? ft.event.dispatch.apply(t, arguments) : void 0
                        }),
                        c = (e = (e || "").match(St) || [""]).length; c--;)
                        f = g = (a = Zt.exec(e[c]) || [])[1],
                        p = (a[2] || "").split(".").sort(),
                        f && (h = ft.event.special[f] || {},
                            f = (r ? h.delegateType : h.bindType) || f,
                            h = ft.event.special[f] || {},
                            u = ft.extend({
                                type: f,
                                origType: g,
                                data: i,
                                handler: n,
                                guid: n.guid,
                                selector: r,
                                needsContext: r && ft.expr.match.needsContext.test(r),
                                namespace: p.join(".")
                            }, o),
                            (d = l[f]) || ((d = l[f] = []).delegateCount = 0,
                                h.setup && !1 !== h.setup.call(t, i, p, s) || t.addEventListener && t.addEventListener(f, s)),
                            h.add && (h.add.call(t, u),
                                u.handler.guid || (u.handler.guid = n.guid)),
                            r ? d.splice(d.delegateCount++, 0, u) : d.push(u),
                            ft.event.global[f] = !0)
            },
            remove: function (t, e, n, i, r) {
                var o, s, a, l, c, u, h, d, f, p, g, _ = It.hasData(t) && It.get(t);
                if (_ && (l = _.events)) {
                    for (c = (e = (e || "").match(St) || [""]).length; c--;)
                        if (a = Zt.exec(e[c]) || [],
                            f = g = a[1],
                            p = (a[2] || "").split(".").sort(),
                            f) {
                            for (h = ft.event.special[f] || {},
                                d = l[f = (i ? h.delegateType : h.bindType) || f] || [],
                                a = a[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"),
                                s = o = d.length; o--;)
                                u = d[o], !r && g !== u.origType || n && n.guid !== u.guid || a && !a.test(u.namespace) || i && i !== u.selector && ("**" !== i || !u.selector) || (d.splice(o, 1),
                                    u.selector && d.delegateCount--,
                                    h.remove && h.remove.call(t, u));
                            s && !d.length && (h.teardown && !1 !== h.teardown.call(t, p, _.handle) || ft.removeEvent(t, f, _.handle),
                                delete l[f])
                        } else
                            for (f in l)
                                ft.event.remove(t, f + e[c], n, i, !0);
                    ft.isEmptyObject(l) && It.remove(t, "handle events")
                }
            },
            dispatch: function (t) {
                var e, n, i, r, o, s, a = ft.event.fix(t),
                    l = new Array(arguments.length),
                    c = (It.get(this, "events") || {})[a.type] || [],
                    u = ft.event.special[a.type] || {};
                for (l[0] = a,
                    e = 1; e < arguments.length; e++)
                    l[e] = arguments[e];
                if (a.delegateTarget = this, !u.preDispatch || !1 !== u.preDispatch.call(this, a)) {
                    for (s = ft.event.handlers.call(this, a, c),
                        e = 0;
                        (r = s[e++]) && !a.isPropagationStopped();)
                        for (a.currentTarget = r.elem,
                            n = 0;
                            (o = r.handlers[n++]) && !a.isImmediatePropagationStopped();)
                            a.rnamespace && !a.rnamespace.test(o.namespace) || (a.handleObj = o,
                                a.data = o.data,
                                void 0 !== (i = ((ft.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, l)) && !1 === (a.result = i) && (a.preventDefault(),
                                    a.stopPropagation()));
                    return u.postDispatch && u.postDispatch.call(this, a),
                        a.result
                }
            },
            handlers: function (t, e) {
                var n, i, r, o, s, a = [],
                    l = e.delegateCount,
                    c = t.target;
                if (l && c.nodeType && !("click" === t.type && t.button >= 1))
                    for (; c !== this; c = c.parentNode || this)
                        if (1 === c.nodeType && ("click" !== t.type || !0 !== c.disabled)) {
                            for (o = [],
                                s = {},
                                n = 0; n < l; n++)
                                void 0 === s[r = (i = e[n]).selector + " "] && (s[r] = i.needsContext ? ft(r, this).index(c) > -1 : ft.find(r, this, null, [c]).length),
                                s[r] && o.push(i);
                            o.length && a.push({
                                elem: c,
                                handlers: o
                            })
                        }
                return c = this,
                    l < e.length && a.push({
                        elem: c,
                        handlers: e.slice(l)
                    }),
                    a
            },
            addProp: function (t, e) {
                Object.defineProperty(ft.Event.prototype, t, {
                    enumerable: !0,
                    configurable: !0,
                    get: ft.isFunction(e) ? function () {
                        if (this.originalEvent)
                            return e(this.originalEvent)
                    } : function () {
                        if (this.originalEvent)
                            return this.originalEvent[t]
                    },
                    set: function (e) {
                        Object.defineProperty(this, t, {
                            enumerable: !0,
                            configurable: !0,
                            writable: !0,
                            value: e
                        })
                    }
                })
            },
            fix: function (t) {
                return t[ft.expando] ? t : new ft.Event(t)
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function () {
                        if (this !== E() && this.focus)
                            return this.focus(), !1
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function () {
                        if (this === E() && this.blur)
                            return this.blur(), !1
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function () {
                        if ("checkbox" === this.type && this.click && r(this, "input"))
                            return this.click(), !1
                    },
                    _default: function (t) {
                        return r(t.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function (t) {
                        void 0 !== t.result && t.originalEvent && (t.originalEvent.returnValue = t.result)
                    }
                }
            }
        },
        ft.removeEvent = function (t, e, n) {
            t.removeEventListener && t.removeEventListener(e, n)
        },
        ft.Event = function (t, e) {
            if (!(this instanceof ft.Event))
                return new ft.Event(t, e);
            t && t.type ? (this.originalEvent = t,
                    this.type = t.type,
                    this.isDefaultPrevented = t.defaultPrevented || void 0 === t.defaultPrevented && !1 === t.returnValue ? w : x,
                    this.target = t.target && 3 === t.target.nodeType ? t.target.parentNode : t.target,
                    this.currentTarget = t.currentTarget,
                    this.relatedTarget = t.relatedTarget) : this.type = t,
                e && ft.extend(this, e),
                this.timeStamp = t && t.timeStamp || ft.now(),
                this[ft.expando] = !0
        },
        ft.Event.prototype = {
            constructor: ft.Event,
            isDefaultPrevented: x,
            isPropagationStopped: x,
            isImmediatePropagationStopped: x,
            isSimulated: !1,
            preventDefault: function () {
                var t = this.originalEvent;
                this.isDefaultPrevented = w,
                    t && !this.isSimulated && t.preventDefault()
            },
            stopPropagation: function () {
                var t = this.originalEvent;
                this.isPropagationStopped = w,
                    t && !this.isSimulated && t.stopPropagation()
            },
            stopImmediatePropagation: function () {
                var t = this.originalEvent;
                this.isImmediatePropagationStopped = w,
                    t && !this.isSimulated && t.stopImmediatePropagation(),
                    this.stopPropagation()
            }
        },
        ft.each({
            altKey: !0,
            bubbles: !0,
            cancelable: !0,
            changedTouches: !0,
            ctrlKey: !0,
            detail: !0,
            eventPhase: !0,
            metaKey: !0,
            pageX: !0,
            pageY: !0,
            shiftKey: !0,
            view: !0,
            char: !0,
            charCode: !0,
            key: !0,
            keyCode: !0,
            button: !0,
            buttons: !0,
            clientX: !0,
            clientY: !0,
            offsetX: !0,
            offsetY: !0,
            pointerId: !0,
            pointerType: !0,
            screenX: !0,
            screenY: !0,
            targetTouches: !0,
            toElement: !0,
            touches: !0,
            which: function (t) {
                var e = t.button;
                return null == t.which && Gt.test(t.type) ? null != t.charCode ? t.charCode : t.keyCode : !t.which && void 0 !== e && Xt.test(t.type) ? 1 & e ? 1 : 2 & e ? 3 : 4 & e ? 2 : 0 : t.which
            }
        }, ft.event.addProp),
        ft.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function (t, e) {
            ft.event.special[t] = {
                delegateType: e,
                bindType: e,
                handle: function (t) {
                    var n, i = this,
                        r = t.relatedTarget,
                        o = t.handleObj;
                    return r && (r === i || ft.contains(i, r)) || (t.type = o.origType,
                            n = o.handler.apply(this, arguments),
                            t.type = e),
                        n
                }
            }
        }),
        ft.fn.extend({
            on: function (t, e, n, i) {
                return k(this, t, e, n, i)
            },
            one: function (t, e, n, i) {
                return k(this, t, e, n, i, 1)
            },
            off: function (t, e, n) {
                var i, r;
                if (t && t.preventDefault && t.handleObj)
                    return i = t.handleObj,
                        ft(t.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler),
                        this;
                if ("object" == typeof t) {
                    for (r in t)
                        this.off(r, e, t[r]);
                    return this
                }
                return !1 !== e && "function" != typeof e || (n = e,
                        e = void 0), !1 === n && (n = x),
                    this.each(function () {
                        ft.event.remove(this, t, n, e)
                    })
            }
        });
    var Qt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,
        Jt = /<script|<style|<link/i,
        te = /checked\s*(?:[^=]|=\s*.checked.)/i,
        ee = /^true\/(.*)/,
        ne = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
    ft.extend({
            htmlPrefilter: function (t) {
                return t.replace(Qt, "<$1></$2>")
            },
            clone: function (t, e, n) {
                var i, r, o, s, a = t.cloneNode(!0),
                    l = ft.contains(t.ownerDocument, t);
                if (!(dt.noCloneChecked || 1 !== t.nodeType && 11 !== t.nodeType || ft.isXMLDoc(t)))
                    for (s = v(a),
                        i = 0,
                        r = (o = v(t)).length; i < r; i++)
                        j(o[i], s[i]);
                if (e)
                    if (n)
                        for (o = o || v(t),
                            s = s || v(a),
                            i = 0,
                            r = o.length; i < r; i++)
                            S(o[i], s[i]);
                    else
                        S(t, a);
                return (s = v(a, "script")).length > 0 && m(s, !l && v(t, "script")),
                    a
            },
            cleanData: function (t) {
                for (var e, n, i, r = ft.event.special, o = 0; void 0 !== (n = t[o]); o++)
                    if (Dt(n)) {
                        if (e = n[It.expando]) {
                            if (e.events)
                                for (i in e.events)
                                    r[i] ? ft.event.remove(n, i) : ft.removeEvent(n, i, e.handle);
                            n[It.expando] = void 0
                        }
                        n[Nt.expando] && (n[Nt.expando] = void 0)
                    }
            }
        }),
        ft.fn.extend({
            detach: function (t) {
                return P(this, t, !0)
            },
            remove: function (t) {
                return P(this, t)
            },
            text: function (t) {
                return Pt(this, function (t) {
                    return void 0 === t ? ft.text(this) : this.empty().each(function () {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = t)
                    })
                }, null, t, arguments.length)
            },
            append: function () {
                return A(this, arguments, function (t) {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || T(this, t).appendChild(t)
                })
            },
            prepend: function () {
                return A(this, arguments, function (t) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var e = T(this, t);
                        e.insertBefore(t, e.firstChild)
                    }
                })
            },
            before: function () {
                return A(this, arguments, function (t) {
                    this.parentNode && this.parentNode.insertBefore(t, this)
                })
            },
            after: function () {
                return A(this, arguments, function (t) {
                    this.parentNode && this.parentNode.insertBefore(t, this.nextSibling)
                })
            },
            empty: function () {
                for (var t, e = 0; null != (t = this[e]); e++)
                    1 === t.nodeType && (ft.cleanData(v(t, !1)),
                        t.textContent = "");
                return this
            },
            clone: function (t, e) {
                return t = null != t && t,
                    e = null == e ? t : e,
                    this.map(function () {
                        return ft.clone(this, t, e)
                    })
            },
            html: function (t) {
                return Pt(this, function (t) {
                    var e = this[0] || {},
                        n = 0,
                        i = this.length;
                    if (void 0 === t && 1 === e.nodeType)
                        return e.innerHTML;
                    if ("string" == typeof t && !Jt.test(t) && !zt[(Ht.exec(t) || ["", ""])[1].toLowerCase()]) {
                        t = ft.htmlPrefilter(t);
                        try {
                            for (; n < i; n++)
                                1 === (e = this[n] || {}).nodeType && (ft.cleanData(v(e, !1)),
                                    e.innerHTML = t);
                            e = 0
                        } catch (t) {}
                    }
                    e && this.empty().append(t)
                }, null, t, arguments.length)
            },
            replaceWith: function () {
                var t = [];
                return A(this, arguments, function (e) {
                    var n = this.parentNode;
                    ft.inArray(this, t) < 0 && (ft.cleanData(v(this)),
                        n && n.replaceChild(e, this))
                }, t)
            }
        }),
        ft.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function (t, e) {
            ft.fn[t] = function (t) {
                for (var n, i = [], r = ft(t), o = r.length - 1, s = 0; s <= o; s++)
                    n = s === o ? this : this.clone(!0),
                    ft(r[s])[e](n),
                    ot.apply(i, n.get());
                return this.pushStack(i)
            }
        });
    var ie = /^margin/,
        re = new RegExp("^(" + Mt + ")(?!px)[a-z%]+$", "i"),
        oe = function (e) {
            var n = e.ownerDocument.defaultView;
            return n && n.opener || (n = t),
                n.getComputedStyle(e)
        };
    ! function () {
        function e() {
            if (a) {
                a.style.cssText = "box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",
                    a.innerHTML = "",
                    Kt.appendChild(s);
                var e = t.getComputedStyle(a);
                n = "1%" !== e.top,
                    o = "2px" === e.marginLeft,
                    i = "4px" === e.width,
                    a.style.marginRight = "50%",
                    r = "4px" === e.marginRight,
                    Kt.removeChild(s),
                    a = null
            }
        }
        var n, i, r, o, s = et.createElement("div"),
            a = et.createElement("div");
        a.style && (a.style.backgroundClip = "content-box",
            a.cloneNode(!0).style.backgroundClip = "",
            dt.clearCloneStyle = "content-box" === a.style.backgroundClip,
            s.style.cssText = "border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
            s.appendChild(a),
            ft.extend(dt, {
                pixelPosition: function () {
                    return e(),
                        n
                },
                boxSizingReliable: function () {
                    return e(),
                        i
                },
                pixelMarginRight: function () {
                    return e(),
                        r
                },
                reliableMarginLeft: function () {
                    return e(),
                        o
                }
            }))
    }();
    var se = /^(none|table(?!-c[ea]).+)/,
        ae = /^--/,
        le = {
            position: "absolute",
            visibility: "hidden",
            display: "block"
        },
        ce = {
            letterSpacing: "0",
            fontWeight: "400"
        },
        ue = ["Webkit", "Moz", "ms"],
        he = et.createElement("div").style;
    ft.extend({
            cssHooks: {
                opacity: {
                    get: function (t, e) {
                        if (e) {
                            var n = D(t, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                float: "cssFloat"
            },
            style: function (t, e, n, i) {
                if (t && 3 !== t.nodeType && 8 !== t.nodeType && t.style) {
                    var r, o, s, a = ft.camelCase(e),
                        l = ae.test(e),
                        c = t.style;
                    if (l || (e = L(a)),
                        s = ft.cssHooks[e] || ft.cssHooks[a],
                        void 0 === n)
                        return s && "get" in s && void 0 !== (r = s.get(t, !1, i)) ? r : c[e];
                    "string" == (o = typeof n) && (r = qt.exec(n)) && r[1] && (n = g(t, e, r),
                            o = "number"),
                        null != n && n === n && ("number" === o && (n += r && r[3] || (ft.cssNumber[a] ? "" : "px")),
                            dt.clearCloneStyle || "" !== n || 0 !== e.indexOf("background") || (c[e] = "inherit"),
                            s && "set" in s && void 0 === (n = s.set(t, n, i)) || (l ? c.setProperty(e, n) : c[e] = n))
                }
            },
            css: function (t, e, n, i) {
                var r, o, s, a = ft.camelCase(e);
                return ae.test(e) || (e = L(a)),
                    (s = ft.cssHooks[e] || ft.cssHooks[a]) && "get" in s && (r = s.get(t, !0, n)),
                    void 0 === r && (r = D(t, e, i)),
                    "normal" === r && e in ce && (r = ce[e]),
                    "" === n || n ? (o = parseFloat(r), !0 === n || isFinite(o) ? o || 0 : r) : r
            }
        }),
        ft.each(["height", "width"], function (t, e) {
            ft.cssHooks[e] = {
                get: function (t, n, i) {
                    if (n)
                        return !se.test(ft.css(t, "display")) || t.getClientRects().length && t.getBoundingClientRect().width ? q(t, e, i) : Ut(t, le, function () {
                            return q(t, e, i)
                        })
                },
                set: function (t, n, i) {
                    var r, o = i && oe(t),
                        s = i && M(t, e, i, "border-box" === ft.css(t, "boxSizing", !1, o), o);
                    return s && (r = qt.exec(n)) && "px" !== (r[3] || "px") && (t.style[e] = n,
                            n = ft.css(t, e)),
                        R(0, n, s)
                }
            }
        }),
        ft.cssHooks.marginLeft = I(dt.reliableMarginLeft, function (t, e) {
            if (e)
                return (parseFloat(D(t, "marginLeft")) || t.getBoundingClientRect().left - Ut(t, {
                    marginLeft: 0
                }, function () {
                    return t.getBoundingClientRect().left
                })) + "px"
        }),
        ft.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function (t, e) {
            ft.cssHooks[t + e] = {
                    expand: function (n) {
                        for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [n]; i < 4; i++)
                            r[t + Bt[i] + e] = o[i] || o[i - 2] || o[0];
                        return r
                    }
                },
                ie.test(t) || (ft.cssHooks[t + e].set = R)
        }),
        ft.fn.extend({
            css: function (t, e) {
                return Pt(this, function (t, e, n) {
                    var i, r, o = {},
                        s = 0;
                    if (Array.isArray(e)) {
                        for (i = oe(t),
                            r = e.length; s < r; s++)
                            o[e[s]] = ft.css(t, e[s], !1, i);
                        return o
                    }
                    return void 0 !== n ? ft.style(t, e, n) : ft.css(t, e)
                }, t, e, arguments.length > 1)
            }
        }),
        ft.Tween = B,
        B.prototype = {
            constructor: B,
            init: function (t, e, n, i, r, o) {
                this.elem = t,
                    this.prop = n,
                    this.easing = r || ft.easing._default,
                    this.options = e,
                    this.start = this.now = this.cur(),
                    this.end = i,
                    this.unit = o || (ft.cssNumber[n] ? "" : "px")
            },
            cur: function () {
                var t = B.propHooks[this.prop];
                return t && t.get ? t.get(this) : B.propHooks._default.get(this)
            },
            run: function (t) {
                var e, n = B.propHooks[this.prop];
                return this.options.duration ? this.pos = e = ft.easing[this.easing](t, this.options.duration * t, 0, 1, this.options.duration) : this.pos = e = t,
                    this.now = (this.end - this.start) * e + this.start,
                    this.options.step && this.options.step.call(this.elem, this.now, this),
                    n && n.set ? n.set(this) : B.propHooks._default.set(this),
                    this
            }
        },
        B.prototype.init.prototype = B.prototype,
        B.propHooks = {
            _default: {
                get: function (t) {
                    var e;
                    return 1 !== t.elem.nodeType || null != t.elem[t.prop] && null == t.elem.style[t.prop] ? t.elem[t.prop] : (e = ft.css(t.elem, t.prop, "")) && "auto" !== e ? e : 0
                },
                set: function (t) {
                    ft.fx.step[t.prop] ? ft.fx.step[t.prop](t) : 1 !== t.elem.nodeType || null == t.elem.style[ft.cssProps[t.prop]] && !ft.cssHooks[t.prop] ? t.elem[t.prop] = t.now : ft.style(t.elem, t.prop, t.now + t.unit)
                }
            }
        },
        B.propHooks.scrollTop = B.propHooks.scrollLeft = {
            set: function (t) {
                t.elem.nodeType && t.elem.parentNode && (t.elem[t.prop] = t.now)
            }
        },
        ft.easing = {
            linear: function (t) {
                return t
            },
            swing: function (t) {
                return .5 - Math.cos(t * Math.PI) / 2
            },
            _default: "swing"
        },
        ft.fx = B.prototype.init,
        ft.fx.step = {};
    var de, fe, pe = /^(?:toggle|show|hide)$/,
        ge = /queueHooks$/;
    ft.Animation = ft.extend(W, {
            tweeners: {
                "*": [function (t, e) {
                    var n = this.createTween(t, e);
                    return g(n.elem, t, qt.exec(e), n),
                        n
                }]
            },
            tweener: function (t, e) {
                ft.isFunction(t) ? (e = t,
                    t = ["*"]) : t = t.match(St);
                for (var n, i = 0, r = t.length; i < r; i++)
                    n = t[i],
                    W.tweeners[n] = W.tweeners[n] || [],
                    W.tweeners[n].unshift(e)
            },
            prefilters: [function (t, e, n) {
                var i, r, o, s, a, l, c, u, h = "width" in e || "height" in e,
                    d = this,
                    f = {},
                    p = t.style,
                    g = t.nodeType && $t(t),
                    _ = It.get(t, "fxshow");
                n.queue || (null == (s = ft._queueHooks(t, "fx")).unqueued && (s.unqueued = 0,
                        a = s.empty.fire,
                        s.empty.fire = function () {
                            s.unqueued || a()
                        }
                    ),
                    s.unqueued++,
                    d.always(function () {
                        d.always(function () {
                            s.unqueued--,
                                ft.queue(t, "fx").length || s.empty.fire()
                        })
                    }));
                for (i in e)
                    if (r = e[i],
                        pe.test(r)) {
                        if (delete e[i],
                            o = o || "toggle" === r,
                            r === (g ? "hide" : "show")) {
                            if ("show" !== r || !_ || void 0 === _[i])
                                continue;
                            g = !0
                        }
                        f[i] = _ && _[i] || ft.style(t, i)
                    }
                if ((l = !ft.isEmptyObject(e)) || !ft.isEmptyObject(f)) {
                    h && 1 === t.nodeType && (n.overflow = [p.overflow, p.overflowX, p.overflowY],
                            null == (c = _ && _.display) && (c = It.get(t, "display")),
                            "none" === (u = ft.css(t, "display")) && (c ? u = c : (y([t], !0),
                                c = t.style.display || c,
                                u = ft.css(t, "display"),
                                y([t]))),
                            ("inline" === u || "inline-block" === u && null != c) && "none" === ft.css(t, "float") && (l || (d.done(function () {
                                        p.display = c
                                    }),
                                    null == c && (u = p.display,
                                        c = "none" === u ? "" : u)),
                                p.display = "inline-block")),
                        n.overflow && (p.overflow = "hidden",
                            d.always(function () {
                                p.overflow = n.overflow[0],
                                    p.overflowX = n.overflow[1],
                                    p.overflowY = n.overflow[2]
                            })),
                        l = !1;
                    for (i in f)
                        l || (_ ? "hidden" in _ && (g = _.hidden) : _ = It.access(t, "fxshow", {
                                display: c
                            }),
                            o && (_.hidden = !g),
                            g && y([t], !0),
                            d.done(function () {
                                g || y([t]),
                                    It.remove(t, "fxshow");
                                for (i in f)
                                    ft.style(t, i, f[i])
                            })),
                        l = V(g ? _[i] : 0, i, d),
                        i in _ || (_[i] = l.start,
                            g && (l.end = l.start,
                                l.start = 0))
                }
            }],
            prefilter: function (t, e) {
                e ? W.prefilters.unshift(t) : W.prefilters.push(t)
            }
        }),
        ft.speed = function (t, e, n) {
            var i = t && "object" == typeof t ? ft.extend({}, t) : {
                complete: n || !n && e || ft.isFunction(t) && t,
                duration: t,
                easing: n && e || e && !ft.isFunction(e) && e
            };
            return ft.fx.off ? i.duration = 0 : "number" != typeof i.duration && (i.duration in ft.fx.speeds ? i.duration = ft.fx.speeds[i.duration] : i.duration = ft.fx.speeds._default),
                null != i.queue && !0 !== i.queue || (i.queue = "fx"),
                i.old = i.complete,
                i.complete = function () {
                    ft.isFunction(i.old) && i.old.call(this),
                        i.queue && ft.dequeue(this, i.queue)
                },
                i
        },
        ft.fn.extend({
            fadeTo: function (t, e, n, i) {
                return this.filter($t).css("opacity", 0).show().end().animate({
                    opacity: e
                }, t, n, i)
            },
            animate: function (t, e, n, i) {
                var r = ft.isEmptyObject(t),
                    o = ft.speed(e, n, i),
                    s = function () {
                        var e = W(this, ft.extend({}, t), o);
                        (r || It.get(this, "finish")) && e.stop(!0)
                    };
                return s.finish = s,
                    r || !1 === o.queue ? this.each(s) : this.queue(o.queue, s)
            },
            stop: function (t, e, n) {
                var i = function (t) {
                    var e = t.stop;
                    delete t.stop,
                        e(n)
                };
                return "string" != typeof t && (n = e,
                        e = t,
                        t = void 0),
                    e && !1 !== t && this.queue(t || "fx", []),
                    this.each(function () {
                        var e = !0,
                            r = null != t && t + "queueHooks",
                            o = ft.timers,
                            s = It.get(this);
                        if (r)
                            s[r] && s[r].stop && i(s[r]);
                        else
                            for (r in s)
                                s[r] && s[r].stop && ge.test(r) && i(s[r]);
                        for (r = o.length; r--;)
                            o[r].elem !== this || null != t && o[r].queue !== t || (o[r].anim.stop(n),
                                e = !1,
                                o.splice(r, 1));
                        !e && n || ft.dequeue(this, t)
                    })
            },
            finish: function (t) {
                return !1 !== t && (t = t || "fx"),
                    this.each(function () {
                        var e, n = It.get(this),
                            i = n[t + "queue"],
                            r = n[t + "queueHooks"],
                            o = ft.timers,
                            s = i ? i.length : 0;
                        for (n.finish = !0,
                            ft.queue(this, t, []),
                            r && r.stop && r.stop.call(this, !0),
                            e = o.length; e--;)
                            o[e].elem === this && o[e].queue === t && (o[e].anim.stop(!0),
                                o.splice(e, 1));
                        for (e = 0; e < s; e++)
                            i[e] && i[e].finish && i[e].finish.call(this);
                        delete n.finish
                    })
            }
        }),
        ft.each(["toggle", "show", "hide"], function (t, e) {
            var n = ft.fn[e];
            ft.fn[e] = function (t, i, r) {
                return null == t || "boolean" == typeof t ? n.apply(this, arguments) : this.animate(F(e, !0), t, i, r)
            }
        }),
        ft.each({
            slideDown: F("show"),
            slideUp: F("hide"),
            slideToggle: F("toggle"),
            fadeIn: {
                opacity: "show"
            },
            fadeOut: {
                opacity: "hide"
            },
            fadeToggle: {
                opacity: "toggle"
            }
        }, function (t, e) {
            ft.fn[t] = function (t, n, i) {
                return this.animate(e, t, n, i)
            }
        }),
        ft.timers = [],
        ft.fx.tick = function () {
            var t, e = 0,
                n = ft.timers;
            for (de = ft.now(); e < n.length; e++)
                (t = n[e])() || n[e] !== t || n.splice(e--, 1);
            n.length || ft.fx.stop(),
                de = void 0
        },
        ft.fx.timer = function (t) {
            ft.timers.push(t),
                ft.fx.start()
        },
        ft.fx.interval = 13,
        ft.fx.start = function () {
            fe || (fe = !0,
                $())
        },
        ft.fx.stop = function () {
            fe = null
        },
        ft.fx.speeds = {
            slow: 600,
            fast: 200,
            _default: 400
        },
        ft.fn.delay = function (e, n) {
            return e = ft.fx ? ft.fx.speeds[e] || e : e,
                n = n || "fx",
                this.queue(n, function (n, i) {
                    var r = t.setTimeout(n, e);
                    i.stop = function () {
                        t.clearTimeout(r)
                    }
                })
        },
        function () {
            var t = et.createElement("input"),
                e = et.createElement("select").appendChild(et.createElement("option"));
            t.type = "checkbox",
                dt.checkOn = "" !== t.value,
                dt.optSelected = e.selected,
                (t = et.createElement("input")).value = "t",
                t.type = "radio",
                dt.radioValue = "t" === t.value
        }();
    var _e, ye = ft.expr.attrHandle;
    ft.fn.extend({
            attr: function (t, e) {
                return Pt(this, ft.attr, t, e, arguments.length > 1)
            },
            removeAttr: function (t) {
                return this.each(function () {
                    ft.removeAttr(this, t)
                })
            }
        }),
        ft.extend({
            attr: function (t, e, n) {
                var i, r, o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                    return void 0 === t.getAttribute ? ft.prop(t, e, n) : (1 === o && ft.isXMLDoc(t) || (r = ft.attrHooks[e.toLowerCase()] || (ft.expr.match.bool.test(e) ? _e : void 0)),
                        void 0 !== n ? null === n ? void ft.removeAttr(t, e) : r && "set" in r && void 0 !== (i = r.set(t, n, e)) ? i : (t.setAttribute(e, n + ""),
                            n) : r && "get" in r && null !== (i = r.get(t, e)) ? i : null == (i = ft.find.attr(t, e)) ? void 0 : i)
            },
            attrHooks: {
                type: {
                    set: function (t, e) {
                        if (!dt.radioValue && "radio" === e && r(t, "input")) {
                            var n = t.value;
                            return t.setAttribute("type", e),
                                n && (t.value = n),
                                e
                        }
                    }
                }
            },
            removeAttr: function (t, e) {
                var n, i = 0,
                    r = e && e.match(St);
                if (r && 1 === t.nodeType)
                    for (; n = r[i++];)
                        t.removeAttribute(n)
            }
        }),
        _e = {
            set: function (t, e, n) {
                return !1 === e ? ft.removeAttr(t, n) : t.setAttribute(n, n),
                    n
            }
        },
        ft.each(ft.expr.match.bool.source.match(/\w+/g), function (t, e) {
            var n = ye[e] || ft.find.attr;
            ye[e] = function (t, e, i) {
                var r, o, s = e.toLowerCase();
                return i || (o = ye[s],
                        ye[s] = r,
                        r = null != n(t, e, i) ? s : null,
                        ye[s] = o),
                    r
            }
        });
    var ve = /^(?:input|select|textarea|button)$/i,
        me = /^(?:a|area)$/i;
    ft.fn.extend({
            prop: function (t, e) {
                return Pt(this, ft.prop, t, e, arguments.length > 1)
            },
            removeProp: function (t) {
                return this.each(function () {
                    delete this[ft.propFix[t] || t]
                })
            }
        }),
        ft.extend({
            prop: function (t, e, n) {
                var i, r, o = t.nodeType;
                if (3 !== o && 8 !== o && 2 !== o)
                    return 1 === o && ft.isXMLDoc(t) || (e = ft.propFix[e] || e,
                            r = ft.propHooks[e]),
                        void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(t, n, e)) ? i : t[e] = n : r && "get" in r && null !== (i = r.get(t, e)) ? i : t[e]
            },
            propHooks: {
                tabIndex: {
                    get: function (t) {
                        var e = ft.find.attr(t, "tabindex");
                        return e ? parseInt(e, 10) : ve.test(t.nodeName) || me.test(t.nodeName) && t.href ? 0 : -1
                    }
                }
            },
            propFix: {
                for: "htmlFor",
                class: "className"
            }
        }),
        dt.optSelected || (ft.propHooks.selected = {
            get: function (t) {
                var e = t.parentNode;
                return e && e.parentNode && e.parentNode.selectedIndex,
                    null
            },
            set: function (t) {
                var e = t.parentNode;
                e && (e.selectedIndex,
                    e.parentNode && e.parentNode.selectedIndex)
            }
        }),
        ft.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () {
            ft.propFix[this.toLowerCase()] = this
        }),
        ft.fn.extend({
            addClass: function (t) {
                var e, n, i, r, o, s, a, l = 0;
                if (ft.isFunction(t))
                    return this.each(function (e) {
                        ft(this).addClass(t.call(this, e, Y(this)))
                    });
                if ("string" == typeof t && t)
                    for (e = t.match(St) || []; n = this[l++];)
                        if (r = Y(n),
                            i = 1 === n.nodeType && " " + z(r) + " ") {
                            for (s = 0; o = e[s++];)
                                i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                            r !== (a = z(i)) && n.setAttribute("class", a)
                        }
                return this
            },
            removeClass: function (t) {
                var e, n, i, r, o, s, a, l = 0;
                if (ft.isFunction(t))
                    return this.each(function (e) {
                        ft(this).removeClass(t.call(this, e, Y(this)))
                    });
                if (!arguments.length)
                    return this.attr("class", "");
                if ("string" == typeof t && t)
                    for (e = t.match(St) || []; n = this[l++];)
                        if (r = Y(n),
                            i = 1 === n.nodeType && " " + z(r) + " ") {
                            for (s = 0; o = e[s++];)
                                for (; i.indexOf(" " + o + " ") > -1;)
                                    i = i.replace(" " + o + " ", " ");
                            r !== (a = z(i)) && n.setAttribute("class", a)
                        }
                return this
            },
            toggleClass: function (t, e) {
                var n = typeof t;
                return "boolean" == typeof e && "string" === n ? e ? this.addClass(t) : this.removeClass(t) : ft.isFunction(t) ? this.each(function (n) {
                    ft(this).toggleClass(t.call(this, n, Y(this), e), e)
                }) : this.each(function () {
                    var e, i, r, o;
                    if ("string" === n)
                        for (i = 0,
                            r = ft(this),
                            o = t.match(St) || []; e = o[i++];)
                            r.hasClass(e) ? r.removeClass(e) : r.addClass(e);
                    else
                        void 0 !== t && "boolean" !== n || ((e = Y(this)) && It.set(this, "__className__", e),
                            this.setAttribute && this.setAttribute("class", e || !1 === t ? "" : It.get(this, "__className__") || ""))
                })
            },
            hasClass: function (t) {
                var e, n, i = 0;
                for (e = " " + t + " "; n = this[i++];)
                    if (1 === n.nodeType && (" " + z(Y(n)) + " ").indexOf(e) > -1)
                        return !0;
                return !1
            }
        });
    var be = /\r/g;
    ft.fn.extend({
            val: function (t) {
                var e, n, i, r = this[0]; {
                    if (arguments.length)
                        return i = ft.isFunction(t),
                            this.each(function (n) {
                                var r;
                                1 === this.nodeType && (null == (r = i ? t.call(this, n, ft(this).val()) : t) ? r = "" : "number" == typeof r ? r += "" : Array.isArray(r) && (r = ft.map(r, function (t) {
                                        return null == t ? "" : t + ""
                                    })),
                                    (e = ft.valHooks[this.type] || ft.valHooks[this.nodeName.toLowerCase()]) && "set" in e && void 0 !== e.set(this, r, "value") || (this.value = r))
                            });
                    if (r)
                        return (e = ft.valHooks[r.type] || ft.valHooks[r.nodeName.toLowerCase()]) && "get" in e && void 0 !== (n = e.get(r, "value")) ? n : "string" == typeof (n = r.value) ? n.replace(be, "") : null == n ? "" : n
                }
            }
        }),
        ft.extend({
            valHooks: {
                option: {
                    get: function (t) {
                        var e = ft.find.attr(t, "value");
                        return null != e ? e : z(ft.text(t))
                    }
                },
                select: {
                    get: function (t) {
                        var e, n, i, o = t.options,
                            s = t.selectedIndex,
                            a = "select-one" === t.type,
                            l = a ? null : [],
                            c = a ? s + 1 : o.length;
                        for (i = s < 0 ? c : a ? s : 0; i < c; i++)
                            if (((n = o[i]).selected || i === s) && !n.disabled && (!n.parentNode.disabled || !r(n.parentNode, "optgroup"))) {
                                if (e = ft(n).val(),
                                    a)
                                    return e;
                                l.push(e)
                            }
                        return l
                    },
                    set: function (t, e) {
                        for (var n, i, r = t.options, o = ft.makeArray(e), s = r.length; s--;)
                            ((i = r[s]).selected = ft.inArray(ft.valHooks.option.get(i), o) > -1) && (n = !0);
                        return n || (t.selectedIndex = -1),
                            o
                    }
                }
            }
        }),
        ft.each(["radio", "checkbox"], function () {
            ft.valHooks[this] = {
                    set: function (t, e) {
                        if (Array.isArray(e))
                            return t.checked = ft.inArray(ft(t).val(), e) > -1
                    }
                },
                dt.checkOn || (ft.valHooks[this].get = function (t) {
                    return null === t.getAttribute("value") ? "on" : t.value
                })
        });
    var we = /^(?:focusinfocus|focusoutblur)$/;
    ft.extend(ft.event, {
            trigger: function (e, n, i, r) {
                var o, s, a, l, c, u, h, d = [i || et],
                    f = ct.call(e, "type") ? e.type : e,
                    p = ct.call(e, "namespace") ? e.namespace.split(".") : [];
                if (s = a = i = i || et,
                    3 !== i.nodeType && 8 !== i.nodeType && !we.test(f + ft.event.triggered) && (f.indexOf(".") > -1 && (f = (p = f.split(".")).shift(),
                            p.sort()),
                        c = f.indexOf(":") < 0 && "on" + f,
                        e = e[ft.expando] ? e : new ft.Event(f, "object" == typeof e && e),
                        e.isTrigger = r ? 2 : 3,
                        e.namespace = p.join("."),
                        e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)") : null,
                        e.result = void 0,
                        e.target || (e.target = i),
                        n = null == n ? [e] : ft.makeArray(n, [e]),
                        h = ft.event.special[f] || {},
                        r || !h.trigger || !1 !== h.trigger.apply(i, n))) {
                    if (!r && !h.noBubble && !ft.isWindow(i)) {
                        for (l = h.delegateType || f,
                            we.test(l + f) || (s = s.parentNode); s; s = s.parentNode)
                            d.push(s),
                            a = s;
                        a === (i.ownerDocument || et) && d.push(a.defaultView || a.parentWindow || t)
                    }
                    for (o = 0;
                        (s = d[o++]) && !e.isPropagationStopped();)
                        e.type = o > 1 ? l : h.bindType || f,
                        (u = (It.get(s, "events") || {})[e.type] && It.get(s, "handle")) && u.apply(s, n),
                        (u = c && s[c]) && u.apply && Dt(s) && (e.result = u.apply(s, n), !1 === e.result && e.preventDefault());
                    return e.type = f,
                        r || e.isDefaultPrevented() || h._default && !1 !== h._default.apply(d.pop(), n) || !Dt(i) || c && ft.isFunction(i[f]) && !ft.isWindow(i) && ((a = i[c]) && (i[c] = null),
                            ft.event.triggered = f,
                            i[f](),
                            ft.event.triggered = void 0,
                            a && (i[c] = a)),
                        e.result
                }
            },
            simulate: function (t, e, n) {
                var i = ft.extend(new ft.Event, n, {
                    type: t,
                    isSimulated: !0
                });
                ft.event.trigger(i, null, e)
            }
        }),
        ft.fn.extend({
            trigger: function (t, e) {
                return this.each(function () {
                    ft.event.trigger(t, e, this)
                })
            },
            triggerHandler: function (t, e) {
                var n = this[0];
                if (n)
                    return ft.event.trigger(t, e, n, !0)
            }
        }),
        ft.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (t, e) {
            ft.fn[e] = function (t, n) {
                return arguments.length > 0 ? this.on(e, null, t, n) : this.trigger(e)
            }
        }),
        ft.fn.extend({
            hover: function (t, e) {
                return this.mouseenter(t).mouseleave(e || t)
            }
        }),
        dt.focusin = "onfocusin" in t,
        dt.focusin || ft.each({
            focus: "focusin",
            blur: "focusout"
        }, function (t, e) {
            var n = function (t) {
                ft.event.simulate(e, t.target, ft.event.fix(t))
            };
            ft.event.special[e] = {
                setup: function () {
                    var i = this.ownerDocument || this,
                        r = It.access(i, e);
                    r || i.addEventListener(t, n, !0),
                        It.access(i, e, (r || 0) + 1)
                },
                teardown: function () {
                    var i = this.ownerDocument || this,
                        r = It.access(i, e) - 1;
                    r ? It.access(i, e, r) : (i.removeEventListener(t, n, !0),
                        It.remove(i, e))
                }
            }
        });
    var xe = t.location,
        Ee = ft.now(),
        ke = /\?/;
    ft.parseXML = function (e) {
        var n;
        if (!e || "string" != typeof e)
            return null;
        try {
            n = (new t.DOMParser).parseFromString(e, "text/xml")
        } catch (t) {
            n = void 0
        }
        return n && !n.getElementsByTagName("parsererror").length || ft.error("Invalid XML: " + e),
            n
    };
    var Te = /\[\]$/,
        Oe = /\r?\n/g,
        Ce = /^(?:submit|button|image|reset|file)$/i,
        Se = /^(?:input|select|textarea|keygen)/i;
    ft.param = function (t, e) {
            var n, i = [],
                r = function (t, e) {
                    var n = ft.isFunction(e) ? e() : e;
                    i[i.length] = encodeURIComponent(t) + "=" + encodeURIComponent(null == n ? "" : n)
                };
            if (Array.isArray(t) || t.jquery && !ft.isPlainObject(t))
                ft.each(t, function () {
                    r(this.name, this.value)
                });
            else
                for (n in t)
                    K(n, t[n], e, r);
            return i.join("&")
        },
        ft.fn.extend({
            serialize: function () {
                return ft.param(this.serializeArray())
            },
            serializeArray: function () {
                return this.map(function () {
                    var t = ft.prop(this, "elements");
                    return t ? ft.makeArray(t) : this
                }).filter(function () {
                    var t = this.type;
                    return this.name && !ft(this).is(":disabled") && Se.test(this.nodeName) && !Ce.test(t) && (this.checked || !Vt.test(t))
                }).map(function (t, e) {
                    var n = ft(this).val();
                    return null == n ? null : Array.isArray(n) ? ft.map(n, function (t) {
                        return {
                            name: e.name,
                            value: t.replace(Oe, "\r\n")
                        }
                    }) : {
                        name: e.name,
                        value: n.replace(Oe, "\r\n")
                    }
                }).get()
            }
        });
    var je = /%20/g,
        Ae = /#.*$/,
        Pe = /([?&])_=[^&]*/,
        De = /^(.*?):[ \t]*([^\r\n]*)$/gm,
        Ie = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
        Ne = /^(?:GET|HEAD)$/,
        Le = /^\/\//,
        Re = {},
        Me = {},
        qe = "*/".concat("*"),
        Be = et.createElement("a");
    Be.href = xe.href,
        ft.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: xe.href,
                type: "GET",
                isLocal: Ie.test(xe.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": qe,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /\bxml\b/,
                    html: /\bhtml/,
                    json: /\bjson\b/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": JSON.parse,
                    "text xml": ft.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function (t, e) {
                return e ? Z(Z(t, ft.ajaxSettings), e) : Z(ft.ajaxSettings, t)
            },
            ajaxPrefilter: G(Re),
            ajaxTransport: G(Me),
            ajax: function (e, n) {
                function i(e, n, i, a) {
                    var c, d, f, b, w, x = n;
                    u || (u = !0,
                        l && t.clearTimeout(l),
                        r = void 0,
                        s = a || "",
                        E.readyState = e > 0 ? 4 : 0,
                        c = e >= 200 && e < 300 || 304 === e,
                        i && (b = Q(p, E, i)),
                        b = J(p, b, E, c),
                        c ? (p.ifModified && ((w = E.getResponseHeader("Last-Modified")) && (ft.lastModified[o] = w),
                                (w = E.getResponseHeader("etag")) && (ft.etag[o] = w)),
                            204 === e || "HEAD" === p.type ? x = "nocontent" : 304 === e ? x = "notmodified" : (x = b.state,
                                d = b.data,
                                c = !(f = b.error))) : (f = x, !e && x || (x = "error",
                            e < 0 && (e = 0))),
                        E.status = e,
                        E.statusText = (n || x) + "",
                        c ? y.resolveWith(g, [d, x, E]) : y.rejectWith(g, [E, x, f]),
                        E.statusCode(m),
                        m = void 0,
                        h && _.trigger(c ? "ajaxSuccess" : "ajaxError", [E, p, c ? d : f]),
                        v.fireWith(g, [E, x]),
                        h && (_.trigger("ajaxComplete", [E, p]),
                            --ft.active || ft.event.trigger("ajaxStop")))
                }
                "object" == typeof e && (n = e,
                        e = void 0),
                    n = n || {};
                var r, o, s, a, l, c, u, h, d, f, p = ft.ajaxSetup({}, n),
                    g = p.context || p,
                    _ = p.context && (g.nodeType || g.jquery) ? ft(g) : ft.event,
                    y = ft.Deferred(),
                    v = ft.Callbacks("once memory"),
                    m = p.statusCode || {},
                    b = {},
                    w = {},
                    x = "canceled",
                    E = {
                        readyState: 0,
                        getResponseHeader: function (t) {
                            var e;
                            if (u) {
                                if (!a)
                                    for (a = {}; e = De.exec(s);)
                                        a[e[1].toLowerCase()] = e[2];
                                e = a[t.toLowerCase()]
                            }
                            return null == e ? null : e
                        },
                        getAllResponseHeaders: function () {
                            return u ? s : null
                        },
                        setRequestHeader: function (t, e) {
                            return null == u && (t = w[t.toLowerCase()] = w[t.toLowerCase()] || t,
                                    b[t] = e),
                                this
                        },
                        overrideMimeType: function (t) {
                            return null == u && (p.mimeType = t),
                                this
                        },
                        statusCode: function (t) {
                            var e;
                            if (t)
                                if (u)
                                    E.always(t[E.status]);
                                else
                                    for (e in t)
                                        m[e] = [m[e], t[e]];
                            return this
                        },
                        abort: function (t) {
                            var e = t || x;
                            return r && r.abort(e),
                                i(0, e),
                                this
                        }
                    };
                if (y.promise(E),
                    p.url = ((e || p.url || xe.href) + "").replace(Le, xe.protocol + "//"),
                    p.type = n.method || n.type || p.method || p.type,
                    p.dataTypes = (p.dataType || "*").toLowerCase().match(St) || [""],
                    null == p.crossDomain) {
                    c = et.createElement("a");
                    try {
                        c.href = p.url,
                            c.href = c.href,
                            p.crossDomain = Be.protocol + "//" + Be.host != c.protocol + "//" + c.host
                    } catch (t) {
                        p.crossDomain = !0
                    }
                }
                if (p.data && p.processData && "string" != typeof p.data && (p.data = ft.param(p.data, p.traditional)),
                    X(Re, p, n, E),
                    u)
                    return E;
                (h = ft.event && p.global) && 0 == ft.active++ && ft.event.trigger("ajaxStart"),
                    p.type = p.type.toUpperCase(),
                    p.hasContent = !Ne.test(p.type),
                    o = p.url.replace(Ae, ""),
                    p.hasContent ? p.data && p.processData && 0 === (p.contentType || "").indexOf("application/x-www-form-urlencoded") && (p.data = p.data.replace(je, "+")) : (f = p.url.slice(o.length),
                        p.data && (o += (ke.test(o) ? "&" : "?") + p.data,
                            delete p.data), !1 === p.cache && (o = o.replace(Pe, "$1"),
                            f = (ke.test(o) ? "&" : "?") + "_=" + Ee++ + f),
                        p.url = o + f),
                    p.ifModified && (ft.lastModified[o] && E.setRequestHeader("If-Modified-Since", ft.lastModified[o]),
                        ft.etag[o] && E.setRequestHeader("If-None-Match", ft.etag[o])),
                    (p.data && p.hasContent && !1 !== p.contentType || n.contentType) && E.setRequestHeader("Content-Type", p.contentType),
                    E.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + qe + "; q=0.01" : "") : p.accepts["*"]);
                for (d in p.headers)
                    E.setRequestHeader(d, p.headers[d]);
                if (p.beforeSend && (!1 === p.beforeSend.call(g, E, p) || u))
                    return E.abort();
                if (x = "abort",
                    v.add(p.complete),
                    E.done(p.success),
                    E.fail(p.error),
                    r = X(Me, p, n, E)) {
                    if (E.readyState = 1,
                        h && _.trigger("ajaxSend", [E, p]),
                        u)
                        return E;
                    p.async && p.timeout > 0 && (l = t.setTimeout(function () {
                        E.abort("timeout")
                    }, p.timeout));
                    try {
                        u = !1,
                            r.send(b, i)
                    } catch (t) {
                        if (u)
                            throw t;
                        i(-1, t)
                    }
                } else
                    i(-1, "No Transport");
                return E
            },
            getJSON: function (t, e, n) {
                return ft.get(t, e, n, "json")
            },
            getScript: function (t, e) {
                return ft.get(t, void 0, e, "script")
            }
        }),
        ft.each(["get", "post"], function (t, e) {
            ft[e] = function (t, n, i, r) {
                return ft.isFunction(n) && (r = r || i,
                        i = n,
                        n = void 0),
                    ft.ajax(ft.extend({
                        url: t,
                        type: e,
                        dataType: r,
                        data: n,
                        success: i
                    }, ft.isPlainObject(t) && t))
            }
        }),
        ft._evalUrl = function (t) {
            return ft.ajax({
                url: t,
                type: "GET",
                dataType: "script",
                cache: !0,
                async: !1,
                global: !1,
                throws: !0
            })
        },
        ft.fn.extend({
            wrapAll: function (t) {
                var e;
                return this[0] && (ft.isFunction(t) && (t = t.call(this[0])),
                        e = ft(t, this[0].ownerDocument).eq(0).clone(!0),
                        this[0].parentNode && e.insertBefore(this[0]),
                        e.map(function () {
                            for (var t = this; t.firstElementChild;)
                                t = t.firstElementChild;
                            return t
                        }).append(this)),
                    this
            },
            wrapInner: function (t) {
                return ft.isFunction(t) ? this.each(function (e) {
                    ft(this).wrapInner(t.call(this, e))
                }) : this.each(function () {
                    var e = ft(this),
                        n = e.contents();
                    n.length ? n.wrapAll(t) : e.append(t)
                })
            },
            wrap: function (t) {
                var e = ft.isFunction(t);
                return this.each(function (n) {
                    ft(this).wrapAll(e ? t.call(this, n) : t)
                })
            },
            unwrap: function (t) {
                return this.parent(t).not("body").each(function () {
                        ft(this).replaceWith(this.childNodes)
                    }),
                    this
            }
        }),
        ft.expr.pseudos.hidden = function (t) {
            return !ft.expr.pseudos.visible(t)
        },
        ft.expr.pseudos.visible = function (t) {
            return !!(t.offsetWidth || t.offsetHeight || t.getClientRects().length)
        },
        ft.ajaxSettings.xhr = function () {
            try {
                return new t.XMLHttpRequest
            } catch (t) {}
        };
    var $e = {
            0: 200,
            1223: 204
        },
        Ue = ft.ajaxSettings.xhr();
    dt.cors = !!Ue && "withCredentials" in Ue,
        dt.ajax = Ue = !!Ue,
        ft.ajaxTransport(function (e) {
            var n, i;
            if (dt.cors || Ue && !e.crossDomain)
                return {
                    send: function (r, o) {
                        var s, a = e.xhr();
                        if (a.open(e.type, e.url, e.async, e.username, e.password),
                            e.xhrFields)
                            for (s in e.xhrFields)
                                a[s] = e.xhrFields[s];
                        e.mimeType && a.overrideMimeType && a.overrideMimeType(e.mimeType),
                            e.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest");
                        for (s in r)
                            a.setRequestHeader(s, r[s]);
                        n = function (t) {
                                return function () {
                                    n && (n = i = a.onload = a.onerror = a.onabort = a.onreadystatechange = null,
                                        "abort" === t ? a.abort() : "error" === t ? "number" != typeof a.status ? o(0, "error") : o(a.status, a.statusText) : o($e[a.status] || a.status, a.statusText, "text" !== (a.responseType || "text") || "string" != typeof a.responseText ? {
                                            binary: a.response
                                        } : {
                                            text: a.responseText
                                        }, a.getAllResponseHeaders()))
                                }
                            },
                            a.onload = n(),
                            i = a.onerror = n("error"),
                            void 0 !== a.onabort ? a.onabort = i : a.onreadystatechange = function () {
                                4 === a.readyState && t.setTimeout(function () {
                                    n && i()
                                })
                            },
                            n = n("abort");
                        try {
                            a.send(e.hasContent && e.data || null)
                        } catch (t) {
                            if (n)
                                throw t
                        }
                    },
                    abort: function () {
                        n && n()
                    }
                }
        }),
        ft.ajaxPrefilter(function (t) {
            t.crossDomain && (t.contents.script = !1)
        }),
        ft.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /\b(?:java|ecma)script\b/
            },
            converters: {
                "text script": function (t) {
                    return ft.globalEval(t),
                        t
                }
            }
        }),
        ft.ajaxPrefilter("script", function (t) {
            void 0 === t.cache && (t.cache = !1),
                t.crossDomain && (t.type = "GET")
        }),
        ft.ajaxTransport("script", function (t) {
            if (t.crossDomain) {
                var e, n;
                return {
                    send: function (i, r) {
                        e = ft("<script>").prop({
                                charset: t.scriptCharset,
                                src: t.url
                            }).on("load error", n = function (t) {
                                e.remove(),
                                    n = null,
                                    t && r("error" === t.type ? 404 : 200, t.type)
                            }),
                            et.head.appendChild(e[0])
                    },
                    abort: function () {
                        n && n()
                    }
                }
            }
        });
    var Fe = [],
        Ve = /(=)\?(?=&|$)|\?\?/;
    ft.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function () {
                var t = Fe.pop() || ft.expando + "_" + Ee++;
                return this[t] = !0,
                    t
            }
        }),
        ft.ajaxPrefilter("json jsonp", function (e, n, i) {
            var r, o, s, a = !1 !== e.jsonp && (Ve.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Ve.test(e.data) && "data");
            if (a || "jsonp" === e.dataTypes[0])
                return r = e.jsonpCallback = ft.isFunction(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback,
                    a ? e[a] = e[a].replace(Ve, "$1" + r) : !1 !== e.jsonp && (e.url += (ke.test(e.url) ? "&" : "?") + e.jsonp + "=" + r),
                    e.converters["script json"] = function () {
                        return s || ft.error(r + " was not called"),
                            s[0]
                    },
                    e.dataTypes[0] = "json",
                    o = t[r],
                    t[r] = function () {
                        s = arguments
                    },
                    i.always(function () {
                        void 0 === o ? ft(t).removeProp(r) : t[r] = o,
                            e[r] && (e.jsonpCallback = n.jsonpCallback,
                                Fe.push(r)),
                            s && ft.isFunction(o) && o(s[0]),
                            s = o = void 0
                    }),
                    "script"
        }),
        dt.createHTMLDocument = function () {
            var t = et.implementation.createHTMLDocument("").body;
            return t.innerHTML = "<form></form><form></form>",
                2 === t.childNodes.length
        }(),
        ft.parseHTML = function (t, e, n) {
            if ("string" != typeof t)
                return [];
            "boolean" == typeof e && (n = e,
                e = !1);
            var i, r, o;
            return e || (dt.createHTMLDocument ? ((i = (e = et.implementation.createHTMLDocument("")).createElement("base")).href = et.location.href,
                    e.head.appendChild(i)) : e = et),
                r = xt.exec(t),
                o = !n && [],
                r ? [e.createElement(r[1])] : (r = b([t], e, o),
                    o && o.length && ft(o).remove(),
                    ft.merge([], r.childNodes))
        },
        ft.fn.load = function (t, e, n) {
            var i, r, o, s = this,
                a = t.indexOf(" ");
            return a > -1 && (i = z(t.slice(a)),
                    t = t.slice(0, a)),
                ft.isFunction(e) ? (n = e,
                    e = void 0) : e && "object" == typeof e && (r = "POST"),
                s.length > 0 && ft.ajax({
                    url: t,
                    type: r || "GET",
                    dataType: "html",
                    data: e
                }).done(function (t) {
                    o = arguments,
                        s.html(i ? ft("<div>").append(ft.parseHTML(t)).find(i) : t)
                }).always(n && function (t, e) {
                    s.each(function () {
                        n.apply(this, o || [t.responseText, e, t])
                    })
                }),
                this
        },
        ft.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (t, e) {
            ft.fn[e] = function (t) {
                return this.on(e, t)
            }
        }),
        ft.expr.pseudos.animated = function (t) {
            return ft.grep(ft.timers, function (e) {
                return t === e.elem
            }).length
        },
        ft.offset = {
            setOffset: function (t, e, n) {
                var i, r, o, s, a, l, c = ft.css(t, "position"),
                    u = ft(t),
                    h = {};
                "static" === c && (t.style.position = "relative"),
                    a = u.offset(),
                    o = ft.css(t, "top"),
                    l = ft.css(t, "left"),
                    ("absolute" === c || "fixed" === c) && (o + l).indexOf("auto") > -1 ? (s = (i = u.position()).top,
                        r = i.left) : (s = parseFloat(o) || 0,
                        r = parseFloat(l) || 0),
                    ft.isFunction(e) && (e = e.call(t, n, ft.extend({}, a))),
                    null != e.top && (h.top = e.top - a.top + s),
                    null != e.left && (h.left = e.left - a.left + r),
                    "using" in e ? e.using.call(t, h) : u.css(h)
            }
        },
        ft.fn.extend({
            offset: function (t) {
                if (arguments.length)
                    return void 0 === t ? this : this.each(function (e) {
                        ft.offset.setOffset(this, t, e)
                    });
                var e, n, i, r, o = this[0];
                if (o)
                    return o.getClientRects().length ? (i = o.getBoundingClientRect(),
                        e = o.ownerDocument,
                        n = e.documentElement,
                        r = e.defaultView, {
                            top: i.top + r.pageYOffset - n.clientTop,
                            left: i.left + r.pageXOffset - n.clientLeft
                        }) : {
                        top: 0,
                        left: 0
                    }
            },
            position: function () {
                if (this[0]) {
                    var t, e, n = this[0],
                        i = {
                            top: 0,
                            left: 0
                        };
                    return "fixed" === ft.css(n, "position") ? e = n.getBoundingClientRect() : (t = this.offsetParent(),
                        e = this.offset(),
                        r(t[0], "html") || (i = t.offset()),
                        i = {
                            top: i.top + ft.css(t[0], "borderTopWidth", !0),
                            left: i.left + ft.css(t[0], "borderLeftWidth", !0)
                        }), {
                        top: e.top - i.top - ft.css(n, "marginTop", !0),
                        left: e.left - i.left - ft.css(n, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function () {
                return this.map(function () {
                    for (var t = this.offsetParent; t && "static" === ft.css(t, "position");)
                        t = t.offsetParent;
                    return t || Kt
                })
            }
        }),
        ft.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function (t, e) {
            var n = "pageYOffset" === e;
            ft.fn[t] = function (i) {
                return Pt(this, function (t, i, r) {
                    var o;
                    if (ft.isWindow(t) ? o = t : 9 === t.nodeType && (o = t.defaultView),
                        void 0 === r)
                        return o ? o[e] : t[i];
                    o ? o.scrollTo(n ? o.pageXOffset : r, n ? r : o.pageYOffset) : t[i] = r
                }, t, i, arguments.length)
            }
        }),
        ft.each(["top", "left"], function (t, e) {
            ft.cssHooks[e] = I(dt.pixelPosition, function (t, n) {
                if (n)
                    return n = D(t, e),
                        re.test(n) ? ft(t).position()[e] + "px" : n
            })
        }),
        ft.each({
            Height: "height",
            Width: "width"
        }, function (t, e) {
            ft.each({
                padding: "inner" + t,
                content: e,
                "": "outer" + t
            }, function (n, i) {
                ft.fn[i] = function (r, o) {
                    var s = arguments.length && (n || "boolean" != typeof r),
                        a = n || (!0 === r || !0 === o ? "margin" : "border");
                    return Pt(this, function (e, n, r) {
                        var o;
                        return ft.isWindow(e) ? 0 === i.indexOf("outer") ? e["inner" + t] : e.document.documentElement["client" + t] : 9 === e.nodeType ? (o = e.documentElement,
                            Math.max(e.body["scroll" + t], o["scroll" + t], e.body["offset" + t], o["offset" + t], o["client" + t])) : void 0 === r ? ft.css(e, n, a) : ft.style(e, n, r, a)
                    }, e, s ? r : void 0, s)
                }
            })
        }),
        ft.fn.extend({
            bind: function (t, e, n) {
                return this.on(t, null, e, n)
            },
            unbind: function (t, e) {
                return this.off(t, null, e)
            },
            delegate: function (t, e, n, i) {
                return this.on(e, t, n, i)
            },
            undelegate: function (t, e, n) {
                return 1 === arguments.length ? this.off(t, "**") : this.off(e, t || "**", n)
            }
        }),
        ft.holdReady = function (t) {
            t ? ft.readyWait++ : ft.ready(!0)
        },
        ft.isArray = Array.isArray,
        ft.parseJSON = JSON.parse,
        ft.nodeName = r,
        "function" == typeof define && define.amd && define("jquery", [], function () {
            return ft
        });
    var He = t.jQuery,
        We = t.$;
    return ft.noConflict = function (e) {
            return t.$ === ft && (t.$ = We),
                e && t.jQuery === ft && (t.jQuery = He),
                ft
        },
        e || (t.jQuery = t.$ = ft),
        ft
}),
function () {
    function t(t, e) {
        return t.set(e[0], e[1]),
            t
    }

    function e(t, e) {
        return t.add(e),
            t
    }

    function n(t, e, n) {
        switch (n.length) {
            case 0:
                return t.call(e);
            case 1:
                return t.call(e, n[0]);
            case 2:
                return t.call(e, n[0], n[1]);
            case 3:
                return t.call(e, n[0], n[1], n[2])
        }
        return t.apply(e, n)
    }

    function i(t, e, n, i) {
        for (var r = -1, o = null == t ? 0 : t.length; ++r < o;) {
            var s = t[r];
            e(i, s, n(s), t)
        }
        return i
    }

    function r(t, e) {
        for (var n = -1, i = null == t ? 0 : t.length; ++n < i && !1 !== e(t[n], n, t);)
        ;
        return t
    }

    function o(t, e) {
        for (var n = null == t ? 0 : t.length; n-- && !1 !== e(t[n], n, t);)
        ;
        return t
    }

    function s(t, e) {
        for (var n = -1, i = null == t ? 0 : t.length; ++n < i;)
            if (!e(t[n], n, t))
                return !1;
        return !0
    }

    function a(t, e) {
        for (var n = -1, i = null == t ? 0 : t.length, r = 0, o = []; ++n < i;) {
            var s = t[n];
            e(s, n, t) && (o[r++] = s)
        }
        return o
    }

    function l(t, e) {
        return !!(null == t ? 0 : t.length) && m(t, e, 0) > -1
    }

    function c(t, e, n) {
        for (var i = -1, r = null == t ? 0 : t.length; ++i < r;)
            if (n(e, t[i]))
                return !0;
        return !1
    }

    function u(t, e) {
        for (var n = -1, i = null == t ? 0 : t.length, r = Array(i); ++n < i;)
            r[n] = e(t[n], n, t);
        return r
    }

    function h(t, e) {
        for (var n = -1, i = e.length, r = t.length; ++n < i;)
            t[r + n] = e[n];
        return t
    }

    function d(t, e, n, i) {
        var r = -1,
            o = null == t ? 0 : t.length;
        for (i && o && (n = t[++r]); ++r < o;)
            n = e(n, t[r], r, t);
        return n
    }

    function f(t, e, n, i) {
        var r = null == t ? 0 : t.length;
        for (i && r && (n = t[--r]); r--;)
            n = e(n, t[r], r, t);
        return n
    }

    function p(t, e) {
        for (var n = -1, i = null == t ? 0 : t.length; ++n < i;)
            if (e(t[n], n, t))
                return !0;
        return !1
    }

    function g(t) {
        return t.split("")
    }

    function _(t) {
        return t.match(Le) || []
    }

    function y(t, e, n) {
        var i;
        return n(t, function (t, n, r) {
                if (e(t, n, r))
                    return i = n, !1
            }),
            i
    }

    function v(t, e, n, i) {
        for (var r = t.length, o = n + (i ? 1 : -1); i ? o-- : ++o < r;)
            if (e(t[o], o, t))
                return o;
        return -1
    }

    function m(t, e, n) {
        return e === e ? z(t, e, n) : v(t, w, n)
    }

    function b(t, e, n, i) {
        for (var r = n - 1, o = t.length; ++r < o;)
            if (i(t[r], e))
                return r;
        return -1
    }

    function w(t) {
        return t !== t
    }

    function x(t, e) {
        var n = null == t ? 0 : t.length;
        return n ? C(t, e) / n : At
    }

    function E(t) {
        return function (e) {
            return null == e ? J : e[t]
        }
    }

    function k(t) {
        return function (e) {
            return null == t ? J : t[e]
        }
    }

    function T(t, e, n, i, r) {
        return r(t, function (t, r, o) {
                n = i ? (i = !1,
                    t) : e(n, t, r, o)
            }),
            n
    }

    function O(t, e) {
        var n = t.length;
        for (t.sort(e); n--;)
            t[n] = t[n].value;
        return t
    }

    function C(t, e) {
        for (var n, i = -1, r = t.length; ++i < r;) {
            var o = e(t[i]);
            o !== J && (n = n === J ? o : n + o)
        }
        return n
    }

    function S(t, e) {
        for (var n = -1, i = Array(t); ++n < t;)
            i[n] = e(n);
        return i
    }

    function j(t, e) {
        return u(e, function (e) {
            return [e, t[e]]
        })
    }

    function A(t) {
        return function (e) {
            return t(e)
        }
    }

    function P(t, e) {
        return u(e, function (e) {
            return t[e]
        })
    }

    function D(t, e) {
        return t.has(e)
    }

    function I(t, e) {
        for (var n = -1, i = t.length; ++n < i && m(e, t[n], 0) > -1;)
        ;
        return n
    }

    function N(t, e) {
        for (var n = t.length; n-- && m(e, t[n], 0) > -1;)
        ;
        return n
    }

    function L(t, e) {
        for (var n = t.length, i = 0; n--;)
            t[n] === e && ++i;
        return i
    }

    function R(t) {
        return "\\" + xn[t]
    }

    function M(t, e) {
        return null == t ? J : t[e]
    }

    function q(t) {
        return fn.test(t)
    }

    function B(t) {
        return pn.test(t)
    }

    function $(t) {
        for (var e, n = []; !(e = t.next()).done;)
            n.push(e.value);
        return n
    }

    function U(t) {
        var e = -1,
            n = Array(t.size);
        return t.forEach(function (t, i) {
                n[++e] = [i, t]
            }),
            n
    }

    function F(t, e) {
        return function (n) {
            return t(e(n))
        }
    }

    function V(t, e) {
        for (var n = -1, i = t.length, r = 0, o = []; ++n < i;) {
            var s = t[n];
            s !== e && s !== ot || (t[n] = ot,
                o[r++] = n)
        }
        return o
    }

    function H(t) {
        var e = -1,
            n = Array(t.size);
        return t.forEach(function (t) {
                n[++e] = t
            }),
            n
    }

    function W(t) {
        var e = -1,
            n = Array(t.size);
        return t.forEach(function (t) {
                n[++e] = [t, t]
            }),
            n
    }

    function z(t, e, n) {
        for (var i = n - 1, r = t.length; ++i < r;)
            if (t[i] === e)
                return i;
        return -1
    }

    function Y(t, e, n) {
        for (var i = n + 1; i--;)
            if (t[i] === e)
                return i;
        return i
    }

    function K(t) {
        return q(t) ? X(t) : Bn(t)
    }

    function G(t) {
        return q(t) ? Z(t) : g(t)
    }

    function X(t) {
        for (var e = hn.lastIndex = 0; hn.test(t);)
            ++e;
        return e
    }

    function Z(t) {
        return t.match(hn) || []
    }

    function Q(t) {
        return t.match(dn) || []
    }
    var J, tt = 200,
        et = "Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",
        nt = "Expected a function",
        it = "__lodash_hash_undefined__",
        rt = 500,
        ot = "__lodash_placeholder__",
        st = 1,
        at = 2,
        lt = 4,
        ct = 1,
        ut = 2,
        ht = 1,
        dt = 2,
        ft = 4,
        pt = 8,
        gt = 16,
        _t = 32,
        yt = 64,
        vt = 128,
        mt = 256,
        bt = 512,
        wt = 30,
        xt = "...",
        Et = 800,
        kt = 16,
        Tt = 1,
        Ot = 2,
        Ct = 1 / 0,
        St = 9007199254740991,
        jt = 1.7976931348623157e308,
        At = NaN,
        Pt = 4294967295,
        Dt = Pt - 1,
        It = Pt >>> 1,
        Nt = [
            ["ary", vt],
            ["bind", ht],
            ["bindKey", dt],
            ["curry", pt],
            ["curryRight", gt],
            ["flip", bt],
            ["partial", _t],
            ["partialRight", yt],
            ["rearg", mt]
        ],
        Lt = "[object Arguments]",
        Rt = "[object Array]",
        Mt = "[object AsyncFunction]",
        qt = "[object Boolean]",
        Bt = "[object Date]",
        $t = "[object DOMException]",
        Ut = "[object Error]",
        Ft = "[object Function]",
        Vt = "[object GeneratorFunction]",
        Ht = "[object Map]",
        Wt = "[object Number]",
        zt = "[object Null]",
        Yt = "[object Object]",
        Kt = "[object Proxy]",
        Gt = "[object RegExp]",
        Xt = "[object Set]",
        Zt = "[object String]",
        Qt = "[object Symbol]",
        Jt = "[object Undefined]",
        te = "[object WeakMap]",
        ee = "[object WeakSet]",
        ne = "[object ArrayBuffer]",
        ie = "[object DataView]",
        re = "[object Float32Array]",
        oe = "[object Float64Array]",
        se = "[object Int8Array]",
        ae = "[object Int16Array]",
        le = "[object Int32Array]",
        ce = "[object Uint8Array]",
        ue = "[object Uint8ClampedArray]",
        he = "[object Uint16Array]",
        de = "[object Uint32Array]",
        fe = /\b__p \+= '';/g,
        pe = /\b(__p \+=) '' \+/g,
        ge = /(__e\(.*?\)|\b__t\)) \+\n'';/g,
        _e = /&(?:amp|lt|gt|quot|#39);/g,
        ye = /[&<>"']/g,
        ve = RegExp(_e.source),
        me = RegExp(ye.source),
        be = /<%-([\s\S]+?)%>/g,
        we = /<%([\s\S]+?)%>/g,
        xe = /<%=([\s\S]+?)%>/g,
        Ee = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
        ke = /^\w*$/,
        Te = /^\./,
        Oe = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,
        Ce = /[\\^$.*+?()[\]{}|]/g,
        Se = RegExp(Ce.source),
        je = /^\s+|\s+$/g,
        Ae = /^\s+/,
        Pe = /\s+$/,
        De = /\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,
        Ie = /\{\n\/\* \[wrapped with (.+)\] \*/,
        Ne = /,? & /,
        Le = /[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,
        Re = /\\(\\)?/g,
        Me = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,
        qe = /\w*$/,
        Be = /^[-+]0x[0-9a-f]+$/i,
        $e = /^0b[01]+$/i,
        Ue = /^\[object .+?Constructor\]$/,
        Fe = /^0o[0-7]+$/i,
        Ve = /^(?:0|[1-9]\d*)$/,
        He = /[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,
        We = /($^)/,
        ze = /['\n\r\u2028\u2029\\]/g,
        Ye = "\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",
        Ke = "\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",
        Ge = "[" + Ke + "]",
        Xe = "[" + Ye + "]",
        Ze = "[a-z\\xdf-\\xf6\\xf8-\\xff]",
        Qe = "[^\\ud800-\\udfff" + Ke + "\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",
        Je = "\\ud83c[\\udffb-\\udfff]",
        tn = "(?:\\ud83c[\\udde6-\\uddff]){2}",
        en = "[\\ud800-\\udbff][\\udc00-\\udfff]",
        nn = "[A-Z\\xc0-\\xd6\\xd8-\\xde]",
        rn = "(?:" + Ze + "|" + Qe + ")",
        on = "(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",
        sn = "[\\ufe0e\\ufe0f]?" + on + ("(?:\\u200d(?:" + ["[^\\ud800-\\udfff]", tn, en].join("|") + ")[\\ufe0e\\ufe0f]?" + on + ")*"),
        an = "(?:" + ["[\\u2700-\\u27bf]", tn, en].join("|") + ")" + sn,
        ln = "(?:" + ["[^\\ud800-\\udfff]" + Xe + "?", Xe, tn, en, "[\\ud800-\\udfff]"].join("|") + ")",
        cn = RegExp("['’]", "g"),
        un = RegExp(Xe, "g"),
        hn = RegExp(Je + "(?=" + Je + ")|" + ln + sn, "g"),
        dn = RegExp([nn + "?" + Ze + "+(?:['’](?:d|ll|m|re|s|t|ve))?(?=" + [Ge, nn, "$"].join("|") + ")", "(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=" + [Ge, nn + rn, "$"].join("|") + ")", nn + "?" + rn + "+(?:['’](?:d|ll|m|re|s|t|ve))?", nn + "+(?:['’](?:D|LL|M|RE|S|T|VE))?", "\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)", "\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)", "\\d+", an].join("|"), "g"),
        fn = RegExp("[\\u200d\\ud800-\\udfff" + Ye + "\\ufe0e\\ufe0f]"),
        pn = /[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,
        gn = ["Array", "Buffer", "DataView", "Date", "Error", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Math", "Object", "Promise", "RegExp", "Set", "String", "Symbol", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "WeakMap", "_", "clearTimeout", "isFinite", "parseInt", "setTimeout"],
        _n = -1,
        yn = {};
    yn[re] = yn[oe] = yn[se] = yn[ae] = yn[le] = yn[ce] = yn[ue] = yn[he] = yn[de] = !0,
        yn[Lt] = yn[Rt] = yn[ne] = yn[qt] = yn[ie] = yn[Bt] = yn[Ut] = yn[Ft] = yn[Ht] = yn[Wt] = yn[Yt] = yn[Gt] = yn[Xt] = yn[Zt] = yn[te] = !1;
    var vn = {};
    vn[Lt] = vn[Rt] = vn[ne] = vn[ie] = vn[qt] = vn[Bt] = vn[re] = vn[oe] = vn[se] = vn[ae] = vn[le] = vn[Ht] = vn[Wt] = vn[Yt] = vn[Gt] = vn[Xt] = vn[Zt] = vn[Qt] = vn[ce] = vn[ue] = vn[he] = vn[de] = !0,
        vn[Ut] = vn[Ft] = vn[te] = !1;
    var mn = {
            "À": "A",
            "Á": "A",
            "Â": "A",
            "Ã": "A",
            "Ä": "A",
            "Å": "A",
            "à": "a",
            "á": "a",
            "â": "a",
            "ã": "a",
            "ä": "a",
            "å": "a",
            "Ç": "C",
            "ç": "c",
            "Ð": "D",
            "ð": "d",
            "È": "E",
            "É": "E",
            "Ê": "E",
            "Ë": "E",
            "è": "e",
            "é": "e",
            "ê": "e",
            "ë": "e",
            "Ì": "I",
            "Í": "I",
            "Î": "I",
            "Ï": "I",
            "ì": "i",
            "í": "i",
            "î": "i",
            "ï": "i",
            "Ñ": "N",
            "ñ": "n",
            "Ò": "O",
            "Ó": "O",
            "Ô": "O",
            "Õ": "O",
            "Ö": "O",
            "Ø": "O",
            "ò": "o",
            "ó": "o",
            "ô": "o",
            "õ": "o",
            "ö": "o",
            "ø": "o",
            "Ù": "U",
            "Ú": "U",
            "Û": "U",
            "Ü": "U",
            "ù": "u",
            "ú": "u",
            "û": "u",
            "ü": "u",
            "Ý": "Y",
            "ý": "y",
            "ÿ": "y",
            "Æ": "Ae",
            "æ": "ae",
            "Þ": "Th",
            "þ": "th",
            "ß": "ss",
            "Ā": "A",
            "Ă": "A",
            "Ą": "A",
            "ā": "a",
            "ă": "a",
            "ą": "a",
            "Ć": "C",
            "Ĉ": "C",
            "Ċ": "C",
            "Č": "C",
            "ć": "c",
            "ĉ": "c",
            "ċ": "c",
            "č": "c",
            "Ď": "D",
            "Đ": "D",
            "ď": "d",
            "đ": "d",
            "Ē": "E",
            "Ĕ": "E",
            "Ė": "E",
            "Ę": "E",
            "Ě": "E",
            "ē": "e",
            "ĕ": "e",
            "ė": "e",
            "ę": "e",
            "ě": "e",
            "Ĝ": "G",
            "Ğ": "G",
            "Ġ": "G",
            "Ģ": "G",
            "ĝ": "g",
            "ğ": "g",
            "ġ": "g",
            "ģ": "g",
            "Ĥ": "H",
            "Ħ": "H",
            "ĥ": "h",
            "ħ": "h",
            "Ĩ": "I",
            "Ī": "I",
            "Ĭ": "I",
            "Į": "I",
            "İ": "I",
            "ĩ": "i",
            "ī": "i",
            "ĭ": "i",
            "į": "i",
            "ı": "i",
            "Ĵ": "J",
            "ĵ": "j",
            "Ķ": "K",
            "ķ": "k",
            "ĸ": "k",
            "Ĺ": "L",
            "Ļ": "L",
            "Ľ": "L",
            "Ŀ": "L",
            "Ł": "L",
            "ĺ": "l",
            "ļ": "l",
            "ľ": "l",
            "ŀ": "l",
            "ł": "l",
            "Ń": "N",
            "Ņ": "N",
            "Ň": "N",
            "Ŋ": "N",
            "ń": "n",
            "ņ": "n",
            "ň": "n",
            "ŋ": "n",
            "Ō": "O",
            "Ŏ": "O",
            "Ő": "O",
            "ō": "o",
            "ŏ": "o",
            "ő": "o",
            "Ŕ": "R",
            "Ŗ": "R",
            "Ř": "R",
            "ŕ": "r",
            "ŗ": "r",
            "ř": "r",
            "Ś": "S",
            "Ŝ": "S",
            "Ş": "S",
            "Š": "S",
            "ś": "s",
            "ŝ": "s",
            "ş": "s",
            "š": "s",
            "Ţ": "T",
            "Ť": "T",
            "Ŧ": "T",
            "ţ": "t",
            "ť": "t",
            "ŧ": "t",
            "Ũ": "U",
            "Ū": "U",
            "Ŭ": "U",
            "Ů": "U",
            "Ű": "U",
            "Ų": "U",
            "ũ": "u",
            "ū": "u",
            "ŭ": "u",
            "ů": "u",
            "ű": "u",
            "ų": "u",
            "Ŵ": "W",
            "ŵ": "w",
            "Ŷ": "Y",
            "ŷ": "y",
            "Ÿ": "Y",
            "Ź": "Z",
            "Ż": "Z",
            "Ž": "Z",
            "ź": "z",
            "ż": "z",
            "ž": "z",
            "Ĳ": "IJ",
            "ĳ": "ij",
            "Œ": "Oe",
            "œ": "oe",
            "ŉ": "'n",
            "ſ": "s"
        },
        bn = {
            "&": "&amp;",
            "<": "&lt;",
            ">": "&gt;",
            '"': "&quot;",
            "'": "&#39;"
        },
        wn = {
            "&amp;": "&",
            "&lt;": "<",
            "&gt;": ">",
            "&quot;": '"',
            "&#39;": "'"
        },
        xn = {
            "\\": "\\",
            "'": "'",
            "\n": "n",
            "\r": "r",
            "\u2028": "u2028",
            "\u2029": "u2029"
        },
        En = parseFloat,
        kn = parseInt,
        Tn = "object" == typeof global && global && global.Object === Object && global,
        On = "object" == typeof self && self && self.Object === Object && self,
        Cn = Tn || On || Function("return this")(),
        Sn = "object" == typeof exports && exports && !exports.nodeType && exports,
        jn = Sn && "object" == typeof module && module && !module.nodeType && module,
        An = jn && jn.exports === Sn,
        Pn = An && Tn.process,
        Dn = function () {
            try {
                return Pn && Pn.binding && Pn.binding("util")
            } catch (t) {}
        }(),
        In = Dn && Dn.isArrayBuffer,
        Nn = Dn && Dn.isDate,
        Ln = Dn && Dn.isMap,
        Rn = Dn && Dn.isRegExp,
        Mn = Dn && Dn.isSet,
        qn = Dn && Dn.isTypedArray,
        Bn = E("length"),
        $n = k(mn),
        Un = k(bn),
        Fn = k(wn),
        Vn = function g(k) {
            function z(t) {
                if (es(t) && !Hl(t) && !(t instanceof Le)) {
                    if (t instanceof Z)
                        return t;
                    if (Hs.call(t, "__wrapped__"))
                        return To(t)
                }
                return new Z(t)
            }

            function X() {}

            function Z(t, e) {
                this.__wrapped__ = t,
                    this.__actions__ = [],
                    this.__chain__ = !!e,
                    this.__index__ = 0,
                    this.__values__ = J
            }

            function Le(t) {
                this.__wrapped__ = t,
                    this.__actions__ = [],
                    this.__dir__ = 1,
                    this.__filtered__ = !1,
                    this.__iteratees__ = [],
                    this.__takeCount__ = Pt,
                    this.__views__ = []
            }

            function Ye(t) {
                var e = -1,
                    n = null == t ? 0 : t.length;
                for (this.clear(); ++e < n;) {
                    var i = t[e];
                    this.set(i[0], i[1])
                }
            }

            function Ke(t) {
                var e = -1,
                    n = null == t ? 0 : t.length;
                for (this.clear(); ++e < n;) {
                    var i = t[e];
                    this.set(i[0], i[1])
                }
            }

            function Ge(t) {
                var e = -1,
                    n = null == t ? 0 : t.length;
                for (this.clear(); ++e < n;) {
                    var i = t[e];
                    this.set(i[0], i[1])
                }
            }

            function Xe(t) {
                var e = -1,
                    n = null == t ? 0 : t.length;
                for (this.__data__ = new Ge; ++e < n;)
                    this.add(t[e])
            }

            function Ze(t) {
                var e = this.__data__ = new Ke(t);
                this.size = e.size
            }

            function Qe(t, e) {
                var n = Hl(t),
                    i = !n && Vl(t),
                    r = !n && !i && zl(t),
                    o = !n && !i && !r && Zl(t),
                    s = n || i || r || o,
                    a = s ? S(t.length, Ms) : [],
                    l = a.length;
                for (var c in t)
                    !e && !Hs.call(t, c) || s && ("length" == c || r && ("offset" == c || "parent" == c) || o && ("buffer" == c || "byteLength" == c || "byteOffset" == c) || io(c, l)) || a.push(c);
                return a
            }

            function Je(t) {
                var e = t.length;
                return e ? t[xi(0, e - 1)] : J
            }

            function tn(t, e) {
                return wo(sr(t), fn(e, 0, t.length))
            }

            function en(t) {
                return wo(sr(t))
            }

            function nn(t, e, n) {
                (n === J || Yo(t[e], n)) && (n !== J || e in t) || hn(t, e, n)
            }

            function rn(t, e, n) {
                var i = t[e];
                Hs.call(t, e) && Yo(i, n) && (n !== J || e in t) || hn(t, e, n)
            }

            function on(t, e) {
                for (var n = t.length; n--;)
                    if (Yo(t[n][0], e))
                        return n;
                return -1
            }

            function sn(t, e, n, i) {
                return Fa(t, function (t, r, o) {
                        e(i, t, n(t), o)
                    }),
                    i
            }

            function an(t, e) {
                return t && ar(e, gs(e), t)
            }

            function ln(t, e) {
                return t && ar(e, _s(e), t)
            }

            function hn(t, e, n) {
                "__proto__" == e && la ? la(t, e, {
                    configurable: !0,
                    enumerable: !0,
                    value: n,
                    writable: !0
                }) : t[e] = n
            }

            function dn(t, e) {
                for (var n = -1, i = e.length, r = As(i), o = null == t; ++n < i;)
                    r[n] = o ? J : fs(t, e[n]);
                return r
            }

            function fn(t, e, n) {
                return t === t && (n !== J && (t = t <= n ? t : n),
                        e !== J && (t = t >= e ? t : e)),
                    t
            }

            function pn(t, e, n, i, o, s) {
                var a, l = e & st,
                    c = e & at,
                    u = e & lt;
                if (n && (a = o ? n(t, i, o, s) : n(t)),
                    a !== J)
                    return a;
                if (!ts(t))
                    return t;
                var h = Hl(t);
                if (h) {
                    if (a = Qr(t), !l)
                        return sr(t, a)
                } else {
                    var d = tl(t),
                        f = d == Ft || d == Vt;
                    if (zl(t))
                        return Ki(t, l);
                    if (d == Yt || d == Lt || f && !o) {
                        if (a = c || f ? {} : Jr(t), !l)
                            return c ? cr(t, ln(a, t)) : lr(t, an(a, t))
                    } else {
                        if (!vn[d])
                            return o ? t : {};
                        a = to(t, d, pn, l)
                    }
                }
                s || (s = new Ze);
                var p = s.get(t);
                if (p)
                    return p;
                s.set(t, a);
                var g = u ? c ? Ur : $r : c ? _s : gs,
                    _ = h ? J : g(t);
                return r(_ || t, function (i, r) {
                        _ && (i = t[r = i]),
                            rn(a, r, pn(i, e, n, r, t, s))
                    }),
                    a
            }

            function mn(t) {
                var e = gs(t);
                return function (n) {
                    return bn(n, t, e)
                }
            }

            function bn(t, e, n) {
                var i = n.length;
                if (null == t)
                    return !i;
                for (t = Ls(t); i--;) {
                    var r = n[i],
                        o = e[r],
                        s = t[r];
                    if (s === J && !(r in t) || !o(s))
                        return !1
                }
                return !0
            }

            function wn(t, e, n) {
                if ("function" != typeof t)
                    throw new qs(nt);
                return il(function () {
                    t.apply(J, n)
                }, e)
            }

            function xn(t, e, n, i) {
                var r = -1,
                    o = l,
                    s = !0,
                    a = t.length,
                    h = [],
                    d = e.length;
                if (!a)
                    return h;
                n && (e = u(e, A(n))),
                    i ? (o = c,
                        s = !1) : e.length >= tt && (o = D,
                        s = !1,
                        e = new Xe(e));
                t: for (; ++r < a;) {
                    var f = t[r],
                        p = null == n ? f : n(f);
                    if (f = i || 0 !== f ? f : 0,
                        s && p === p) {
                        for (var g = d; g--;)
                            if (e[g] === p)
                                continue t;
                        h.push(f)
                    } else
                        o(e, p, i) || h.push(f)
                }
                return h
            }

            function Tn(t, e) {
                var n = !0;
                return Fa(t, function (t, i, r) {
                        return n = !!e(t, i, r)
                    }),
                    n
            }

            function On(t, e, n) {
                for (var i = -1, r = t.length; ++i < r;) {
                    var o = t[i],
                        s = e(o);
                    if (null != s && (a === J ? s === s && !os(s) : n(s, a)))
                        var a = s,
                            l = o
                }
                return l
            }

            function Sn(t, e, n, i) {
                var r = t.length;
                for ((n = ls(n)) < 0 && (n = -n > r ? 0 : r + n),
                    (i = i === J || i > r ? r : ls(i)) < 0 && (i += r),
                    i = n > i ? 0 : cs(i); n < i;)
                    t[n++] = e;
                return t
            }

            function jn(t, e) {
                var n = [];
                return Fa(t, function (t, i, r) {
                        e(t, i, r) && n.push(t)
                    }),
                    n
            }

            function Pn(t, e, n, i, r) {
                var o = -1,
                    s = t.length;
                for (n || (n = no),
                    r || (r = []); ++o < s;) {
                    var a = t[o];
                    e > 0 && n(a) ? e > 1 ? Pn(a, e - 1, n, i, r) : h(r, a) : i || (r[r.length] = a)
                }
                return r
            }

            function Dn(t, e) {
                return t && Ha(t, e, gs)
            }

            function Bn(t, e) {
                return t && Wa(t, e, gs)
            }

            function Hn(t, e) {
                return a(e, function (e) {
                    return Zo(t[e])
                })
            }

            function Wn(t, e) {
                for (var n = 0, i = (e = zi(e, t)).length; null != t && n < i;)
                    t = t[xo(e[n++])];
                return n && n == i ? t : J
            }

            function zn(t, e, n) {
                var i = e(t);
                return Hl(t) ? i : h(i, n(t))
            }

            function Yn(t) {
                return null == t ? t === J ? Jt : zt : aa && aa in Ls(t) ? Kr(t) : go(t)
            }

            function Kn(t, e) {
                return t > e
            }

            function Gn(t, e) {
                return null != t && Hs.call(t, e)
            }

            function Xn(t, e) {
                return null != t && e in Ls(t)
            }

            function Zn(t, e, n) {
                return t >= ba(e, n) && t < ma(e, n)
            }

            function Qn(t, e, n) {
                for (var i = n ? c : l, r = t[0].length, o = t.length, s = o, a = As(o), h = 1 / 0, d = []; s--;) {
                    var f = t[s];
                    s && e && (f = u(f, A(e))),
                        h = ba(f.length, h),
                        a[s] = !n && (e || r >= 120 && f.length >= 120) ? new Xe(s && f) : J
                }
                f = t[0];
                var p = -1,
                    g = a[0];
                t: for (; ++p < r && d.length < h;) {
                    var _ = f[p],
                        y = e ? e(_) : _;
                    if (_ = n || 0 !== _ ? _ : 0, !(g ? D(g, y) : i(d, y, n))) {
                        for (s = o; --s;) {
                            var v = a[s];
                            if (!(v ? D(v, y) : i(t[s], y, n)))
                                continue t
                        }
                        g && g.push(y),
                            d.push(_)
                    }
                }
                return d
            }

            function Jn(t, e, n, i) {
                return Dn(t, function (t, r, o) {
                        e(i, n(t), r, o)
                    }),
                    i
            }

            function ti(t, e, i) {
                var r = null == (t = yo(t, e = zi(e, t))) ? t : t[xo(Ao(e))];
                return null == r ? J : n(r, t, i)
            }

            function ei(t) {
                return es(t) && Yn(t) == Lt
            }

            function ni(t, e, n, i, r) {
                return t === e || (null == t || null == e || !es(t) && !es(e) ? t !== t && e !== e : ii(t, e, n, i, ni, r))
            }

            function ii(t, e, n, i, r, o) {
                var s = Hl(t),
                    a = Hl(e),
                    l = s ? Rt : tl(t),
                    c = a ? Rt : tl(e),
                    u = (l = l == Lt ? Yt : l) == Yt,
                    h = (c = c == Lt ? Yt : c) == Yt,
                    d = l == c;
                if (d && zl(t)) {
                    if (!zl(e))
                        return !1;
                    s = !0,
                        u = !1
                }
                if (d && !u)
                    return o || (o = new Ze),
                        s || Zl(t) ? Rr(t, e, n, i, r, o) : Mr(t, e, l, n, i, r, o);
                if (!(n & ct)) {
                    var f = u && Hs.call(t, "__wrapped__"),
                        p = h && Hs.call(e, "__wrapped__");
                    if (f || p) {
                        var g = f ? t.value() : t,
                            _ = p ? e.value() : e;
                        return o || (o = new Ze),
                            r(g, _, n, i, o)
                    }
                }
                return !!d && (o || (o = new Ze),
                    qr(t, e, n, i, r, o))
            }

            function ri(t, e, n, i) {
                var r = n.length,
                    o = r,
                    s = !i;
                if (null == t)
                    return !o;
                for (t = Ls(t); r--;) {
                    var a = n[r];
                    if (s && a[2] ? a[1] !== t[a[0]] : !(a[0] in t))
                        return !1
                }
                for (; ++r < o;) {
                    var l = (a = n[r])[0],
                        c = t[l],
                        u = a[1];
                    if (s && a[2]) {
                        if (c === J && !(l in t))
                            return !1
                    } else {
                        var h = new Ze;
                        if (i)
                            var d = i(c, u, l, t, e, h);
                        if (!(d === J ? ni(u, c, ct | ut, i, h) : d))
                            return !1
                    }
                }
                return !0
            }

            function oi(t) {
                return !(!ts(t) || lo(t)) && (Zo(t) ? Xs : Ue).test(Eo(t))
            }

            function si(t) {
                return "function" == typeof t ? t : null == t ? Es : "object" == typeof t ? Hl(t) ? di(t[0], t[1]) : hi(t) : Cs(t)
            }

            function ai(t) {
                if (!co(t))
                    return va(t);
                var e = [];
                for (var n in Ls(t))
                    Hs.call(t, n) && "constructor" != n && e.push(n);
                return e
            }

            function li(t) {
                if (!ts(t))
                    return po(t);
                var e = co(t),
                    n = [];
                for (var i in t)
                    ("constructor" != i || !e && Hs.call(t, i)) && n.push(i);
                return n
            }

            function ci(t, e) {
                return t < e
            }

            function ui(t, e) {
                var n = -1,
                    i = Ko(t) ? As(t.length) : [];
                return Fa(t, function (t, r, o) {
                        i[++n] = e(t, r, o)
                    }),
                    i
            }

            function hi(t) {
                var e = zr(t);
                return 1 == e.length && e[0][2] ? ho(e[0][0], e[0][1]) : function (n) {
                    return n === t || ri(n, t, e)
                }
            }

            function di(t, e) {
                return oo(t) && uo(e) ? ho(xo(t), e) : function (n) {
                    var i = fs(n, t);
                    return i === J && i === e ? ps(n, t) : ni(e, i, ct | ut)
                }
            }

            function fi(t, e, n, i, r) {
                t !== e && Ha(e, function (o, s) {
                    if (ts(o))
                        r || (r = new Ze),
                        pi(t, e, s, n, fi, i, r);
                    else {
                        var a = i ? i(t[s], o, s + "", t, e, r) : J;
                        a === J && (a = o),
                            nn(t, s, a)
                    }
                }, _s)
            }

            function pi(t, e, n, i, r, o, s) {
                var a = t[n],
                    l = e[n],
                    c = s.get(l);
                if (c)
                    nn(t, n, c);
                else {
                    var u = o ? o(a, l, n + "", t, e, s) : J,
                        h = u === J;
                    if (h) {
                        var d = Hl(l),
                            f = !d && zl(l),
                            p = !d && !f && Zl(l);
                        u = l,
                            d || f || p ? Hl(a) ? u = a : Go(a) ? u = sr(a) : f ? (h = !1,
                                u = Ki(l, !0)) : p ? (h = !1,
                                u = er(l, !0)) : u = [] : is(l) || Vl(l) ? (u = a,
                                Vl(a) ? u = hs(a) : (!ts(a) || i && Zo(a)) && (u = Jr(l))) : h = !1
                    }
                    h && (s.set(l, u),
                            r(u, l, i, o, s),
                            s.delete(l)),
                        nn(t, n, u)
                }
            }

            function gi(t, e) {
                var n = t.length;
                if (n)
                    return e += e < 0 ? n : 0,
                        io(e, n) ? t[e] : J
            }

            function _i(t, e, n) {
                var i = -1;
                return e = u(e.length ? e : [Es], A(Hr())),
                    O(ui(t, function (t, n, r) {
                        return {
                            criteria: u(e, function (e) {
                                return e(t)
                            }),
                            index: ++i,
                            value: t
                        }
                    }), function (t, e) {
                        return ir(t, e, n)
                    })
            }

            function yi(t, e) {
                return vi(t, e, function (e, n) {
                    return ps(t, n)
                })
            }

            function vi(t, e, n) {
                for (var i = -1, r = e.length, o = {}; ++i < r;) {
                    var s = e[i],
                        a = Wn(t, s);
                    n(a, s) && Si(o, zi(s, t), a)
                }
                return o
            }

            function mi(t) {
                return function (e) {
                    return Wn(e, t)
                }
            }

            function bi(t, e, n, i) {
                var r = i ? b : m,
                    o = -1,
                    s = e.length,
                    a = t;
                for (t === e && (e = sr(e)),
                    n && (a = u(t, A(n))); ++o < s;)
                    for (var l = 0, c = e[o], h = n ? n(c) : c;
                        (l = r(a, h, l, i)) > -1;)
                        a !== t && ra.call(a, l, 1),
                        ra.call(t, l, 1);
                return t
            }

            function wi(t, e) {
                for (var n = t ? e.length : 0, i = n - 1; n--;) {
                    var r = e[n];
                    if (n == i || r !== o) {
                        var o = r;
                        io(r) ? ra.call(t, r, 1) : qi(t, r)
                    }
                }
                return t
            }

            function xi(t, e) {
                return t + fa(Ea() * (e - t + 1))
            }

            function Ei(t, e, n, i) {
                for (var r = -1, o = ma(da((e - t) / (n || 1)), 0), s = As(o); o--;)
                    s[i ? o : ++r] = t,
                    t += n;
                return s
            }

            function ki(t, e) {
                var n = "";
                if (!t || e < 1 || e > St)
                    return n;
                do {
                    e % 2 && (n += t),
                        (e = fa(e / 2)) && (t += t)
                } while (e);
                return n
            }

            function Ti(t, e) {
                return rl(_o(t, e, Es), t + "")
            }

            function Oi(t) {
                return Je(vs(t))
            }

            function Ci(t, e) {
                var n = vs(t);
                return wo(n, fn(e, 0, n.length))
            }

            function Si(t, e, n, i) {
                if (!ts(t))
                    return t;
                for (var r = -1, o = (e = zi(e, t)).length, s = o - 1, a = t; null != a && ++r < o;) {
                    var l = xo(e[r]),
                        c = n;
                    if (r != s) {
                        var u = a[l];
                        (c = i ? i(u, l, a) : J) === J && (c = ts(u) ? u : io(e[r + 1]) ? [] : {})
                    }
                    rn(a, l, c),
                        a = a[l]
                }
                return t
            }

            function ji(t) {
                return wo(vs(t))
            }

            function Ai(t, e, n) {
                var i = -1,
                    r = t.length;
                e < 0 && (e = -e > r ? 0 : r + e),
                    (n = n > r ? r : n) < 0 && (n += r),
                    r = e > n ? 0 : n - e >>> 0,
                    e >>>= 0;
                for (var o = As(r); ++i < r;)
                    o[i] = t[i + e];
                return o
            }

            function Pi(t, e) {
                var n;
                return Fa(t, function (t, i, r) {
                    return !(n = e(t, i, r))
                }), !!n
            }

            function Di(t, e, n) {
                var i = 0,
                    r = null == t ? i : t.length;
                if ("number" == typeof e && e === e && r <= It) {
                    for (; i < r;) {
                        var o = i + r >>> 1,
                            s = t[o];
                        null !== s && !os(s) && (n ? s <= e : s < e) ? i = o + 1 : r = o
                    }
                    return r
                }
                return Ii(t, e, Es, n)
            }

            function Ii(t, e, n, i) {
                e = n(e);
                for (var r = 0, o = null == t ? 0 : t.length, s = e !== e, a = null === e, l = os(e), c = e === J; r < o;) {
                    var u = fa((r + o) / 2),
                        h = n(t[u]),
                        d = h !== J,
                        f = null === h,
                        p = h === h,
                        g = os(h);
                    if (s)
                        var _ = i || p;
                    else
                        _ = c ? p && (i || d) : a ? p && d && (i || !f) : l ? p && d && !f && (i || !g) : !f && !g && (i ? h <= e : h < e);
                    _ ? r = u + 1 : o = u
                }
                return ba(o, Dt)
            }

            function Ni(t, e) {
                for (var n = -1, i = t.length, r = 0, o = []; ++n < i;) {
                    var s = t[n],
                        a = e ? e(s) : s;
                    if (!n || !Yo(a, l)) {
                        var l = a;
                        o[r++] = 0 === s ? 0 : s
                    }
                }
                return o
            }

            function Li(t) {
                return "number" == typeof t ? t : os(t) ? At : +t
            }

            function Ri(t) {
                if ("string" == typeof t)
                    return t;
                if (Hl(t))
                    return u(t, Ri) + "";
                if (os(t))
                    return $a ? $a.call(t) : "";
                var e = t + "";
                return "0" == e && 1 / t == -Ct ? "-0" : e
            }

            function Mi(t, e, n) {
                var i = -1,
                    r = l,
                    o = t.length,
                    s = !0,
                    a = [],
                    u = a;
                if (n)
                    s = !1,
                    r = c;
                else if (o >= tt) {
                    var h = e ? null : Xa(t);
                    if (h)
                        return H(h);
                    s = !1,
                        r = D,
                        u = new Xe
                } else
                    u = e ? [] : a;
                t: for (; ++i < o;) {
                    var d = t[i],
                        f = e ? e(d) : d;
                    if (d = n || 0 !== d ? d : 0,
                        s && f === f) {
                        for (var p = u.length; p--;)
                            if (u[p] === f)
                                continue t;
                        e && u.push(f),
                            a.push(d)
                    } else
                        r(u, f, n) || (u !== a && u.push(f),
                            a.push(d))
                }
                return a
            }

            function qi(t, e) {
                return e = zi(e, t),
                    null == (t = yo(t, e)) || delete t[xo(Ao(e))]
            }

            function Bi(t, e, n, i) {
                return Si(t, e, n(Wn(t, e)), i)
            }

            function $i(t, e, n, i) {
                for (var r = t.length, o = i ? r : -1;
                    (i ? o-- : ++o < r) && e(t[o], o, t);)
                ;
                return n ? Ai(t, i ? 0 : o, i ? o + 1 : r) : Ai(t, i ? o + 1 : 0, i ? r : o)
            }

            function Ui(t, e) {
                var n = t;
                return n instanceof Le && (n = n.value()),
                    d(e, function (t, e) {
                        return e.func.apply(e.thisArg, h([t], e.args))
                    }, n)
            }

            function Fi(t, e, n) {
                var i = t.length;
                if (i < 2)
                    return i ? Mi(t[0]) : [];
                for (var r = -1, o = As(i); ++r < i;)
                    for (var s = t[r], a = -1; ++a < i;)
                        a != r && (o[r] = xn(o[r] || s, t[a], e, n));
                return Mi(Pn(o, 1), e, n)
            }

            function Vi(t, e, n) {
                for (var i = -1, r = t.length, o = e.length, s = {}; ++i < r;) {
                    var a = i < o ? e[i] : J;
                    n(s, t[i], a)
                }
                return s
            }

            function Hi(t) {
                return Go(t) ? t : []
            }

            function Wi(t) {
                return "function" == typeof t ? t : Es
            }

            function zi(t, e) {
                return Hl(t) ? t : oo(t, e) ? [t] : ol(ds(t))
            }

            function Yi(t, e, n) {
                var i = t.length;
                return n = n === J ? i : n, !e && n >= i ? t : Ai(t, e, n)
            }

            function Ki(t, e) {
                if (e)
                    return t.slice();
                var n = t.length,
                    i = ta ? ta(n) : new t.constructor(n);
                return t.copy(i),
                    i
            }

            function Gi(t) {
                var e = new t.constructor(t.byteLength);
                return new Js(e).set(new Js(t)),
                    e
            }

            function Xi(t, e) {
                var n = e ? Gi(t.buffer) : t.buffer;
                return new t.constructor(n, t.byteOffset, t.byteLength)
            }

            function Zi(e, n, i) {
                return d(n ? i(U(e), st) : U(e), t, new e.constructor)
            }

            function Qi(t) {
                var e = new t.constructor(t.source, qe.exec(t));
                return e.lastIndex = t.lastIndex,
                    e
            }

            function Ji(t, n, i) {
                return d(n ? i(H(t), st) : H(t), e, new t.constructor)
            }

            function tr(t) {
                return Ba ? Ls(Ba.call(t)) : {}
            }

            function er(t, e) {
                var n = e ? Gi(t.buffer) : t.buffer;
                return new t.constructor(n, t.byteOffset, t.length)
            }

            function nr(t, e) {
                if (t !== e) {
                    var n = t !== J,
                        i = null === t,
                        r = t === t,
                        o = os(t),
                        s = e !== J,
                        a = null === e,
                        l = e === e,
                        c = os(e);
                    if (!a && !c && !o && t > e || o && s && l && !a && !c || i && s && l || !n && l || !r)
                        return 1;
                    if (!i && !o && !c && t < e || c && n && r && !i && !o || a && n && r || !s && r || !l)
                        return -1
                }
                return 0
            }

            function ir(t, e, n) {
                for (var i = -1, r = t.criteria, o = e.criteria, s = r.length, a = n.length; ++i < s;) {
                    var l = nr(r[i], o[i]);
                    if (l)
                        return i >= a ? l : l * ("desc" == n[i] ? -1 : 1)
                }
                return t.index - e.index
            }

            function rr(t, e, n, i) {
                for (var r = -1, o = t.length, s = n.length, a = -1, l = e.length, c = ma(o - s, 0), u = As(l + c), h = !i; ++a < l;)
                    u[a] = e[a];
                for (; ++r < s;)
                    (h || r < o) && (u[n[r]] = t[r]);
                for (; c--;)
                    u[a++] = t[r++];
                return u
            }

            function or(t, e, n, i) {
                for (var r = -1, o = t.length, s = -1, a = n.length, l = -1, c = e.length, u = ma(o - a, 0), h = As(u + c), d = !i; ++r < u;)
                    h[r] = t[r];
                for (var f = r; ++l < c;)
                    h[f + l] = e[l];
                for (; ++s < a;)
                    (d || r < o) && (h[f + n[s]] = t[r++]);
                return h
            }

            function sr(t, e) {
                var n = -1,
                    i = t.length;
                for (e || (e = As(i)); ++n < i;)
                    e[n] = t[n];
                return e
            }

            function ar(t, e, n, i) {
                var r = !n;
                n || (n = {});
                for (var o = -1, s = e.length; ++o < s;) {
                    var a = e[o],
                        l = i ? i(n[a], t[a], a, n, t) : J;
                    l === J && (l = t[a]),
                        r ? hn(n, a, l) : rn(n, a, l)
                }
                return n
            }

            function lr(t, e) {
                return ar(t, Qa(t), e)
            }

            function cr(t, e) {
                return ar(t, Ja(t), e)
            }

            function ur(t, e) {
                return function (n, r) {
                    var o = Hl(n) ? i : sn,
                        s = e ? e() : {};
                    return o(n, t, Hr(r, 2), s)
                }
            }

            function hr(t) {
                return Ti(function (e, n) {
                    var i = -1,
                        r = n.length,
                        o = r > 1 ? n[r - 1] : J,
                        s = r > 2 ? n[2] : J;
                    for (o = t.length > 3 && "function" == typeof o ? (r--,
                            o) : J,
                        s && ro(n[0], n[1], s) && (o = r < 3 ? J : o,
                            r = 1),
                        e = Ls(e); ++i < r;) {
                        var a = n[i];
                        a && t(e, a, i, o)
                    }
                    return e
                })
            }

            function dr(t, e) {
                return function (n, i) {
                    if (null == n)
                        return n;
                    if (!Ko(n))
                        return t(n, i);
                    for (var r = n.length, o = e ? r : -1, s = Ls(n);
                        (e ? o-- : ++o < r) && !1 !== i(s[o], o, s);)
                    ;
                    return n
                }
            }

            function fr(t) {
                return function (e, n, i) {
                    for (var r = -1, o = Ls(e), s = i(e), a = s.length; a--;) {
                        var l = s[t ? a : ++r];
                        if (!1 === n(o[l], l, o))
                            break
                    }
                    return e
                }
            }

            function pr(t, e, n) {
                function i() {
                    return (this && this !== Cn && this instanceof i ? o : t).apply(r ? n : this, arguments)
                }
                var r = e & ht,
                    o = yr(t);
                return i
            }

            function gr(t) {
                return function (e) {
                    var n = q(e = ds(e)) ? G(e) : J,
                        i = n ? n[0] : e.charAt(0),
                        r = n ? Yi(n, 1).join("") : e.slice(1);
                    return i[t]() + r
                }
            }

            function _r(t) {
                return function (e) {
                    return d(ws(bs(e).replace(cn, "")), t, "")
                }
            }

            function yr(t) {
                return function () {
                    var e = arguments;
                    switch (e.length) {
                        case 0:
                            return new t;
                        case 1:
                            return new t(e[0]);
                        case 2:
                            return new t(e[0], e[1]);
                        case 3:
                            return new t(e[0], e[1], e[2]);
                        case 4:
                            return new t(e[0], e[1], e[2], e[3]);
                        case 5:
                            return new t(e[0], e[1], e[2], e[3], e[4]);
                        case 6:
                            return new t(e[0], e[1], e[2], e[3], e[4], e[5]);
                        case 7:
                            return new t(e[0], e[1], e[2], e[3], e[4], e[5], e[6])
                    }
                    var n = Ua(t.prototype),
                        i = t.apply(n, e);
                    return ts(i) ? i : n
                }
            }

            function vr(t, e, i) {
                function r() {
                    for (var s = arguments.length, a = As(s), l = s, c = Vr(r); l--;)
                        a[l] = arguments[l];
                    var u = s < 3 && a[0] !== c && a[s - 1] !== c ? [] : V(a, c);
                    return (s -= u.length) < i ? jr(t, e, wr, r.placeholder, J, a, u, J, J, i - s) : n(this && this !== Cn && this instanceof r ? o : t, this, a)
                }
                var o = yr(t);
                return r
            }

            function mr(t) {
                return function (e, n, i) {
                    var r = Ls(e);
                    if (!Ko(e)) {
                        var o = Hr(n, 3);
                        e = gs(e),
                            n = function (t) {
                                return o(r[t], t, r)
                            }
                    }
                    var s = t(e, n, i);
                    return s > -1 ? r[o ? e[s] : s] : J
                }
            }

            function br(t) {
                return Br(function (e) {
                    var n = e.length,
                        i = n,
                        r = Z.prototype.thru;
                    for (t && e.reverse(); i--;) {
                        var o = e[i];
                        if ("function" != typeof o)
                            throw new qs(nt);
                        if (r && !s && "wrapper" == Fr(o))
                            var s = new Z([], !0)
                    }
                    for (i = s ? i : n; ++i < n;) {
                        var a = Fr(o = e[i]),
                            l = "wrapper" == a ? Za(o) : J;
                        s = l && ao(l[0]) && l[1] == (vt | pt | _t | mt) && !l[4].length && 1 == l[9] ? s[Fr(l[0])].apply(s, l[3]) : 1 == o.length && ao(o) ? s[a]() : s.thru(o)
                    }
                    return function () {
                        var t = arguments,
                            i = t[0];
                        if (s && 1 == t.length && Hl(i))
                            return s.plant(i).value();
                        for (var r = 0, o = n ? e[r].apply(this, t) : i; ++r < n;)
                            o = e[r].call(this, o);
                        return o
                    }
                })
            }

            function wr(t, e, n, i, r, o, s, a, l, c) {
                function u() {
                    for (var y = arguments.length, v = As(y), m = y; m--;)
                        v[m] = arguments[m];
                    if (p)
                        var b = Vr(u),
                            w = L(v, b);
                    if (i && (v = rr(v, i, r, p)),
                        o && (v = or(v, o, s, p)),
                        y -= w,
                        p && y < c) {
                        var x = V(v, b);
                        return jr(t, e, wr, u.placeholder, n, v, x, a, l, c - y)
                    }
                    var E = d ? n : this,
                        k = f ? E[t] : t;
                    return y = v.length,
                        a ? v = vo(v, a) : g && y > 1 && v.reverse(),
                        h && l < y && (v.length = l),
                        this && this !== Cn && this instanceof u && (k = _ || yr(k)),
                        k.apply(E, v)
                }
                var h = e & vt,
                    d = e & ht,
                    f = e & dt,
                    p = e & (pt | gt),
                    g = e & bt,
                    _ = f ? J : yr(t);
                return u
            }

            function xr(t, e) {
                return function (n, i) {
                    return Jn(n, t, e(i), {})
                }
            }

            function Er(t, e) {
                return function (n, i) {
                    var r;
                    if (n === J && i === J)
                        return e;
                    if (n !== J && (r = n),
                        i !== J) {
                        if (r === J)
                            return i;
                        "string" == typeof n || "string" == typeof i ? (n = Ri(n),
                                i = Ri(i)) : (n = Li(n),
                                i = Li(i)),
                            r = t(n, i)
                    }
                    return r
                }
            }

            function kr(t) {
                return Br(function (e) {
                    return e = u(e, A(Hr())),
                        Ti(function (i) {
                            var r = this;
                            return t(e, function (t) {
                                return n(t, r, i)
                            })
                        })
                })
            }

            function Tr(t, e) {
                var n = (e = e === J ? " " : Ri(e)).length;
                if (n < 2)
                    return n ? ki(e, t) : e;
                var i = ki(e, da(t / K(e)));
                return q(e) ? Yi(G(i), 0, t).join("") : i.slice(0, t)
            }

            function Or(t, e, i, r) {
                function o() {
                    for (var e = -1, l = arguments.length, c = -1, u = r.length, h = As(u + l), d = this && this !== Cn && this instanceof o ? a : t; ++c < u;)
                        h[c] = r[c];
                    for (; l--;)
                        h[c++] = arguments[++e];
                    return n(d, s ? i : this, h)
                }
                var s = e & ht,
                    a = yr(t);
                return o
            }

            function Cr(t) {
                return function (e, n, i) {
                    return i && "number" != typeof i && ro(e, n, i) && (n = i = J),
                        e = as(e),
                        n === J ? (n = e,
                            e = 0) : n = as(n),
                        i = i === J ? e < n ? 1 : -1 : as(i),
                        Ei(e, n, i, t)
                }
            }

            function Sr(t) {
                return function (e, n) {
                    return "string" == typeof e && "string" == typeof n || (e = us(e),
                            n = us(n)),
                        t(e, n)
                }
            }

            function jr(t, e, n, i, r, o, s, a, l, c) {
                var u = e & pt,
                    h = u ? s : J,
                    d = u ? J : s,
                    f = u ? o : J,
                    p = u ? J : o;
                e |= u ? _t : yt,
                    (e &= ~(u ? yt : _t)) & ft || (e &= ~(ht | dt));
                var g = [t, e, r, f, h, p, d, a, l, c],
                    _ = n.apply(J, g);
                return ao(t) && nl(_, g),
                    _.placeholder = i,
                    mo(_, t, e)
            }

            function Ar(t) {
                var e = Ns[t];
                return function (t, n) {
                    if (t = us(t),
                        n = null == n ? 0 : ba(ls(n), 292)) {
                        var i = (ds(t) + "e").split("e");
                        return +((i = (ds(e(i[0] + "e" + (+i[1] + n))) + "e").split("e"))[0] + "e" + (+i[1] - n))
                    }
                    return e(t)
                }
            }

            function Pr(t) {
                return function (e) {
                    var n = tl(e);
                    return n == Ht ? U(e) : n == Xt ? W(e) : j(e, t(e))
                }
            }

            function Dr(t, e, n, i, r, o, s, a) {
                var l = e & dt;
                if (!l && "function" != typeof t)
                    throw new qs(nt);
                var c = i ? i.length : 0;
                if (c || (e &= ~(_t | yt),
                        i = r = J),
                    s = s === J ? s : ma(ls(s), 0),
                    a = a === J ? a : ls(a),
                    c -= r ? r.length : 0,
                    e & yt) {
                    var u = i,
                        h = r;
                    i = r = J
                }
                var d = l ? J : Za(t),
                    f = [t, e, n, i, r, u, h, o, s, a];
                if (d && fo(f, d),
                    t = f[0],
                    e = f[1],
                    n = f[2],
                    i = f[3],
                    r = f[4], !(a = f[9] = f[9] === J ? l ? 0 : t.length : ma(f[9] - c, 0)) && e & (pt | gt) && (e &= ~(pt | gt)),
                    e && e != ht)
                    p = e == pt || e == gt ? vr(t, e, a) : e != _t && e != (ht | _t) || r.length ? wr.apply(J, f) : Or(t, e, n, i);
                else
                    var p = pr(t, e, n);
                return mo((d ? za : nl)(p, f), t, e)
            }

            function Ir(t, e, n, i) {
                return t === J || Yo(t, Us[n]) && !Hs.call(i, n) ? e : t
            }

            function Nr(t, e, n, i, r, o) {
                return ts(t) && ts(e) && (o.set(e, t),
                        fi(t, e, J, Nr, o),
                        o.delete(e)),
                    t
            }

            function Lr(t) {
                return is(t) ? J : t
            }

            function Rr(t, e, n, i, r, o) {
                var s = n & ct,
                    a = t.length,
                    l = e.length;
                if (a != l && !(s && l > a))
                    return !1;
                var c = o.get(t);
                if (c && o.get(e))
                    return c == e;
                var u = -1,
                    h = !0,
                    d = n & ut ? new Xe : J;
                for (o.set(t, e),
                    o.set(e, t); ++u < a;) {
                    var f = t[u],
                        g = e[u];
                    if (i)
                        var _ = s ? i(g, f, u, e, t, o) : i(f, g, u, t, e, o);
                    if (_ !== J) {
                        if (_)
                            continue;
                        h = !1;
                        break
                    }
                    if (d) {
                        if (!p(e, function (t, e) {
                                if (!D(d, e) && (f === t || r(f, t, n, i, o)))
                                    return d.push(e)
                            })) {
                            h = !1;
                            break
                        }
                    } else if (f !== g && !r(f, g, n, i, o)) {
                        h = !1;
                        break
                    }
                }
                return o.delete(t),
                    o.delete(e),
                    h
            }

            function Mr(t, e, n, i, r, o, s) {
                switch (n) {
                    case ie:
                        if (t.byteLength != e.byteLength || t.byteOffset != e.byteOffset)
                            return !1;
                        t = t.buffer,
                            e = e.buffer;
                    case ne:
                        return !(t.byteLength != e.byteLength || !o(new Js(t), new Js(e)));
                    case qt:
                    case Bt:
                    case Wt:
                        return Yo(+t, +e);
                    case Ut:
                        return t.name == e.name && t.message == e.message;
                    case Gt:
                    case Zt:
                        return t == e + "";
                    case Ht:
                        var a = U;
                    case Xt:
                        var l = i & ct;
                        if (a || (a = H),
                            t.size != e.size && !l)
                            return !1;
                        var c = s.get(t);
                        if (c)
                            return c == e;
                        i |= ut,
                            s.set(t, e);
                        var u = Rr(a(t), a(e), i, r, o, s);
                        return s.delete(t),
                            u;
                    case Qt:
                        if (Ba)
                            return Ba.call(t) == Ba.call(e)
                }
                return !1
            }

            function qr(t, e, n, i, r, o) {
                var s = n & ct,
                    a = $r(t),
                    l = a.length;
                if (l != $r(e).length && !s)
                    return !1;
                for (var c = l; c--;) {
                    var u = a[c];
                    if (!(s ? u in e : Hs.call(e, u)))
                        return !1
                }
                var h = o.get(t);
                if (h && o.get(e))
                    return h == e;
                var d = !0;
                o.set(t, e),
                    o.set(e, t);
                for (var f = s; ++c < l;) {
                    var p = t[u = a[c]],
                        g = e[u];
                    if (i)
                        var _ = s ? i(g, p, u, e, t, o) : i(p, g, u, t, e, o);
                    if (!(_ === J ? p === g || r(p, g, n, i, o) : _)) {
                        d = !1;
                        break
                    }
                    f || (f = "constructor" == u)
                }
                if (d && !f) {
                    var y = t.constructor,
                        v = e.constructor;
                    y != v && "constructor" in t && "constructor" in e && !("function" == typeof y && y instanceof y && "function" == typeof v && v instanceof v) && (d = !1)
                }
                return o.delete(t),
                    o.delete(e),
                    d
            }

            function Br(t) {
                return rl(_o(t, J, So), t + "")
            }

            function $r(t) {
                return zn(t, gs, Qa)
            }

            function Ur(t) {
                return zn(t, _s, Ja)
            }

            function Fr(t) {
                for (var e = t.name + "", n = Da[e], i = Hs.call(Da, e) ? n.length : 0; i--;) {
                    var r = n[i],
                        o = r.func;
                    if (null == o || o == t)
                        return r.name
                }
                return e
            }

            function Vr(t) {
                return (Hs.call(z, "placeholder") ? z : t).placeholder
            }

            function Hr() {
                var t = z.iteratee || ks;
                return t = t === ks ? si : t,
                    arguments.length ? t(arguments[0], arguments[1]) : t
            }

            function Wr(t, e) {
                var n = t.__data__;
                return so(e) ? n["string" == typeof e ? "string" : "hash"] : n.map
            }

            function zr(t) {
                for (var e = gs(t), n = e.length; n--;) {
                    var i = e[n],
                        r = t[i];
                    e[n] = [i, r, uo(r)]
                }
                return e
            }

            function Yr(t, e) {
                var n = M(t, e);
                return oi(n) ? n : J
            }

            function Kr(t) {
                var e = Hs.call(t, aa),
                    n = t[aa];
                try {
                    t[aa] = J;
                    var i = !0
                } catch (t) {}
                var r = Ys.call(t);
                return i && (e ? t[aa] = n : delete t[aa]),
                    r
            }

            function Gr(t, e, n) {
                for (var i = -1, r = n.length; ++i < r;) {
                    var o = n[i],
                        s = o.size;
                    switch (o.type) {
                        case "drop":
                            t += s;
                            break;
                        case "dropRight":
                            e -= s;
                            break;
                        case "take":
                            e = ba(e, t + s);
                            break;
                        case "takeRight":
                            t = ma(t, e - s)
                    }
                }
                return {
                    start: t,
                    end: e
                }
            }

            function Xr(t) {
                var e = t.match(Ie);
                return e ? e[1].split(Ne) : []
            }

            function Zr(t, e, n) {
                for (var i = -1, r = (e = zi(e, t)).length, o = !1; ++i < r;) {
                    var s = xo(e[i]);
                    if (!(o = null != t && n(t, s)))
                        break;
                    t = t[s]
                }
                return o || ++i != r ? o : !!(r = null == t ? 0 : t.length) && Jo(r) && io(s, r) && (Hl(t) || Vl(t))
            }

            function Qr(t) {
                var e = t.length,
                    n = t.constructor(e);
                return e && "string" == typeof t[0] && Hs.call(t, "index") && (n.index = t.index,
                        n.input = t.input),
                    n
            }

            function Jr(t) {
                return "function" != typeof t.constructor || co(t) ? {} : Ua(ea(t))
            }

            function to(t, e, n, i) {
                var r = t.constructor;
                switch (e) {
                    case ne:
                        return Gi(t);
                    case qt:
                    case Bt:
                        return new r(+t);
                    case ie:
                        return Xi(t, i);
                    case re:
                    case oe:
                    case se:
                    case ae:
                    case le:
                    case ce:
                    case ue:
                    case he:
                    case de:
                        return er(t, i);
                    case Ht:
                        return Zi(t, i, n);
                    case Wt:
                    case Zt:
                        return new r(t);
                    case Gt:
                        return Qi(t);
                    case Xt:
                        return Ji(t, i, n);
                    case Qt:
                        return tr(t)
                }
            }

            function eo(t, e) {
                var n = e.length;
                if (!n)
                    return t;
                var i = n - 1;
                return e[i] = (n > 1 ? "& " : "") + e[i],
                    e = e.join(n > 2 ? ", " : " "),
                    t.replace(De, "{\n/* [wrapped with " + e + "] */\n")
            }

            function no(t) {
                return Hl(t) || Vl(t) || !!(oa && t && t[oa])
            }

            function io(t, e) {
                return !!(e = null == e ? St : e) && ("number" == typeof t || Ve.test(t)) && t > -1 && t % 1 == 0 && t < e
            }

            function ro(t, e, n) {
                if (!ts(n))
                    return !1;
                var i = typeof e;
                return !!("number" == i ? Ko(n) && io(e, n.length) : "string" == i && e in n) && Yo(n[e], t)
            }

            function oo(t, e) {
                if (Hl(t))
                    return !1;
                var n = typeof t;
                return !("number" != n && "symbol" != n && "boolean" != n && null != t && !os(t)) || ke.test(t) || !Ee.test(t) || null != e && t in Ls(e)
            }

            function so(t) {
                var e = typeof t;
                return "string" == e || "number" == e || "symbol" == e || "boolean" == e ? "__proto__" !== t : null === t
            }

            function ao(t) {
                var e = Fr(t),
                    n = z[e];
                if ("function" != typeof n || !(e in Le.prototype))
                    return !1;
                if (t === n)
                    return !0;
                var i = Za(n);
                return !!i && t === i[0]
            }

            function lo(t) {
                return !!zs && zs in t
            }

            function co(t) {
                var e = t && t.constructor;
                return t === ("function" == typeof e && e.prototype || Us)
            }

            function uo(t) {
                return t === t && !ts(t)
            }

            function ho(t, e) {
                return function (n) {
                    return null != n && n[t] === e && (e !== J || t in Ls(n))
                }
            }

            function fo(t, e) {
                var n = t[1],
                    i = e[1],
                    r = n | i,
                    o = r < (ht | dt | vt),
                    s = i == vt && n == pt || i == vt && n == mt && t[7].length <= e[8] || i == (vt | mt) && e[7].length <= e[8] && n == pt;
                if (!o && !s)
                    return t;
                i & ht && (t[2] = e[2],
                    r |= n & ht ? 0 : ft);
                var a = e[3];
                if (a) {
                    var l = t[3];
                    t[3] = l ? rr(l, a, e[4]) : a,
                        t[4] = l ? V(t[3], ot) : e[4]
                }
                return (a = e[5]) && (l = t[5],
                        t[5] = l ? or(l, a, e[6]) : a,
                        t[6] = l ? V(t[5], ot) : e[6]),
                    (a = e[7]) && (t[7] = a),
                    i & vt && (t[8] = null == t[8] ? e[8] : ba(t[8], e[8])),
                    null == t[9] && (t[9] = e[9]),
                    t[0] = e[0],
                    t[1] = r,
                    t
            }

            function po(t) {
                var e = [];
                if (null != t)
                    for (var n in Ls(t))
                        e.push(n);
                return e
            }

            function go(t) {
                return Ys.call(t)
            }

            function _o(t, e, i) {
                return e = ma(e === J ? t.length - 1 : e, 0),
                    function () {
                        for (var r = arguments, o = -1, s = ma(r.length - e, 0), a = As(s); ++o < s;)
                            a[o] = r[e + o];
                        o = -1;
                        for (var l = As(e + 1); ++o < e;)
                            l[o] = r[o];
                        return l[e] = i(a),
                            n(t, this, l)
                    }
            }

            function yo(t, e) {
                return e.length < 2 ? t : Wn(t, Ai(e, 0, -1))
            }

            function vo(t, e) {
                for (var n = t.length, i = ba(e.length, n), r = sr(t); i--;) {
                    var o = e[i];
                    t[i] = io(o, n) ? r[o] : J
                }
                return t
            }

            function mo(t, e, n) {
                var i = e + "";
                return rl(t, eo(i, ko(Xr(i), n)))
            }

            function bo(t) {
                var e = 0,
                    n = 0;
                return function () {
                    var i = wa(),
                        r = kt - (i - n);
                    if (n = i,
                        r > 0) {
                        if (++e >= Et)
                            return arguments[0]
                    } else
                        e = 0;
                    return t.apply(J, arguments)
                }
            }

            function wo(t, e) {
                var n = -1,
                    i = t.length,
                    r = i - 1;
                for (e = e === J ? i : e; ++n < e;) {
                    var o = xi(n, r),
                        s = t[o];
                    t[o] = t[n],
                        t[n] = s
                }
                return t.length = e,
                    t
            }

            function xo(t) {
                if ("string" == typeof t || os(t))
                    return t;
                var e = t + "";
                return "0" == e && 1 / t == -Ct ? "-0" : e
            }

            function Eo(t) {
                if (null != t) {
                    try {
                        return Vs.call(t)
                    } catch (t) {}
                    try {
                        return t + ""
                    } catch (t) {}
                }
                return ""
            }

            function ko(t, e) {
                return r(Nt, function (n) {
                        var i = "_." + n[0];
                        e & n[1] && !l(t, i) && t.push(i)
                    }),
                    t.sort()
            }

            function To(t) {
                if (t instanceof Le)
                    return t.clone();
                var e = new Z(t.__wrapped__, t.__chain__);
                return e.__actions__ = sr(t.__actions__),
                    e.__index__ = t.__index__,
                    e.__values__ = t.__values__,
                    e
            }

            function Oo(t, e, n) {
                var i = null == t ? 0 : t.length;
                if (!i)
                    return -1;
                var r = null == n ? 0 : ls(n);
                return r < 0 && (r = ma(i + r, 0)),
                    v(t, Hr(e, 3), r)
            }

            function Co(t, e, n) {
                var i = null == t ? 0 : t.length;
                if (!i)
                    return -1;
                var r = i - 1;
                return n !== J && (r = ls(n),
                        r = n < 0 ? ma(i + r, 0) : ba(r, i - 1)),
                    v(t, Hr(e, 3), r, !0)
            }

            function So(t) {
                return (null == t ? 0 : t.length) ? Pn(t, 1) : []
            }

            function jo(t) {
                return t && t.length ? t[0] : J
            }

            function Ao(t) {
                var e = null == t ? 0 : t.length;
                return e ? t[e - 1] : J
            }

            function Po(t, e) {
                return t && t.length && e && e.length ? bi(t, e) : t
            }

            function Do(t) {
                return null == t ? t : ka.call(t)
            }

            function Io(t) {
                if (!t || !t.length)
                    return [];
                var e = 0;
                return t = a(t, function (t) {
                        if (Go(t))
                            return e = ma(t.length, e), !0
                    }),
                    S(e, function (e) {
                        return u(t, E(e))
                    })
            }

            function No(t, e) {
                if (!t || !t.length)
                    return [];
                var i = Io(t);
                return null == e ? i : u(i, function (t) {
                    return n(e, J, t)
                })
            }

            function Lo(t) {
                var e = z(t);
                return e.__chain__ = !0,
                    e
            }

            function Ro(t, e) {
                return e(t)
            }

            function Mo(t, e) {
                return (Hl(t) ? r : Fa)(t, Hr(e, 3))
            }

            function qo(t, e) {
                return (Hl(t) ? o : Va)(t, Hr(e, 3))
            }

            function Bo(t, e) {
                return (Hl(t) ? u : ui)(t, Hr(e, 3))
            }

            function $o(t, e, n) {
                return e = n ? J : e,
                    e = t && null == e ? t.length : e,
                    Dr(t, vt, J, J, J, J, e)
            }

            function Uo(t, e) {
                var n;
                if ("function" != typeof e)
                    throw new qs(nt);
                return t = ls(t),
                    function () {
                        return --t > 0 && (n = e.apply(this, arguments)),
                            t <= 1 && (e = J),
                            n
                    }
            }

            function Fo(t, e, n) {
                var i = Dr(t, pt, J, J, J, J, J, e = n ? J : e);
                return i.placeholder = Fo.placeholder,
                    i
            }

            function Vo(t, e, n) {
                var i = Dr(t, gt, J, J, J, J, J, e = n ? J : e);
                return i.placeholder = Vo.placeholder,
                    i
            }

            function Ho(t, e, n) {
                function i(e) {
                    var n = u,
                        i = h;
                    return u = h = J,
                        _ = e,
                        f = t.apply(i, n)
                }

                function r(t) {
                    return _ = t,
                        p = il(a, e),
                        y ? i(t) : f
                }

                function o(t) {
                    var n = t - _,
                        i = e - (t - g);
                    return v ? ba(i, d - n) : i
                }

                function s(t) {
                    var n = t - g,
                        i = t - _;
                    return g === J || n >= e || n < 0 || v && i >= d
                }

                function a() {
                    var t = Dl();
                    if (s(t))
                        return l(t);
                    p = il(a, o(t))
                }

                function l(t) {
                    return p = J,
                        m && u ? i(t) : (u = h = J,
                            f)
                }

                function c() {
                    var t = Dl(),
                        n = s(t);
                    if (u = arguments,
                        h = this,
                        g = t,
                        n) {
                        if (p === J)
                            return r(g);
                        if (v)
                            return p = il(a, e),
                                i(g)
                    }
                    return p === J && (p = il(a, e)),
                        f
                }
                var u, h, d, f, p, g, _ = 0,
                    y = !1,
                    v = !1,
                    m = !0;
                if ("function" != typeof t)
                    throw new qs(nt);
                return e = us(e) || 0,
                    ts(n) && (y = !!n.leading,
                        d = (v = "maxWait" in n) ? ma(us(n.maxWait) || 0, e) : d,
                        m = "trailing" in n ? !!n.trailing : m),
                    c.cancel = function () {
                        p !== J && Ga(p),
                            _ = 0,
                            u = g = h = p = J
                    },
                    c.flush = function () {
                        return p === J ? f : l(Dl())
                    },
                    c
            }

            function Wo(t, e) {
                if ("function" != typeof t || null != e && "function" != typeof e)
                    throw new qs(nt);
                var n = function () {
                    var i = arguments,
                        r = e ? e.apply(this, i) : i[0],
                        o = n.cache;
                    if (o.has(r))
                        return o.get(r);
                    var s = t.apply(this, i);
                    return n.cache = o.set(r, s) || o,
                        s
                };
                return n.cache = new(Wo.Cache || Ge),
                    n
            }

            function zo(t) {
                if ("function" != typeof t)
                    throw new qs(nt);
                return function () {
                    var e = arguments;
                    switch (e.length) {
                        case 0:
                            return !t.call(this);
                        case 1:
                            return !t.call(this, e[0]);
                        case 2:
                            return !t.call(this, e[0], e[1]);
                        case 3:
                            return !t.call(this, e[0], e[1], e[2])
                    }
                    return !t.apply(this, e)
                }
            }

            function Yo(t, e) {
                return t === e || t !== t && e !== e
            }

            function Ko(t) {
                return null != t && Jo(t.length) && !Zo(t)
            }

            function Go(t) {
                return es(t) && Ko(t)
            }

            function Xo(t) {
                if (!es(t))
                    return !1;
                var e = Yn(t);
                return e == Ut || e == $t || "string" == typeof t.message && "string" == typeof t.name && !is(t)
            }

            function Zo(t) {
                if (!ts(t))
                    return !1;
                var e = Yn(t);
                return e == Ft || e == Vt || e == Mt || e == Kt
            }

            function Qo(t) {
                return "number" == typeof t && t == ls(t)
            }

            function Jo(t) {
                return "number" == typeof t && t > -1 && t % 1 == 0 && t <= St
            }

            function ts(t) {
                var e = typeof t;
                return null != t && ("object" == e || "function" == e)
            }

            function es(t) {
                return null != t && "object" == typeof t
            }

            function ns(t) {
                return "number" == typeof t || es(t) && Yn(t) == Wt
            }

            function is(t) {
                if (!es(t) || Yn(t) != Yt)
                    return !1;
                var e = ea(t);
                if (null === e)
                    return !0;
                var n = Hs.call(e, "constructor") && e.constructor;
                return "function" == typeof n && n instanceof n && Vs.call(n) == Ks
            }

            function rs(t) {
                return "string" == typeof t || !Hl(t) && es(t) && Yn(t) == Zt
            }

            function os(t) {
                return "symbol" == typeof t || es(t) && Yn(t) == Qt
            }

            function ss(t) {
                if (!t)
                    return [];
                if (Ko(t))
                    return rs(t) ? G(t) : sr(t);
                if (sa && t[sa])
                    return $(t[sa]());
                var e = tl(t);
                return (e == Ht ? U : e == Xt ? H : vs)(t)
            }

            function as(t) {
                return t ? (t = us(t)) === Ct || t === -Ct ? (t < 0 ? -1 : 1) * jt : t === t ? t : 0 : 0 === t ? t : 0
            }

            function ls(t) {
                var e = as(t),
                    n = e % 1;
                return e === e ? n ? e - n : e : 0
            }

            function cs(t) {
                return t ? fn(ls(t), 0, Pt) : 0
            }

            function us(t) {
                if ("number" == typeof t)
                    return t;
                if (os(t))
                    return At;
                if (ts(t)) {
                    var e = "function" == typeof t.valueOf ? t.valueOf() : t;
                    t = ts(e) ? e + "" : e
                }
                if ("string" != typeof t)
                    return 0 === t ? t : +t;
                t = t.replace(je, "");
                var n = $e.test(t);
                return n || Fe.test(t) ? kn(t.slice(2), n ? 2 : 8) : Be.test(t) ? At : +t
            }

            function hs(t) {
                return ar(t, _s(t))
            }

            function ds(t) {
                return null == t ? "" : Ri(t)
            }

            function fs(t, e, n) {
                var i = null == t ? J : Wn(t, e);
                return i === J ? n : i
            }

            function ps(t, e) {
                return null != t && Zr(t, e, Xn)
            }

            function gs(t) {
                return Ko(t) ? Qe(t) : ai(t)
            }

            function _s(t) {
                return Ko(t) ? Qe(t, !0) : li(t)
            }

            function ys(t, e) {
                if (null == t)
                    return {};
                var n = u(Ur(t), function (t) {
                    return [t]
                });
                return e = Hr(e),
                    vi(t, n, function (t, n) {
                        return e(t, n[0])
                    })
            }

            function vs(t) {
                return null == t ? [] : P(t, gs(t))
            }

            function ms(t) {
                return Ec(ds(t).toLowerCase())
            }

            function bs(t) {
                return (t = ds(t)) && t.replace(He, $n).replace(un, "")
            }

            function ws(t, e, n) {
                return t = ds(t),
                    (e = n ? J : e) === J ? B(t) ? Q(t) : _(t) : t.match(e) || []
            }

            function xs(t) {
                return function () {
                    return t
                }
            }

            function Es(t) {
                return t
            }

            function ks(t) {
                return si("function" == typeof t ? t : pn(t, st))
            }

            function Ts(t, e, n) {
                var i = gs(e),
                    o = Hn(e, i);
                null != n || ts(e) && (o.length || !i.length) || (n = e,
                    e = t,
                    t = this,
                    o = Hn(e, gs(e)));
                var s = !(ts(n) && "chain" in n && !n.chain),
                    a = Zo(t);
                return r(o, function (n) {
                        var i = e[n];
                        t[n] = i,
                            a && (t.prototype[n] = function () {
                                var e = this.__chain__;
                                if (s || e) {
                                    var n = t(this.__wrapped__);
                                    return (n.__actions__ = sr(this.__actions__)).push({
                                            func: i,
                                            args: arguments,
                                            thisArg: t
                                        }),
                                        n.__chain__ = e,
                                        n
                                }
                                return i.apply(t, h([this.value()], arguments))
                            })
                    }),
                    t
            }

            function Os() {}

            function Cs(t) {
                return oo(t) ? E(xo(t)) : mi(t)
            }

            function Ss() {
                return []
            }

            function js() {
                return !1
            }
            var As = (k = null == k ? Cn : Vn.defaults(Cn.Object(), k, Vn.pick(Cn, gn))).Array,
                Ps = k.Date,
                Ds = k.Error,
                Is = k.Function,
                Ns = k.Math,
                Ls = k.Object,
                Rs = k.RegExp,
                Ms = k.String,
                qs = k.TypeError,
                Bs = As.prototype,
                $s = Is.prototype,
                Us = Ls.prototype,
                Fs = k["__core-js_shared__"],
                Vs = $s.toString,
                Hs = Us.hasOwnProperty,
                Ws = 0,
                zs = function () {
                    var t = /[^.]+$/.exec(Fs && Fs.keys && Fs.keys.IE_PROTO || "");
                    return t ? "Symbol(src)_1." + t : ""
                }(),
                Ys = Us.toString,
                Ks = Vs.call(Ls),
                Gs = Cn._,
                Xs = Rs("^" + Vs.call(Hs).replace(Ce, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"),
                Zs = An ? k.Buffer : J,
                Qs = k.Symbol,
                Js = k.Uint8Array,
                ta = Zs ? Zs.allocUnsafe : J,
                ea = F(Ls.getPrototypeOf, Ls),
                na = Ls.create,
                ia = Us.propertyIsEnumerable,
                ra = Bs.splice,
                oa = Qs ? Qs.isConcatSpreadable : J,
                sa = Qs ? Qs.iterator : J,
                aa = Qs ? Qs.toStringTag : J,
                la = function () {
                    try {
                        var t = Yr(Ls, "defineProperty");
                        return t({}, "", {}),
                            t
                    } catch (t) {}
                }(),
                ca = k.clearTimeout !== Cn.clearTimeout && k.clearTimeout,
                ua = Ps && Ps.now !== Cn.Date.now && Ps.now,
                ha = k.setTimeout !== Cn.setTimeout && k.setTimeout,
                da = Ns.ceil,
                fa = Ns.floor,
                pa = Ls.getOwnPropertySymbols,
                ga = Zs ? Zs.isBuffer : J,
                _a = k.isFinite,
                ya = Bs.join,
                va = F(Ls.keys, Ls),
                ma = Ns.max,
                ba = Ns.min,
                wa = Ps.now,
                xa = k.parseInt,
                Ea = Ns.random,
                ka = Bs.reverse,
                Ta = Yr(k, "DataView"),
                Oa = Yr(k, "Map"),
                Ca = Yr(k, "Promise"),
                Sa = Yr(k, "Set"),
                ja = Yr(k, "WeakMap"),
                Aa = Yr(Ls, "create"),
                Pa = ja && new ja,
                Da = {},
                Ia = Eo(Ta),
                Na = Eo(Oa),
                La = Eo(Ca),
                Ra = Eo(Sa),
                Ma = Eo(ja),
                qa = Qs ? Qs.prototype : J,
                Ba = qa ? qa.valueOf : J,
                $a = qa ? qa.toString : J,
                Ua = function () {
                    function t() {}
                    return function (e) {
                        if (!ts(e))
                            return {};
                        if (na)
                            return na(e);
                        t.prototype = e;
                        var n = new t;
                        return t.prototype = J,
                            n
                    }
                }();
            z.templateSettings = {
                    escape: be,
                    evaluate: we,
                    interpolate: xe,
                    variable: "",
                    imports: {
                        _: z
                    }
                },
                z.prototype = X.prototype,
                z.prototype.constructor = z,
                Z.prototype = Ua(X.prototype),
                Z.prototype.constructor = Z,
                Le.prototype = Ua(X.prototype),
                Le.prototype.constructor = Le,
                Ye.prototype.clear = function () {
                    this.__data__ = Aa ? Aa(null) : {},
                        this.size = 0
                },
                Ye.prototype.delete = function (t) {
                    var e = this.has(t) && delete this.__data__[t];
                    return this.size -= e ? 1 : 0,
                        e
                },
                Ye.prototype.get = function (t) {
                    var e = this.__data__;
                    if (Aa) {
                        var n = e[t];
                        return n === it ? J : n
                    }
                    return Hs.call(e, t) ? e[t] : J
                },
                Ye.prototype.has = function (t) {
                    var e = this.__data__;
                    return Aa ? e[t] !== J : Hs.call(e, t)
                },
                Ye.prototype.set = function (t, e) {
                    var n = this.__data__;
                    return this.size += this.has(t) ? 0 : 1,
                        n[t] = Aa && e === J ? it : e,
                        this
                },
                Ke.prototype.clear = function () {
                    this.__data__ = [],
                        this.size = 0
                },
                Ke.prototype.delete = function (t) {
                    var e = this.__data__,
                        n = on(e, t);
                    return !(n < 0 || (n == e.length - 1 ? e.pop() : ra.call(e, n, 1),
                        --this.size,
                        0))
                },
                Ke.prototype.get = function (t) {
                    var e = this.__data__,
                        n = on(e, t);
                    return n < 0 ? J : e[n][1]
                },
                Ke.prototype.has = function (t) {
                    return on(this.__data__, t) > -1
                },
                Ke.prototype.set = function (t, e) {
                    var n = this.__data__,
                        i = on(n, t);
                    return i < 0 ? (++this.size,
                            n.push([t, e])) : n[i][1] = e,
                        this
                },
                Ge.prototype.clear = function () {
                    this.size = 0,
                        this.__data__ = {
                            hash: new Ye,
                            map: new(Oa || Ke),
                            string: new Ye
                        }
                },
                Ge.prototype.delete = function (t) {
                    var e = Wr(this, t).delete(t);
                    return this.size -= e ? 1 : 0,
                        e
                },
                Ge.prototype.get = function (t) {
                    return Wr(this, t).get(t)
                },
                Ge.prototype.has = function (t) {
                    return Wr(this, t).has(t)
                },
                Ge.prototype.set = function (t, e) {
                    var n = Wr(this, t),
                        i = n.size;
                    return n.set(t, e),
                        this.size += n.size == i ? 0 : 1,
                        this
                },
                Xe.prototype.add = Xe.prototype.push = function (t) {
                    return this.__data__.set(t, it),
                        this
                },
                Xe.prototype.has = function (t) {
                    return this.__data__.has(t)
                },
                Ze.prototype.clear = function () {
                    this.__data__ = new Ke,
                        this.size = 0
                },
                Ze.prototype.delete = function (t) {
                    var e = this.__data__,
                        n = e.delete(t);
                    return this.size = e.size,
                        n
                },
                Ze.prototype.get = function (t) {
                    return this.__data__.get(t)
                },
                Ze.prototype.has = function (t) {
                    return this.__data__.has(t)
                },
                Ze.prototype.set = function (t, e) {
                    var n = this.__data__;
                    if (n instanceof Ke) {
                        var i = n.__data__;
                        if (!Oa || i.length < tt - 1)
                            return i.push([t, e]),
                                this.size = ++n.size,
                                this;
                        n = this.__data__ = new Ge(i)
                    }
                    return n.set(t, e),
                        this.size = n.size,
                        this
                };
            var Fa = dr(Dn),
                Va = dr(Bn, !0),
                Ha = fr(),
                Wa = fr(!0),
                za = Pa ? function (t, e) {
                    return Pa.set(t, e),
                        t
                } :
                Es,
                Ya = la ? function (t, e) {
                    return la(t, "toString", {
                        configurable: !0,
                        enumerable: !1,
                        value: xs(e),
                        writable: !0
                    })
                } :
                Es,
                Ka = Ti,
                Ga = ca || function (t) {
                    return Cn.clearTimeout(t)
                },
                Xa = Sa && 1 / H(new Sa([, -0]))[1] == Ct ? function (t) {
                    return new Sa(t)
                } :
                Os,
                Za = Pa ? function (t) {
                    return Pa.get(t)
                } :
                Os,
                Qa = pa ? function (t) {
                    return null == t ? [] : (t = Ls(t),
                        a(pa(t), function (e) {
                            return ia.call(t, e)
                        }))
                } :
                Ss,
                Ja = pa ? function (t) {
                    for (var e = []; t;)
                        h(e, Qa(t)),
                        t = ea(t);
                    return e
                } :
                Ss,
                tl = Yn;
            (Ta && tl(new Ta(new ArrayBuffer(1))) != ie || Oa && tl(new Oa) != Ht || Ca && "[object Promise]" != tl(Ca.resolve()) || Sa && tl(new Sa) != Xt || ja && tl(new ja) != te) && (tl = function (t) {
                var e = Yn(t),
                    n = e == Yt ? t.constructor : J,
                    i = n ? Eo(n) : "";
                if (i)
                    switch (i) {
                        case Ia:
                            return ie;
                        case Na:
                            return Ht;
                        case La:
                            return "[object Promise]";
                        case Ra:
                            return Xt;
                        case Ma:
                            return te
                    }
                return e
            });
            var el = Fs ? Zo : js,
                nl = bo(za),
                il = ha || function (t, e) {
                    return Cn.setTimeout(t, e)
                },
                rl = bo(Ya),
                ol = function (t) {
                    var e = Wo(t, function (t) {
                            return n.size === rt && n.clear(),
                                t
                        }),
                        n = e.cache;
                    return e
                }(function (t) {
                    var e = [];
                    return Te.test(t) && e.push(""),
                        t.replace(Oe, function (t, n, i, r) {
                            e.push(i ? r.replace(Re, "$1") : n || t)
                        }),
                        e
                }),
                sl = Ti(function (t, e) {
                    return Go(t) ? xn(t, Pn(e, 1, Go, !0)) : []
                }),
                al = Ti(function (t, e) {
                    var n = Ao(e);
                    return Go(n) && (n = J),
                        Go(t) ? xn(t, Pn(e, 1, Go, !0), Hr(n, 2)) : []
                }),
                ll = Ti(function (t, e) {
                    var n = Ao(e);
                    return Go(n) && (n = J),
                        Go(t) ? xn(t, Pn(e, 1, Go, !0), J, n) : []
                }),
                cl = Ti(function (t) {
                    var e = u(t, Hi);
                    return e.length && e[0] === t[0] ? Qn(e) : []
                }),
                ul = Ti(function (t) {
                    var e = Ao(t),
                        n = u(t, Hi);
                    return e === Ao(n) ? e = J : n.pop(),
                        n.length && n[0] === t[0] ? Qn(n, Hr(e, 2)) : []
                }),
                hl = Ti(function (t) {
                    var e = Ao(t),
                        n = u(t, Hi);
                    return (e = "function" == typeof e ? e : J) && n.pop(),
                        n.length && n[0] === t[0] ? Qn(n, J, e) : []
                }),
                dl = Ti(Po),
                fl = Br(function (t, e) {
                    var n = null == t ? 0 : t.length,
                        i = dn(t, e);
                    return wi(t, u(e, function (t) {
                            return io(t, n) ? +t : t
                        }).sort(nr)),
                        i
                }),
                pl = Ti(function (t) {
                    return Mi(Pn(t, 1, Go, !0))
                }),
                gl = Ti(function (t) {
                    var e = Ao(t);
                    return Go(e) && (e = J),
                        Mi(Pn(t, 1, Go, !0), Hr(e, 2))
                }),
                _l = Ti(function (t) {
                    var e = Ao(t);
                    return e = "function" == typeof e ? e : J,
                        Mi(Pn(t, 1, Go, !0), J, e)
                }),
                yl = Ti(function (t, e) {
                    return Go(t) ? xn(t, e) : []
                }),
                vl = Ti(function (t) {
                    return Fi(a(t, Go))
                }),
                ml = Ti(function (t) {
                    var e = Ao(t);
                    return Go(e) && (e = J),
                        Fi(a(t, Go), Hr(e, 2))
                }),
                bl = Ti(function (t) {
                    var e = Ao(t);
                    return e = "function" == typeof e ? e : J,
                        Fi(a(t, Go), J, e)
                }),
                wl = Ti(Io),
                xl = Ti(function (t) {
                    var e = t.length,
                        n = e > 1 ? t[e - 1] : J;
                    return n = "function" == typeof n ? (t.pop(),
                            n) : J,
                        No(t, n)
                }),
                El = Br(function (t) {
                    var e = t.length,
                        n = e ? t[0] : 0,
                        i = this.__wrapped__,
                        r = function (e) {
                            return dn(e, t)
                        };
                    return !(e > 1 || this.__actions__.length) && i instanceof Le && io(n) ? ((i = i.slice(n, +n + (e ? 1 : 0))).__actions__.push({
                            func: Ro,
                            args: [r],
                            thisArg: J
                        }),
                        new Z(i, this.__chain__).thru(function (t) {
                            return e && !t.length && t.push(J),
                                t
                        })) : this.thru(r)
                }),
                kl = ur(function (t, e, n) {
                    Hs.call(t, n) ? ++t[n] : hn(t, n, 1)
                }),
                Tl = mr(Oo),
                Ol = mr(Co),
                Cl = ur(function (t, e, n) {
                    Hs.call(t, n) ? t[n].push(e) : hn(t, n, [e])
                }),
                Sl = Ti(function (t, e, i) {
                    var r = -1,
                        o = "function" == typeof e,
                        s = Ko(t) ? As(t.length) : [];
                    return Fa(t, function (t) {
                            s[++r] = o ? n(e, t, i) : ti(t, e, i)
                        }),
                        s
                }),
                jl = ur(function (t, e, n) {
                    hn(t, n, e)
                }),
                Al = ur(function (t, e, n) {
                    t[n ? 0 : 1].push(e)
                }, function () {
                    return [
                        [],
                        []
                    ]
                }),
                Pl = Ti(function (t, e) {
                    if (null == t)
                        return [];
                    var n = e.length;
                    return n > 1 && ro(t, e[0], e[1]) ? e = [] : n > 2 && ro(e[0], e[1], e[2]) && (e = [e[0]]),
                        _i(t, Pn(e, 1), [])
                }),
                Dl = ua || function () {
                    return Cn.Date.now()
                },
                Il = Ti(function (t, e, n) {
                    var i = ht;
                    if (n.length) {
                        var r = V(n, Vr(Il));
                        i |= _t
                    }
                    return Dr(t, i, e, n, r)
                }),
                Nl = Ti(function (t, e, n) {
                    var i = ht | dt;
                    if (n.length) {
                        var r = V(n, Vr(Nl));
                        i |= _t
                    }
                    return Dr(e, i, t, n, r)
                }),
                Ll = Ti(function (t, e) {
                    return wn(t, 1, e)
                }),
                Rl = Ti(function (t, e, n) {
                    return wn(t, us(e) || 0, n)
                });
            Wo.Cache = Ge;
            var Ml = Ka(function (t, e) {
                    var i = (e = 1 == e.length && Hl(e[0]) ? u(e[0], A(Hr())) : u(Pn(e, 1), A(Hr()))).length;
                    return Ti(function (r) {
                        for (var o = -1, s = ba(r.length, i); ++o < s;)
                            r[o] = e[o].call(this, r[o]);
                        return n(t, this, r)
                    })
                }),
                ql = Ti(function (t, e) {
                    var n = V(e, Vr(ql));
                    return Dr(t, _t, J, e, n)
                }),
                Bl = Ti(function (t, e) {
                    var n = V(e, Vr(Bl));
                    return Dr(t, yt, J, e, n)
                }),
                $l = Br(function (t, e) {
                    return Dr(t, mt, J, J, J, e)
                }),
                Ul = Sr(Kn),
                Fl = Sr(function (t, e) {
                    return t >= e
                }),
                Vl = ei(function () {
                    return arguments
                }()) ? ei : function (t) {
                    return es(t) && Hs.call(t, "callee") && !ia.call(t, "callee")
                },
                Hl = As.isArray,
                Wl = In ? A(In) : function (t) {
                    return es(t) && Yn(t) == ne
                },
                zl = ga || js,
                Yl = Nn ? A(Nn) : function (t) {
                    return es(t) && Yn(t) == Bt
                },
                Kl = Ln ? A(Ln) : function (t) {
                    return es(t) && tl(t) == Ht
                },
                Gl = Rn ? A(Rn) : function (t) {
                    return es(t) && Yn(t) == Gt
                },
                Xl = Mn ? A(Mn) : function (t) {
                    return es(t) && tl(t) == Xt
                },
                Zl = qn ? A(qn) : function (t) {
                    return es(t) && Jo(t.length) && !!yn[Yn(t)]
                },
                Ql = Sr(ci),
                Jl = Sr(function (t, e) {
                    return t <= e
                }),
                tc = hr(function (t, e) {
                    if (co(e) || Ko(e))
                        ar(e, gs(e), t);
                    else
                        for (var n in e)
                            Hs.call(e, n) && rn(t, n, e[n])
                }),
                ec = hr(function (t, e) {
                    ar(e, _s(e), t)
                }),
                nc = hr(function (t, e, n, i) {
                    ar(e, _s(e), t, i)
                }),
                ic = hr(function (t, e, n, i) {
                    ar(e, gs(e), t, i)
                }),
                rc = Br(dn),
                oc = Ti(function (t) {
                    return t.push(J, Ir),
                        n(nc, J, t)
                }),
                sc = Ti(function (t) {
                    return t.push(J, Nr),
                        n(hc, J, t)
                }),
                ac = xr(function (t, e, n) {
                    t[e] = n
                }, xs(Es)),
                lc = xr(function (t, e, n) {
                    Hs.call(t, e) ? t[e].push(n) : t[e] = [n]
                }, Hr),
                cc = Ti(ti),
                uc = hr(function (t, e, n) {
                    fi(t, e, n)
                }),
                hc = hr(function (t, e, n, i) {
                    fi(t, e, n, i)
                }),
                dc = Br(function (t, e) {
                    var n = {};
                    if (null == t)
                        return n;
                    var i = !1;
                    e = u(e, function (e) {
                            return e = zi(e, t),
                                i || (i = e.length > 1),
                                e
                        }),
                        ar(t, Ur(t), n),
                        i && (n = pn(n, st | at | lt, Lr));
                    for (var r = e.length; r--;)
                        qi(n, e[r]);
                    return n
                }),
                fc = Br(function (t, e) {
                    return null == t ? {} : yi(t, e)
                }),
                pc = Pr(gs),
                gc = Pr(_s),
                _c = _r(function (t, e, n) {
                    return e = e.toLowerCase(),
                        t + (n ? ms(e) : e)
                }),
                yc = _r(function (t, e, n) {
                    return t + (n ? "-" : "") + e.toLowerCase()
                }),
                vc = _r(function (t, e, n) {
                    return t + (n ? " " : "") + e.toLowerCase()
                }),
                mc = gr("toLowerCase"),
                bc = _r(function (t, e, n) {
                    return t + (n ? "_" : "") + e.toLowerCase()
                }),
                wc = _r(function (t, e, n) {
                    return t + (n ? " " : "") + Ec(e)
                }),
                xc = _r(function (t, e, n) {
                    return t + (n ? " " : "") + e.toUpperCase()
                }),
                Ec = gr("toUpperCase"),
                kc = Ti(function (t, e) {
                    try {
                        return n(t, J, e)
                    } catch (t) {
                        return Xo(t) ? t : new Ds(t)
                    }
                }),
                Tc = Br(function (t, e) {
                    return r(e, function (e) {
                            e = xo(e),
                                hn(t, e, Il(t[e], t))
                        }),
                        t
                }),
                Oc = br(),
                Cc = br(!0),
                Sc = Ti(function (t, e) {
                    return function (n) {
                        return ti(n, t, e)
                    }
                }),
                jc = Ti(function (t, e) {
                    return function (n) {
                        return ti(t, n, e)
                    }
                }),
                Ac = kr(u),
                Pc = kr(s),
                Dc = kr(p),
                Ic = Cr(),
                Nc = Cr(!0),
                Lc = Er(function (t, e) {
                    return t + e
                }, 0),
                Rc = Ar("ceil"),
                Mc = Er(function (t, e) {
                    return t / e
                }, 1),
                qc = Ar("floor"),
                Bc = Er(function (t, e) {
                    return t * e
                }, 1),
                $c = Ar("round"),
                Uc = Er(function (t, e) {
                    return t - e
                }, 0);
            return z.after = function (t, e) {
                    if ("function" != typeof e)
                        throw new qs(nt);
                    return t = ls(t),
                        function () {
                            if (--t < 1)
                                return e.apply(this, arguments)
                        }
                },
                z.ary = $o,
                z.assign = tc,
                z.assignIn = ec,
                z.assignInWith = nc,
                z.assignWith = ic,
                z.at = rc,
                z.before = Uo,
                z.bind = Il,
                z.bindAll = Tc,
                z.bindKey = Nl,
                z.castArray = function () {
                    if (!arguments.length)
                        return [];
                    var t = arguments[0];
                    return Hl(t) ? t : [t]
                },
                z.chain = Lo,
                z.chunk = function (t, e, n) {
                    e = (n ? ro(t, e, n) : e === J) ? 1 : ma(ls(e), 0);
                    var i = null == t ? 0 : t.length;
                    if (!i || e < 1)
                        return [];
                    for (var r = 0, o = 0, s = As(da(i / e)); r < i;)
                        s[o++] = Ai(t, r, r += e);
                    return s
                },
                z.compact = function (t) {
                    for (var e = -1, n = null == t ? 0 : t.length, i = 0, r = []; ++e < n;) {
                        var o = t[e];
                        o && (r[i++] = o)
                    }
                    return r
                },
                z.concat = function () {
                    var t = arguments.length;
                    if (!t)
                        return [];
                    for (var e = As(t - 1), n = arguments[0], i = t; i--;)
                        e[i - 1] = arguments[i];
                    return h(Hl(n) ? sr(n) : [n], Pn(e, 1))
                },
                z.cond = function (t) {
                    var e = null == t ? 0 : t.length,
                        i = Hr();
                    return t = e ? u(t, function (t) {
                            if ("function" != typeof t[1])
                                throw new qs(nt);
                            return [i(t[0]), t[1]]
                        }) : [],
                        Ti(function (i) {
                            for (var r = -1; ++r < e;) {
                                var o = t[r];
                                if (n(o[0], this, i))
                                    return n(o[1], this, i)
                            }
                        })
                },
                z.conforms = function (t) {
                    return mn(pn(t, st))
                },
                z.constant = xs,
                z.countBy = kl,
                z.create = function (t, e) {
                    var n = Ua(t);
                    return null == e ? n : an(n, e)
                },
                z.curry = Fo,
                z.curryRight = Vo,
                z.debounce = Ho,
                z.defaults = oc,
                z.defaultsDeep = sc,
                z.defer = Ll,
                z.delay = Rl,
                z.difference = sl,
                z.differenceBy = al,
                z.differenceWith = ll,
                z.drop = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    return i ? (e = n || e === J ? 1 : ls(e),
                        Ai(t, e < 0 ? 0 : e, i)) : []
                },
                z.dropRight = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    return i ? (e = n || e === J ? 1 : ls(e),
                        e = i - e,
                        Ai(t, 0, e < 0 ? 0 : e)) : []
                },
                z.dropRightWhile = function (t, e) {
                    return t && t.length ? $i(t, Hr(e, 3), !0, !0) : []
                },
                z.dropWhile = function (t, e) {
                    return t && t.length ? $i(t, Hr(e, 3), !0) : []
                },
                z.fill = function (t, e, n, i) {
                    var r = null == t ? 0 : t.length;
                    return r ? (n && "number" != typeof n && ro(t, e, n) && (n = 0,
                            i = r),
                        Sn(t, e, n, i)) : []
                },
                z.filter = function (t, e) {
                    return (Hl(t) ? a : jn)(t, Hr(e, 3))
                },
                z.flatMap = function (t, e) {
                    return Pn(Bo(t, e), 1)
                },
                z.flatMapDeep = function (t, e) {
                    return Pn(Bo(t, e), Ct)
                },
                z.flatMapDepth = function (t, e, n) {
                    return n = n === J ? 1 : ls(n),
                        Pn(Bo(t, e), n)
                },
                z.flatten = So,
                z.flattenDeep = function (t) {
                    return (null == t ? 0 : t.length) ? Pn(t, Ct) : []
                },
                z.flattenDepth = function (t, e) {
                    return (null == t ? 0 : t.length) ? (e = e === J ? 1 : ls(e),
                        Pn(t, e)) : []
                },
                z.flip = function (t) {
                    return Dr(t, bt)
                },
                z.flow = Oc,
                z.flowRight = Cc,
                z.fromPairs = function (t) {
                    for (var e = -1, n = null == t ? 0 : t.length, i = {}; ++e < n;) {
                        var r = t[e];
                        i[r[0]] = r[1]
                    }
                    return i
                },
                z.functions = function (t) {
                    return null == t ? [] : Hn(t, gs(t))
                },
                z.functionsIn = function (t) {
                    return null == t ? [] : Hn(t, _s(t))
                },
                z.groupBy = Cl,
                z.initial = function (t) {
                    return (null == t ? 0 : t.length) ? Ai(t, 0, -1) : []
                },
                z.intersection = cl,
                z.intersectionBy = ul,
                z.intersectionWith = hl,
                z.invert = ac,
                z.invertBy = lc,
                z.invokeMap = Sl,
                z.iteratee = ks,
                z.keyBy = jl,
                z.keys = gs,
                z.keysIn = _s,
                z.map = Bo,
                z.mapKeys = function (t, e) {
                    var n = {};
                    return e = Hr(e, 3),
                        Dn(t, function (t, i, r) {
                            hn(n, e(t, i, r), t)
                        }),
                        n
                },
                z.mapValues = function (t, e) {
                    var n = {};
                    return e = Hr(e, 3),
                        Dn(t, function (t, i, r) {
                            hn(n, i, e(t, i, r))
                        }),
                        n
                },
                z.matches = function (t) {
                    return hi(pn(t, st))
                },
                z.matchesProperty = function (t, e) {
                    return di(t, pn(e, st))
                },
                z.memoize = Wo,
                z.merge = uc,
                z.mergeWith = hc,
                z.method = Sc,
                z.methodOf = jc,
                z.mixin = Ts,
                z.negate = zo,
                z.nthArg = function (t) {
                    return t = ls(t),
                        Ti(function (e) {
                            return gi(e, t)
                        })
                },
                z.omit = dc,
                z.omitBy = function (t, e) {
                    return ys(t, zo(Hr(e)))
                },
                z.once = function (t) {
                    return Uo(2, t)
                },
                z.orderBy = function (t, e, n, i) {
                    return null == t ? [] : (Hl(e) || (e = null == e ? [] : [e]),
                        n = i ? J : n,
                        Hl(n) || (n = null == n ? [] : [n]),
                        _i(t, e, n))
                },
                z.over = Ac,
                z.overArgs = Ml,
                z.overEvery = Pc,
                z.overSome = Dc,
                z.partial = ql,
                z.partialRight = Bl,
                z.partition = Al,
                z.pick = fc,
                z.pickBy = ys,
                z.property = Cs,
                z.propertyOf = function (t) {
                    return function (e) {
                        return null == t ? J : Wn(t, e)
                    }
                },
                z.pull = dl,
                z.pullAll = Po,
                z.pullAllBy = function (t, e, n) {
                    return t && t.length && e && e.length ? bi(t, e, Hr(n, 2)) : t
                },
                z.pullAllWith = function (t, e, n) {
                    return t && t.length && e && e.length ? bi(t, e, J, n) : t
                },
                z.pullAt = fl,
                z.range = Ic,
                z.rangeRight = Nc,
                z.rearg = $l,
                z.reject = function (t, e) {
                    return (Hl(t) ? a : jn)(t, zo(Hr(e, 3)))
                },
                z.remove = function (t, e) {
                    var n = [];
                    if (!t || !t.length)
                        return n;
                    var i = -1,
                        r = [],
                        o = t.length;
                    for (e = Hr(e, 3); ++i < o;) {
                        var s = t[i];
                        e(s, i, t) && (n.push(s),
                            r.push(i))
                    }
                    return wi(t, r),
                        n
                },
                z.rest = function (t, e) {
                    if ("function" != typeof t)
                        throw new qs(nt);
                    return e = e === J ? e : ls(e),
                        Ti(t, e)
                },
                z.reverse = Do,
                z.sampleSize = function (t, e, n) {
                    return e = (n ? ro(t, e, n) : e === J) ? 1 : ls(e),
                        (Hl(t) ? tn : Ci)(t, e)
                },
                z.set = function (t, e, n) {
                    return null == t ? t : Si(t, e, n)
                },
                z.setWith = function (t, e, n, i) {
                    return i = "function" == typeof i ? i : J,
                        null == t ? t : Si(t, e, n, i)
                },
                z.shuffle = function (t) {
                    return (Hl(t) ? en : ji)(t)
                },
                z.slice = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    return i ? (n && "number" != typeof n && ro(t, e, n) ? (e = 0,
                            n = i) : (e = null == e ? 0 : ls(e),
                            n = n === J ? i : ls(n)),
                        Ai(t, e, n)) : []
                },
                z.sortBy = Pl,
                z.sortedUniq = function (t) {
                    return t && t.length ? Ni(t) : []
                },
                z.sortedUniqBy = function (t, e) {
                    return t && t.length ? Ni(t, Hr(e, 2)) : []
                },
                z.split = function (t, e, n) {
                    return n && "number" != typeof n && ro(t, e, n) && (e = n = J),
                        (n = n === J ? Pt : n >>> 0) ? (t = ds(t)) && ("string" == typeof e || null != e && !Gl(e)) && !(e = Ri(e)) && q(t) ? Yi(G(t), 0, n) : t.split(e, n) : []
                },
                z.spread = function (t, e) {
                    if ("function" != typeof t)
                        throw new qs(nt);
                    return e = null == e ? 0 : ma(ls(e), 0),
                        Ti(function (i) {
                            var r = i[e],
                                o = Yi(i, 0, e);
                            return r && h(o, r),
                                n(t, this, o)
                        })
                },
                z.tail = function (t) {
                    var e = null == t ? 0 : t.length;
                    return e ? Ai(t, 1, e) : []
                },
                z.take = function (t, e, n) {
                    return t && t.length ? (e = n || e === J ? 1 : ls(e),
                        Ai(t, 0, e < 0 ? 0 : e)) : []
                },
                z.takeRight = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    return i ? (e = n || e === J ? 1 : ls(e),
                        e = i - e,
                        Ai(t, e < 0 ? 0 : e, i)) : []
                },
                z.takeRightWhile = function (t, e) {
                    return t && t.length ? $i(t, Hr(e, 3), !1, !0) : []
                },
                z.takeWhile = function (t, e) {
                    return t && t.length ? $i(t, Hr(e, 3)) : []
                },
                z.tap = function (t, e) {
                    return e(t),
                        t
                },
                z.throttle = function (t, e, n) {
                    var i = !0,
                        r = !0;
                    if ("function" != typeof t)
                        throw new qs(nt);
                    return ts(n) && (i = "leading" in n ? !!n.leading : i,
                            r = "trailing" in n ? !!n.trailing : r),
                        Ho(t, e, {
                            leading: i,
                            maxWait: e,
                            trailing: r
                        })
                },
                z.thru = Ro,
                z.toArray = ss,
                z.toPairs = pc,
                z.toPairsIn = gc,
                z.toPath = function (t) {
                    return Hl(t) ? u(t, xo) : os(t) ? [t] : sr(ol(ds(t)))
                },
                z.toPlainObject = hs,
                z.transform = function (t, e, n) {
                    var i = Hl(t),
                        o = i || zl(t) || Zl(t);
                    if (e = Hr(e, 4),
                        null == n) {
                        var s = t && t.constructor;
                        n = o ? i ? new s : [] : ts(t) && Zo(s) ? Ua(ea(t)) : {}
                    }
                    return (o ? r : Dn)(t, function (t, i, r) {
                            return e(n, t, i, r)
                        }),
                        n
                },
                z.unary = function (t) {
                    return $o(t, 1)
                },
                z.union = pl,
                z.unionBy = gl,
                z.unionWith = _l,
                z.uniq = function (t) {
                    return t && t.length ? Mi(t) : []
                },
                z.uniqBy = function (t, e) {
                    return t && t.length ? Mi(t, Hr(e, 2)) : []
                },
                z.uniqWith = function (t, e) {
                    return e = "function" == typeof e ? e : J,
                        t && t.length ? Mi(t, J, e) : []
                },
                z.unset = function (t, e) {
                    return null == t || qi(t, e)
                },
                z.unzip = Io,
                z.unzipWith = No,
                z.update = function (t, e, n) {
                    return null == t ? t : Bi(t, e, Wi(n))
                },
                z.updateWith = function (t, e, n, i) {
                    return i = "function" == typeof i ? i : J,
                        null == t ? t : Bi(t, e, Wi(n), i)
                },
                z.values = vs,
                z.valuesIn = function (t) {
                    return null == t ? [] : P(t, _s(t))
                },
                z.without = yl,
                z.words = ws,
                z.wrap = function (t, e) {
                    return ql(Wi(e), t)
                },
                z.xor = vl,
                z.xorBy = ml,
                z.xorWith = bl,
                z.zip = wl,
                z.zipObject = function (t, e) {
                    return Vi(t || [], e || [], rn)
                },
                z.zipObjectDeep = function (t, e) {
                    return Vi(t || [], e || [], Si)
                },
                z.zipWith = xl,
                z.entries = pc,
                z.entriesIn = gc,
                z.extend = ec,
                z.extendWith = nc,
                Ts(z, z),
                z.add = Lc,
                z.attempt = kc,
                z.camelCase = _c,
                z.capitalize = ms,
                z.ceil = Rc,
                z.clamp = function (t, e, n) {
                    return n === J && (n = e,
                            e = J),
                        n !== J && (n = (n = us(n)) === n ? n : 0),
                        e !== J && (e = (e = us(e)) === e ? e : 0),
                        fn(us(t), e, n)
                },
                z.clone = function (t) {
                    return pn(t, lt)
                },
                z.cloneDeep = function (t) {
                    return pn(t, st | lt)
                },
                z.cloneDeepWith = function (t, e) {
                    return e = "function" == typeof e ? e : J,
                        pn(t, st | lt, e)
                },
                z.cloneWith = function (t, e) {
                    return e = "function" == typeof e ? e : J,
                        pn(t, lt, e)
                },
                z.conformsTo = function (t, e) {
                    return null == e || bn(t, e, gs(e))
                },
                z.deburr = bs,
                z.defaultTo = function (t, e) {
                    return null == t || t !== t ? e : t
                },
                z.divide = Mc,
                z.endsWith = function (t, e, n) {
                    t = ds(t),
                        e = Ri(e);
                    var i = t.length,
                        r = n = n === J ? i : fn(ls(n), 0, i);
                    return (n -= e.length) >= 0 && t.slice(n, r) == e
                },
                z.eq = Yo,
                z.escape = function (t) {
                    return (t = ds(t)) && me.test(t) ? t.replace(ye, Un) : t
                },
                z.escapeRegExp = function (t) {
                    return (t = ds(t)) && Se.test(t) ? t.replace(Ce, "\\$&") : t
                },
                z.every = function (t, e, n) {
                    var i = Hl(t) ? s : Tn;
                    return n && ro(t, e, n) && (e = J),
                        i(t, Hr(e, 3))
                },
                z.find = Tl,
                z.findIndex = Oo,
                z.findKey = function (t, e) {
                    return y(t, Hr(e, 3), Dn)
                },
                z.findLast = Ol,
                z.findLastIndex = Co,
                z.findLastKey = function (t, e) {
                    return y(t, Hr(e, 3), Bn)
                },
                z.floor = qc,
                z.forEach = Mo,
                z.forEachRight = qo,
                z.forIn = function (t, e) {
                    return null == t ? t : Ha(t, Hr(e, 3), _s)
                },
                z.forInRight = function (t, e) {
                    return null == t ? t : Wa(t, Hr(e, 3), _s)
                },
                z.forOwn = function (t, e) {
                    return t && Dn(t, Hr(e, 3))
                },
                z.forOwnRight = function (t, e) {
                    return t && Bn(t, Hr(e, 3))
                },
                z.get = fs,
                z.gt = Ul,
                z.gte = Fl,
                z.has = function (t, e) {
                    return null != t && Zr(t, e, Gn)
                },
                z.hasIn = ps,
                z.head = jo,
                z.identity = Es,
                z.includes = function (t, e, n, i) {
                    t = Ko(t) ? t : vs(t),
                        n = n && !i ? ls(n) : 0;
                    var r = t.length;
                    return n < 0 && (n = ma(r + n, 0)),
                        rs(t) ? n <= r && t.indexOf(e, n) > -1 : !!r && m(t, e, n) > -1
                },
                z.indexOf = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    if (!i)
                        return -1;
                    var r = null == n ? 0 : ls(n);
                    return r < 0 && (r = ma(i + r, 0)),
                        m(t, e, r)
                },
                z.inRange = function (t, e, n) {
                    return e = as(e),
                        n === J ? (n = e,
                            e = 0) : n = as(n),
                        t = us(t),
                        Zn(t, e, n)
                },
                z.invoke = cc,
                z.isArguments = Vl,
                z.isArray = Hl,
                z.isArrayBuffer = Wl,
                z.isArrayLike = Ko,
                z.isArrayLikeObject = Go,
                z.isBoolean = function (t) {
                    return !0 === t || !1 === t || es(t) && Yn(t) == qt
                },
                z.isBuffer = zl,
                z.isDate = Yl,
                z.isElement = function (t) {
                    return es(t) && 1 === t.nodeType && !is(t)
                },
                z.isEmpty = function (t) {
                    if (null == t)
                        return !0;
                    if (Ko(t) && (Hl(t) || "string" == typeof t || "function" == typeof t.splice || zl(t) || Zl(t) || Vl(t)))
                        return !t.length;
                    var e = tl(t);
                    if (e == Ht || e == Xt)
                        return !t.size;
                    if (co(t))
                        return !ai(t).length;
                    for (var n in t)
                        if (Hs.call(t, n))
                            return !1;
                    return !0
                },
                z.isEqual = function (t, e) {
                    return ni(t, e)
                },
                z.isEqualWith = function (t, e, n) {
                    var i = (n = "function" == typeof n ? n : J) ? n(t, e) : J;
                    return i === J ? ni(t, e, J, n) : !!i
                },
                z.isError = Xo,
                z.isFinite = function (t) {
                    return "number" == typeof t && _a(t)
                },
                z.isFunction = Zo,
                z.isInteger = Qo,
                z.isLength = Jo,
                z.isMap = Kl,
                z.isMatch = function (t, e) {
                    return t === e || ri(t, e, zr(e))
                },
                z.isMatchWith = function (t, e, n) {
                    return n = "function" == typeof n ? n : J,
                        ri(t, e, zr(e), n)
                },
                z.isNaN = function (t) {
                    return ns(t) && t != +t
                },
                z.isNative = function (t) {
                    if (el(t))
                        throw new Ds(et);
                    return oi(t)
                },
                z.isNil = function (t) {
                    return null == t
                },
                z.isNull = function (t) {
                    return null === t
                },
                z.isNumber = ns,
                z.isObject = ts,
                z.isObjectLike = es,
                z.isPlainObject = is,
                z.isRegExp = Gl,
                z.isSafeInteger = function (t) {
                    return Qo(t) && t >= -St && t <= St
                },
                z.isSet = Xl,
                z.isString = rs,
                z.isSymbol = os,
                z.isTypedArray = Zl,
                z.isUndefined = function (t) {
                    return t === J
                },
                z.isWeakMap = function (t) {
                    return es(t) && tl(t) == te
                },
                z.isWeakSet = function (t) {
                    return es(t) && Yn(t) == ee
                },
                z.join = function (t, e) {
                    return null == t ? "" : ya.call(t, e)
                },
                z.kebabCase = yc,
                z.last = Ao,
                z.lastIndexOf = function (t, e, n) {
                    var i = null == t ? 0 : t.length;
                    if (!i)
                        return -1;
                    var r = i;
                    return n !== J && (r = (r = ls(n)) < 0 ? ma(i + r, 0) : ba(r, i - 1)),
                        e === e ? Y(t, e, r) : v(t, w, r, !0)
                },
                z.lowerCase = vc,
                z.lowerFirst = mc,
                z.lt = Ql,
                z.lte = Jl,
                z.max = function (t) {
                    return t && t.length ? On(t, Es, Kn) : J
                },
                z.maxBy = function (t, e) {
                    return t && t.length ? On(t, Hr(e, 2), Kn) : J
                },
                z.mean = function (t) {
                    return x(t, Es)
                },
                z.meanBy = function (t, e) {
                    return x(t, Hr(e, 2))
                },
                z.min = function (t) {
                    return t && t.length ? On(t, Es, ci) : J
                },
                z.minBy = function (t, e) {
                    return t && t.length ? On(t, Hr(e, 2), ci) : J
                },
                z.stubArray = Ss,
                z.stubFalse = js,
                z.stubObject = function () {
                    return {}
                },
                z.stubString = function () {
                    return ""
                },
                z.stubTrue = function () {
                    return !0
                },
                z.multiply = Bc,
                z.nth = function (t, e) {
                    return t && t.length ? gi(t, ls(e)) : J
                },
                z.noConflict = function () {
                    return Cn._ === this && (Cn._ = Gs),
                        this
                },
                z.noop = Os,
                z.now = Dl,
                z.pad = function (t, e, n) {
                    t = ds(t);
                    var i = (e = ls(e)) ? K(t) : 0;
                    if (!e || i >= e)
                        return t;
                    var r = (e - i) / 2;
                    return Tr(fa(r), n) + t + Tr(da(r), n)
                },
                z.padEnd = function (t, e, n) {
                    t = ds(t);
                    var i = (e = ls(e)) ? K(t) : 0;
                    return e && i < e ? t + Tr(e - i, n) : t
                },
                z.padStart = function (t, e, n) {
                    t = ds(t);
                    var i = (e = ls(e)) ? K(t) : 0;
                    return e && i < e ? Tr(e - i, n) + t : t
                },
                z.parseInt = function (t, e, n) {
                    return n || null == e ? e = 0 : e && (e = +e),
                        xa(ds(t).replace(Ae, ""), e || 0)
                },
                z.random = function (t, e, n) {
                    if (n && "boolean" != typeof n && ro(t, e, n) && (e = n = J),
                        n === J && ("boolean" == typeof e ? (n = e,
                            e = J) : "boolean" == typeof t && (n = t,
                            t = J)),
                        t === J && e === J ? (t = 0,
                            e = 1) : (t = as(t),
                            e === J ? (e = t,
                                t = 0) : e = as(e)),
                        t > e) {
                        var i = t;
                        t = e,
                            e = i
                    }
                    if (n || t % 1 || e % 1) {
                        var r = Ea();
                        return ba(t + r * (e - t + En("1e-" + ((r + "").length - 1))), e)
                    }
                    return xi(t, e)
                },
                z.reduce = function (t, e, n) {
                    var i = Hl(t) ? d : T,
                        r = arguments.length < 3;
                    return i(t, Hr(e, 4), n, r, Fa)
                },
                z.reduceRight = function (t, e, n) {
                    var i = Hl(t) ? f : T,
                        r = arguments.length < 3;
                    return i(t, Hr(e, 4), n, r, Va)
                },
                z.repeat = function (t, e, n) {
                    return e = (n ? ro(t, e, n) : e === J) ? 1 : ls(e),
                        ki(ds(t), e)
                },
                z.replace = function () {
                    var t = arguments,
                        e = ds(t[0]);
                    return t.length < 3 ? e : e.replace(t[1], t[2])
                },
                z.result = function (t, e, n) {
                    var i = -1,
                        r = (e = zi(e, t)).length;
                    for (r || (r = 1,
                            t = J); ++i < r;) {
                        var o = null == t ? J : t[xo(e[i])];
                        o === J && (i = r,
                                o = n),
                            t = Zo(o) ? o.call(t) : o
                    }
                    return t
                },
                z.round = $c,
                z.runInContext = g,
                z.sample = function (t) {
                    return (Hl(t) ? Je : Oi)(t)
                },
                z.size = function (t) {
                    if (null == t)
                        return 0;
                    if (Ko(t))
                        return rs(t) ? K(t) : t.length;
                    var e = tl(t);
                    return e == Ht || e == Xt ? t.size : ai(t).length
                },
                z.snakeCase = bc,
                z.some = function (t, e, n) {
                    var i = Hl(t) ? p : Pi;
                    return n && ro(t, e, n) && (e = J),
                        i(t, Hr(e, 3))
                },
                z.sortedIndex = function (t, e) {
                    return Di(t, e)
                },
                z.sortedIndexBy = function (t, e, n) {
                    return Ii(t, e, Hr(n, 2))
                },
                z.sortedIndexOf = function (t, e) {
                    var n = null == t ? 0 : t.length;
                    if (n) {
                        var i = Di(t, e);
                        if (i < n && Yo(t[i], e))
                            return i
                    }
                    return -1
                },
                z.sortedLastIndex = function (t, e) {
                    return Di(t, e, !0)
                },
                z.sortedLastIndexBy = function (t, e, n) {
                    return Ii(t, e, Hr(n, 2), !0)
                },
                z.sortedLastIndexOf = function (t, e) {
                    if (null == t ? 0 : t.length) {
                        var n = Di(t, e, !0) - 1;
                        if (Yo(t[n], e))
                            return n
                    }
                    return -1
                },
                z.startCase = wc,
                z.startsWith = function (t, e, n) {
                    return t = ds(t),
                        n = null == n ? 0 : fn(ls(n), 0, t.length),
                        e = Ri(e),
                        t.slice(n, n + e.length) == e
                },
                z.subtract = Uc,
                z.sum = function (t) {
                    return t && t.length ? C(t, Es) : 0
                },
                z.sumBy = function (t, e) {
                    return t && t.length ? C(t, Hr(e, 2)) : 0
                },
                z.template = function (t, e, n) {
                    var i = z.templateSettings;
                    n && ro(t, e, n) && (e = J),
                        t = ds(t),
                        e = nc({}, e, i, Ir);
                    var r, o, s = nc({}, e.imports, i.imports, Ir),
                        a = gs(s),
                        l = P(s, a),
                        c = 0,
                        u = e.interpolate || We,
                        h = "__p += '",
                        d = Rs((e.escape || We).source + "|" + u.source + "|" + (u === xe ? Me : We).source + "|" + (e.evaluate || We).source + "|$", "g"),
                        f = "//# sourceURL=" + ("sourceURL" in e ? e.sourceURL : "lodash.templateSources[" + ++_n + "]") + "\n";
                    t.replace(d, function (e, n, i, s, a, l) {
                            return i || (i = s),
                                h += t.slice(c, l).replace(ze, R),
                                n && (r = !0,
                                    h += "' +\n__e(" + n + ") +\n'"),
                                a && (o = !0,
                                    h += "';\n" + a + ";\n__p += '"),
                                i && (h += "' +\n((__t = (" + i + ")) == null ? '' : __t) +\n'"),
                                c = l + e.length,
                                e
                        }),
                        h += "';\n";
                    var p = e.variable;
                    p || (h = "with (obj) {\n" + h + "\n}\n"),
                        h = (o ? h.replace(fe, "") : h).replace(pe, "$1").replace(ge, "$1;"),
                        h = "function(" + (p || "obj") + ") {\n" + (p ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (r ? ", __e = _.escape" : "") + (o ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + h + "return __p\n}";
                    var g = kc(function () {
                        return Is(a, f + "return " + h).apply(J, l)
                    });
                    if (g.source = h,
                        Xo(g))
                        throw g;
                    return g
                },
                z.times = function (t, e) {
                    if ((t = ls(t)) < 1 || t > St)
                        return [];
                    var n = Pt,
                        i = ba(t, Pt);
                    e = Hr(e),
                        t -= Pt;
                    for (var r = S(i, e); ++n < t;)
                        e(n);
                    return r
                },
                z.toFinite = as,
                z.toInteger = ls,
                z.toLength = cs,
                z.toLower = function (t) {
                    return ds(t).toLowerCase()
                },
                z.toNumber = us,
                z.toSafeInteger = function (t) {
                    return t ? fn(ls(t), -St, St) : 0 === t ? t : 0
                },
                z.toString = ds,
                z.toUpper = function (t) {
                    return ds(t).toUpperCase()
                },
                z.trim = function (t, e, n) {
                    if ((t = ds(t)) && (n || e === J))
                        return t.replace(je, "");
                    if (!t || !(e = Ri(e)))
                        return t;
                    var i = G(t),
                        r = G(e);
                    return Yi(i, I(i, r), N(i, r) + 1).join("")
                },
                z.trimEnd = function (t, e, n) {
                    if ((t = ds(t)) && (n || e === J))
                        return t.replace(Pe, "");
                    if (!t || !(e = Ri(e)))
                        return t;
                    var i = G(t);
                    return Yi(i, 0, N(i, G(e)) + 1).join("")
                },
                z.trimStart = function (t, e, n) {
                    if ((t = ds(t)) && (n || e === J))
                        return t.replace(Ae, "");
                    if (!t || !(e = Ri(e)))
                        return t;
                    var i = G(t);
                    return Yi(i, I(i, G(e))).join("")
                },
                z.truncate = function (t, e) {
                    var n = wt,
                        i = xt;
                    if (ts(e)) {
                        var r = "separator" in e ? e.separator : r;
                        n = "length" in e ? ls(e.length) : n,
                            i = "omission" in e ? Ri(e.omission) : i
                    }
                    var o = (t = ds(t)).length;
                    if (q(t)) {
                        var s = G(t);
                        o = s.length
                    }
                    if (n >= o)
                        return t;
                    var a = n - K(i);
                    if (a < 1)
                        return i;
                    var l = s ? Yi(s, 0, a).join("") : t.slice(0, a);
                    if (r === J)
                        return l + i;
                    if (s && (a += l.length - a),
                        Gl(r)) {
                        if (t.slice(a).search(r)) {
                            var c, u = l;
                            for (r.global || (r = Rs(r.source, ds(qe.exec(r)) + "g")),
                                r.lastIndex = 0; c = r.exec(u);)
                                var h = c.index;
                            l = l.slice(0, h === J ? a : h)
                        }
                    } else if (t.indexOf(Ri(r), a) != a) {
                        var d = l.lastIndexOf(r);
                        d > -1 && (l = l.slice(0, d))
                    }
                    return l + i
                },
                z.unescape = function (t) {
                    return (t = ds(t)) && ve.test(t) ? t.replace(_e, Fn) : t
                },
                z.uniqueId = function (t) {
                    var e = ++Ws;
                    return ds(t) + e
                },
                z.upperCase = xc,
                z.upperFirst = Ec,
                z.each = Mo,
                z.eachRight = qo,
                z.first = jo,
                Ts(z, function () {
                    var t = {};
                    return Dn(z, function (e, n) {
                            Hs.call(z.prototype, n) || (t[n] = e)
                        }),
                        t
                }(), {
                    chain: !1
                }),
                z.VERSION = "4.17.4",
                r(["bind", "bindKey", "curry", "curryRight", "partial", "partialRight"], function (t) {
                    z[t].placeholder = z
                }),
                r(["drop", "take"], function (t, e) {
                    Le.prototype[t] = function (n) {
                            n = n === J ? 1 : ma(ls(n), 0);
                            var i = this.__filtered__ && !e ? new Le(this) : this.clone();
                            return i.__filtered__ ? i.__takeCount__ = ba(n, i.__takeCount__) : i.__views__.push({
                                    size: ba(n, Pt),
                                    type: t + (i.__dir__ < 0 ? "Right" : "")
                                }),
                                i
                        },
                        Le.prototype[t + "Right"] = function (e) {
                            return this.reverse()[t](e).reverse()
                        }
                }),
                r(["filter", "map", "takeWhile"], function (t, e) {
                    var n = e + 1,
                        i = n == Tt || 3 == n;
                    Le.prototype[t] = function (t) {
                        var e = this.clone();
                        return e.__iteratees__.push({
                                iteratee: Hr(t, 3),
                                type: n
                            }),
                            e.__filtered__ = e.__filtered__ || i,
                            e
                    }
                }),
                r(["head", "last"], function (t, e) {
                    var n = "take" + (e ? "Right" : "");
                    Le.prototype[t] = function () {
                        return this[n](1).value()[0]
                    }
                }),
                r(["initial", "tail"], function (t, e) {
                    var n = "drop" + (e ? "" : "Right");
                    Le.prototype[t] = function () {
                        return this.__filtered__ ? new Le(this) : this[n](1)
                    }
                }),
                Le.prototype.compact = function () {
                    return this.filter(Es)
                },
                Le.prototype.find = function (t) {
                    return this.filter(t).head()
                },
                Le.prototype.findLast = function (t) {
                    return this.reverse().find(t)
                },
                Le.prototype.invokeMap = Ti(function (t, e) {
                    return "function" == typeof t ? new Le(this) : this.map(function (n) {
                        return ti(n, t, e)
                    })
                }),
                Le.prototype.reject = function (t) {
                    return this.filter(zo(Hr(t)))
                },
                Le.prototype.slice = function (t, e) {
                    t = ls(t);
                    var n = this;
                    return n.__filtered__ && (t > 0 || e < 0) ? new Le(n) : (t < 0 ? n = n.takeRight(-t) : t && (n = n.drop(t)),
                        e !== J && (n = (e = ls(e)) < 0 ? n.dropRight(-e) : n.take(e - t)),
                        n)
                },
                Le.prototype.takeRightWhile = function (t) {
                    return this.reverse().takeWhile(t).reverse()
                },
                Le.prototype.toArray = function () {
                    return this.take(Pt)
                },
                Dn(Le.prototype, function (t, e) {
                    var n = /^(?:filter|find|map|reject)|While$/.test(e),
                        i = /^(?:head|last)$/.test(e),
                        r = z[i ? "take" + ("last" == e ? "Right" : "") : e],
                        o = i || /^find/.test(e);
                    r && (z.prototype[e] = function () {
                        var e = this.__wrapped__,
                            s = i ? [1] : arguments,
                            a = e instanceof Le,
                            l = s[0],
                            c = a || Hl(e),
                            u = function (t) {
                                var e = r.apply(z, h([t], s));
                                return i && d ? e[0] : e
                            };
                        c && n && "function" == typeof l && 1 != l.length && (a = c = !1);
                        var d = this.__chain__,
                            f = !!this.__actions__.length,
                            p = o && !d,
                            g = a && !f;
                        if (!o && c) {
                            e = g ? e : new Le(this);
                            var _ = t.apply(e, s);
                            return _.__actions__.push({
                                    func: Ro,
                                    args: [u],
                                    thisArg: J
                                }),
                                new Z(_, d)
                        }
                        return p && g ? t.apply(this, s) : (_ = this.thru(u),
                            p ? i ? _.value()[0] : _.value() : _)
                    })
                }),
                r(["pop", "push", "shift", "sort", "splice", "unshift"], function (t) {
                    var e = Bs[t],
                        n = /^(?:push|sort|unshift)$/.test(t) ? "tap" : "thru",
                        i = /^(?:pop|shift)$/.test(t);
                    z.prototype[t] = function () {
                        var t = arguments;
                        if (i && !this.__chain__) {
                            var r = this.value();
                            return e.apply(Hl(r) ? r : [], t)
                        }
                        return this[n](function (n) {
                            return e.apply(Hl(n) ? n : [], t)
                        })
                    }
                }),
                Dn(Le.prototype, function (t, e) {
                    var n = z[e];
                    if (n) {
                        var i = n.name + "";
                        (Da[i] || (Da[i] = [])).push({
                            name: e,
                            func: n
                        })
                    }
                }),
                Da[wr(J, dt).name] = [{
                    name: "wrapper",
                    func: J
                }],
                Le.prototype.clone = function () {
                    var t = new Le(this.__wrapped__);
                    return t.__actions__ = sr(this.__actions__),
                        t.__dir__ = this.__dir__,
                        t.__filtered__ = this.__filtered__,
                        t.__iteratees__ = sr(this.__iteratees__),
                        t.__takeCount__ = this.__takeCount__,
                        t.__views__ = sr(this.__views__),
                        t
                },
                Le.prototype.reverse = function () {
                    if (this.__filtered__) {
                        var t = new Le(this);
                        t.__dir__ = -1,
                            t.__filtered__ = !0
                    } else
                        (t = this.clone()).__dir__ *= -1;
                    return t
                },
                Le.prototype.value = function () {
                    var t = this.__wrapped__.value(),
                        e = this.__dir__,
                        n = Hl(t),
                        i = e < 0,
                        r = n ? t.length : 0,
                        o = Gr(0, r, this.__views__),
                        s = o.start,
                        a = o.end,
                        l = a - s,
                        c = i ? a : s - 1,
                        u = this.__iteratees__,
                        h = u.length,
                        d = 0,
                        f = ba(l, this.__takeCount__);
                    if (!n || !i && r == l && f == l)
                        return Ui(t, this.__actions__);
                    var p = [];
                    t: for (; l-- && d < f;) {
                        for (var g = -1, _ = t[c += e]; ++g < h;) {
                            var y = u[g],
                                v = y.iteratee,
                                m = y.type,
                                b = v(_);
                            if (m == Ot)
                                _ = b;
                            else if (!b) {
                                if (m == Tt)
                                    continue t;
                                break t
                            }
                        }
                        p[d++] = _
                    }
                    return p
                },
                z.prototype.at = El,
                z.prototype.chain = function () {
                    return Lo(this)
                },
                z.prototype.commit = function () {
                    return new Z(this.value(), this.__chain__)
                },
                z.prototype.next = function () {
                    this.__values__ === J && (this.__values__ = ss(this.value()));
                    var t = this.__index__ >= this.__values__.length;
                    return {
                        done: t,
                        value: t ? J : this.__values__[this.__index__++]
                    }
                },
                z.prototype.plant = function (t) {
                    for (var e, n = this; n instanceof X;) {
                        var i = To(n);
                        i.__index__ = 0,
                            i.__values__ = J,
                            e ? r.__wrapped__ = i : e = i;
                        var r = i;
                        n = n.__wrapped__
                    }
                    return r.__wrapped__ = t,
                        e
                },
                z.prototype.reverse = function () {
                    var t = this.__wrapped__;
                    if (t instanceof Le) {
                        var e = t;
                        return this.__actions__.length && (e = new Le(this)),
                            (e = e.reverse()).__actions__.push({
                                func: Ro,
                                args: [Do],
                                thisArg: J
                            }),
                            new Z(e, this.__chain__)
                    }
                    return this.thru(Do)
                },
                z.prototype.toJSON = z.prototype.valueOf = z.prototype.value = function () {
                    return Ui(this.__wrapped__, this.__actions__)
                },
                z.prototype.first = z.prototype.head,
                sa && (z.prototype[sa] = function () {
                    return this
                }),
                z
        }();
    "function" == typeof define && "object" == typeof define.amd && define.amd ? (Cn._ = Vn,
        define(function () {
            return Vn
        })) : jn ? ((jn.exports = Vn)._ = Vn,
        Sn._ = Vn) : Cn._ = Vn
}
.call(this),
    function (t, e) {
        "object" == typeof exports && "object" == typeof module ? module.exports = e(require("lodash")) : "function" == typeof define && define.amd ? define(["lodash"], e) : "object" == typeof exports ? exports.machina = e(require("lodash")) : t.machina = e(t._)
    }(this, function (t) {
        return function (t) {
            function e(i) {
                if (n[i])
                    return n[i].exports;
                var r = n[i] = {
                    exports: {},
                    id: i,
                    loaded: !1
                };
                return t[i].call(r.exports, r, r.exports, e),
                    r.loaded = !0,
                    r.exports
            }
            var n = {};
            return e.m = t,
                e.c = n,
                e.p = "",
                e(0)
        }([function (t, e, n) {
            var i = n(1),
                r = n(2);
            t.exports = i.merge(r.instance, {
                Fsm: n(5),
                BehavioralFsm: n(6),
                utils: n(3),
                eventListeners: {
                    newFsm: []
                }
            })
        }, function (e, n) {
            e.exports = t
        }, function (t, e, n) {
            function i() {
                return {
                    emit: function (t) {
                        var e = r.getLeaklessArgs(arguments);
                        this.eventListeners["*"] && o.each(this.eventListeners["*"], function (t) {
                                if (this.useSafeEmit)
                                    try {
                                        t.apply(this, e)
                                    } catch (t) {
                                        console && console.log
                                    }
                                else
                                    t.apply(this, e)
                            }, this),
                            this.eventListeners[t] && o.each(this.eventListeners[t], function (t) {
                                if (this.useSafeEmit)
                                    try {
                                        t.apply(this, e.slice(1))
                                    } catch (t) {
                                        console && console.log
                                    }
                                else
                                    t.apply(this, e.slice(1))
                            }, this)
                    },
                    on: function (t, e) {
                        var n = this;
                        return n.eventListeners = n.eventListeners || {
                                "*": []
                            },
                            n.eventListeners[t] || (n.eventListeners[t] = []),
                            n.eventListeners[t].push(e), {
                                eventName: t,
                                callback: e,
                                off: function () {
                                    n.off(t, e)
                                }
                            }
                    },
                    off: function (t, e) {
                        this.eventListeners = this.eventListeners || {
                                "*": []
                            },
                            t ? this.eventListeners[t] = e ? o.without(this.eventListeners[t], e) : [] : this.eventListeners = {}
                    }
                }
            }
            var r = n(3),
                o = n(1);
            t.exports = {
                getInstance: i,
                instance: i()
            }
        }, function (t, e, n) {
            function i() {
                return {
                    initialState: "uninitialized",
                    eventListeners: {
                        "*": []
                    },
                    states: {},
                    namespace: a(),
                    useSafeEmit: !1,
                    hierarchy: {},
                    pendingDelegations: {}
                }
            }
            var r = [].slice,
                o = n(4),
                s = n(1),
                a = function () {
                    var t = 0;
                    return function () {
                        return "fsm." + t++
                    }
                }(),
                l = ["states", "initialState"];
            t.exports = {
                createUUID: function () {
                    for (var t = [], e = 0; e < 36; e++)
                        t[e] = "0123456789abcdef".substr(Math.floor(16 * Math.random()), 1);
                    return t[14] = "4",
                        t[19] = "0123456789abcdef".substr(3 & t[19] | 8, 1),
                        t[8] = t[13] = t[18] = t[23] = "-",
                        t.join("")
                },
                extend: function (t, e) {
                    var n, i = this,
                        o = {},
                        a = function () {};
                    return n = t && t.hasOwnProperty("constructor") ? t.constructor : function () {
                            var t = r.call(arguments, 0);
                            t[0] = t[0] || {};
                            var e, n = t[0].states || {};
                            (e = s.merge(s.cloneDeep(o), {
                                states: n
                            })).initialState = t[0].initialState || this.initialState,
                                s.extend(t[0], e),
                                i.apply(this, t)
                        },
                        s.merge(n, i),
                        a.prototype = i.prototype,
                        n.prototype = new a,
                        t && (s.extend(n.prototype, t),
                            s.merge(o, s.transform(t, function (t, e, n) {
                                -1 !== l.indexOf(n) && (t[n] = e)
                            }))),
                        e && s.merge(n, e),
                        n.prototype.constructor = n,
                        n.__super__ = i.prototype,
                        n
                },
                getDefaultBehavioralOptions: i,
                getDefaultOptions: i,
                getDefaultClientMeta: function () {
                    return {
                        inputQueue: [],
                        targetReplayState: "",
                        state: void 0,
                        priorState: void 0,
                        priorAction: "",
                        currentAction: "",
                        currentActionArgs: void 0,
                        inExitHandler: !1
                    }
                },
                getChildFsmInstance: function (t) {
                    if (t) {
                        var e = {};
                        return "object" == typeof t ? t.factory ? (e = t).instance = e.factory() : e.factory = function () {
                                return t
                            } :
                            "function" == typeof t && (e.factory = t),
                            e.instance = e.factory(),
                            e
                    }
                },
                getLeaklessArgs: function (t, e) {
                    for (var n = [], i = e || 0; i < t.length; i++)
                        n[i] = t[i];
                    return n
                },
                listenToChild: function (t, e) {
                    return e.on("*", function (e, n) {
                        switch (e) {
                            case o.NO_HANDLER:
                                n.ticket || n.delegated || n.namespace === t.namespace || (n.args[1].bubbling = !0),
                                    "_reset" !== n.inputType && t.handle.apply(t, n.args);
                                break;
                            case o.HANDLING:
                                var i = n.ticket;
                                i && t.pendingDelegations[i] && delete t.pendingDelegations[i],
                                    t.emit(e, n);
                                break;
                            default:
                                t.emit(e, n)
                        }
                    })
                },
                makeFsmNamespace: a
            }
        }, function (t, e) {
            t.exports = {
                NEXT_TRANSITION: "transition",
                HANDLING: "handling",
                HANDLED: "handled",
                NO_HANDLER: "nohandler",
                TRANSITION: "transition",
                TRANSITIONED: "transitioned",
                INVALID_STATE: "invalidstate",
                DEFERRED: "deferred",
                NEW_FSM: "newfsm"
            }
        }, function (t, e, n) {
            var i = n(6),
                r = n(3),
                o = n(1),
                s = {
                    constructor: function () {
                        i.apply(this, arguments),
                            this.ensureClientMeta()
                    },
                    initClient: function () {
                        var t = this.initialState;
                        if (!t)
                            throw new Error("You must specify an initial state for this FSM");
                        if (!this.states[t])
                            throw new Error("The initial state specified does not exist in the states object.");
                        this.transition(t)
                    },
                    ensureClientMeta: function () {
                        return this._stamped || (this._stamped = !0,
                                o.defaults(this, o.cloneDeep(r.getDefaultClientMeta())),
                                this.initClient()),
                            this
                    },
                    ensureClientArg: function (t) {
                        var e = t;
                        return "object" != typeof e[0] || "inputType" in e[0] || e[0] === this ? ("object" != typeof e[0] || "object" == typeof e[0] && "inputType" in e[0]) && e.unshift(this) : e.splice(0, 1, this),
                            e
                    },
                    getHandlerArgs: function (t, e) {
                        var n = t,
                            i = n[1];
                        return "object" == typeof inputType && n.splice(1, 1, i.inputType),
                            e ? n.slice(1) : n.slice(2)
                    },
                    getSystemHandlerArgs: function (t, e) {
                        return t
                    },
                    buildEventPayload: function () {
                        var t = this.ensureClientArg(r.getLeaklessArgs(arguments))[1];
                        return o.isPlainObject(t) ? o.extend(t, {
                            namespace: this.namespace
                        }) : {
                            data: t || null,
                            namespace: this.namespace
                        }
                    }
                };
            o.each(["handle", "transition", "deferUntilTransition", "processQueue", "clearQueue"], function (t) {
                    s[t] = function () {
                        var e = this.ensureClientArg(r.getLeaklessArgs(arguments));
                        return i.prototype[t].apply(this, e)
                    }
                }),
                s = i.extend(s),
                t.exports = s
        }, function (t, e, n) {
            function i(t) {
                r.extend(this, t),
                    r.defaults(this, o.getDefaultBehavioralOptions()),
                    this.initialize.apply(this, arguments),
                    a.emit(l.NEW_FSM, this)
            }
            var r = n(1),
                o = n(3),
                s = n(2),
                a = s.instance,
                l = n(4);
            r.extend(i.prototype, {
                    initialize: function () {},
                    initClient: function (t) {
                        var e = this.initialState;
                        if (!e)
                            throw new Error("You must specify an initial state for this FSM");
                        if (!this.states[e])
                            throw new Error("The initial state specified does not exist in the states object.");
                        this.transition(t, e)
                    },
                    configForState: function (t) {
                        var e, n = this.states[t];
                        return r.each(this.hierarchy, function (t, e) {
                                t && "function" == typeof t.off && t.off()
                            }),
                            n._child && (n._child = o.getChildFsmInstance(n._child),
                                e = n._child && n._child.instance,
                                this.hierarchy[e.namespace] = o.listenToChild(this, e)),
                            e
                    },
                    ensureClientMeta: function (t) {
                        if ("object" != typeof t)
                            throw new Error("An FSM client must be an object.");
                        return t.__machina__ = t.__machina__ || {},
                            t.__machina__[this.namespace] || (t.__machina__[this.namespace] = r.cloneDeep(o.getDefaultClientMeta()),
                                this.initClient(t)),
                            t.__machina__[this.namespace]
                    },
                    buildEventPayload: function (t, e) {
                        return r.isPlainObject(e) ? r.extend(e, {
                            client: t,
                            namespace: this.namespace
                        }) : {
                            client: t,
                            data: e || null,
                            namespace: this.namespace
                        }
                    },
                    getHandlerArgs: function (t, e) {
                        var n = t.slice(0),
                            i = n[1];
                        return "object" == typeof i && n.splice(1, 1, i.inputType),
                            e ? n : [n[0]].concat(n.slice(2))
                    },
                    getSystemHandlerArgs: function (t, e) {
                        return [e].concat(t)
                    },
                    handle: function (t, e) {
                        var n = e;
                        if (void 0 === e)
                            throw new Error("The input argument passed to the FSM's handle method is undefined. Did you forget to pass the input name?");
                        "string" == typeof e && (n = {
                            inputType: e,
                            delegated: !1,
                            ticket: void 0
                        });
                        var i = this.ensureClientMeta(t),
                            s = o.getLeaklessArgs(arguments);
                        "object" != typeof e && s.splice(1, 1, n),
                            i.currentActionArgs = s.slice(1);
                        var a, c, u, h, d, f = i.state,
                            p = this.states[f],
                            g = !1;
                        if (!i.inExitHandler)
                            if (!(u = this.configForState(f)) || this.pendingDelegations[n.ticket] || n.bubbling) {
                                n.ticket && this.pendingDelegations[n.ticket] && delete this.pendingDelegations[n.ticket],
                                    g = "*" === (a = p[n.inputType] ? n.inputType : "*"),
                                    c = p[a] || this[a] || this["*"],
                                    d = i.state + "." + a,
                                    i.currentAction = d;
                                var _ = this.buildEventPayload(t, {
                                    inputType: n.inputType,
                                    delegated: n.delegated,
                                    ticket: n.ticket
                                });
                                c ? (this.emit(l.HANDLING, _),
                                        "function" == typeof c ? h = c.apply(this, this.getHandlerArgs(s, g)) : (h = c,
                                            this.transition(t, c)),
                                        this.emit(l.HANDLED, _)) : this.emit(l.NO_HANDLER, r.extend({
                                        args: s
                                    }, _)),
                                    i.priorAction = i.currentAction,
                                    i.currentAction = "",
                                    i.currentActionArgs = void 0
                            } else
                                n.ticket = n.ticket || o.createUUID(),
                                n.delegated = !0,
                                this.pendingDelegations[n.ticket] = {
                                    delegatedTo: u.namespace
                                },
                                h = u.handle.apply(u, s);
                        return h
                    },
                    transition: function (t, e) {
                        var n, i = this.ensureClientMeta(t),
                            r = i.state,
                            s = this.states[r],
                            a = this.states[e],
                            c = o.getLeaklessArgs(arguments).slice(2);
                        if (!i.inExitHandler && e !== r) {
                            if (a) {
                                n = this.configForState(e),
                                    s && s._onExit && (i.inExitHandler = !0,
                                        s._onExit.call(this, t),
                                        i.inExitHandler = !1),
                                    i.targetReplayState = e,
                                    i.priorState = r,
                                    i.state = e;
                                var u = this.buildEventPayload(t, {
                                    fromState: i.priorState,
                                    action: i.currentAction,
                                    toState: e
                                });
                                return this.emit(l.TRANSITION, u),
                                    a._onEnter && (a._onEnter.apply(this, this.getSystemHandlerArgs(c, t)),
                                        this.emit(l.TRANSITIONED, u)),
                                    n && n.handle(t, "_reset"),
                                    void(i.targetReplayState === e && this.processQueue(t, l.NEXT_TRANSITION))
                            }
                            this.emit(l.INVALID_STATE, this.buildEventPayload(t, {
                                state: i.state,
                                attemptedState: e
                            }))
                        }
                    },
                    deferUntilTransition: function (t, e) {
                        var n = this.ensureClientMeta(t);
                        if (n.currentActionArgs) {
                            var i = {
                                type: l.NEXT_TRANSITION,
                                untilState: e,
                                args: n.currentActionArgs
                            };
                            n.inputQueue.push(i);
                            var r = this.buildEventPayload(t, {
                                state: n.state,
                                queuedArgs: i
                            });
                            this.emit(l.DEFERRED, r)
                        }
                    },
                    deferAndTransition: function (t, e) {
                        this.deferUntilTransition(t, e),
                            this.transition(t, e)
                    },
                    processQueue: function (t) {
                        var e = this.ensureClientMeta(t),
                            n = r.filter(e.inputQueue, function (t) {
                                return !t.untilState || t.untilState === e.state
                            });
                        e.inputQueue = r.difference(e.inputQueue, n),
                            r.each(n, function (e) {
                                this.handle.apply(this, [t].concat(e.args))
                            }, this)
                    },
                    clearQueue: function (t, e) {
                        var n = this.ensureClientMeta(t);
                        if (e) {
                            n.inputQueue = r.filter(n.inputQueue, function (t) {
                                return !e || t.untilState !== e
                            })
                        } else
                            n.inputQueue = []
                    },
                    compositeState: function (t) {
                        var e = this.ensureClientMeta(t).state,
                            n = this.states[e]._child && this.states[e]._child.instance;
                        return n && (e += "." + n.compositeState(t)),
                            e
                    }
                }, s.getInstance()),
                i.extend = o.extend,
                t.exports = i
        }])
    }),
    function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof exports ? require("jquery") : jQuery)
    }(function (t) {
        function e(t) {
            return a.raw ? t : encodeURIComponent(t)
        }

        function n(t) {
            return a.raw ? t : decodeURIComponent(t)
        }

        function i(t) {
            return e(a.json ? JSON.stringify(t) : String(t))
        }

        function r(t) {
            0 === t.indexOf('"') && (t = t.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\"));
            try {
                return t = decodeURIComponent(t.replace(s, " ")),
                    a.json ? JSON.parse(t) : t
            } catch (t) {}
        }

        function o(e, n) {
            var i = a.raw ? e : r(e);
            return t.isFunction(n) ? n(i) : i
        }
        var s = /\+/g,
            a = t.cookie = function (r, s, l) {
                if (void 0 !== s && !t.isFunction(s)) {
                    if ("number" == typeof (l = t.extend({}, a.defaults, l)).expires) {
                        var c = l.expires,
                            u = l.expires = new Date;
                        u.setTime(+u + 864e5 * c)
                    }
                    return document.cookie = [e(r), "=", i(s), l.expires ? "; expires=" + l.expires.toUTCString() : "", l.path ? "; path=" + l.path : "", l.domain ? "; domain=" + l.domain : "", l.secure ? "; secure" : ""].join("")
                }
                for (var h = r ? void 0 : {}, d = document.cookie ? document.cookie.split("; ") : [], f = 0, p = d.length; f < p; f++) {
                    var g = d[f].split("="),
                        _ = n(g.shift()),
                        y = g.join("=");
                    if (r && r === _) {
                        h = o(y, s);
                        break
                    }
                    r || void 0 === (y = o(y)) || (h[_] = y)
                }
                return h
            };
        a.defaults = {},
            t.removeCookie = function (e, n) {
                return void 0 !== t.cookie(e) && (t.cookie(e, "", t.extend({}, n, {
                    expires: -1
                })), !t.cookie(e))
            }
    }),
    function (t) {
        "use strict";

        function e(t, e) {
            var n = (65535 & t) + (65535 & e);
            return (t >> 16) + (e >> 16) + (n >> 16) << 16 | 65535 & n
        }

        function n(t, e) {
            return t << e | t >>> 32 - e
        }

        function i(t, i, r, o, s, a) {
            return e(n(e(e(i, t), e(o, a)), s), r)
        }

        function r(t, e, n, r, o, s, a) {
            return i(e & n | ~e & r, t, e, o, s, a)
        }

        function o(t, e, n, r, o, s, a) {
            return i(e & r | n & ~r, t, e, o, s, a)
        }

        function s(t, e, n, r, o, s, a) {
            return i(e ^ n ^ r, t, e, o, s, a)
        }

        function a(t, e, n, r, o, s, a) {
            return i(n ^ (e | ~r), t, e, o, s, a)
        }

        function l(t, n) {
            t[n >> 5] |= 128 << n % 32,
                t[14 + (n + 64 >>> 9 << 4)] = n;
            var i, l, c, u, h, d = 1732584193,
                f = -271733879,
                p = -1732584194,
                g = 271733878;
            for (i = 0; i < t.length; i += 16)
                l = d,
                c = f,
                u = p,
                h = g,
                d = r(d, f, p, g, t[i], 7, -680876936),
                g = r(g, d, f, p, t[i + 1], 12, -389564586),
                p = r(p, g, d, f, t[i + 2], 17, 606105819),
                f = r(f, p, g, d, t[i + 3], 22, -1044525330),
                d = r(d, f, p, g, t[i + 4], 7, -176418897),
                g = r(g, d, f, p, t[i + 5], 12, 1200080426),
                p = r(p, g, d, f, t[i + 6], 17, -1473231341),
                f = r(f, p, g, d, t[i + 7], 22, -45705983),
                d = r(d, f, p, g, t[i + 8], 7, 1770035416),
                g = r(g, d, f, p, t[i + 9], 12, -1958414417),
                p = r(p, g, d, f, t[i + 10], 17, -42063),
                f = r(f, p, g, d, t[i + 11], 22, -1990404162),
                d = r(d, f, p, g, t[i + 12], 7, 1804603682),
                g = r(g, d, f, p, t[i + 13], 12, -40341101),
                p = r(p, g, d, f, t[i + 14], 17, -1502002290),
                f = r(f, p, g, d, t[i + 15], 22, 1236535329),
                d = o(d, f, p, g, t[i + 1], 5, -165796510),
                g = o(g, d, f, p, t[i + 6], 9, -1069501632),
                p = o(p, g, d, f, t[i + 11], 14, 643717713),
                f = o(f, p, g, d, t[i], 20, -373897302),
                d = o(d, f, p, g, t[i + 5], 5, -701558691),
                g = o(g, d, f, p, t[i + 10], 9, 38016083),
                p = o(p, g, d, f, t[i + 15], 14, -660478335),
                f = o(f, p, g, d, t[i + 4], 20, -405537848),
                d = o(d, f, p, g, t[i + 9], 5, 568446438),
                g = o(g, d, f, p, t[i + 14], 9, -1019803690),
                p = o(p, g, d, f, t[i + 3], 14, -187363961),
                f = o(f, p, g, d, t[i + 8], 20, 1163531501),
                d = o(d, f, p, g, t[i + 13], 5, -1444681467),
                g = o(g, d, f, p, t[i + 2], 9, -51403784),
                p = o(p, g, d, f, t[i + 7], 14, 1735328473),
                f = o(f, p, g, d, t[i + 12], 20, -1926607734),
                d = s(d, f, p, g, t[i + 5], 4, -378558),
                g = s(g, d, f, p, t[i + 8], 11, -2022574463),
                p = s(p, g, d, f, t[i + 11], 16, 1839030562),
                f = s(f, p, g, d, t[i + 14], 23, -35309556),
                d = s(d, f, p, g, t[i + 1], 4, -1530992060),
                g = s(g, d, f, p, t[i + 4], 11, 1272893353),
                p = s(p, g, d, f, t[i + 7], 16, -155497632),
                f = s(f, p, g, d, t[i + 10], 23, -1094730640),
                d = s(d, f, p, g, t[i + 13], 4, 681279174),
                g = s(g, d, f, p, t[i], 11, -358537222),
                p = s(p, g, d, f, t[i + 3], 16, -722521979),
                f = s(f, p, g, d, t[i + 6], 23, 76029189),
                d = s(d, f, p, g, t[i + 9], 4, -640364487),
                g = s(g, d, f, p, t[i + 12], 11, -421815835),
                p = s(p, g, d, f, t[i + 15], 16, 530742520),
                f = s(f, p, g, d, t[i + 2], 23, -995338651),
                d = a(d, f, p, g, t[i], 6, -198630844),
                g = a(g, d, f, p, t[i + 7], 10, 1126891415),
                p = a(p, g, d, f, t[i + 14], 15, -1416354905),
                f = a(f, p, g, d, t[i + 5], 21, -57434055),
                d = a(d, f, p, g, t[i + 12], 6, 1700485571),
                g = a(g, d, f, p, t[i + 3], 10, -1894986606),
                p = a(p, g, d, f, t[i + 10], 15, -1051523),
                f = a(f, p, g, d, t[i + 1], 21, -2054922799),
                d = a(d, f, p, g, t[i + 8], 6, 1873313359),
                g = a(g, d, f, p, t[i + 15], 10, -30611744),
                p = a(p, g, d, f, t[i + 6], 15, -1560198380),
                f = a(f, p, g, d, t[i + 13], 21, 1309151649),
                d = a(d, f, p, g, t[i + 4], 6, -145523070),
                g = a(g, d, f, p, t[i + 11], 10, -1120210379),
                p = a(p, g, d, f, t[i + 2], 15, 718787259),
                f = a(f, p, g, d, t[i + 9], 21, -343485551),
                d = e(d, l),
                f = e(f, c),
                p = e(p, u),
                g = e(g, h);
            return [d, f, p, g]
        }

        function c(t) {
            var e, n = "",
                i = 32 * t.length;
            for (e = 0; e < i; e += 8)
                n += String.fromCharCode(t[e >> 5] >>> e % 32 & 255);
            return n
        }

        function u(t) {
            var e, n = [];
            for (n[(t.length >> 2) - 1] = void 0,
                e = 0; e < n.length; e += 1)
                n[e] = 0;
            var i = 8 * t.length;
            for (e = 0; e < i; e += 8)
                n[e >> 5] |= (255 & t.charCodeAt(e / 8)) << e % 32;
            return n
        }

        function h(t) {
            return c(l(u(t), 8 * t.length))
        }

        function d(t, e) {
            var n, i, r = u(t),
                o = [],
                s = [];
            for (o[15] = s[15] = void 0,
                r.length > 16 && (r = l(r, 8 * t.length)),
                n = 0; n < 16; n += 1)
                o[n] = 909522486 ^ r[n],
                s[n] = 1549556828 ^ r[n];
            return i = l(o.concat(u(e)), 512 + 8 * e.length),
                c(l(s.concat(i), 640))
        }

        function f(t) {
            var e, n, i = "0123456789abcdef",
                r = "";
            for (n = 0; n < t.length; n += 1)
                e = t.charCodeAt(n),
                r += i.charAt(e >>> 4 & 15) + i.charAt(15 & e);
            return r
        }

        function p(t) {
            return unescape(encodeURIComponent(t))
        }

        function g(t) {
            return h(p(t))
        }

        function _(t) {
            return f(g(t))
        }

        function y(t, e) {
            return d(p(t), p(e))
        }

        function v(t, e) {
            return f(y(t, e))
        }

        function m(t, e, n) {
            return e ? n ? y(e, t) : v(e, t) : n ? g(t) : _(t)
        }
        "function" == typeof define && define.amd ? define(function () {
            return m
        }) : "object" == typeof module && module.exports ? module.exports = m : t.md5 = m
    }(this),
    function (t) {
        t.fn.niceSelect = function (e) {
            function n(e) {
                e.after(t("<div></div>").addClass("nice-select").addClass(e.attr("class") || "").addClass(e.attr("disabled") ? "disabled" : "").attr("tabindex", e.attr("disabled") ? null : "0").html('<span class="current"></span><ul class="list"></ul>'));
                var n = e.next(),
                    i = e.find("option"),
                    r = e.find("option:selected");
                n.find(".current").html(r.data("display") || r.text()),
                    i.each(function (e) {
                        var i = t(this),
                            r = i.data("display");
                        n.find("ul").append(t("<li></li>").attr("data-value", i.val()).attr("data-display", r || null).addClass("option" + (i.is(":selected") ? " selected" : "") + (i.is(":disabled") ? " disabled" : "")).html(i.text()))
                    })
            }
            if ("string" == typeof e)
                return "update" == e ? this.each(function () {
                        var e = t(this),
                            i = t(this).next(".nice-select"),
                            r = i.hasClass("open");
                        i.length && (i.remove(),
                            n(e),
                            r && e.next().trigger("click"))
                    }) : "destroy" == e && (this.each(function () {
                            var e = t(this),
                                n = t(this).next(".nice-select");
                            n.length && (n.remove(),
                                e.css("display", ""))
                        }),
                        0 == t(".nice-select").length && t(document).off(".nice_select")),
                    this;
            this.hide(),
                this.each(function () {
                    var e = t(this);
                    e.next().hasClass("nice-select") || n(e)
                }),
                t(document).off(".nice_select"),
                t(document).on("click.nice_select", ".nice-select", function (e) {
                    var n = t(this);
                    t(".nice-select").not(n).removeClass("open"),
                        n.toggleClass("open"),
                        n.hasClass("open") ? (n.find(".option"),
                            n.find(".focus").removeClass("focus"),
                            n.find(".selected").addClass("focus")) : n.focus()
                }),
                t(document).on("click.nice_select", function (e) {
                    0 === t(e.target).closest(".nice-select").length && t(".nice-select").removeClass("open").find(".option")
                }),
                t(document).on("click.nice_select", ".nice-select .option:not(.disabled)", function (e) {
                    var n = t(this),
                        i = n.closest(".nice-select");
                    i.find(".selected").removeClass("selected"),
                        n.addClass("selected");
                    var r = n.data("display") || n.text();
                    i.find(".current").text(r),
                        i.prev("select").val(n.data("value")).trigger("change")
                }),
                t(document).on("keydown.nice_select", ".nice-select", function (e) {
                    var n = t(this),
                        i = t(n.find(".focus") || n.find(".list .option.selected"));
                    if (32 == e.keyCode || 13 == e.keyCode)
                        return n.hasClass("open") ? i.trigger("click") : n.trigger("click"), !1;
                    if (40 == e.keyCode) {
                        if (n.hasClass("open")) {
                            var r = i.nextAll(".option:not(.disabled)").first();
                            r.length > 0 && (n.find(".focus").removeClass("focus"),
                                r.addClass("focus"))
                        } else
                            n.trigger("click");
                        return !1
                    }
                    if (38 == e.keyCode) {
                        if (n.hasClass("open")) {
                            var o = i.prevAll(".option:not(.disabled)").first();
                            o.length > 0 && (n.find(".focus").removeClass("focus"),
                                o.addClass("focus"))
                        } else
                            n.trigger("click");
                        return !1
                    }
                    if (27 == e.keyCode)
                        n.hasClass("open") && n.trigger("click");
                    else if (9 == e.keyCode && n.hasClass("open"))
                        return !1
                });
            var i = document.createElement("a").style;
            return i.cssText = "pointer-events:auto",
                "auto" !== i.pointerEvents && t("html").addClass("no-csspointerevents"),
                this
        }
    }(jQuery);
var Vector = function (t, e) {
    this.x = t,
        this.y = e
};
Vector.prototype.add = function (t) {
        return new Vector(this.x + t.x, this.y + t.y)
    },
    Vector.prototype.subtract = function (t) {
        return new Vector(this.x - t.x, this.y - t.y)
    },
    Vector.prototype.vectorWithinDist = function (t, e) {
        return this.distanceSquared(t) <= e * e
    },
    Vector.prototype.vectorsWithinDist = function (t, e) {
        var n = !1;
        return $.each(t, function (t, i) {
                    return this.vectorWithinDist(i, e) && (n = !0), !1
                }
                .bind(this)),
            n
    },
    Vector.prototype.distanceSquared = function (t) {
        var e = t.y - this.y,
            n = t.x - this.x;
        return e * e + n * n
    },
    Vector.prototype.withinRect = function (t) {
        var e = !1,
            n = t.x,
            i = t.x + t.width,
            r = t.y,
            o = t.y + t.height;
        return this.x >= n && this.x <= i && this.y >= r && this.y <= o && (e = !0),
            e
    },
    Vector.prototype.magnitude = function () {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    },
    function (t) {
        var e, n, i = t(window),
            r = {},
            o = [],
            s = [],
            a = null,
            l = [],
            c = null,
            u = /(iPad|iPhone|iPod)/g.test(navigator.userAgent),
            h = {
                _init: function (e) {
                    var n = t(e),
                        i = n.data("popupoptions");
                    s[e.id] = !1,
                        o[e.id] = 0,
                        n.data("popup-initialized") || (n.attr("data-popup-initialized", "true"),
                            h._initonce(e)),
                        i.autoopen && setTimeout(function () {
                            h.show(e, 0)
                        }, 0)
                },
                _initonce: function (n) {
                    var i, r, o = t(n),
                        s = t("body"),
                        l = o.data("popupoptions");
                    if (a = parseInt(s.css("margin-right"), 10),
                        c = void 0 !== document.body.style.webkitTransition || void 0 !== document.body.style.MozTransition || void 0 !== document.body.style.msTransition || void 0 !== document.body.style.OTransition || void 0 !== document.body.style.transition,
                        "tooltip" == l.type && (l.background = !1,
                            l.scrolllock = !1),
                        l.backgroundactive && (l.background = !1,
                            l.blur = !1,
                            l.scrolllock = !1),
                        l.scrolllock) {
                        var d, f;
                        void 0 === e && (f = (d = t('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children(),
                            e = f.innerWidth() - f.height(99).innerWidth(),
                            d.remove())
                    }
                    if (o.attr("id") || o.attr("id", "j-popup-" + parseInt(1e8 * Math.random(), 10)),
                        o.addClass("popup_content"),
                        s.prepend(n),
                        o.wrap('<div id="' + n.id + '_wrapper" class="popup_wrapper" />'),
                        (i = t("#" + n.id + "_wrapper")).css({
                            opacity: 0,
                            visibility: "hidden",
                            position: "absolute"
                        }),
                        u && i.css("cursor", "pointer"),
                        "overlay" == l.type && i.css("overflow", "auto"),
                        o.css({
                            opacity: 0,
                            visibility: "hidden",
                            display: "inline-block"
                        }),
                        l.setzindex && !l.autozindex && i.css("z-index", "999999"),
                        l.outline || o.css("outline", "none"),
                        l.transition && (o.css("transition", l.transition),
                            i.css("transition", l.transition)),
                        o.attr("aria-hidden", !0),
                        l.background && !t("#" + n.id + "_background").length) {
                        s.prepend('<div id="' + n.id + '_background" class="popup_background"></div>');
                        var p = t("#" + n.id + "_background");
                        p.css({
                                opacity: 0,
                                visibility: "hidden",
                                backgroundColor: l.color,
                                position: "fixed",
                                top: 0,
                                right: 0,
                                bottom: 0,
                                left: 0
                            }),
                            l.setzindex && !l.autozindex && p.css("z-index", "999998"),
                            l.transition && p.css("transition", l.transition)
                    }
                    "overlay" == l.type && (o.css({
                                textAlign: "left",
                                position: "relative",
                                verticalAlign: "middle"
                            }),
                            r = {
                                position: "fixed",
                                width: "100%",
                                height: "100%",
                                top: 0,
                                left: 0,
                                textAlign: "center"
                            },
                            l.backgroundactive && (r.position = "relative",
                                r.height = "0",
                                r.overflow = "visible"),
                            i.css(r),
                            i.append('<div class="popup_align" />'),
                            t(".popup_align").css({
                                display: "inline-block",
                                verticalAlign: "middle",
                                height: "100%"
                            })),
                        o.attr("role", "dialog");
                    var g = l.openelement ? l.openelement : "." + n.id + "_open";
                    t(g).each(function (e, n) {
                            t(n).attr("data-popup-ordinal", e),
                                n.id || t(n).attr("id", "open_" + parseInt(1e8 * Math.random(), 10))
                        }),
                        o.attr("aria-labelledby") || o.attr("aria-label") || o.attr("aria-labelledby", t(g).attr("id")),
                        "hover" == l.action ? (l.keepfocus = !1,
                            t(g).on("mouseenter", function (e) {
                                h.show(n, t(this).data("popup-ordinal"))
                            }),
                            t(g).on("mouseleave", function (t) {
                                h.hide(n)
                            })) : t(document).on("click", g, function (e) {
                            e.preventDefault();
                            var i = t(this).data("popup-ordinal");
                            setTimeout(function () {
                                h.show(n, i)
                            }, 0)
                        }),
                        l.detach ? o.hide().detach() : i.hide()
                },
                show: function (r, u) {
                    var f = t(r);
                    if (!f.data("popup-visible")) {
                        f.data("popup-initialized") || h._init(r),
                            f.attr("data-popup-initialized", "true");
                        var p = t("body"),
                            g = f.data("popupoptions"),
                            _ = t("#" + r.id + "_wrapper"),
                            y = t("#" + r.id + "_background");
                        if (d(r, u, g.beforeopen),
                            s[r.id] = u,
                            setTimeout(function () {
                                l.push(r.id)
                            }, 0),
                            g.autozindex) {
                            for (var v = document.getElementsByTagName("*"), m = v.length, b = 0, w = 0; w < m; w++) {
                                var x = t(v[w]).css("z-index");
                                "auto" !== x && b < (x = parseInt(x, 10)) && (b = x)
                            }
                            o[r.id] = b,
                                g.background && o[r.id] > 0 && t("#" + r.id + "_background").css({
                                    zIndex: o[r.id] + 1
                                }),
                                o[r.id] > 0 && _.css({
                                    zIndex: o[r.id] + 2
                                })
                        }
                        g.detach ? (_.prepend(r),
                                f.show()) : _.show(),
                            n = setTimeout(function () {
                                _.css({
                                        visibility: "visible",
                                        opacity: 1
                                    }),
                                    t("html").addClass("popup_visible").addClass("popup_visible_" + r.id),
                                    f.addClass("popup_content_visible")
                            }, 20),
                            g.scrolllock && (p.css("overflow", "hidden"),
                                p.height() > i.height() && p.css("margin-right", a + e)),
                            g.backgroundactive && f.css({
                                top: (i.height() - (f.get(0).offsetHeight + parseInt(f.css("margin-top"), 10) + parseInt(f.css("margin-bottom"), 10))) / 2 + "px"
                            }),
                            f.css({
                                visibility: "visible",
                                opacity: 1
                            }),
                            g.background && (y.css({
                                    visibility: "visible",
                                    opacity: g.opacity
                                }),
                                setTimeout(function () {
                                    y.css({
                                        opacity: g.opacity
                                    })
                                }, 0)),
                            f.data("popup-visible", !0),
                            h.reposition(r, u),
                            f.data("focusedelementbeforepopup", document.activeElement),
                            g.keepfocus && (f.attr("tabindex", -1),
                                setTimeout(function () {
                                    "closebutton" === g.focuselement ? t("#" + r.id + " ." + r.id + "_close:first").focus() : g.focuselement ? t(g.focuselement).focus() : f.focus()
                                }, g.focusdelay)),
                            t(g.pagecontainer).attr("aria-hidden", !0),
                            f.attr("aria-hidden", !1),
                            d(r, u, g.onopen),
                            c ? _.one("transitionend", function () {
                                d(r, u, g.opentransitionend)
                            }) : d(r, u, g.opentransitionend)
                    }
                },
                hide: function (e) {
                    n && clearTimeout(n);
                    var i = t("body"),
                        r = t(e),
                        o = r.data("popupoptions"),
                        u = t("#" + e.id + "_wrapper"),
                        h = t("#" + e.id + "_background");
                    r.data("popup-visible", !1),
                        1 === l.length ? t("html").removeClass("popup_visible").removeClass("popup_visible_" + e.id) : t("html").hasClass("popup_visible_" + e.id) && t("html").removeClass("popup_visible_" + e.id),
                        l.pop(),
                        t("html").hasClass("popup_content_visible") && r.removeClass("popup_content_visible"),
                        o.keepfocus && setTimeout(function () {
                            t(r.data("focusedelementbeforepopup")).is(":visible") && r.data("focusedelementbeforepopup").focus()
                        }, 0),
                        u.css({
                            visibility: "hidden",
                            opacity: 0
                        }),
                        r.css({
                            visibility: "hidden",
                            opacity: 0
                        }),
                        o.background && h.css({
                            visibility: "hidden",
                            opacity: 0
                        }),
                        t(o.pagecontainer).attr("aria-hidden", !1),
                        r.attr("aria-hidden", !0),
                        d(e, s[e.id], o.onclose),
                        c && "0s" !== r.css("transition-duration") ? r.one("transitionend", function (t) {
                            r.data("popup-visible") || (o.detach ? r.hide().detach() : u.hide()),
                                o.scrolllock && setTimeout(function () {
                                    i.css({
                                        overflow: "visible",
                                        "margin-right": a
                                    })
                                }, 10),
                                d(e, s[e.id], o.closetransitionend)
                        }) : (o.detach ? r.hide().detach() : u.hide(),
                            o.scrolllock && setTimeout(function () {
                                i.css({
                                    overflow: "visible",
                                    "margin-right": a
                                })
                            }, 10),
                            d(e, s[e.id], o.closetransitionend))
                },
                toggle: function (e, n) {
                    t(e).data("popup-visible") ? h.hide(e) : setTimeout(function () {
                        h.show(e, n)
                    }, 0)
                },
                reposition: function (e, n) {
                    var r = t(e),
                        o = r.data("popupoptions"),
                        s = t("#" + e.id + "_wrapper");
                    t("#" + e.id + "_background");
                    if (n = n || 0,
                        "tooltip" == o.type) {
                        s.css({
                            position: "absolute"
                        });
                        var a, l = (a = o.tooltipanchor ? t(o.tooltipanchor) : o.openelement ? t(o.openelement).filter('[data-popup-ordinal="' + n + '"]') : t("." + e.id + '_open[data-popup-ordinal="' + n + '"]')).offset();
                        "right" == o.horizontal ? s.css("left", l.left + a.outerWidth() + o.offsetleft) : "leftedge" == o.horizontal ? s.css("left", l.left + a.outerWidth() - a.outerWidth() + o.offsetleft) : "left" == o.horizontal ? s.css("right", i.width() - l.left - o.offsetleft) : "rightedge" == o.horizontal ? s.css("right", i.width() - l.left - a.outerWidth() - o.offsetleft) : s.css("left", l.left + a.outerWidth() / 2 - r.outerWidth() / 2 - parseFloat(r.css("marginLeft")) + o.offsetleft),
                            "bottom" == o.vertical ? s.css("top", l.top + a.outerHeight() + o.offsettop) : "bottomedge" == o.vertical ? s.css("top", l.top + a.outerHeight() - r.outerHeight() + o.offsettop) : "top" == o.vertical ? s.css("bottom", i.height() - l.top - o.offsettop) : "topedge" == o.vertical ? s.css("bottom", i.height() - l.top - r.outerHeight() - o.offsettop) : s.css("top", l.top + a.outerHeight() / 2 - r.outerHeight() / 2 - parseFloat(r.css("marginTop")) + o.offsettop)
                    } else
                        "overlay" == o.type && (o.horizontal ? s.css("text-align", o.horizontal) : s.css("text-align", "center"),
                            o.vertical ? r.css("vertical-align", o.vertical) : r.css("vertical-align", "middle"))
                }
            },
            d = function (e, n, i) {
                var r = t(e).data("popupoptions"),
                    o = r.openelement ? r.openelement : "." + e.id + "_open",
                    s = t(o + '[data-popup-ordinal="' + n + '"]');
                "function" == typeof i && i.call(t(e), e, s)
            };
        t(document).on("keydown", function (e) {
                if (l.length) {
                    var n = l[l.length - 1],
                        i = document.getElementById(n);
                    t(i).data("popupoptions").escape && 27 == e.keyCode && h.hide(i)
                }
            }),
            t(document).on("click", function (e) {
                if (l.length) {
                    var n = l[l.length - 1],
                        i = document.getElementById(n),
                        r = t(i).data("popupoptions").closeelement ? t(i).data("popupoptions").closeelement : "." + i.id + "_close";
                    t(e.target).closest(r).length && (e.preventDefault(),
                            h.hide(i)),
                        t(i).data("popupoptions").blur && !t(e.target).closest("#" + n).length && 2 !== e.which && (h.hide(i),
                            "overlay" === t(i).data("popupoptions").type && e.preventDefault())
                }
            }),
            t(document).on("focusin", function (e) {
                if (l.length) {
                    var n = l[l.length - 1],
                        i = document.getElementById(n);
                    t(i).data("popupoptions").keepfocus && (i.contains(e.target) || (e.stopPropagation(),
                        i.focus()))
                }
            }),
            t.fn.popup = function (e) {
                return this.each(function () {
                    if ($el = t(this),
                        "object" == typeof e) {
                        var n = t.extend({}, t.fn.popup.defaults, e);
                        $el.data("popupoptions", n),
                            r = $el.data("popupoptions"),
                            h._init(this)
                    } else
                        "string" == typeof e ? ($el.data("popupoptions") || ($el.data("popupoptions", t.fn.popup.defaults),
                                r = $el.data("popupoptions")),
                            h[e].call(this, this)) : ($el.data("popupoptions") || ($el.data("popupoptions", t.fn.popup.defaults),
                                r = $el.data("popupoptions")),
                            h._init(this))
                })
            },
            t.fn.popup.defaults = {
                type: "overlay",
                autoopen: !1,
                background: !0,
                backgroundactive: !1,
                color: "black",
                opacity: "0.5",
                horizontal: "center",
                vertical: "middle",
                offsettop: 0,
                offsetleft: 0,
                escape: !0,
                blur: !0,
                setzindex: !0,
                autozindex: !1,
                scrolllock: !1,
                keepfocus: !0,
                focuselement: null,
                focusdelay: 50,
                outline: !1,
                pagecontainer: null,
                detach: !1,
                openelement: null,
                closeelement: null,
                transition: null,
                tooltipanchor: null,
                beforeopen: null,
                onclose: null,
                onopen: null,
                opentransitionend: null,
                closetransitionend: null
            }
    }(jQuery);
var confirmPrompt = {
    callback: function () {}
};
$(document).ready(function () {
        $("#prompt_popup").popup(),
            $("#prompt_popup_ok_button").click(function () {
                $("#prompt_popup").popup("hide"),
                    confirmPrompt.callback()
            }),
            $(document).on("keydown", function (t) {})
    }),
    $.confirm = function (t, e, n) {
        e || (e = function () {}),
            n ? ($("#prompt_popup .popup_header").html(n),
                $("#prompt_popup .popup_header").css("display", "flex")) : $("#prompt_popup .popup_header").css("display", "none"),
            liHtml = "",
            $.each(t, function (t, e) {
                liHtml += "<li>" + e + "</li>"
            }),
            $("#prompt_popup_ul").html(liHtml);
        var i = function (t) {
            13 == t.keyCode && (confirmPrompt.callback(),
                $("#prompt_popup").popup("hide"))
        };
        confirmPrompt.callback = e,
            $("#prompt_popup").popup({
                autoopen: !0,
                onopen: function () {
                    $(document).bind("keydown", i)
                },
                onclose: function () {
                    $(document).unbind("keydown", i)
                }
            })
    };
var LoginPopupView = function () {
    this.__init()
};
LoginPopupView.prototype.__init = function () {
        $("#login_popup").popup({
            onclose: function () {
                    $(this).trigger("LOGIN_POPUP_CLOSE")
                }
                .bind(this),
            focuselement: "#login_popup input:first"
        });
        var t = function (t) {
                t.preventDefault(),
                    $(this).trigger("LOGIN_POPUP_LOGIN_CLICK")
            }
            .bind(this);
        $("#login_popup_login_button").click(t),
            $("#login_popup_form").submit(t)
    },
    LoginPopupView.prototype.show = function () {
        $("#login_popup").popup({
            autoopen: !0,
            onclose: function () {
                    $(this).trigger("LOGIN_POPUP_CLOSE")
                }
                .bind(this),
            focuselement: "#login_popup input:first"
        })
    },
    LoginPopupView.prototype.hide = function () {
        $("#login_popup").popup("hide")
    };
var LoginPopupController = function (t, e) {
    this.session = t,
        this.loginPopupView = e,
        this.__init()
};
LoginPopupController.prototype.__init = function () {
    this.session.on("transitioned", function (t) {
                "authenticating.BAD_LOGIN" == t.action && $.confirm(["Sorry, that username/password combination was not found!"]),
                    "awaiting_login_info" == this.session.state ? this.loginPopupView.show() : this.loginPopupView.hide()
            }
            .bind(this)),
        $(this.loginPopupView).on("LOGIN_POPUP_CLOSE", function () {
                "awaiting_login_info" == this.session.state && this.session.cancelPrompt()
            }
            .bind(this)),
        $(this.loginPopupView).on("LOGIN_POPUP_LOGIN_CLICK", function () {
                var t = $("#login_popup_username").val(),
                    e = $("#login_popup_password").val(),
                    n = md5(e);
                this.session.login(t, n)
            }
            .bind(this))
};
var RegisterPopupView = function () {
    this.__init()
};
RegisterPopupView.prototype.__init = function () {
        $("#register_popup").popup({
            onclose: function () {
                    $(this).trigger("REGISTER_POPUP_CLOSE")
                }
                .bind(this),
            focuselement: "#register_popup input:first"
        });
        var t = function (t) {
                t.preventDefault(),
                    $(this).trigger("REGISTER_POPUP_REGISTER_CLICK")
            }
            .bind(this);
        $("#register_popup_register_button").click(t),
            $("#register_popup_form").submit(t)
    },
    RegisterPopupView.prototype.show = function () {
        $("#register_popup").popup("show")
    },
    RegisterPopupView.prototype.hide = function () {
        $("#register_popup").popup("hide")
    };
var RegisterPopupController = function (t, e) {
    this.session = t,
        this.registerPopupView = e,
        this.__init()
};
RegisterPopupController.prototype.__init = function () {
    this.session.on("transitioned", function (t) {
                var e = function () {
                        this.session.promptRegistration()
                    }
                    .bind(this);
                "registering.BAD_REGISTER" == t.action ? ($.confirm(["Sorry, there was a problem with your registration."], e),
                        wasError = !0) : "registering.USERNAME_TAKEN" == t.action && ($.confirm(["Sorry, that username has already been taken."], e),
                        wasError = !0),
                    "awaiting_registration_info" == this.session.state ? this.registerPopupView.show() : this.registerPopupView.hide()
            }
            .bind(this)),
        $(this.registerPopupView).on("REGISTER_POPUP_CLOSE", function () {
                "awaiting_registration_info" == this.session.state && this.session.cancelPrompt()
            }
            .bind(this)),
        $(this.registerPopupView).on("REGISTER_POPUP_REGISTER_CLICK", function () {
                var t = $("#register_popup_username").val(),
                    e = $("#register_popup_password").val(),
                    n = md5(e),
                    i = $("#register_popup_first_name").val(),
                    r = $("#register_popup_last_name").val(),
                    o = $("#register_popup_email").val();
                this.session.register(t, n, i, r, o)
            }
            .bind(this))
};
var SessionUI = function (t) {
    this.session = t,
        this.__init()
};
SessionUI.prototype.__init = function () {
    this.session.on("transitioned", this.__sessionStateTransitioned.bind(this))
    this.__createPopups()
    $("#login_button").click(this.__loginClick.bind(this))
    $("#logout_button").click(this.__logoutClick.bind(this))
    $("#register_button").click(this.__registerClick.bind(this))
    $("#status_text").click(this.__statusClick.bind(this))
}

SessionUI.prototype.__createPopups = function () {
    var t = new LoginPopupView,
        e = (new LoginPopupController(this.session, t),
            new RegisterPopupView);
    new RegisterPopupController(this.session, e)
}

SessionUI.prototype.__statusClick = function () {
    window.open("/account", "_self")
}

SessionUI.prototype.__loginClick = function () {
    this.session.promptLogin()
}

SessionUI.prototype.__logoutClick = function () {
    this.session.logoutIsDisabled ? $.confirm(["Logout has been disabled for this page."]) : this.session.logout()
}

SessionUI.prototype.__registerClick = function () {
    this.session.promptRegistration()
}

SessionUI.prototype.__setStatusText = function (t) {
    "" == t ? $("#status_text").hide() : $("#status_text").show(),
        $("#status_text").html(t)
}

SessionUI.prototype.__sessionStateTransitioned = function () {
    var t = this.session.compositeState();
    "logged_out" == t ? (this.__setStatusText(""),
        $("#login_button").show(),
        $("#register_button").show(),
        $("#logout_button").hide()) : "awaiting_login_info" == t ? (this.__setStatusText("Waiting"),
        $("#login_button").hide(),
        $("#register_button").hide(),
        $("#logout_button").hide()) : "awaiting_registration_info" == t ? (this.__setStatusText("Waiting"),
        $("#login_button").hide(),
        $("#register_button").hide(),
        $("#logout_button").hide()) : "authenticating" == t ? (this.__setStatusText("Authenticating"),
        $("#login_button").hide(),
        $("#register_button").hide(),
        $("#logout_button").hide()) : "registering" == t ? (this.__setStatusText("Registering"),
        $("#login_button").hide(),
        $("#register_button").hide(),
        $("#logout_button").hide()) : "logged_in" == t && (this.__setStatusText(this.session.username),
        $("#login_button").hide(),
        $("#register_button").hide(),
        $("#logout_button").show())
};
var session;
$(document).ready(function () {
    session = new Session;
    new SessionUI(session);
    session.init()
});
var InteractiveImage = function (t) {
    this.canvas = document.createElement("canvas")
    this.context = this.canvas.getContext("2d")
    this.__isDirty = !0
    setInterval(this.__step.bind(this), 25)
};
InteractiveImage.prototype.__step = function (t) {
    this.__isDirty && this.draw()
}
InteractiveImage.prototype.serialize = function (t) {
    return this.annotator.serialize(this.zoomer.zoom)
}
InteractiveImage.prototype.onModuleChange = function () {
    this.__isDirty = !0
}
InteractiveImage.prototype.draw = function () {
    if (!this.img)
        throw "InteractiveImage.draw(): No img set. Set using InteractiveImage.setImg(img)";
    var t = 1;
    this.zoomer && (t = this.zoomer.zoom);
    var e = this.getScroll();
    DEBUG || this.context.clearRect(0, 0, this.img.width, this.img.height);
    var n = Math.floor(e.x / t),
        i = Math.floor(e.y / t);
    this.context.drawImage(this.img, n, i, Math.floor(this.img.width - n), Math.floor(this.img.height - i), 0, 0, Math.floor(this.img.width * t - n * t), Math.floor(this.img.height * t - i * t)),
        this.annotator && this.annotator.draw(this.context, this.scroller),
        this.toolbox && this.toolbox.draw(this.context, this.scroller),
        this.__isDirty = !1
}
InteractiveImage.prototype.getScroll = function () {
    var t = 0,
        e = 0;
    return this.scroller && (t = this.scroller.scrollX,
        e = this.scroller.scrollY), {
        x: t,
        y: e
    }
}
InteractiveImage.prototype.getSize = function () {
    return {
        width: this.img.width * this.zoomer.zoom,
        height: this.img.height * this.zoomer.zoom
    }
}
InteractiveImage.prototype.setSize = function (t, e) {
    if (this.width = t,
        this.height = e,
        $(this.canvas)[0].setAttribute("width", this.width),
        $(this.canvas)[0].setAttribute("height", this.height),
        this.img && this.scroller) {
        var n = 1;
        this.zoomer && (n = this.zoomer.zoom)
        this.scroller.setBounds(this.img.width * n - this.width, this.img.height * n - this.height)
    }
}
InteractiveImage.prototype.getBounds = function () {
    return {
        x: parseInt($(this.canvas).css("left"), 10),
        y: parseInt($(this.canvas).css("top"), 10),
        width: this.width,
        height: this.height
    }
}
InteractiveImage.prototype.setImg = function (t) {
    this.img = t
    this.scroller && this.scroller.setBounds(this.img.width - this.width, this.img.height - this.height)
    this.draw()
    this.positioner && this.positioner.position()
}
InteractiveImage.prototype.addScroller = function (t) {
    this.scroller = t
    $(this.scroller).change(this.onModuleChange.bind(this))
}
InteractiveImage.prototype.addAnnotator = function (t) {
    this.annotator = t;
    var e = this;
    $(this.annotator).change(function () {
                e.onModuleChange()
            }
            .bind(this)),
        this.zoomer && this.zoomer.setOrigAnnotations(this.annotator.annotations),
        this.zoomer && this.zoomer.updateAnnotator(this.zoomer.zoom, 1),
        this.draw()
}
InteractiveImage.prototype.addPincherPanner = function (t) {
    this.pincherPanner = t,
        this.width && this.draw()
}
InteractiveImage.prototype.addZoomer = function (t) {
    this.zoomer = t,
        $(this.zoomer).change(this.onModuleChange.bind(this)),
        this.width && this.draw(),
        this.positioner && this.positioner.position()
}
InteractiveImage.prototype.addPositioner = function (t) {
    this.positioner = t,
        this.positioner.position(),
        $(this).triggerHandler("change")
}
InteractiveImage.prototype.addToolbox = function (t) {
    this.toolbox = t,
        $(this).triggerHandler("change"),
        $(this.toolbox).on("change", function () {
                this.onModuleChange()
            }
            .bind(this))
}
InteractiveImage.prototype.destroy = function () {
    this.canvas.remove(),
        this.ui && this.ui.destroy(),
        this.pincherPanner && this.pincherPanner.destroy()
}
InteractiveImage.prototype.pageToImageCoords = function (t, e) {
    var n = $(this.canvas).position(),
        i = this.getScroll();
    return {
        x: i.x + t - n.left,
        y: i.y + e - n.top
    }
}
InteractiveImage.prototype.imageToPageCoords = function (t, e) {
    var n = $(this.canvas).position(),
        i = this.getScroll();
    return {
        x: n.left + t - i.x,
        y: n.top + e - i.y
    }
}
InteractiveImage.prototype.imageToCanvasCoords = function (t, e) {
    var n = this.getScroll();
    return {
        x: t - n.x,
        y: e - n.y
    }
};
var InteractiveImageFactory = function () {};
InteractiveImageFactory.prototype.createDefaultFromURL = function (t, e) {
    $("<img>", {
        src: t
    }).on("load", function () {
        var t = new InteractiveImage,
            n = new Scroller;
        n.addBehavior(new DraggableScrollerBehavior(t.canvas));
        var i = new KeyboardScrollerBehavior;
        n.addBehavior(i),
            i.init(),
            t.addScroller(n),
            t.setSize(250, 250),
            t.setImg(this);
        var r = new Zoomer(t);
        t.addZoomer(r),
            e(t)
    })
}
InteractiveImageFactory.prototype.createEditor = function (t, e) {
    $("<img>", {
        src: t
    }).on("load", function () {
        var t = new InteractiveImage,
            n = new Scroller;
        n.addBehavior(new DraggableScrollerBehavior(t.canvas));
        var i = new KeyboardScrollerBehavior;
        n.addBehavior(i),
            i.init(),
            t.addScroller(n),
            t.setSize(250, 250),
            t.setImg(this);
        var r = new Zoomer(t);
        t.addZoomer(r),
            e(t)
    })
}
var AnnotatorNew = function (t, e) {
    this.interactiveImage = e,
        this.__loadAnnotations(t),
        $(document).on("mousemove", this.__onDocumentMouseMove.bind(this)),
        $(this.interactiveImage.canvas).on("mousedown", this.__onCanvasMouseDown.bind(this)),
        $(document).on("mouseup", this.__onDocumentMouseUp.bind(this)),
        $(this.interactiveImage.canvas).on("dblclick", this.__onCanvasDblClick.bind(this)),
        $(this.interactiveImage.scroller).on("change", this.__onScrollerChange.bind(this)),
        this.show = !0,
        this.layerManager = new LayerManager
}
AnnotatorNew.prototype.serialize = function (t) {
    var e = [];
    return $.each(this.annotations, function (n, i) {
            e.push(i.serialize(t))
        }),
        e
}
AnnotatorNew.prototype.__loadAnnotations = function (t) {
    this.annotations = [],
        $.each(t, function (t, e) {
                var n, i = e.type ? e.type : "DOT";
                "DOT" == i ? n = new PointAnnotation(e.x, e.y, e.text) : "CIRCLE" == i ? n = new CircleAnnotation(e.x, e.y, e.radius, e.text) : "POLY" == i && (n = new PolyAnnotation(e.points, e.text)),
                    this.addAnnotation(n)
            }
            .bind(this))
}
AnnotatorNew.prototype.addAnnotation = function (t, e) {
    e ? this.annotations.unshift(t) : this.annotations.push(t),
        $(t).on("change", this.__onAnnotationChange.bind(this)),
        $(this).triggerHandler("change")
}
AnnotatorNew.prototype.deleteAnnotation = function (t) {
    var e = this.annotations.indexOf(t); -
    1 != e && (this.annotations.splice(e, 1),
        t.delete(),
        $(this).triggerHandler("change"))
}
AnnotatorNew.prototype.draw = function () {
    if (this.show) {
        var t = _.clone(this.annotations);
        t.reverse(),
            this.layerManager.sort(t),
            $.each(t, function (t, e) {
                    var n = this.interactiveImage.imageToCanvasCoords(e.pos.x, e.pos.y);
                    e.draw(this.interactiveImage.context, n, this.interactiveImage)
                }
                .bind(this))
    }
}
AnnotatorNew.prototype.__onScrollerChange = function (t) {
    $(this).triggerHandler("change")
}
AnnotatorNew.prototype.__onAnnotationChange = function (t) {
    $(this).triggerHandler("change")
}
AnnotatorNew.prototype.__onDocumentMouseMove = function (t) {}
AnnotatorNew.prototype.__onCanvasMouseDown = function (t) {}
AnnotatorNew.prototype.__onDocumentMouseUp = function (t) {}
AnnotatorNew.prototype.__onCanvasDblClick = function (t) {}
var LayerManager = function () {};
LayerManager.prototype.sort = function (t) {
    var e = ["POLY", "CIRCLE", "DOT"];
    t.sort(function (t, n) {
        var i = e.indexOf(t.type),
            r = e.indexOf(n.type);
        return i == r ? 0 : i > r ? 1 : i < r ? -1 : void 0
    })
};
var ScrollerBehavior = function () {};
ScrollerBehavior.prototype.setScroller = function (t) {
    this.scroller = t
};
var UP = 38,
    RIGHT = 39,
    DOWN = 40,
    LEFT = 37,
    KeyboardScrollerBehavior = function () {
        ScrollerBehavior.call(this)
    };
KeyboardScrollerBehavior.prototype = Object.create(ScrollerBehavior.prototype)
KeyboardScrollerBehavior.prototype.constructor = KeyboardScrollerBehavior
KeyboardScrollerBehavior.prototype.init = function () {
    this.SCROLL_SPEED = 10,
        this.SCROLL_STEP_INTERVAL = 20,
        this.upDown = !1,
        this.rightDown = !1,
        this.downDown = !1,
        this.leftDown = !1,
        $(document).on("keydown", this.__onDocumentKeyDown.bind(this)),
        $(document).on("keyup", this.__onDocumentKeyUp.bind(this)),
        setInterval(this.__step.bind(this), this.SCROLL_STEP_INTERVAL)
}
KeyboardScrollerBehavior.prototype.__step = function () {
    var t = 0,
        e = 0;
    this.leftDown && t++,
        this.rightDown && t--,
        this.upDown && e++,
        this.downDown && e--,
        t *= this.SCROLL_SPEED,
        e *= this.SCROLL_SPEED,
        0 == t && 0 == e || this.scroller.scroll(t, e)
}
KeyboardScrollerBehavior.prototype.__onDocumentKeyDown = function (t) {
    document.activeElement == document.body && (t.keyCode == UP && (this.upDown = !0),
        t.keyCode == RIGHT && (this.rightDown = !0),
        t.keyCode == DOWN && (this.downDown = !0),
        t.keyCode == LEFT && (this.leftDown = !0),
        (this.upDown || this.rightDown || this.downDown || this.leftDown) && t.preventDefault())
}
KeyboardScrollerBehavior.prototype.__onDocumentKeyUp = function (t) {
    t.keyCode == UP && (this.upDown = !1),
        t.keyCode == RIGHT && (this.rightDown = !1),
        t.keyCode == DOWN && (this.downDown = !1),
        t.keyCode == LEFT && (this.leftDown = !1)
}
var DraggableScrollerBehavior = function (t) {
    ScrollerBehavior.call(this),
        /Mobi/.test(navigator.userAgent) ? ($(t).on("touchstart", this.__onCanvasTouchStart.bind(this)),
            $(t).on("touchmove", this.__onCanvasTouchMove.bind(this)),
            $(t).on("touchstop", this.__onCanvasTouchStop.bind(this))) : ($(t).on("mousedown", this.__onCanvasMouseDown.bind(this)),
            $(document).mousemove(this.__onCanvasMouseMove.bind(this)),
            $(document).mouseup(this.__onCanvasMouseUp.bind(this)))
};
DraggableScrollerBehavior.prototype = Object.create(ScrollerBehavior.prototype)
DraggableScrollerBehavior.prototype.constructor = DraggableScrollerBehavior
DraggableScrollerBehavior.prototype.__onCanvasMouseDown = function (t) {
    this.__startDrag(t.pageX, t.pageY)
}
DraggableScrollerBehavior.prototype.__onCanvasTouchStart = function (t) {
    var e = t.originalEvent.touches[0];
    this.__startDrag(e.pageX, e.pageY)
}
DraggableScrollerBehavior.prototype.__startDrag = function (t, e) {
    this.lastMouseX = t,
        this.lastMouseY = e,
        this.isDragging = !0
}
DraggableScrollerBehavior.prototype.__onCanvasMouseUp = function (t) {
    this.__stopDrag()
}
DraggableScrollerBehavior.prototype.__onCanvasTouchStop = function (t) {
    this.__stopDrag()
}
DraggableScrollerBehavior.prototype.__stopDrag = function () {
    this.isDragging = !1
}
DraggableScrollerBehavior.prototype.__onCanvasMouseMove = function (t) {
    this.__doDrag(t.pageX, t.pageY)
}
DraggableScrollerBehavior.prototype.__onCanvasTouchMove = function (t) {
    var e = t.originalEvent.touches[0];
    this.__doDrag(e.pageX, e.pageY)
}
DraggableScrollerBehavior.prototype.__doDrag = function (t, e) {
    if (this.mouseX = t,
        this.mouseY = e,
        this.isDragging) {
        var n = this.mouseX - this.lastMouseX,
            i = this.mouseY - this.lastMouseY;
        this.dx = n,
            this.dy = i,
            this.scroller.scroll(this.dx, this.dy),
            this.lastMouseX = t,
            this.lastMouseY = e
    }
}
var Scroller = function () {
    this.init()
}
Scroller.prototype.init = function () {
    this.scrollX = 0,
        this.scrollY = 0,
        this.behaviors = [],
        this.canScroll = !0
}
Scroller.prototype.setBounds = function (t, e) {
    this.boundX = t,
        this.boundY = e
}
Scroller.prototype.setScroll = function (t, e) {
    this.canScroll && (this.scrollX = t,
        this.scrollY = e,
        this.scrollX = _.clamp(this.scrollX, 0, this.boundX),
        this.scrollY = _.clamp(this.scrollY, 0, this.boundY),
        $(this).trigger("change"))
}
Scroller.prototype.scroll = function (t, e) {
    this.setScroll(this.scrollX - t, this.scrollY - e)
}
Scroller.prototype.addBehavior = function (t) {
    this.behaviors.push(t),
        t.setScroller(this)
}
var PLUS = 187,
    MINUS = 189,
    ZERO = 48,
    Zoomer = function (t) {
        this.interactiveImage = t,
            $(document).on("keydown", this.__onDocumentKeyDown.bind(this)),
            $(document).on("keypress", this.__onDocumentKeyPress.bind(this))
    };
Zoomer.prototype.__onDocumentKeyDown = function (t) {
    document.activeElement == document.body && (t.keyCode == PLUS && this.setZoom(2 * this.zoom),
        t.keyCode == MINUS && this.setZoom(.5 * this.zoom))
}
Zoomer.prototype.__onDocumentKeyPress = function (t) {
    t.keyCode == ZERO && this.setZoom(this.origZoom)
}
Zoomer.prototype.setOrigAnnotations = function (t) {
    this.origAnnotations = _.cloneDeep(t)
}
Zoomer.prototype.setZoom = function (t) {
    if (this.zoom != t) {
        this.zoom || (this.origZoom = t);
        var e = this.zoom;
        if (this.zoom = t,
            this.interactiveImage.scroller)
            var n = this.interactiveImage.getBounds(),
                i = this.interactiveImage.scroller.scrollX,
                r = this.interactiveImage.scroller.scrollY,
                o = (i + n.width / 2) / e,
                s = (r + n.height / 2) / e;
        if (this.interactiveImage.annotator && this.updateAnnotator(t, e),
            this.__updateImage(!0),
            this.interactiveImage.scroller) {
            var a = s * t,
                l = o * t - (n = this.interactiveImage.getBounds()).width / 2,
                c = a - n.height / 2;
            this.interactiveImage.scroller.setScroll(l, c)
        }
        this.interactiveImage.__isDirty = !0,
            this.interactiveImage.draw()
    }
}
Zoomer.prototype.updateAnnotator = function (t, e) {
    $.each(this.interactiveImage.annotator.annotations, function (n, i) {
            if ((i = this.interactiveImage.annotator.annotations[n]).x)
                i.x = this.origAnnotations[n].x * this.zoom,
                i.y = this.origAnnotations[n].y * this.zoom;
            else if ("DOT" == i.type) {
                var r = t / e * i.pos.x,
                    o = t / e * i.pos.y;
                i.setPosition(r, o)
            } else
                "POLY" != i.type && "CIRCLE" != i.type || i.zoom(t / e)
        }
        .bind(this))
}
Zoomer.prototype.__updateImage = function (t) {
    this.interactiveImage.img.width,
        this.zoom,
        this.interactiveImage.img.height,
        this.zoom;
    this.interactiveImage.setSize(50, 50),
        this.interactiveImage.positioner && this.interactiveImage.positioner.position(t)
}
var PincherPanner = function (t) {
    this.__initVars(t),
        this.__setupHandlers()
}
PincherPanner.prototype.__initVars = function (t) {
    this.interactiveImage = t,
        this.isMobile = /Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent),
        this.hasRecordedScale = !1,
        this.origScale,
        this.origPos,
        this.imageCenter,
        this.hammertime = new Hammer(document.body, {
            domEvents: !0
        })
}
PincherPanner.prototype.destroy = function () {
    this.__destroyHandlers()
}
PincherPanner.prototype.__setupHandlers = function () {
    this.isMobile && (this.hammertime.get("pinch").set({
            enable: !0
        }),
        this.hammertime.on("pinch pan", this.__onPinchPan.bind(this)),
        this.hammertime.on("pinchend panend", this.__onPinchPanEnd.bind(this)))
}
PincherPanner.prototype.__destroyHandlers = function () {
    this.isMobile && (this.hammertime.off("pinch pan", this.__onPinchPan.bind(this)),
        this.hammertime.off("pinchend panend", this.__onPinchPanEnd.bind(this)))
}
PincherPanner.prototype.__onPinchPan = function (t) {
    if (!this.hasRecordedScale) {
        if (t.center.y >= $("footer").position().top)
            return;
        this.interactiveImage.scroller.canScroll = !1,
            this.origScale = this.interactiveImage.zoomer.zoom,
            this.hasRecordedScale = !0,
            this.imageCenter = this.interactiveImage.pageToImageCoords(t.center.x, t.center.y),
            this.origPos = {
                x: this.interactiveImage.scroller.scrollX,
                y: this.interactiveImage.scroller.scrollY
            }
    }
    this.interactiveImage.scroller.canScroll = !0,
        1 != t.scale ? this.interactiveImage.zoomer.setZoom(this.origScale * t.scale) : this.interactiveImage.scroller.setScroll((this.origPos.x - t.deltaX) * t.scale, (this.origPos.y - t.deltaY) * t.scale),
        this.interactiveImage.scroller.canScroll = !1
}
PincherPanner.prototype.__onPinchPanEnd = function (t) {
    this.hasRecordedScale = !1
    this.interactiveImage.scroller.canScroll = !1
};
var OverlayUI = function (t) {
    this.interactiveImage = t
    this.interactiveImage.ui = this
    this.isMobile = /Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent)
    this.LOGO_SRC = "/images/logo_with_text_viewer.svg"
    this.ZOOM_IN_SRC = "/images/viewer/zoom_in_icon.svg"
    this.ZOOM_OUT_SRC = "/images/viewer/zoom_out_icon.svg"
    this.LIGHT_ON_SRC = "/images/viewer/light_on.svg"
    this.LIGHT_OFF_SRC = "/images/viewer/light_off.svg"
    this.LOGO_ICON_WIDTH = 120
    this.HEIGHT = 45
    this.PADDING = 10
    this.__createUIContainer()
    this.__createItems()
    this.__setupHandlers()
    this.hide()
    this.__onInteractiveImageChange()
};
OverlayUI.prototype.destroy = function () {
        this.__destroyHandlers(),
            this.container.remove()
    },
    OverlayUI.prototype.__createUIContainer = function () {
        $("body").append('<div id="viewer_ui_container"></div>'),
            this.container = $("#viewer_ui_container"),
            this.container.css("height", this.HEIGHT + this.PADDING + "px"),
            DEBUG ? (this.container.css("box-sizing", "border-box"),
                this.container.css("border", "solid 1px red")) : this.container.css("overflow", "hidden"),
            this.DEBUG || this.container.css("transition", "opacity 1s"),
            this.container.css("background", "linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, .65))"),
            this.container.css("pointer-events", "none")
    },
    OverlayUI.prototype.__createItems = function () {
        this.LOGO_ICON_WIDTH;
        this.__items = [],
            this.__addItem("viewer_logo_img", this.LOGO_SRC, this.PADDING, this.__logoClick),
            this.__addItem("light_img", this.LIGHT_ON_SRC, -1 * (32 + this.PADDING), this.__lightClick),
            this.__addItem("zoom_in_img", this.ZOOM_IN_SRC, -2 * this.PADDING - 20 - 32, this.__zoomInClick),
            this.__addItem("zoom_out_img", this.ZOOM_OUT_SRC, -3 * this.PADDING - 40 - 32, this.__zoomOutClick),
            this.__positionItems()
    },
    OverlayUI.prototype.__positionItems = function () {
        this.bounds && $.each(this.__items, function (t, e) {
                if (e.elem.css("position", "absolute"),
                    e.elem.css("left", e.xPos + "px"),
                    e.xPos < 0) {
                    var n = this.bounds.width,
                        i = $(window).width(),
                        r = Math.min(n, i) + e.xPos;
                    e.elem.css("left", r + "px")
                }
            }
            .bind(this))
    },
    OverlayUI.prototype.__addItem = function (t, e, n, i) {
        var r = $('<div id="' + t + '"></div>'),
            o = {
                id: t,
                elem: r,
                imgSrc: e,
                xPos: n,
                onClick: i
            };
        this.__items.push(o);
        var s = this;
        $("<img>", {
                src: e
            }).on("load", function () {
                o.elem.css("width", this.width),
                    o.elem.css("height", this.height),
                    DEBUG ? (o.elem.css("box-sizing", "border-box"),
                        o.elem.css("border", "solid 1px red")) : (o.elem.css("pointer-events", "auto"),
                        o.elem.css("background-image", "url(" + e + ")"),
                        o.elem.css("background-color", "transparent")),
                    s.__positionItems()
            }),
            r.css("transition", "top 0.3s cubic-bezier(.25,.8,.25,1), background-color cubic-bezier(.25,.8,.25,1)"),
            r.css("cursor", "pointer"),
            r.click(o.onClick.bind(this)),
            this.container.append(r)
    },
    OverlayUI.prototype.__setupHandlers = function () {
        $("body").mouseout(this.__onMouseOut.bind(this)),
            $(document).mousemove(this.__onDocumentMouseMove.bind(this)),
            $(this.interactiveImage).change(this.__onInteractiveImageChange.bind(this))
    },
    OverlayUI.prototype.__destroyHandlers = function () {
        $("body").unbind("mouseout", this.__onMouseOut.bind(this)),
            $(document).unbind("mousemove", this.__onDocumentMouseMove.bind(this)),
            $(this.interactiveImage).unbind("change", this.__onInteractiveImageChange.bind(this))
    },
    OverlayUI.prototype.__onMouseOut = function (t) {
        null == t.toElement && this.hide()
    },
    OverlayUI.prototype.__onInteractiveImageChange = function () {
        this.bounds = this.interactiveImage.getBounds(),
            this.__positionAndSizeUIContainer(),
            this.__positionItems()
    },
    OverlayUI.prototype.__onDocumentMouseMove = function (t) {
        this.bounds && (new Vector(t.pageX, t.pageY).withinRect(this.bounds) ? this.show() : this.hide())
    },
    OverlayUI.prototype.show = function () {
        DEBUG || this.container.css("opacity", "1");
        $(this.interactiveImage.canvas).position();
        $.each(this.__items, function (t, e) {
                var n = (this.container.height() - e.elem.height()) / 2;
                e.elem.css("top", n + 5)
            }
            .bind(this))
    },
    OverlayUI.prototype.hide = function () {
        DEBUG || this.container.css("opacity", "0"),
            $.each(this.__items, function (t, e) {
                    var n = this.container.height();
                    e.elem.css("top", n)
                }
                .bind(this))
    },
    OverlayUI.prototype.__logoClick = function () {
        window.open("http://pixorize.com", "_blank")
    },
    OverlayUI.prototype.__lightClick = function (t) {
        this.interactiveImage.annotator.show = !this.interactiveImage.annotator.show,
            this.interactiveImage.annotator.show ? setBackgroundImage($(t.target), this.LIGHT_ON_SRC) : setBackgroundImage($(t.target), this.LIGHT_OFF_SRC),
            $(this.interactiveImage.annotator).triggerHandler("change")
    },
    OverlayUI.prototype.__zoomInClick = function () {
        this.isMobile ? (this.interactiveImage.scroller.canScroll = !0,
            this.interactiveImage.zoomer.setZoom(1.2 * this.interactiveImage.zoomer.zoom),
            this.interactiveImage.scroller.canScroll = !1) : this.interactiveImage.zoomer.setZoom(1.2 * this.interactiveImage.zoomer.zoom)
    },
    OverlayUI.prototype.__zoomOutClick = function () {
        this.isMobile ? (this.interactiveImage.scroller.canScroll = !0,
            this.interactiveImage.zoomer.setZoom(.8 * this.interactiveImage.zoomer.zoom),
            this.interactiveImage.scroller.canScroll = !1) : this.interactiveImage.zoomer.setZoom(.8 * this.interactiveImage.zoomer.zoom)
    },
    OverlayUI.prototype.__positionAndSizeUIContainer = function () {
        var t = this.bounds.y + this.bounds.height,
            e = $(window).scrollTop() + $(window).height(),
            n = Math.min(t, e),
            i = this.bounds.width,
            r = $(window).width(),
            o = Math.min(i, r);
        this.container.css("position", "absolute"),
            this.container.css("top", n - this.container.height()),
            this.container.css("left", this.bounds.x),
            this.container.css("width", o + "px")
    },
    function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof exports ? require("jquery") : jQuery)
    }(function (t) {
        var e = 0,
            n = Array.prototype.slice;
        t.cleanData = function (e) {
                return function (n) {
                    var i, r, o;
                    for (o = 0; null != (r = n[o]); o++)
                        try {
                            (i = t._data(r, "events")) && i.remove && t(r).triggerHandler("remove")
                        } catch (t) {}
                    e(n)
                }
            }(t.cleanData),
            t.widget = function (e, n, i) {
                var r, o, s, a, l = {},
                    c = e.split(".")[0];
                return e = e.split(".")[1],
                    r = c + "-" + e,
                    i || (i = n,
                        n = t.Widget),
                    t.expr[":"][r.toLowerCase()] = function (e) {
                        return !!t.data(e, r)
                    },
                    t[c] = t[c] || {},
                    o = t[c][e],
                    s = t[c][e] = function (t, e) {
                        if (!this._createWidget)
                            return new s(t, e);
                        arguments.length && this._createWidget(t, e)
                    },
                    t.extend(s, o, {
                        version: i.version,
                        _proto: t.extend({}, i),
                        _childConstructors: []
                    }),
                    a = new n,
                    a.options = t.widget.extend({}, a.options),
                    t.each(i, function (e, i) {
                        t.isFunction(i) ? l[e] = function () {
                            var t = function () {
                                    return n.prototype[e].apply(this, arguments)
                                },
                                r = function (t) {
                                    return n.prototype[e].apply(this, t)
                                };
                            return function () {
                                var e, n = this._super,
                                    o = this._superApply;
                                return this._super = t,
                                    this._superApply = r,
                                    e = i.apply(this, arguments),
                                    this._super = n,
                                    this._superApply = o,
                                    e
                            }
                        }() : l[e] = i
                    }),
                    s.prototype = t.widget.extend(a, {
                        widgetEventPrefix: o ? a.widgetEventPrefix || e : e
                    }, l, {
                        constructor: s,
                        namespace: c,
                        widgetName: e,
                        widgetFullName: r
                    }),
                    o ? (t.each(o._childConstructors, function (e, n) {
                            var i = n.prototype;
                            t.widget(i.namespace + "." + i.widgetName, s, n._proto)
                        }),
                        delete o._childConstructors) : n._childConstructors.push(s),
                    t.widget.bridge(e, s),
                    s
            },
            t.widget.extend = function (e) {
                for (var i, r, o = n.call(arguments, 1), s = 0, a = o.length; s < a; s++)
                    for (i in o[s])
                        r = o[s][i],
                        o[s].hasOwnProperty(i) && void 0 !== r && (t.isPlainObject(r) ? e[i] = t.isPlainObject(e[i]) ? t.widget.extend({}, e[i], r) : t.widget.extend({}, r) : e[i] = r);
                return e
            },
            t.widget.bridge = function (e, i) {
                var r = i.prototype.widgetFullName || e;
                t.fn[e] = function (o) {
                    var s = "string" == typeof o,
                        a = n.call(arguments, 1),
                        l = this;
                    return s ? this.each(function () {
                            var n, i = t.data(this, r);
                            return "instance" === o ? (l = i, !1) : i ? t.isFunction(i[o]) && "_" !== o.charAt(0) ? (n = i[o].apply(i, a)) !== i && void 0 !== n ? (l = n && n.jquery ? l.pushStack(n.get()) : n, !1) : void 0 : t.error("no such method '" + o + "' for " + e + " widget instance") : t.error("cannot call methods on " + e + " prior to initialization; attempted to call method '" + o + "'")
                        }) : (a.length && (o = t.widget.extend.apply(null, [o].concat(a))),
                            this.each(function () {
                                var e = t.data(this, r);
                                e ? (e.option(o || {}),
                                    e._init && e._init()) : t.data(this, r, new i(o, this))
                            })),
                        l
                }
            },
            t.Widget = function () {},
            t.Widget._childConstructors = [],
            t.Widget.prototype = {
                widgetName: "widget",
                widgetEventPrefix: "",
                defaultElement: "<div>",
                options: {
                    disabled: !1,
                    create: null
                },
                _createWidget: function (n, i) {
                    i = t(i || this.defaultElement || this)[0],
                        this.element = t(i),
                        this.uuid = e++,
                        this.eventNamespace = "." + this.widgetName + this.uuid,
                        this.bindings = t(),
                        this.hoverable = t(),
                        this.focusable = t(),
                        i !== this && (t.data(i, this.widgetFullName, this),
                            this._on(!0, this.element, {
                                remove: function (t) {
                                    t.target === i && this.destroy()
                                }
                            }),
                            this.document = t(i.style ? i.ownerDocument : i.document || i),
                            this.window = t(this.document[0].defaultView || this.document[0].parentWindow)),
                        this.options = t.widget.extend({}, this.options, this._getCreateOptions(), n),
                        this._create(),
                        this._trigger("create", null, this._getCreateEventData()),
                        this._init()
                },
                _getCreateOptions: t.noop,
                _getCreateEventData: t.noop,
                _create: t.noop,
                _init: t.noop,
                destroy: function () {
                    this._destroy(),
                        this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),
                        this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"),
                        this.bindings.unbind(this.eventNamespace),
                        this.hoverable.removeClass("ui-state-hover"),
                        this.focusable.removeClass("ui-state-focus")
                },
                _destroy: t.noop,
                widget: function () {
                    return this.element
                },
                option: function (e, n) {
                    var i, r, o, s = e;
                    if (0 === arguments.length)
                        return t.widget.extend({}, this.options);
                    if ("string" == typeof e)
                        if (s = {},
                            i = e.split("."),
                            e = i.shift(),
                            i.length) {
                            for (r = s[e] = t.widget.extend({}, this.options[e]),
                                o = 0; o < i.length - 1; o++)
                                r[i[o]] = r[i[o]] || {},
                                r = r[i[o]];
                            if (e = i.pop(),
                                1 === arguments.length)
                                return void 0 === r[e] ? null : r[e];
                            r[e] = n
                        } else {
                            if (1 === arguments.length)
                                return void 0 === this.options[e] ? null : this.options[e];
                            s[e] = n
                        }
                    return this._setOptions(s),
                        this
                },
                _setOptions: function (t) {
                    var e;
                    for (e in t)
                        this._setOption(e, t[e]);
                    return this
                },
                _setOption: function (t, e) {
                    return this.options[t] = e,
                        "disabled" === t && (this.widget().toggleClass(this.widgetFullName + "-disabled", !!e),
                            e && (this.hoverable.removeClass("ui-state-hover"),
                                this.focusable.removeClass("ui-state-focus"))),
                        this
                },
                enable: function () {
                    return this._setOptions({
                        disabled: !1
                    })
                },
                disable: function () {
                    return this._setOptions({
                        disabled: !0
                    })
                },
                _on: function (e, n, i) {
                    var r, o = this;
                    "boolean" != typeof e && (i = n,
                            n = e,
                            e = !1),
                        i ? (n = r = t(n),
                            this.bindings = this.bindings.add(n)) : (i = n,
                            n = this.element,
                            r = this.widget()),
                        t.each(i, function (i, s) {
                            function a() {
                                if (e || !0 !== o.options.disabled && !t(this).hasClass("ui-state-disabled"))
                                    return ("string" == typeof s ? o[s] : s).apply(o, arguments)
                            }
                            "string" != typeof s && (a.guid = s.guid = s.guid || a.guid || t.guid++);
                            var l = i.match(/^([\w:-]*)\s*(.*)$/),
                                c = l[1] + o.eventNamespace,
                                u = l[2];
                            u ? r.delegate(u, c, a) : n.bind(c, a)
                        })
                },
                _off: function (e, n) {
                    n = (n || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace,
                        e.unbind(n).undelegate(n),
                        this.bindings = t(this.bindings.not(e).get()),
                        this.focusable = t(this.focusable.not(e).get()),
                        this.hoverable = t(this.hoverable.not(e).get())
                },
                _delay: function (t, e) {
                    var n = this;
                    return setTimeout(function () {
                        return ("string" == typeof t ? n[t] : t).apply(n, arguments)
                    }, e || 0)
                },
                _hoverable: function (e) {
                    this.hoverable = this.hoverable.add(e),
                        this._on(e, {
                            mouseenter: function (e) {
                                t(e.currentTarget).addClass("ui-state-hover")
                            },
                            mouseleave: function (e) {
                                t(e.currentTarget).removeClass("ui-state-hover")
                            }
                        })
                },
                _focusable: function (e) {
                    this.focusable = this.focusable.add(e),
                        this._on(e, {
                            focusin: function (e) {
                                t(e.currentTarget).addClass("ui-state-focus")
                            },
                            focusout: function (e) {
                                t(e.currentTarget).removeClass("ui-state-focus")
                            }
                        })
                },
                _trigger: function (e, n, i) {
                    var r, o, s = this.options[e];
                    if (i = i || {},
                        n = t.Event(n),
                        n.type = (e === this.widgetEventPrefix ? e : this.widgetEventPrefix + e).toLowerCase(),
                        n.target = this.element[0],
                        o = n.originalEvent)
                        for (r in o)
                            r in n || (n[r] = o[r]);
                    return this.element.trigger(n, i), !(t.isFunction(s) && !1 === s.apply(this.element[0], [n].concat(i)) || n.isDefaultPrevented())
                }
            },
            t.each({
                show: "fadeIn",
                hide: "fadeOut"
            }, function (e, n) {
                t.Widget.prototype["_" + e] = function (i, r, o) {
                    "string" == typeof r && (r = {
                        effect: r
                    });
                    var s, a = r ? !0 === r || "number" == typeof r ? n : r.effect || n : e;
                    "number" == typeof (r = r || {}) && (r = {
                        duration: r
                    }),
                    s = !t.isEmptyObject(r),
                        r.complete = o,
                        r.delay && i.delay(r.delay),
                        s && t.effects && t.effects.effect[a] ? i[e](r) : a !== e && i[a] ? i[a](r.duration, r.easing, o) : i.queue(function (n) {
                            t(this)[e](),
                                o && o.call(i[0]),
                                n()
                        })
                }
            });
        t.widget
    }),
    function (t) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof exports ? require("jquery") : window.jQuery)
    }(function (t) {
        "use strict";
        var e = 0;
        t.ajaxTransport("iframe", function (n) {
                if (n.async) {
                    var i, r, o, s = n.initialIframeSrc || "javascript:false;";
                    return {
                        send: function (a, l) {
                            (i = t('<form style="display:none;"></form>')).attr("accept-charset", n.formAcceptCharset),
                                o = /\?/.test(n.url) ? "&" : "?",
                                "DELETE" === n.type ? (n.url = n.url + o + "_method=DELETE",
                                    n.type = "POST") : "PUT" === n.type ? (n.url = n.url + o + "_method=PUT",
                                    n.type = "POST") : "PATCH" === n.type && (n.url = n.url + o + "_method=PATCH",
                                    n.type = "POST"),
                                r = t('<iframe src="' + s + '" name="iframe-transport-' + (e += 1) + '"></iframe>').bind("load", function () {
                                    var e, o = t.isArray(n.paramName) ? n.paramName : [n.paramName];
                                    r.unbind("load").bind("load", function () {
                                            var e;
                                            try {
                                                if (!(e = r.contents()).length || !e[0].firstChild)
                                                    throw new Error
                                            } catch (t) {
                                                e = void 0
                                            }
                                            l(200, "success", {
                                                    iframe: e
                                                }),
                                                t('<iframe src="' + s + '"></iframe>').appendTo(i),
                                                window.setTimeout(function () {
                                                    i.remove()
                                                }, 0)
                                        }),
                                        i.prop("target", r.prop("name")).prop("action", n.url).prop("method", n.type),
                                        n.formData && t.each(n.formData, function (e, n) {
                                            t('<input type="hidden"/>').prop("name", n.name).val(n.value).appendTo(i)
                                        }),
                                        n.fileInput && n.fileInput.length && "POST" === n.type && (e = n.fileInput.clone(),
                                            n.fileInput.after(function (t) {
                                                return e[t]
                                            }),
                                            n.paramName && n.fileInput.each(function (e) {
                                                t(this).prop("name", o[e] || n.paramName)
                                            }),
                                            i.append(n.fileInput).prop("enctype", "multipart/form-data").prop("encoding", "multipart/form-data"),
                                            n.fileInput.removeAttr("form")),
                                        i.submit(),
                                        e && e.length && n.fileInput.each(function (n, i) {
                                            var r = t(e[n]);
                                            t(i).prop("name", r.prop("name")).attr("form", r.attr("form")),
                                                r.replaceWith(i)
                                        })
                                }),
                                i.append(r).appendTo(document.body)
                        },
                        abort: function () {
                            r && r.unbind("load").prop("src", s),
                                i && i.remove()
                        }
                    }
                }
            }),
            t.ajaxSetup({
                converters: {
                    "iframe text": function (e) {
                        return e && t(e[0].body).text()
                    },
                    "iframe json": function (e) {
                        return e && t.parseJSON(t(e[0].body).text())
                    },
                    "iframe html": function (e) {
                        return e && t(e[0].body).html()
                    },
                    "iframe xml": function (e) {
                        var n = e && e[0];
                        return n && t.isXMLDoc(n) ? n : t.parseXML(n.XMLDocument && n.XMLDocument.xml || t(n.body).html())
                    },
                    "iframe script": function (e) {
                        return e && t.globalEval(t(e[0].body).text())
                    }
                }
            })
    }),
    function (t) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery", "jquery-ui/ui/widget"], t) : "object" == typeof exports ? t(require("jquery"), require("./vendor/jquery.ui.widget")) : t(window.jQuery)
    }(function (t) {
        "use strict";

        function e(e) {
            var n = "dragover" === e;
            return function (i) {
                i.dataTransfer = i.originalEvent && i.originalEvent.dataTransfer;
                var r = i.dataTransfer;
                r && -1 !== t.inArray("Files", r.types) && !1 !== this._trigger(e, t.Event(e, {
                    delegatedEvent: i
                })) && (i.preventDefault(),
                    n && (r.dropEffect = "copy"))
            }
        }
        t.support.fileInput = !(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent) || t('<input type="file">').prop("disabled")),
            t.support.xhrFileUpload = !(!window.ProgressEvent || !window.FileReader),
            t.support.xhrFormDataFileUpload = !!window.FormData,
            t.support.blobSlice = window.Blob && (Blob.prototype.slice || Blob.prototype.webkitSlice || Blob.prototype.mozSlice),
            t.widget("blueimp.fileupload", {
                options: {
                    dropZone: t(document),
                    pasteZone: void 0,
                    fileInput: void 0,
                    replaceFileInput: !0,
                    paramName: void 0,
                    singleFileUploads: !0,
                    limitMultiFileUploads: void 0,
                    limitMultiFileUploadSize: void 0,
                    limitMultiFileUploadSizeOverhead: 512,
                    sequentialUploads: !1,
                    limitConcurrentUploads: void 0,
                    forceIframeTransport: !1,
                    redirect: void 0,
                    redirectParamName: void 0,
                    postMessage: void 0,
                    multipart: !0,
                    maxChunkSize: void 0,
                    uploadedBytes: void 0,
                    recalculateProgress: !0,
                    progressInterval: 100,
                    bitrateInterval: 500,
                    autoUpload: !0,
                    messages: {
                        uploadedBytes: "Uploaded bytes exceed file size"
                    },
                    i18n: function (e, n) {
                        return e = this.messages[e] || e.toString(),
                            n && t.each(n, function (t, n) {
                                e = e.replace("{" + t + "}", n)
                            }),
                            e
                    },
                    formData: function (t) {
                        return t.serializeArray()
                    },
                    add: function (e, n) {
                        if (e.isDefaultPrevented())
                            return !1;
                        (n.autoUpload || !1 !== n.autoUpload && t(this).fileupload("option", "autoUpload")) && n.process().done(function () {
                            n.submit()
                        })
                    },
                    processData: !1,
                    contentType: !1,
                    cache: !1,
                    timeout: 0
                },
                _specialOptions: ["fileInput", "dropZone", "pasteZone", "multipart", "forceIframeTransport"],
                _blobSlice: t.support.blobSlice && function () {
                    return (this.slice || this.webkitSlice || this.mozSlice).apply(this, arguments)
                },
                _BitrateTimer: function () {
                    this.timestamp = Date.now ? Date.now() : (new Date).getTime(),
                        this.loaded = 0,
                        this.bitrate = 0,
                        this.getBitrate = function (t, e, n) {
                            var i = t - this.timestamp;
                            return (!this.bitrate || !n || i > n) && (this.bitrate = (e - this.loaded) * (1e3 / i) * 8,
                                    this.loaded = e,
                                    this.timestamp = t),
                                this.bitrate
                        }
                },
                _isXHRUpload: function (e) {
                    return !e.forceIframeTransport && (!e.multipart && t.support.xhrFileUpload || t.support.xhrFormDataFileUpload)
                },
                _getFormData: function (e) {
                    var n;
                    return "function" === t.type(e.formData) ? e.formData(e.form) : t.isArray(e.formData) ? e.formData : "object" === t.type(e.formData) ? (n = [],
                        t.each(e.formData, function (t, e) {
                            n.push({
                                name: t,
                                value: e
                            })
                        }),
                        n) : []
                },
                _getTotal: function (e) {
                    var n = 0;
                    return t.each(e, function (t, e) {
                            n += e.size || 1
                        }),
                        n
                },
                _initProgressObject: function (e) {
                    var n = {
                        loaded: 0,
                        total: 0,
                        bitrate: 0
                    };
                    e._progress ? t.extend(e._progress, n) : e._progress = n
                },
                _initResponseObject: function (t) {
                    var e;
                    if (t._response)
                        for (e in t._response)
                            t._response.hasOwnProperty(e) && delete t._response[e];
                    else
                        t._response = {}
                },
                _onProgress: function (e, n) {
                    if (e.lengthComputable) {
                        var i, r = Date.now ? Date.now() : (new Date).getTime();
                        if (n._time && n.progressInterval && r - n._time < n.progressInterval && e.loaded !== e.total)
                            return;
                        n._time = r,
                            i = Math.floor(e.loaded / e.total * (n.chunkSize || n._progress.total)) + (n.uploadedBytes || 0),
                            this._progress.loaded += i - n._progress.loaded,
                            this._progress.bitrate = this._bitrateTimer.getBitrate(r, this._progress.loaded, n.bitrateInterval),
                            n._progress.loaded = n.loaded = i,
                            n._progress.bitrate = n.bitrate = n._bitrateTimer.getBitrate(r, i, n.bitrateInterval),
                            this._trigger("progress", t.Event("progress", {
                                delegatedEvent: e
                            }), n),
                            this._trigger("progressall", t.Event("progressall", {
                                delegatedEvent: e
                            }), this._progress)
                    }
                },
                _initProgressListener: function (e) {
                    var n = this,
                        i = e.xhr ? e.xhr() : t.ajaxSettings.xhr();
                    i.upload && (t(i.upload).bind("progress", function (t) {
                            var i = t.originalEvent;
                            t.lengthComputable = i.lengthComputable,
                                t.loaded = i.loaded,
                                t.total = i.total,
                                n._onProgress(t, e)
                        }),
                        e.xhr = function () {
                            return i
                        }
                    )
                },
                _isInstanceOf: function (t, e) {
                    return Object.prototype.toString.call(e) === "[object " + t + "]"
                },
                _initXHRData: function (e) {
                    var n, i = this,
                        r = e.files[0],
                        o = e.multipart || !t.support.xhrFileUpload,
                        s = "array" === t.type(e.paramName) ? e.paramName[0] : e.paramName;
                    e.headers = t.extend({}, e.headers),
                        e.contentRange && (e.headers["Content-Range"] = e.contentRange),
                        o && !e.blob && this._isInstanceOf("File", r) || (e.headers["Content-Disposition"] = 'attachment; filename="' + encodeURI(r.name) + '"'),
                        o ? t.support.xhrFormDataFileUpload && (e.postMessage ? (n = this._getFormData(e),
                                e.blob ? n.push({
                                    name: s,
                                    value: e.blob
                                }) : t.each(e.files, function (i, r) {
                                    n.push({
                                        name: "array" === t.type(e.paramName) && e.paramName[i] || s,
                                        value: r
                                    })
                                })) : (i._isInstanceOf("FormData", e.formData) ? n = e.formData : (n = new FormData,
                                    t.each(this._getFormData(e), function (t, e) {
                                        n.append(e.name, e.value)
                                    })),
                                e.blob ? n.append(s, e.blob, r.name) : t.each(e.files, function (r, o) {
                                    (i._isInstanceOf("File", o) || i._isInstanceOf("Blob", o)) && n.append("array" === t.type(e.paramName) && e.paramName[r] || s, o, o.uploadName || o.name)
                                })),
                            e.data = n) : (e.contentType = r.type || "application/octet-stream",
                            e.data = e.blob || r),
                        e.blob = null
                },
                _initIframeSettings: function (e) {
                    var n = t("<a></a>").prop("href", e.url).prop("host");
                    e.dataType = "iframe " + (e.dataType || ""),
                        e.formData = this._getFormData(e),
                        e.redirect && n && n !== location.host && e.formData.push({
                            name: e.redirectParamName || "redirect",
                            value: e.redirect
                        })
                },
                _initDataSettings: function (t) {
                    this._isXHRUpload(t) ? (this._chunkedUpload(t, !0) || (t.data || this._initXHRData(t),
                            this._initProgressListener(t)),
                        t.postMessage && (t.dataType = "postmessage " + (t.dataType || ""))) : this._initIframeSettings(t)
                },
                _getParamName: function (e) {
                    var n = t(e.fileInput),
                        i = e.paramName;
                    return i ? t.isArray(i) || (i = [i]) : (i = [],
                            n.each(function () {
                                for (var e = t(this), n = e.prop("name") || "files[]", r = (e.prop("files") || [1]).length; r;)
                                    i.push(n),
                                    r -= 1
                            }),
                            i.length || (i = [n.prop("name") || "files[]"])),
                        i
                },
                _initFormSettings: function (e) {
                    e.form && e.form.length || (e.form = t(e.fileInput.prop("form")),
                            e.form.length || (e.form = t(this.options.fileInput.prop("form")))),
                        e.paramName = this._getParamName(e),
                        e.url || (e.url = e.form.prop("action") || location.href),
                        e.type = (e.type || "string" === t.type(e.form.prop("method")) && e.form.prop("method") || "").toUpperCase(),
                        "POST" !== e.type && "PUT" !== e.type && "PATCH" !== e.type && (e.type = "POST"),
                        e.formAcceptCharset || (e.formAcceptCharset = e.form.attr("accept-charset"))
                },
                _getAJAXSettings: function (e) {
                    var n = t.extend({}, this.options, e);
                    return this._initFormSettings(n),
                        this._initDataSettings(n),
                        n
                },
                _getDeferredState: function (t) {
                    return t.state ? t.state() : t.isResolved() ? "resolved" : t.isRejected() ? "rejected" : "pending"
                },
                _enhancePromise: function (t) {
                    return t.success = t.done,
                        t.error = t.fail,
                        t.complete = t.always,
                        t
                },
                _getXHRPromise: function (e, n, i) {
                    var r = t.Deferred(),
                        o = r.promise();
                    return n = n || this.options.context || o, !0 === e ? r.resolveWith(n, i) : !1 === e && r.rejectWith(n, i),
                        o.abort = r.promise,
                        this._enhancePromise(o)
                },
                _addConvenienceMethods: function (e, n) {
                    var i = this,
                        r = function (e) {
                            return t.Deferred().resolveWith(i, e).promise()
                        };
                    n.process = function (e, o) {
                            return (e || o) && (n._processQueue = this._processQueue = (this._processQueue || r([this])).then(function () {
                                    return n.errorThrown ? t.Deferred().rejectWith(i, [n]).promise() : r(arguments)
                                }).then(e, o)),
                                this._processQueue || r([this])
                        },
                        n.submit = function () {
                            return "pending" !== this.state() && (n.jqXHR = this.jqXHR = !1 !== i._trigger("submit", t.Event("submit", {
                                    delegatedEvent: e
                                }), this) && i._onSend(e, this)),
                                this.jqXHR || i._getXHRPromise()
                        },
                        n.abort = function () {
                            return this.jqXHR ? this.jqXHR.abort() : (this.errorThrown = "abort",
                                i._trigger("fail", null, this),
                                i._getXHRPromise(!1))
                        },
                        n.state = function () {
                            return this.jqXHR ? i._getDeferredState(this.jqXHR) : this._processQueue ? i._getDeferredState(this._processQueue) : void 0
                        },
                        n.processing = function () {
                            return !this.jqXHR && this._processQueue && "pending" === i._getDeferredState(this._processQueue)
                        },
                        n.progress = function () {
                            return this._progress
                        },
                        n.response = function () {
                            return this._response
                        }
                },
                _getUploadedBytes: function (t) {
                    var e = t.getResponseHeader("Range"),
                        n = e && e.split("-"),
                        i = n && n.length > 1 && parseInt(n[1], 10);
                    return i && i + 1
                },
                _chunkedUpload: function (e, n) {
                    e.uploadedBytes = e.uploadedBytes || 0;
                    var i, r, o = this,
                        s = e.files[0],
                        a = s.size,
                        l = e.uploadedBytes,
                        c = e.maxChunkSize || a,
                        u = this._blobSlice,
                        h = t.Deferred(),
                        d = h.promise();
                    return !(!(this._isXHRUpload(e) && u && (l || c < a)) || e.data) && (!!n || (l >= a ? (s.error = e.i18n("uploadedBytes"),
                        this._getXHRPromise(!1, e.context, [null, "error", s.error])) : (r = function () {
                            var n = t.extend({}, e),
                                d = n._progress.loaded;
                            n.blob = u.call(s, l, l + c, s.type),
                                n.chunkSize = n.blob.size,
                                n.contentRange = "bytes " + l + "-" + (l + n.chunkSize - 1) + "/" + a,
                                o._initXHRData(n),
                                o._initProgressListener(n),
                                i = (!1 !== o._trigger("chunksend", null, n) && t.ajax(n) || o._getXHRPromise(!1, n.context)).done(function (i, s, c) {
                                    l = o._getUploadedBytes(c) || l + n.chunkSize,
                                        d + n.chunkSize - n._progress.loaded && o._onProgress(t.Event("progress", {
                                            lengthComputable: !0,
                                            loaded: l - n.uploadedBytes,
                                            total: l - n.uploadedBytes
                                        }), n),
                                        e.uploadedBytes = n.uploadedBytes = l,
                                        n.result = i,
                                        n.textStatus = s,
                                        n.jqXHR = c,
                                        o._trigger("chunkdone", null, n),
                                        o._trigger("chunkalways", null, n),
                                        l < a ? r() : h.resolveWith(n.context, [i, s, c])
                                }).fail(function (t, e, i) {
                                    n.jqXHR = t,
                                        n.textStatus = e,
                                        n.errorThrown = i,
                                        o._trigger("chunkfail", null, n),
                                        o._trigger("chunkalways", null, n),
                                        h.rejectWith(n.context, [t, e, i])
                                })
                        },
                        this._enhancePromise(d),
                        d.abort = function () {
                            return i.abort()
                        },
                        r(),
                        d)))
                },
                _beforeSend: function (t, e) {
                    0 === this._active && (this._trigger("start"),
                            this._bitrateTimer = new this._BitrateTimer,
                            this._progress.loaded = this._progress.total = 0,
                            this._progress.bitrate = 0),
                        this._initResponseObject(e),
                        this._initProgressObject(e),
                        e._progress.loaded = e.loaded = e.uploadedBytes || 0,
                        e._progress.total = e.total = this._getTotal(e.files) || 1,
                        e._progress.bitrate = e.bitrate = 0,
                        this._active += 1,
                        this._progress.loaded += e.loaded,
                        this._progress.total += e.total
                },
                _onDone: function (e, n, i, r) {
                    var o = r._progress.total,
                        s = r._response;
                    r._progress.loaded < o && this._onProgress(t.Event("progress", {
                            lengthComputable: !0,
                            loaded: o,
                            total: o
                        }), r),
                        s.result = r.result = e,
                        s.textStatus = r.textStatus = n,
                        s.jqXHR = r.jqXHR = i,
                        this._trigger("done", null, r)
                },
                _onFail: function (t, e, n, i) {
                    var r = i._response;
                    i.recalculateProgress && (this._progress.loaded -= i._progress.loaded,
                            this._progress.total -= i._progress.total),
                        r.jqXHR = i.jqXHR = t,
                        r.textStatus = i.textStatus = e,
                        r.errorThrown = i.errorThrown = n,
                        this._trigger("fail", null, i)
                },
                _onAlways: function (t, e, n, i) {
                    this._trigger("always", null, i)
                },
                _onSend: function (e, n) {
                    n.submit || this._addConvenienceMethods(e, n);
                    var i, r, o, s, a = this,
                        l = a._getAJAXSettings(n),
                        c = function () {
                            return a._sending += 1,
                                l._bitrateTimer = new a._BitrateTimer,
                                i = i || ((r || !1 === a._trigger("send", t.Event("send", {
                                    delegatedEvent: e
                                }), l)) && a._getXHRPromise(!1, l.context, r) || a._chunkedUpload(l) || t.ajax(l)).done(function (t, e, n) {
                                    a._onDone(t, e, n, l)
                                }).fail(function (t, e, n) {
                                    a._onFail(t, e, n, l)
                                }).always(function (t, e, n) {
                                    if (a._onAlways(t, e, n, l),
                                        a._sending -= 1,
                                        a._active -= 1,
                                        l.limitConcurrentUploads && l.limitConcurrentUploads > a._sending)
                                        for (var i = a._slots.shift(); i;) {
                                            if ("pending" === a._getDeferredState(i)) {
                                                i.resolve();
                                                break
                                            }
                                            i = a._slots.shift()
                                        }
                                    0 === a._active && a._trigger("stop")
                                })
                        };
                    return this._beforeSend(e, l),
                        this.options.sequentialUploads || this.options.limitConcurrentUploads && this.options.limitConcurrentUploads <= this._sending ? (this.options.limitConcurrentUploads > 1 ? (o = t.Deferred(),
                                this._slots.push(o),
                                s = o.then(c)) : (this._sequence = this._sequence.then(c, c),
                                s = this._sequence),
                            s.abort = function () {
                                return r = [void 0, "abort", "abort"],
                                    i ? i.abort() : (o && o.rejectWith(l.context, r),
                                        c())
                            },
                            this._enhancePromise(s)) : c()
                },
                _onAdd: function (e, n) {
                    var i, r, o, s, a = this,
                        l = !0,
                        c = t.extend({}, this.options, n),
                        u = n.files,
                        h = u.length,
                        d = c.limitMultiFileUploads,
                        f = c.limitMultiFileUploadSize,
                        p = c.limitMultiFileUploadSizeOverhead,
                        g = 0,
                        _ = this._getParamName(c),
                        y = 0;
                    if (!h)
                        return !1;
                    if (f && void 0 === u[0].size && (f = void 0),
                        (c.singleFileUploads || d || f) && this._isXHRUpload(c))
                        if (c.singleFileUploads || f || !d)
                            if (!c.singleFileUploads && f)
                                for (o = [],
                                    i = [],
                                    s = 0; s < h; s += 1)
                                    g += u[s].size + p,
                                    (s + 1 === h || g + u[s + 1].size + p > f || d && s + 1 - y >= d) && (o.push(u.slice(y, s + 1)),
                                        (r = _.slice(y, s + 1)).length || (r = _),
                                        i.push(r),
                                        y = s + 1,
                                        g = 0);
                            else
                                i = _;
                    else
                        for (o = [],
                            i = [],
                            s = 0; s < h; s += d)
                            o.push(u.slice(s, s + d)),
                            (r = _.slice(s, s + d)).length || (r = _),
                            i.push(r);
                    else
                        o = [u],
                        i = [_];
                    return n.originalFiles = u,
                        t.each(o || u, function (r, s) {
                            var c = t.extend({}, n);
                            return c.files = o ? s : [s],
                                c.paramName = i[r],
                                a._initResponseObject(c),
                                a._initProgressObject(c),
                                a._addConvenienceMethods(e, c),
                                l = a._trigger("add", t.Event("add", {
                                    delegatedEvent: e
                                }), c)
                        }),
                        l
                },
                _replaceFileInput: function (e) {
                    var n = e.fileInput,
                        i = n.clone(!0),
                        r = n.is(document.activeElement);
                    e.fileInputClone = i,
                        t("<form></form>").append(i)[0].reset(),
                        n.after(i).detach(),
                        r && i.focus(),
                        t.cleanData(n.unbind("remove")),
                        this.options.fileInput = this.options.fileInput.map(function (t, e) {
                            return e === n[0] ? i[0] : e
                        }),
                        n[0] === this.element[0] && (this.element = i)
                },
                _handleFileTreeEntry: function (e, n) {
                    var i, r = this,
                        o = t.Deferred(),
                        s = [],
                        a = function (t) {
                            t && !t.entry && (t.entry = e),
                                o.resolve([t])
                        },
                        l = function (t) {
                            r._handleFileTreeEntries(t, n + e.name + "/").done(function (t) {
                                o.resolve(t)
                            }).fail(a)
                        },
                        c = function () {
                            i.readEntries(function (t) {
                                t.length ? (s = s.concat(t),
                                    c()) : l(s)
                            }, a)
                        };
                    return n = n || "",
                        e.isFile ? e._file ? (e._file.relativePath = n,
                            o.resolve(e._file)) : e.file(function (t) {
                            t.relativePath = n,
                                o.resolve(t)
                        }, a) : e.isDirectory ? (i = e.createReader(),
                            c()) : o.resolve([]),
                        o.promise()
                },
                _handleFileTreeEntries: function (e, n) {
                    var i = this;
                    return t.when.apply(t, t.map(e, function (t) {
                        return i._handleFileTreeEntry(t, n)
                    })).then(function () {
                        return Array.prototype.concat.apply([], arguments)
                    })
                },
                _getDroppedFiles: function (e) {
                    var n = (e = e || {}).items;
                    return n && n.length && (n[0].webkitGetAsEntry || n[0].getAsEntry) ? this._handleFileTreeEntries(t.map(n, function (t) {
                        var e;
                        return t.webkitGetAsEntry ? ((e = t.webkitGetAsEntry()) && (e._file = t.getAsFile()),
                            e) : t.getAsEntry()
                    })) : t.Deferred().resolve(t.makeArray(e.files)).promise()
                },
                _getSingleFileInputFiles: function (e) {
                    var n, i, r = (e = t(e)).prop("webkitEntries") || e.prop("entries");
                    if (r && r.length)
                        return this._handleFileTreeEntries(r);
                    if ((n = t.makeArray(e.prop("files"))).length)
                        void 0 === n[0].name && n[0].fileName && t.each(n, function (t, e) {
                            e.name = e.fileName,
                                e.size = e.fileSize
                        });
                    else {
                        if (!(i = e.prop("value")))
                            return t.Deferred().resolve([]).promise();
                        n = [{
                            name: i.replace(/^.*\\/, "")
                        }]
                    }
                    return t.Deferred().resolve(n).promise()
                },
                _getFileInputFiles: function (e) {
                    return e instanceof t && 1 !== e.length ? t.when.apply(t, t.map(e, this._getSingleFileInputFiles)).then(function () {
                        return Array.prototype.concat.apply([], arguments)
                    }) : this._getSingleFileInputFiles(e)
                },
                _onChange: function (e) {
                    var n = this,
                        i = {
                            fileInput: t(e.target),
                            form: t(e.target.form)
                        };
                    this._getFileInputFiles(i.fileInput).always(function (r) {
                        i.files = r,
                            n.options.replaceFileInput && n._replaceFileInput(i), !1 !== n._trigger("change", t.Event("change", {
                                delegatedEvent: e
                            }), i) && n._onAdd(e, i)
                    })
                },
                _onPaste: function (e) {
                    var n = e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.items,
                        i = {
                            files: []
                        };
                    n && n.length && (t.each(n, function (t, e) {
                        var n = e.getAsFile && e.getAsFile();
                        n && i.files.push(n)
                    }), !1 !== this._trigger("paste", t.Event("paste", {
                        delegatedEvent: e
                    }), i) && this._onAdd(e, i))
                },
                _onDrop: function (e) {
                    e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
                    var n = this,
                        i = e.dataTransfer,
                        r = {};
                    i && i.files && i.files.length && (e.preventDefault(),
                        this._getDroppedFiles(i).always(function (i) {
                            r.files = i, !1 !== n._trigger("drop", t.Event("drop", {
                                delegatedEvent: e
                            }), r) && n._onAdd(e, r)
                        }))
                },
                _onDragOver: e("dragover"),
                _onDragEnter: e("dragenter"),
                _onDragLeave: e("dragleave"),
                _initEventHandlers: function () {
                    this._isXHRUpload(this.options) && (this._on(this.options.dropZone, {
                                dragover: this._onDragOver,
                                drop: this._onDrop,
                                dragenter: this._onDragEnter,
                                dragleave: this._onDragLeave
                            }),
                            this._on(this.options.pasteZone, {
                                paste: this._onPaste
                            })),
                        t.support.fileInput && this._on(this.options.fileInput, {
                            change: this._onChange
                        })
                },
                _destroyEventHandlers: function () {
                    this._off(this.options.dropZone, "dragenter dragleave dragover drop"),
                        this._off(this.options.pasteZone, "paste"),
                        this._off(this.options.fileInput, "change")
                },
                _destroy: function () {
                    this._destroyEventHandlers()
                },
                _setOption: function (e, n) {
                    var i = -1 !== t.inArray(e, this._specialOptions);
                    i && this._destroyEventHandlers(),
                        this._super(e, n),
                        i && (this._initSpecialOptions(),
                            this._initEventHandlers())
                },
                _initSpecialOptions: function () {
                    var e = this.options;
                    void 0 === e.fileInput ? e.fileInput = this.element.is('input[type="file"]') ? this.element : this.element.find('input[type="file"]') : e.fileInput instanceof t || (e.fileInput = t(e.fileInput)),
                        e.dropZone instanceof t || (e.dropZone = t(e.dropZone)),
                        e.pasteZone instanceof t || (e.pasteZone = t(e.pasteZone))
                },
                _getRegExp: function (t) {
                    var e = t.split("/"),
                        n = e.pop();
                    return e.shift(),
                        new RegExp(e.join("/"), n)
                },
                _isRegExpOption: function (e, n) {
                    return "url" !== e && "string" === t.type(n) && /^\/.*\/[igm]{0,3}$/.test(n)
                },
                _initDataAttributes: function () {
                    var e = this,
                        n = this.options,
                        i = this.element.data();
                    t.each(this.element[0].attributes, function (t, r) {
                        var o, s = r.name.toLowerCase();
                        /^data-/.test(s) && (s = s.slice(5).replace(/-[a-z]/g, function (t) {
                                return t.charAt(1).toUpperCase()
                            }),
                            o = i[s],
                            e._isRegExpOption(s, o) && (o = e._getRegExp(o)),
                            n[s] = o)
                    })
                },
                _create: function () {
                    this._initDataAttributes(),
                        this._initSpecialOptions(),
                        this._slots = [],
                        this._sequence = this._getXHRPromise(!0),
                        this._sending = this._active = 0,
                        this._initProgressObject(this),
                        this._initEventHandlers()
                },
                active: function () {
                    return this._active
                },
                progress: function () {
                    return this._progress
                },
                add: function (e) {
                    var n = this;
                    e && !this.options.disabled && (e.fileInput && !e.files ? this._getFileInputFiles(e.fileInput).always(function (t) {
                        e.files = t,
                            n._onAdd(null, e)
                    }) : (e.files = t.makeArray(e.files),
                        this._onAdd(null, e)))
                },
                send: function (e) {
                    if (e && !this.options.disabled) {
                        if (e.fileInput && !e.files) {
                            var n, i, r = this,
                                o = t.Deferred(),
                                s = o.promise();
                            return s.abort = function () {
                                    return i = !0,
                                        n ? n.abort() : (o.reject(null, "abort", "abort"),
                                            s)
                                },
                                this._getFileInputFiles(e.fileInput).always(function (t) {
                                    i || (t.length ? (e.files = t,
                                        (n = r._onSend(null, e)).then(function (t, e, n) {
                                            o.resolve(t, e, n)
                                        }, function (t, e, n) {
                                            o.reject(t, e, n)
                                        })) : o.reject())
                                }),
                                this._enhancePromise(s)
                        }
                        if (e.files = t.makeArray(e.files),
                            e.files.length)
                            return this._onSend(null, e)
                    }
                    return this._getXHRPromise(!1, e && e.context)
                }
            })
    });
var Tooltip = function () {
    $("body").append('<div id="tooltip"><div id="tooltip_inner"></div></div>'),
        $("body").append('<div id="tooltip_arrow"></div>'),
        this.hide();
    this.BACKGROUND_COLOR = "rgba(17, 17, 17, .9)",
        this.TEXT_PADDING = 10;
    var t = this.TEXT_PADDING + "px";
    this.TRIANGLE_WIDTH = "10px";
    this.makeDownArrow(),
        $("#tooltip").css("max-width", "50%"),
        $("#tooltip_inner").css("max-width", "500px"),
        $("#tooltip_inner").css("display", "table-cell"),
        $("#tooltip").css({
            position: "absolute",
            transform: "translate(-50%, 0)"
        }),
        $("#tooltip_arrow").css({
            position: "absolute",
            transform: "translate(0, -50%)"
        }),
        $("#tooltip").css("color", "#FFF"),
        $("#tooltip").css("background-color", this.BACKGROUND_COLOR),
        $("#tooltip").css("padding", t),
        $("#tooltip").css("border-radius", "2px"),
        $("#tooltip").css("box-shadow", "0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22)"),
        $("#tooltip").css("z-index", "1000002"),
        $("#tooltip_arrow").css("z-index", "1000002")
};
Tooltip.prototype.makeRightArrow = function (t, e, n) {
        $("#tooltip_arrow").css("width", "0"),
            $("#tooltip_arrow").css("height", "0"),
            $("#tooltip_arrow").css("border-bottom", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-top", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-left", this.TRIANGLE_WIDTH + " solid " + this.BACKGROUND_COLOR),
            $("#tooltip_arrow").css("border-right", "")
    },
    Tooltip.prototype.makeUpArrow = function (t, e, n) {
        $("#tooltip_arrow").css("width", "0"),
            $("#tooltip_arrow").css("height", "0"),
            $("#tooltip_arrow").css("border-left", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-right", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-top", this.TRIANGLE_WIDTH + " solid " + this.BACKGROUND_COLOR),
            $("#tooltip_arrow").css("border-bottom", "")
    },
    Tooltip.prototype.makeDownArrow = function (t, e, n) {
        $("#tooltip_arrow").css("width", "0"),
            $("#tooltip_arrow").css("height", "0"),
            $("#tooltip_arrow").css("border-left", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-right", this.TRIANGLE_WIDTH + " solid transparent"),
            $("#tooltip_arrow").css("border-bottom", this.TRIANGLE_WIDTH + " solid " + this.BACKGROUND_COLOR),
            $("#tooltip_arrow").css("border-top", "")
    },
    Tooltip.prototype.show = function (t, e, n, i) {
        $("#tooltip_arrow").show(),
            n = n.replace("background-color: rgb(255, 255, 255);", "");
        var r = 10;
        if ("right" == i) {
            var o = $("#tooltip").outerWidth();
            this.makeRightArrow(),
                $("#tooltip_inner").html(n),
                $("#tooltip_arrow").css({
                    position: "absolute",
                    left: t,
                    top: e,
                    transform: "translate(0, -50%)"
                }),
                $("#tooltip").css({
                    position: "absolute",
                    left: t - o,
                    top: e,
                    transform: "translate(0, -50%)"
                }),
                $("#tooltip").show()
        } else
            $("#tooltip").css({
                position: "absolute",
                left: 0,
                width: "500px",
                top: e,
                transform: "translate(-50%, 0)"
            }),
            $("#tooltip").show().promise().done(function () {
                    $("#tooltip_inner").html(n).promise().done(function () {
                            var n = $("#tooltip_inner").outerWidth() + 2 * this.TEXT_PADDING,
                                i = t - n / 2,
                                o = t + n / 2,
                                s = $(window).scrollLeft() + $(window).width(),
                                a = $("#tooltip").outerHeight(),
                                l = e + r + +a,
                                c = $(window).scrollTop() + $(window).height(),
                                u = e,
                                h = 1;
                            l > c ? (this.makeUpArrow(),
                                e -= a,
                                u -= 3 * r,
                                r *= -3,
                                h *= -1) : this.makeDownArrow();
                            var d;
                            i < 0 && o > s || (d = i < 0 ? t - i : o > s ? t - (o - s) : t),
                                $("#tooltip_arrow").css({
                                    position: "absolute",
                                    left: t,
                                    top: u + h,
                                    transform: "translate(-50%, 0)"
                                }),
                                $("#tooltip").css({
                                    position: "absolute",
                                    left: d,
                                    top: e + r,
                                    width: n - 2 * this.TEXT_PADDING + "px"
                                })
                        }
                        .bind(this))
                }
                .bind(this))
    },
    Tooltip.prototype.hide = function () {
        $("#tooltip").hide(),
            $("#tooltip_arrow").hide()
    },
    function (t) {
        "function" == typeof define && define.amd ? define(["jquery"], t) : "object" == typeof module && module.exports ? module.exports = function (e, n) {
                return void 0 === n && (n = "undefined" != typeof window ? require("jquery") : require("jquery")(e)),
                    t(n),
                    n
            } :
            t(jQuery)
    }(function (t) {
        "use strict";
        var e = t(document),
            n = t(window),
            i = ["a", "e", "i", "o", "u", "n", "c", "y"],
            r = [/[\xE0-\xE5]/g, /[\xE8-\xEB]/g, /[\xEC-\xEF]/g, /[\xF2-\xF6]/g, /[\xF9-\xFC]/g, /[\xF1]/g, /[\xE7]/g, /[\xFD-\xFF]/g],
            o = function (e, n) {
                var i = this;
                i.element = e,
                    i.$element = t(e),
                    i.state = {
                        multiple: !!i.$element.attr("multiple"),
                        enabled: !1,
                        opened: !1,
                        currValue: -1,
                        selectedIdx: -1,
                        highlightedIdx: -1
                    },
                    i.eventTriggers = {
                        open: i.open,
                        close: i.close,
                        destroy: i.destroy,
                        refresh: i.refresh,
                        init: i.init
                    },
                    i.init(n)
            };
        o.prototype = {
                utils: {
                    isMobile: function () {
                        return /android|ip(hone|od|ad)/i.test(navigator.userAgent)
                    },
                    escapeRegExp: function (t) {
                        return t.replace(/[.*+?^${}()|[\]\\]/g, "\\$&")
                    },
                    replaceDiacritics: function (t) {
                        for (var e = r.length; e--;)
                            t = t.toLowerCase().replace(r[e], i[e]);
                        return t
                    },
                    format: function (t) {
                        var e = arguments;
                        return ("" + t).replace(/\{(?:(\d+)|(\w+))\}/g, function (t, n, i) {
                            return i && e[1] ? e[1][i] : e[n]
                        })
                    },
                    nextEnabledItem: function (t, e) {
                        for (; t[e = (e + 1) % t.length].disabled;)
                        ;
                        return e
                    },
                    previousEnabledItem: function (t, e) {
                        for (; t[e = (e > 0 ? e : t.length) - 1].disabled;)
                        ;
                        return e
                    },
                    toDash: function (t) {
                        return t.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase()
                    },
                    triggerCallback: function (e, n) {
                        var i = n.element,
                            r = n.options["on" + e],
                            o = [i].concat([].slice.call(arguments).slice(1));
                        t.isFunction(r) && r.apply(i, o),
                            t(i).trigger("selectric-" + this.toDash(e), o)
                    },
                    arrayToClassname: function (e) {
                        var n = t.grep(e, function (t) {
                            return !!t
                        });
                        return t.trim(n.join(" "))
                    }
                },
                init: function (e) {
                    var n = this;
                    if (n.options = t.extend(!0, {}, t.fn.selectric.defaults, n.options, e),
                        n.utils.triggerCallback("BeforeInit", n),
                        n.destroy(!0),
                        n.options.disableOnMobile && n.utils.isMobile())
                        n.disableOnMobile = !0;
                    else {
                        n.classes = n.getClassNames();
                        var i = t("<input/>", {
                                class: n.classes.input,
                                readonly: n.utils.isMobile()
                            }),
                            r = t("<div/>", {
                                class: n.classes.items,
                                tabindex: -1
                            }),
                            o = t("<div/>", {
                                class: n.classes.scroll
                            }),
                            s = t("<div/>", {
                                class: n.classes.prefix,
                                html: n.options.arrowButtonMarkup
                            }),
                            a = t("<span/>", {
                                class: "label"
                            }),
                            l = n.$element.wrap("<div/>").parent().append(s.prepend(a), r, i),
                            c = t("<div/>", {
                                class: n.classes.hideselect
                            });
                        n.elements = {
                                input: i,
                                items: r,
                                itemsScroll: o,
                                wrapper: s,
                                label: a,
                                outerWrapper: l
                            },
                            n.options.nativeOnMobile && n.utils.isMobile() && (n.elements.input = void 0,
                                c.addClass(n.classes.prefix + "-is-native"),
                                n.$element.on("change", function () {
                                    n.refresh()
                                })),
                            n.$element.on(n.eventTriggers).wrap(c),
                            n.originalTabindex = n.$element.prop("tabindex"),
                            n.$element.prop("tabindex", -1),
                            n.populate(),
                            n.activate(),
                            n.utils.triggerCallback("Init", n)
                    }
                },
                activate: function () {
                    var t = this,
                        e = t.elements.items.closest(":visible").children(":hidden").addClass(t.classes.tempshow),
                        n = t.$element.width();
                    e.removeClass(t.classes.tempshow),
                        t.utils.triggerCallback("BeforeActivate", t),
                        t.elements.outerWrapper.prop("class", t.utils.arrayToClassname([t.classes.wrapper, t.$element.prop("class").replace(/\S+/g, t.classes.prefix + "-$&"), t.options.responsive ? t.classes.responsive : ""])),
                        t.options.inheritOriginalWidth && n > 0 && t.elements.outerWrapper.width(n),
                        t.unbindEvents(),
                        t.$element.prop("disabled") ? (t.elements.outerWrapper.addClass(t.classes.disabled),
                            t.elements.input && t.elements.input.prop("disabled", !0)) : (t.state.enabled = !0,
                            t.elements.outerWrapper.removeClass(t.classes.disabled),
                            t.$li = t.elements.items.removeAttr("style").find("li"),
                            t.bindEvents()),
                        t.utils.triggerCallback("Activate", t)
                },
                getClassNames: function () {
                    var e = this,
                        n = e.options.customClass,
                        i = {};
                    return t.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "), function (t, r) {
                            var o = n.prefix + r;
                            i[r.toLowerCase()] = n.camelCase ? o : e.utils.toDash(o)
                        }),
                        i.prefix = n.prefix,
                        i
                },
                setLabel: function () {
                    var e = this,
                        n = e.options.labelBuilder;
                    if (e.state.multiple) {
                        var i = t.isArray(e.state.currValue) ? e.state.currValue : [e.state.currValue];
                        i = 0 === i.length ? [0] : i;
                        var r = t.map(i, function (n) {
                            return t.grep(e.lookupItems, function (t) {
                                return t.index === n
                            })[0]
                        });
                        r = t.grep(r, function (e) {
                                return r.length > 1 || 0 === r.length ? "" !== t.trim(e.value) : e
                            }),
                            r = t.map(r, function (i) {
                                return t.isFunction(n) ? n(i) : e.utils.format(n, i)
                            }),
                            e.options.multiple.maxLabelEntries && (r.length >= e.options.multiple.maxLabelEntries + 1 ? (r = r.slice(0, e.options.multiple.maxLabelEntries)).push(t.isFunction(n) ? n({
                                text: "..."
                            }) : e.utils.format(n, {
                                text: "..."
                            })) : r.slice(r.length - 1)),
                            e.elements.label.html(r.join(e.options.multiple.separator))
                    } else {
                        var o = e.lookupItems[e.state.currValue];
                        e.elements.label.html(t.isFunction(n) ? n(o) : e.utils.format(n, o))
                    }
                },
                populate: function () {
                    var e = this,
                        n = e.$element.children(),
                        i = e.$element.find("option"),
                        r = i.filter(":selected"),
                        o = i.index(r),
                        s = 0,
                        a = e.state.multiple ? [] : 0;
                    r.length > 1 && e.state.multiple && (o = [],
                            r.each(function () {
                                o.push(t(this).index())
                            })),
                        e.state.currValue = ~o ? o : a,
                        e.state.selectedIdx = e.state.currValue,
                        e.state.highlightedIdx = e.state.currValue,
                        e.items = [],
                        e.lookupItems = [],
                        n.length && (n.each(function (n) {
                                var i = t(this);
                                if (i.is("optgroup")) {
                                    var r = {
                                        element: i,
                                        label: i.prop("label"),
                                        groupDisabled: i.prop("disabled"),
                                        items: []
                                    };
                                    i.children().each(function (n) {
                                            var i = t(this);
                                            r.items[n] = e.getItemData(s, i, r.groupDisabled || i.prop("disabled")),
                                                e.lookupItems[s] = r.items[n],
                                                s++
                                        }),
                                        e.items[n] = r
                                } else
                                    e.items[n] = e.getItemData(s, i, i.prop("disabled")),
                                    e.lookupItems[s] = e.items[n],
                                    s++
                            }),
                            e.setLabel(),
                            e.elements.items.append(e.elements.itemsScroll.html(e.getItemsMarkup(e.items))))
                },
                getItemData: function (e, n, i) {
                    var r = this;
                    return {
                        index: e,
                        element: n,
                        value: n.val(),
                        className: n.prop("class"),
                        text: n.html(),
                        slug: t.trim(r.utils.replaceDiacritics(n.html())),
                        alt: n.attr("data-alt"),
                        selected: n.prop("selected"),
                        disabled: i
                    }
                },
                getItemsMarkup: function (e) {
                    var n = this,
                        i = "<ul>";
                    return t.isFunction(n.options.listBuilder) && n.options.listBuilder && (e = n.options.listBuilder(e)),
                        t.each(e, function (e, r) {
                            void 0 !== r.label ? (i += n.utils.format('<ul class="{1}"><li class="{2}">{3}</li>', n.utils.arrayToClassname([n.classes.group, r.groupDisabled ? "disabled" : "", r.element.prop("class")]), n.classes.grouplabel, r.element.prop("label")),
                                t.each(r.items, function (t, e) {
                                    i += n.getItemMarkup(e.index, e)
                                }),
                                i += "</ul>") : i += n.getItemMarkup(r.index, r)
                        }),
                        i + "</ul>"
                },
                getItemMarkup: function (e, n) {
                    var i = this,
                        r = i.options.optionsItemBuilder,
                        o = {
                            value: n.value,
                            text: n.text,
                            slug: n.slug,
                            index: n.index
                        };
                    return i.utils.format('<li data-index="{1}" class="{2}">{3}</li>', e, i.utils.arrayToClassname([n.className, e === i.items.length - 1 ? "last" : "", n.disabled ? "disabled" : "", n.selected ? "selected" : ""]), t.isFunction(r) ? i.utils.format(r(n, this.$element, e), n) : i.utils.format(r, o))
                },
                unbindEvents: function () {
                    var t = this;
                    t.elements.wrapper.add(t.$element).add(t.elements.outerWrapper).add(t.elements.input).off(".sl")
                },
                bindEvents: function () {
                    var e = this;
                    e.elements.outerWrapper.on("mouseenter.sl mouseleave.sl", function (n) {
                            t(this).toggleClass(e.classes.hover, "mouseenter" === n.type),
                                e.options.openOnHover && (clearTimeout(e.closeTimer),
                                    "mouseleave" === n.type ? e.closeTimer = setTimeout(t.proxy(e.close, e), e.options.hoverIntentTimeout) : e.open())
                        }),
                        e.elements.wrapper.on("click.sl", function (t) {
                            e.state.opened ? e.close() : e.open(t)
                        }),
                        e.options.nativeOnMobile && e.utils.isMobile() || (e.$element.on("focus.sl", function () {
                                e.elements.input.focus()
                            }),
                            e.elements.input.prop({
                                tabindex: e.originalTabindex,
                                disabled: !1
                            }).on("keydown.sl", t.proxy(e.handleKeys, e)).on("focusin.sl", function (t) {
                                e.elements.outerWrapper.addClass(e.classes.focus),
                                    e.elements.input.one("blur", function () {
                                        e.elements.input.blur()
                                    }),
                                    e.options.openOnFocus && !e.state.opened && e.open(t)
                            }).on("focusout.sl", function () {
                                e.elements.outerWrapper.removeClass(e.classes.focus)
                            }).on("input propertychange", function () {
                                var n = e.elements.input.val(),
                                    i = new RegExp("^" + e.utils.escapeRegExp(n), "i");
                                clearTimeout(e.resetStr),
                                    e.resetStr = setTimeout(function () {
                                        e.elements.input.val("")
                                    }, e.options.keySearchTimeout),
                                    n.length && t.each(e.items, function (t, n) {
                                        if (!n.disabled) {
                                            if (i.test(n.text) || i.test(n.slug))
                                                return void e.highlight(t);
                                            if (n.alt)
                                                for (var r = n.alt.split("|"), o = 0; o < r.length && r[o]; o++)
                                                    if (i.test(r[o].trim()))
                                                        return void e.highlight(t)
                                        }
                                    })
                            })),
                        e.$li.on({
                            mousedown: function (t) {
                                t.preventDefault(),
                                    t.stopPropagation()
                            },
                            click: function () {
                                return e.select(t(this).data("index")), !1
                            }
                        })
                },
                handleKeys: function (e) {
                    var n = this,
                        i = e.which,
                        r = n.options.keys,
                        o = t.inArray(i, r.previous) > -1,
                        s = t.inArray(i, r.next) > -1,
                        a = t.inArray(i, r.select) > -1,
                        l = t.inArray(i, r.open) > -1,
                        c = n.state.highlightedIdx,
                        u = o && 0 === c || s && c + 1 === n.items.length,
                        h = 0;
                    if (13 !== i && 32 !== i || e.preventDefault(),
                        o || s) {
                        if (!n.options.allowWrap && u)
                            return;
                        o && (h = n.utils.previousEnabledItem(n.lookupItems, c)),
                            s && (h = n.utils.nextEnabledItem(n.lookupItems, c)),
                            n.highlight(h)
                    }
                    if (a && n.state.opened)
                        return n.select(c),
                            void(n.state.multiple && n.options.multiple.keepMenuOpen || n.close());
                    l && !n.state.opened && n.open()
                },
                refresh: function () {
                    var t = this;
                    t.populate(),
                        t.activate(),
                        t.utils.triggerCallback("Refresh", t)
                },
                setOptionsDimensions: function () {
                    var t = this,
                        e = t.elements.items.closest(":visible").children(":hidden").addClass(t.classes.tempshow),
                        n = t.options.maxHeight,
                        i = t.elements.items.outerWidth(),
                        r = t.elements.wrapper.outerWidth() - (i - t.elements.items.width());
                    !t.options.expandToItemText || r > i ? t.finalWidth = r : (t.elements.items.css("overflow", "scroll"),
                            t.elements.outerWrapper.width(9e4),
                            t.finalWidth = t.elements.items.width(),
                            t.elements.items.css("overflow", ""),
                            t.elements.outerWrapper.width("")),
                        t.elements.items.width(t.finalWidth).height() > n && t.elements.items.height(n),
                        e.removeClass(t.classes.tempshow)
                },
                isInViewport: function () {
                    var t = this;
                    if (!0 === t.options.forceRenderAbove)
                        t.elements.outerWrapper.addClass(t.classes.above);
                    else if (!0 === t.options.forceRenderBelow)
                        t.elements.outerWrapper.addClass(t.classes.below);
                    else {
                        var e = n.scrollTop(),
                            i = n.height(),
                            r = t.elements.outerWrapper.offset().top,
                            o = r + t.elements.outerWrapper.outerHeight() + t.itemsHeight <= e + i,
                            s = r - t.itemsHeight > e,
                            a = !o && s,
                            l = !a;
                        t.elements.outerWrapper.toggleClass(t.classes.above, a),
                            t.elements.outerWrapper.toggleClass(t.classes.below, l)
                    }
                },
                detectItemVisibility: function (e) {
                    var n = this,
                        i = n.$li.filter("[data-index]");
                    n.state.multiple && (e = t.isArray(e) && 0 === e.length ? 0 : e,
                        e = t.isArray(e) ? Math.min.apply(Math, e) : e);
                    var r = i.eq(e).outerHeight(),
                        o = i[e].offsetTop,
                        s = n.elements.itemsScroll.scrollTop(),
                        a = o + 2 * r;
                    n.elements.itemsScroll.scrollTop(a > s + n.itemsHeight ? a - n.itemsHeight : o - r < s ? o - r : s)
                },
                open: function (n) {
                    var i = this;
                    if (i.options.nativeOnMobile && i.utils.isMobile())
                        return !1;
                    i.utils.triggerCallback("BeforeOpen", i),
                        n && (n.preventDefault(),
                            i.options.stopPropagation && n.stopPropagation()),
                        i.state.enabled && (i.setOptionsDimensions(),
                            t("." + i.classes.hideselect, "." + i.classes.open).children().selectric("close"),
                            i.state.opened = !0,
                            i.itemsHeight = i.elements.items.outerHeight(),
                            i.itemsInnerHeight = i.elements.items.height(),
                            i.elements.outerWrapper.addClass(i.classes.open),
                            i.elements.input.val(""),
                            n && "focusin" !== n.type && i.elements.input.focus(),
                            setTimeout(function () {
                                e.on("click.sl", t.proxy(i.close, i)).on("scroll.sl", t.proxy(i.isInViewport, i))
                            }, 1),
                            i.isInViewport(),
                            i.options.preventWindowScroll && e.on("mousewheel.sl DOMMouseScroll.sl", "." + i.classes.scroll, function (e) {
                                var n = e.originalEvent,
                                    r = t(this).scrollTop(),
                                    o = 0;
                                "detail" in n && (o = -1 * n.detail),
                                    "wheelDelta" in n && (o = n.wheelDelta),
                                    "wheelDeltaY" in n && (o = n.wheelDeltaY),
                                    "deltaY" in n && (o = -1 * n.deltaY),
                                    (r === this.scrollHeight - i.itemsInnerHeight && o < 0 || 0 === r && o > 0) && e.preventDefault()
                            }),
                            i.detectItemVisibility(i.state.selectedIdx),
                            i.highlight(i.state.multiple ? -1 : i.state.selectedIdx),
                            i.utils.triggerCallback("Open", i))
                },
                close: function () {
                    var t = this;
                    t.utils.triggerCallback("BeforeClose", t),
                        e.off(".sl"),
                        t.elements.outerWrapper.removeClass(t.classes.open),
                        t.state.opened = !1,
                        t.utils.triggerCallback("Close", t)
                },
                change: function () {
                    var e = this;
                    e.utils.triggerCallback("BeforeChange", e),
                        e.state.multiple ? (t.each(e.lookupItems, function (t) {
                                e.lookupItems[t].selected = !1,
                                    e.$element.find("option").prop("selected", !1)
                            }),
                            t.each(e.state.selectedIdx, function (t, n) {
                                e.lookupItems[n].selected = !0,
                                    e.$element.find("option").eq(n).prop("selected", !0)
                            }),
                            e.state.currValue = e.state.selectedIdx,
                            e.setLabel(),
                            e.utils.triggerCallback("Change", e)) : e.state.currValue !== e.state.selectedIdx && (e.$element.prop("selectedIndex", e.state.currValue = e.state.selectedIdx).data("value", e.lookupItems[e.state.selectedIdx].text),
                            e.setLabel(),
                            e.utils.triggerCallback("Change", e))
                },
                highlight: function (t) {
                    var e = this,
                        n = e.$li.filter("[data-index]").removeClass("highlighted");
                    e.utils.triggerCallback("BeforeHighlight", e),
                        void 0 === t || -1 === t || e.lookupItems[t].disabled || (n.eq(e.state.highlightedIdx = t).addClass("highlighted"),
                            e.detectItemVisibility(t),
                            e.utils.triggerCallback("Highlight", e))
                },
                select: function (e) {
                    var n = this,
                        i = n.$li.filter("[data-index]");
                    if (n.utils.triggerCallback("BeforeSelect", n, e),
                        void 0 !== e && -1 !== e && !n.lookupItems[e].disabled) {
                        if (n.state.multiple) {
                            n.state.selectedIdx = t.isArray(n.state.selectedIdx) ? n.state.selectedIdx : [n.state.selectedIdx];
                            var r = t.inArray(e, n.state.selectedIdx); -
                            1 !== r ? n.state.selectedIdx.splice(r, 1) : n.state.selectedIdx.push(e),
                                i.removeClass("selected").filter(function (e) {
                                    return -1 !== t.inArray(e, n.state.selectedIdx)
                                }).addClass("selected")
                        } else
                            i.removeClass("selected").eq(n.state.selectedIdx = e).addClass("selected");
                        n.state.multiple && n.options.multiple.keepMenuOpen || n.close(),
                            n.change(),
                            n.utils.triggerCallback("Select", n, e)
                    }
                },
                destroy: function (t) {
                    var e = this;
                    e.state && e.state.enabled && (e.elements.items.add(e.elements.wrapper).add(e.elements.input).remove(),
                        t || e.$element.removeData("selectric").removeData("value"),
                        e.$element.prop("tabindex", e.originalTabindex).off(".sl").off(e.eventTriggers).unwrap().unwrap(),
                        e.state.enabled = !1)
                }
            },
            t.fn.selectric = function (e) {
                return this.each(function () {
                    var n = t.data(this, "selectric");
                    n && !n.disableOnMobile ? "string" == typeof e && n[e] ? n[e]() : n.init(e) : t.data(this, "selectric", new o(this, e))
                })
            },
            t.fn.selectric.defaults = {
                onChange: function (e) {
                    t(e).change()
                },
                maxHeight: 300,
                keySearchTimeout: 500,
                arrowButtonMarkup: '<b class="button">&#x25be;</b>',
                disableOnMobile: !1,
                nativeOnMobile: !0,
                openOnFocus: !0,
                openOnHover: !1,
                hoverIntentTimeout: 500,
                expandToItemText: !1,
                responsive: !1,
                preventWindowScroll: !0,
                inheritOriginalWidth: !1,
                allowWrap: !0,
                forceRenderAbove: !1,
                forceRenderBelow: !1,
                stopPropagation: !0,
                optionsItemBuilder: "{text}",
                labelBuilder: "{text}",
                listBuilder: !1,
                keys: {
                    previous: [37, 38],
                    next: [39, 40],
                    select: [9, 13, 27],
                    open: [13, 32, 37, 38, 39, 40],
                    close: [9, 27]
                },
                customClass: {
                    prefix: "selectric",
                    camelCase: !1
                },
                multiple: {
                    separator: ", ",
                    keepMenuOpen: !0,
                    maxLabelEntries: !1
                }
            }
    }),
    shortcut = {
        all_shortcuts: {},
        add: function (t, e, n) {
            var i = {
                type: "keydown",
                propagate: !1,
                disable_in_input: !1,
                target: document,
                keycode: !1
            };
            if (n)
                for (var r in i)
                    void 0 === n[r] && (n[r] = i[r]);
            else
                n = i;
            var o = n.target;
            "string" == typeof n.target && (o = document.getElementById(n.target));
            t = t.toLowerCase();
            var s = function (i) {
                if (i = i || window.event,
                    n.disable_in_input) {
                    var r;
                    if (i.target ? r = i.target : i.srcElement && (r = i.srcElement),
                        3 == r.nodeType && (r = r.parentNode),
                        "INPUT" == r.tagName || "TEXTAREA" == r.tagName)
                        return
                }
                i.keyCode ? code = i.keyCode : i.which && (code = i.which);
                var o = String.fromCharCode(code).toLowerCase();
                188 == code && (o = ","),
                    190 == code && (o = ".");
                var s = t.split("+"),
                    a = 0,
                    l = {
                        "`": "~",
                        1: "!",
                        2: "@",
                        3: "#",
                        4: "$",
                        5: "%",
                        6: "^",
                        7: "&",
                        8: "*",
                        9: "(",
                        0: ")",
                        "-": "_",
                        "=": "+",
                        ";": ":",
                        "'": '"',
                        ",": "<",
                        ".": ">",
                        "/": "?",
                        "\\": "|"
                    },
                    c = {
                        esc: 27,
                        escape: 27,
                        tab: 9,
                        space: 32,
                        return: 13,
                        enter: 13,
                        backspace: 8,
                        scrolllock: 145,
                        scroll_lock: 145,
                        scroll: 145,
                        capslock: 20,
                        caps_lock: 20,
                        caps: 20,
                        numlock: 144,
                        num_lock: 144,
                        num: 144,
                        pause: 19,
                        break: 19,
                        insert: 45,
                        home: 36,
                        delete: 46,
                        end: 35,
                        pageup: 33,
                        page_up: 33,
                        pu: 33,
                        pagedown: 34,
                        page_down: 34,
                        pd: 34,
                        left: 37,
                        up: 38,
                        right: 39,
                        down: 40,
                        f1: 112,
                        f2: 113,
                        f3: 114,
                        f4: 115,
                        f5: 116,
                        f6: 117,
                        f7: 118,
                        f8: 119,
                        f9: 120,
                        f10: 121,
                        f11: 122,
                        f12: 123
                    },
                    u = {
                        shift: {
                            wanted: !1,
                            pressed: !1
                        },
                        ctrl: {
                            wanted: !1,
                            pressed: !1
                        },
                        alt: {
                            wanted: !1,
                            pressed: !1
                        },
                        meta: {
                            wanted: !1,
                            pressed: !1
                        }
                    };
                i.ctrlKey && (u.ctrl.pressed = !0),
                    i.shiftKey && (u.shift.pressed = !0),
                    i.altKey && (u.alt.pressed = !0),
                    i.metaKey && (u.meta.pressed = !0);
                for (var h = 0; k = s[h],
                    h < s.length; h++)
                    "ctrl" == k || "control" == k ? (a++,
                        u.ctrl.wanted = !0) : "shift" == k ? (a++,
                        u.shift.wanted = !0) : "alt" == k ? (a++,
                        u.alt.wanted = !0) : "meta" == k ? (a++,
                        u.meta.wanted = !0) : k.length > 1 ? c[k] == code && a++ : n.keycode ? n.keycode == code && a++ : o == k ? a++ : l[o] && i.shiftKey && (o = l[o]) == k && a++;
                if (a == s.length && u.ctrl.pressed == u.ctrl.wanted && u.shift.pressed == u.shift.wanted && u.alt.pressed == u.alt.wanted && u.meta.pressed == u.meta.wanted && (e(i), !n.propagate))
                    return i.cancelBubble = !0,
                        i.returnValue = !1,
                        i.stopPropagation && (i.stopPropagation(),
                            i.preventDefault()), !1
            };
            this.all_shortcuts[t] = {
                    callback: s,
                    target: o,
                    event: n.type
                },
                o.addEventListener ? o.addEventListener(n.type, s, !1) : o.attachEvent ? o.attachEvent("on" + n.type, s) : o["on" + n.type] = s
        },
        remove: function (t) {
            t = t.toLowerCase();
            var e = this.all_shortcuts[t];
            if (delete this.all_shortcuts[t],
                e) {
                var n = e.event,
                    i = e.target,
                    r = e.callback;
                i.detachEvent ? i.detachEvent("on" + n, r) : i.removeEventListener ? i.removeEventListener(n, r, !1) : i["on" + n] = !1
            }
        }
    },
    function (t) {
        "use strict";
        "function" == typeof define && define.amd ? define(["jquery"], t) : t("object" == typeof exports ? require("jquery") : jQuery)
    }(function (t, e) {
        "use strict";
        if (!t.jstree) {
            var n, i, r = 0,
                o = !1,
                s = !1,
                a = !1,
                l = [],
                c = t("script:last").attr("src"),
                u = window.document,
                h = u.createElement("LI");
            h.setAttribute("role", "treeitem"),
                (n = u.createElement("I")).className = "jstree-icon jstree-ocl",
                n.setAttribute("role", "presentation"),
                h.appendChild(n),
                (n = u.createElement("A")).className = "jstree-anchor",
                n.setAttribute("href", "#"),
                n.setAttribute("tabindex", "-1"),
                (i = u.createElement("I")).className = "jstree-icon jstree-themeicon",
                i.setAttribute("role", "presentation"),
                n.appendChild(i),
                h.appendChild(n),
                n = i = null,
                t.jstree = {
                    version: "3.1.1",
                    defaults: {
                        plugins: []
                    },
                    plugins: {},
                    path: c && -1 !== c.indexOf("/") ? c.replace(/\/[^\/]+$/, "") : "",
                    idregex: /[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g
                },
                t.jstree.create = function (e, n) {
                    var i = new t.jstree.core(++r),
                        o = n;
                    return n = t.extend(!0, {}, t.jstree.defaults, n),
                        o && o.plugins && (n.plugins = o.plugins),
                        t.each(n.plugins, function (t, e) {
                            "core" !== t && (i = i.plugin(e, n[e]))
                        }),
                        t(e).data("jstree", i),
                        i.init(e, n),
                        i
                },
                t.jstree.destroy = function () {
                    t(".jstree:jstree").jstree("destroy"),
                        t(u).off(".jstree")
                },
                t.jstree.core = function (t) {
                    this._id = t,
                        this._cnt = 0,
                        this._wrk = null,
                        this._data = {
                            core: {
                                themes: {
                                    name: !1,
                                    dots: !1,
                                    icons: !1
                                },
                                selected: [],
                                last_error: {},
                                working: !1,
                                worker_queue: [],
                                focused: null
                            }
                        }
                },
                t.jstree.reference = function (e) {
                    var n = null,
                        i = null;
                    if (!e || !e.id || e.tagName && e.nodeType || (e = e.id), !i || !i.length)
                        try {
                            i = t(e)
                        } catch (t) {}
                    if (!i || !i.length)
                        try {
                            i = t("#" + e.replace(t.jstree.idregex, "\\$&"))
                        } catch (t) {}
                    return i && i.length && (i = i.closest(".jstree")).length && (i = i.data("jstree")) ? n = i : t(".jstree").each(function () {
                            var i = t(this).data("jstree");
                            if (i && i._model.data[e])
                                return n = i, !1
                        }),
                        n
                },
                t.fn.jstree = function (n) {
                    var i = "string" == typeof n,
                        r = Array.prototype.slice.call(arguments, 1),
                        o = null;
                    return !(!0 === n && !this.length) && (this.each(function () {
                            var s = t.jstree.reference(this),
                                a = i && s ? s[n] : null;
                            if (o = i && a ? a.apply(s, r) : null,
                                s || i || n !== e && !t.isPlainObject(n) || t.jstree.create(this, n),
                                (s && !i || !0 === n) && (o = s || !1),
                                null !== o && o !== e)
                                return !1
                        }),
                        null !== o && o !== e ? o : this)
                },
                t.expr[":"].jstree = t.expr.createPseudo(function (n) {
                    return function (n) {
                        return t(n).hasClass("jstree") && t(n).data("jstree") !== e
                    }
                }),
                t.jstree.defaults.core = {
                    data: !1,
                    strings: !1,
                    check_callback: !1,
                    error: t.noop,
                    animation: 200,
                    multiple: !0,
                    themes: {
                        name: !1,
                        url: !1,
                        dir: !1,
                        dots: !0,
                        icons: !0,
                        stripes: !1,
                        variant: !1,
                        responsive: !1
                    },
                    expand_selected_onload: !0,
                    worker: !0,
                    force_text: !1,
                    dblclick_toggle: !0
                },
                t.jstree.core.prototype = {
                    plugin: function (e, n) {
                        var i = t.jstree.plugins[e];
                        return i ? (this._data[e] = {},
                            i.prototype = this,
                            new i(n, this)) : this
                    },
                    init: function (e, n) {
                        this._model = {
                                data: {
                                    "#": {
                                        id: "#",
                                        parent: null,
                                        parents: [],
                                        children: [],
                                        children_d: [],
                                        state: {
                                            loaded: !1
                                        }
                                    }
                                },
                                changed: [],
                                force_full_redraw: !1,
                                redraw_timeout: !1,
                                default_state: {
                                    loaded: !0,
                                    opened: !1,
                                    selected: !1,
                                    disabled: !1
                                }
                            },
                            this.element = t(e).addClass("jstree jstree-" + this._id),
                            this.settings = n,
                            this._data.core.ready = !1,
                            this._data.core.loaded = !1,
                            this._data.core.rtl = "rtl" === this.element.css("direction"),
                            this.element[this._data.core.rtl ? "addClass" : "removeClass"]("jstree-rtl"),
                            this.element.attr("role", "tree"),
                            this.settings.core.multiple && this.element.attr("aria-multiselectable", !0),
                            this.element.attr("tabindex") || this.element.attr("tabindex", "0"),
                            this.bind(),
                            this.trigger("init"),
                            this._data.core.original_container_html = this.element.find(" > ul > li").clone(!0),
                            this._data.core.original_container_html.find("li").addBack().contents().filter(function () {
                                return 3 === this.nodeType && (!this.nodeValue || /^\s+$/.test(this.nodeValue))
                            }).remove(),
                            this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j" + this._id + "_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>"),
                            this.element.attr("aria-activedescendant", "j" + this._id + "_loading"),
                            this._data.core.li_height = this.get_container_ul().children("li").first().height() || 24,
                            this.trigger("loading"),
                            this.load_node("#")
                    },
                    destroy: function (t) {
                        if (this._wrk)
                            try {
                                window.URL.revokeObjectURL(this._wrk),
                                    this._wrk = null
                            } catch (t) {}
                        t || this.element.empty(),
                            this.teardown()
                    },
                    teardown: function () {
                        this.unbind(),
                            this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class", function () {
                                return this.className.replace(/jstree[^ ]*|$/gi, "")
                            }),
                            this.element = null
                    },
                    bind: function () {
                        var e = "",
                            n = null,
                            i = 0;
                        this.element.on("dblclick.jstree", function () {
                            if (u.selection && u.selection.empty)
                                u.selection.empty();
                            else if (window.getSelection) {
                                var t = window.getSelection();
                                try {
                                    t.removeAllRanges(),
                                        t.collapse()
                                } catch (t) {}
                            }
                        }).on("mousedown.jstree", t.proxy(function (t) {
                            t.target === this.element[0] && (t.preventDefault(),
                                i = +new Date)
                        }, this)).on("mousedown.jstree", ".jstree-ocl", function (t) {
                            t.preventDefault()
                        }).on("click.jstree", ".jstree-ocl", t.proxy(function (t) {
                            this.toggle_node(t.target)
                        }, this)).on("dblclick.jstree", ".jstree-anchor", t.proxy(function (t) {
                            this.settings.core.dblclick_toggle && this.toggle_node(t.target)
                        }, this)).on("click.jstree", ".jstree-anchor", t.proxy(function (e) {
                            e.preventDefault(),
                                e.currentTarget !== u.activeElement && t(e.currentTarget).focus(),
                                this.activate_node(e.currentTarget, e)
                        }, this)).on("keydown.jstree", ".jstree-anchor", t.proxy(function (e) {
                            if ("INPUT" === e.target.tagName)
                                return !0;
                            if (32 !== e.which && 13 !== e.which && (e.shiftKey || e.ctrlKey || e.altKey || e.metaKey))
                                return !0;
                            var n = null;
                            switch (this._data.core.rtl && (37 === e.which ? e.which = 39 : 39 === e.which && (e.which = 37)),
                                e.which) {
                                case 32:
                                    e.ctrlKey && (e.type = "click",
                                        t(e.currentTarget).trigger(e));
                                    break;
                                case 13:
                                    e.type = "click",
                                        t(e.currentTarget).trigger(e);
                                    break;
                                case 37:
                                    e.preventDefault(),
                                        this.is_open(e.currentTarget) ? this.close_node(e.currentTarget) : (n = this.get_parent(e.currentTarget)) && "#" !== n.id && this.get_node(n, !0).children(".jstree-anchor").focus();
                                    break;
                                case 38:
                                    e.preventDefault(),
                                        (n = this.get_prev_dom(e.currentTarget)) && n.length && n.children(".jstree-anchor").focus();
                                    break;
                                case 39:
                                    e.preventDefault(),
                                        this.is_closed(e.currentTarget) ? this.open_node(e.currentTarget, function (t) {
                                            this.get_node(t, !0).children(".jstree-anchor").focus()
                                        }) : this.is_open(e.currentTarget) && (n = this.get_node(e.currentTarget, !0).children(".jstree-children")[0]) && t(this._firstChild(n)).children(".jstree-anchor").focus();
                                    break;
                                case 40:
                                    e.preventDefault(),
                                        (n = this.get_next_dom(e.currentTarget)) && n.length && n.children(".jstree-anchor").focus();
                                    break;
                                case 106:
                                    this.open_all();
                                    break;
                                case 36:
                                    e.preventDefault(),
                                        (n = this._firstChild(this.get_container_ul()[0])) && t(n).children(".jstree-anchor").filter(":visible").focus();
                                    break;
                                case 35:
                                    e.preventDefault(),
                                        this.element.find(".jstree-anchor").filter(":visible").last().focus()
                            }
                        }, this)).on("load_node.jstree", t.proxy(function (e, n) {
                            n.status && ("#" !== n.node.id || this._data.core.loaded || (this._data.core.loaded = !0,
                                    this._firstChild(this.get_container_ul()[0]) && this.element.attr("aria-activedescendant", this._firstChild(this.get_container_ul()[0]).id),
                                    this.trigger("loaded")),
                                this._data.core.ready || setTimeout(t.proxy(function () {
                                    if (this.element && !this.get_container_ul().find(".jstree-loading").length) {
                                        if (this._data.core.ready = !0,
                                            this._data.core.selected.length) {
                                            if (this.settings.core.expand_selected_onload) {
                                                var e, n, i = [];
                                                for (e = 0,
                                                    n = this._data.core.selected.length; e < n; e++)
                                                    i = i.concat(this._model.data[this._data.core.selected[e]].parents);
                                                for (e = 0,
                                                    n = (i = t.vakata.array_unique(i)).length; e < n; e++)
                                                    this.open_node(i[e], !1, 0)
                                            }
                                            this.trigger("changed", {
                                                action: "ready",
                                                selected: this._data.core.selected
                                            })
                                        }
                                        this.trigger("ready")
                                    }
                                }, this), 0))
                        }, this)).on("keypress.jstree", t.proxy(function (i) {
                            if ("INPUT" === i.target.tagName)
                                return !0;
                            n && clearTimeout(n),
                                n = setTimeout(function () {
                                    e = ""
                                }, 500);
                            var r = String.fromCharCode(i.which).toLowerCase(),
                                o = this.element.find(".jstree-anchor").filter(":visible"),
                                s = o.index(u.activeElement) || 0,
                                a = !1;
                            if ((e += r).length > 1) {
                                if (o.slice(s).each(t.proxy(function (n, i) {
                                        if (0 === t(i).text().toLowerCase().indexOf(e))
                                            return t(i).focus(),
                                                a = !0, !1
                                    }, this)),
                                    a)
                                    return;
                                if (o.slice(0, s).each(t.proxy(function (n, i) {
                                        if (0 === t(i).text().toLowerCase().indexOf(e))
                                            return t(i).focus(),
                                                a = !0, !1
                                    }, this)),
                                    a)
                                    return
                            }
                            if (new RegExp("^" + r + "+$").test(e)) {
                                if (o.slice(s + 1).each(t.proxy(function (e, n) {
                                        if (t(n).text().toLowerCase().charAt(0) === r)
                                            return t(n).focus(),
                                                a = !0, !1
                                    }, this)),
                                    a)
                                    return;
                                if (o.slice(0, s + 1).each(t.proxy(function (e, n) {
                                        if (t(n).text().toLowerCase().charAt(0) === r)
                                            return t(n).focus(),
                                                a = !0, !1
                                    }, this)),
                                    a)
                                    return
                            }
                        }, this)).on("init.jstree", t.proxy(function () {
                            var t = this.settings.core.themes;
                            this._data.core.themes.dots = t.dots,
                                this._data.core.themes.stripes = t.stripes,
                                this._data.core.themes.icons = t.icons,
                                this.set_theme(t.name || "default", t.url),
                                this.set_theme_variant(t.variant)
                        }, this)).on("loading.jstree", t.proxy(function () {
                            this[this._data.core.themes.dots ? "show_dots" : "hide_dots"](),
                                this[this._data.core.themes.icons ? "show_icons" : "hide_icons"](),
                                this[this._data.core.themes.stripes ? "show_stripes" : "hide_stripes"]()
                        }, this)).on("blur.jstree", ".jstree-anchor", t.proxy(function (e) {
                            this._data.core.focused = null,
                                t(e.currentTarget).filter(".jstree-hovered").mouseleave(),
                                this.element.attr("tabindex", "0")
                        }, this)).on("focus.jstree", ".jstree-anchor", t.proxy(function (e) {
                            var n = this.get_node(e.currentTarget);
                            n && n.id && (this._data.core.focused = n.id),
                                this.element.find(".jstree-hovered").not(e.currentTarget).mouseleave(),
                                t(e.currentTarget).mouseenter(),
                                this.element.attr("tabindex", "-1")
                        }, this)).on("focus.jstree", t.proxy(function () {
                            if (+new Date - i > 500 && !this._data.core.focused) {
                                i = 0;
                                var t = this.get_node(this.element.attr("aria-activedescendant"), !0);
                                t && t.find("> .jstree-anchor").focus()
                            }
                        }, this)).on("mouseenter.jstree", ".jstree-anchor", t.proxy(function (t) {
                            this.hover_node(t.currentTarget)
                        }, this)).on("mouseleave.jstree", ".jstree-anchor", t.proxy(function (t) {
                            this.dehover_node(t.currentTarget)
                        }, this))
                    },
                    unbind: function () {
                        this.element.off(".jstree"),
                            t(u).off(".jstree-" + this._id)
                    },
                    trigger: function (t, e) {
                        e || (e = {}),
                            e.instance = this,
                            this.element.triggerHandler(t.replace(".jstree", "") + ".jstree", e)
                    },
                    get_container: function () {
                        return this.element
                    },
                    get_container_ul: function () {
                        return this.element.children(".jstree-children").first()
                    },
                    get_string: function (e) {
                        var n = this.settings.core.strings;
                        return t.isFunction(n) ? n.call(this, e) : n && n[e] ? n[e] : e
                    },
                    _firstChild: function (t) {
                        for (t = t ? t.firstChild : null; null !== t && 1 !== t.nodeType;)
                            t = t.nextSibling;
                        return t
                    },
                    _nextSibling: function (t) {
                        for (t = t ? t.nextSibling : null; null !== t && 1 !== t.nodeType;)
                            t = t.nextSibling;
                        return t
                    },
                    _previousSibling: function (t) {
                        for (t = t ? t.previousSibling : null; null !== t && 1 !== t.nodeType;)
                            t = t.previousSibling;
                        return t
                    },
                    get_node: function (e, n) {
                        e && e.id && (e = e.id);
                        var i;
                        try {
                            if (this._model.data[e])
                                e = this._model.data[e];
                            else if ("string" == typeof e && this._model.data[e.replace(/^#/, "")])
                                e = this._model.data[e.replace(/^#/, "")];
                            else if ("string" == typeof e && (i = t("#" + e.replace(t.jstree.idregex, "\\$&"), this.element)).length && this._model.data[i.closest(".jstree-node").attr("id")])
                                e = this._model.data[i.closest(".jstree-node").attr("id")];
                            else if ((i = t(e, this.element)).length && this._model.data[i.closest(".jstree-node").attr("id")])
                                e = this._model.data[i.closest(".jstree-node").attr("id")];
                            else {
                                if (!(i = t(e, this.element)).length || !i.hasClass("jstree"))
                                    return !1;
                                e = this._model.data["#"]
                            }
                            return n && (e = "#" === e.id ? this.element : t("#" + e.id.replace(t.jstree.idregex, "\\$&"), this.element)),
                                e
                        } catch (t) {
                            return !1
                        }
                    },
                    get_path: function (t, e, n) {
                        if (!(t = t.parents ? t : this.get_node(t)) || "#" === t.id || !t.parents)
                            return !1;
                        var i, r, o = [];
                        for (o.push(n ? t.id : t.text),
                            i = 0,
                            r = t.parents.length; i < r; i++)
                            o.push(n ? t.parents[i] : this.get_text(t.parents[i]));
                        return o = o.reverse().slice(1),
                            e ? o.join(e) : o
                    },
                    get_next_dom: function (e, n) {
                        var i;
                        if ((e = this.get_node(e, !0))[0] === this.element[0]) {
                            for (i = this._firstChild(this.get_container_ul()[0]); i && 0 === i.offsetHeight;)
                                i = this._nextSibling(i);
                            return !!i && t(i)
                        }
                        if (!e || !e.length)
                            return !1;
                        if (n) {
                            i = e[0];
                            do {
                                i = this._nextSibling(i)
                            } while (i && 0 === i.offsetHeight);
                            return !!i && t(i)
                        }
                        if (e.hasClass("jstree-open")) {
                            for (i = this._firstChild(e.children(".jstree-children")[0]); i && 0 === i.offsetHeight;)
                                i = this._nextSibling(i);
                            if (null !== i)
                                return t(i)
                        }
                        i = e[0];
                        do {
                            i = this._nextSibling(i)
                        } while (i && 0 === i.offsetHeight);
                        return null !== i ? t(i) : e.parentsUntil(".jstree", ".jstree-node").nextAll(".jstree-node:visible").first()
                    },
                    get_prev_dom: function (e, n) {
                        var i;
                        if ((e = this.get_node(e, !0))[0] === this.element[0]) {
                            for (i = this.get_container_ul()[0].lastChild; i && 0 === i.offsetHeight;)
                                i = this._previousSibling(i);
                            return !!i && t(i)
                        }
                        if (!e || !e.length)
                            return !1;
                        if (n) {
                            i = e[0];
                            do {
                                i = this._previousSibling(i)
                            } while (i && 0 === i.offsetHeight);
                            return !!i && t(i)
                        }
                        i = e[0];
                        do {
                            i = this._previousSibling(i)
                        } while (i && 0 === i.offsetHeight);
                        if (null !== i) {
                            for (e = t(i); e.hasClass("jstree-open");)
                                e = e.children(".jstree-children").first().children(".jstree-node:visible:last");
                            return e
                        }
                        return !(!(i = e[0].parentNode.parentNode) || !i.className || -1 === i.className.indexOf("jstree-node")) && t(i)
                    },
                    get_parent: function (t) {
                        return !(!(t = this.get_node(t)) || "#" === t.id) && t.parent
                    },
                    get_children_dom: function (t) {
                        return (t = this.get_node(t, !0))[0] === this.element[0] ? this.get_container_ul().children(".jstree-node") : !(!t || !t.length) && t.children(".jstree-children").children(".jstree-node")
                    },
                    is_parent: function (t) {
                        return (t = this.get_node(t)) && (!1 === t.state.loaded || t.children.length > 0)
                    },
                    is_loaded: function (t) {
                        return (t = this.get_node(t)) && t.state.loaded
                    },
                    is_loading: function (t) {
                        return (t = this.get_node(t)) && t.state && t.state.loading
                    },
                    is_open: function (t) {
                        return (t = this.get_node(t)) && t.state.opened
                    },
                    is_closed: function (t) {
                        return (t = this.get_node(t)) && this.is_parent(t) && !t.state.opened
                    },
                    is_leaf: function (t) {
                        return !this.is_parent(t)
                    },
                    load_node: function (e, n) {
                        var i, r, o, s, a;
                        if (t.isArray(e))
                            return this._load_nodes(e.slice(), n), !0;
                        if (!(e = this.get_node(e)))
                            return n && n.call(this, e, !1), !1;
                        if (e.state.loaded) {
                            for (e.state.loaded = !1,
                                i = 0,
                                r = e.children_d.length; i < r; i++) {
                                for (o = 0,
                                    s = e.parents.length; o < s; o++)
                                    this._model.data[e.parents[o]].children_d = t.vakata.array_remove_item(this._model.data[e.parents[o]].children_d, e.children_d[i]);
                                this._model.data[e.children_d[i]].state.selected && (a = !0,
                                        this._data.core.selected = t.vakata.array_remove_item(this._data.core.selected, e.children_d[i])),
                                    delete this._model.data[e.children_d[i]]
                            }
                            e.children = [],
                                e.children_d = [],
                                a && this.trigger("changed", {
                                    action: "load_node",
                                    node: e,
                                    selected: this._data.core.selected
                                })
                        }
                        return e.state.failed = !1,
                            e.state.loading = !0,
                            this.get_node(e, !0).addClass("jstree-loading").attr("aria-busy", !0),
                            this._load_node(e, t.proxy(function (t) {
                                (e = this._model.data[e.id]).state.loading = !1,
                                    e.state.loaded = t,
                                    e.state.failed = !e.state.loaded;
                                var i = this.get_node(e, !0);
                                e.state.loaded && !e.children.length && i && i.length && !i.hasClass("jstree-leaf") && i.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),
                                    i.removeClass("jstree-loading").attr("aria-busy", !1),
                                    this.trigger("load_node", {
                                        node: e,
                                        status: t
                                    }),
                                    n && n.call(this, e, t)
                            }, this)), !0
                    },
                    _load_nodes: function (t, e, n) {
                        var i, r, o = !0,
                            s = this._model.data,
                            a = [];
                        for (i = 0,
                            r = t.length; i < r; i++)
                            !s[t[i]] || (s[t[i]].state.loaded || s[t[i]].state.failed) && n || (this.is_loading(t[i]) || this.load_node(t[i], function () {
                                    this._load_nodes(t, e, !0)
                                }),
                                o = !1);
                        if (o) {
                            for (i = 0,
                                r = t.length; i < r; i++)
                                s[t[i]] && s[t[i]].state.loaded && a.push(t[i]);
                            e && !e.done && (e.call(this, a),
                                e.done = !0)
                        }
                    },
                    load_all: function (t, e) {
                        if (t || (t = "#"), !(t = this.get_node(t)))
                            return !1;
                        var n, i, r = [],
                            o = this._model.data,
                            s = o[t.id].children_d;
                        for (t.state && !t.state.loaded && r.push(t.id),
                            n = 0,
                            i = s.length; n < i; n++)
                            o[s[n]] && o[s[n]].state && !o[s[n]].state.loaded && r.push(s[n]);
                        r.length ? this._load_nodes(r, function () {
                            this.load_all(t, e)
                        }) : (e && e.call(this, t),
                            this.trigger("load_all", {
                                node: t
                            }))
                    },
                    _load_node: function (e, n) {
                        var i, r = this.settings.core.data;
                        return r ? t.isFunction(r) ? r.call(this, e, t.proxy(function (i) {
                            !1 === i && n.call(this, !1),
                                this["string" == typeof i ? "_append_html_data" : "_append_json_data"](e, "string" == typeof i ? t(t.parseHTML(i)).filter(function () {
                                    return 3 !== this.nodeType
                                }) : i, function (t) {
                                    n.call(this, t)
                                })
                        }, this)) : "object" == typeof r ? r.url ? (r = t.extend(!0, {}, r),
                            t.isFunction(r.url) && (r.url = r.url.call(this, e)),
                            t.isFunction(r.data) && (r.data = r.data.call(this, e)),
                            t.ajax(r).done(t.proxy(function (i, r, o) {
                                var s = o.getResponseHeader("Content-Type");
                                return s && -1 !== s.indexOf("json") || "object" == typeof i ? this._append_json_data(e, i, function (t) {
                                    n.call(this, t)
                                }) : s && -1 !== s.indexOf("html") || "string" == typeof i ? this._append_html_data(e, t(t.parseHTML(i)).filter(function () {
                                    return 3 !== this.nodeType
                                }), function (t) {
                                    n.call(this, t)
                                }) : (this._data.core.last_error = {
                                        error: "ajax",
                                        plugin: "core",
                                        id: "core_04",
                                        reason: "Could not load node",
                                        data: JSON.stringify({
                                            id: e.id,
                                            xhr: o
                                        })
                                    },
                                    this.settings.core.error.call(this, this._data.core.last_error),
                                    n.call(this, !1))
                            }, this)).fail(t.proxy(function (t) {
                                n.call(this, !1),
                                    this._data.core.last_error = {
                                        error: "ajax",
                                        plugin: "core",
                                        id: "core_04",
                                        reason: "Could not load node",
                                        data: JSON.stringify({
                                            id: e.id,
                                            xhr: t
                                        })
                                    },
                                    this.settings.core.error.call(this, this._data.core.last_error)
                            }, this))) : (i = t.isArray(r) || t.isPlainObject(r) ? JSON.parse(JSON.stringify(r)) : r,
                            "#" === e.id ? this._append_json_data(e, i, function (t) {
                                n.call(this, t)
                            }) : (this._data.core.last_error = {
                                    error: "nodata",
                                    plugin: "core",
                                    id: "core_05",
                                    reason: "Could not load node",
                                    data: JSON.stringify({
                                        id: e.id
                                    })
                                },
                                this.settings.core.error.call(this, this._data.core.last_error),
                                n.call(this, !1))) : "string" == typeof r ? "#" === e.id ? this._append_html_data(e, t(t.parseHTML(r)).filter(function () {
                            return 3 !== this.nodeType
                        }), function (t) {
                            n.call(this, t)
                        }) : (this._data.core.last_error = {
                                error: "nodata",
                                plugin: "core",
                                id: "core_06",
                                reason: "Could not load node",
                                data: JSON.stringify({
                                    id: e.id
                                })
                            },
                            this.settings.core.error.call(this, this._data.core.last_error),
                            n.call(this, !1)) : n.call(this, !1) : "#" === e.id ? this._append_html_data(e, this._data.core.original_container_html.clone(!0), function (t) {
                            n.call(this, t)
                        }) : n.call(this, !1)
                    },
                    _node_changed: function (t) {
                        (t = this.get_node(t)) && this._model.changed.push(t.id)
                    },
                    _append_html_data: function (e, n, i) {
                        (e = this.get_node(e)).children = [],
                            e.children_d = [];
                        var r, o, s, a = n.is("ul") ? n.children() : n,
                            l = e.id,
                            c = [],
                            u = [],
                            h = this._model.data,
                            d = h[l],
                            f = this._data.core.selected.length;
                        for (a.each(t.proxy(function (e, n) {
                                (r = this._parse_model_from_html(t(n), l, d.parents.concat())) && (c.push(r),
                                    u.push(r),
                                    h[r].children_d.length && (u = u.concat(h[r].children_d)))
                            }, this)),
                            d.children = c,
                            d.children_d = u,
                            o = 0,
                            s = d.parents.length; o < s; o++)
                            h[d.parents[o]].children_d = h[d.parents[o]].children_d.concat(u);
                        this.trigger("model", {
                                nodes: u,
                                parent: l
                            }),
                            "#" !== l ? (this._node_changed(l),
                                this.redraw()) : (this.get_container_ul().children(".jstree-initial-node").remove(),
                                this.redraw(!0)),
                            this._data.core.selected.length !== f && this.trigger("changed", {
                                action: "model",
                                selected: this._data.core.selected
                            }),
                            i.call(this, !0)
                    },
                    _append_json_data: function (e, n, i, r) {
                        if (null !== this.element) {
                            (e = this.get_node(e)).children = [],
                                e.children_d = [],
                                n.d && "string" == typeof (n = n.d) && (n = JSON.parse(n)),
                                t.isArray(n) || (n = [n]);
                            var o = null,
                                s = {
                                    df: this._model.default_state,
                                    dat: n,
                                    par: e.id,
                                    m: this._model.data,
                                    t_id: this._id,
                                    t_cnt: this._cnt,
                                    sel: this._data.core.selected
                                },
                                a = function (t, e) {
                                    t.data && (t = t.data);
                                    var n, i, r, o, s = t.dat,
                                        a = t.par,
                                        l = [],
                                        c = [],
                                        u = [],
                                        h = t.df,
                                        d = t.t_id,
                                        f = t.t_cnt,
                                        p = t.m,
                                        g = p[a],
                                        _ = t.sel,
                                        y = function (t, n, i) {
                                            i = i ? i.concat() : [],
                                                n && i.unshift(n);
                                            var r, o, s, a, l = t.id.toString(),
                                                c = {
                                                    id: l,
                                                    text: t.text || "",
                                                    icon: t.icon === e || t.icon,
                                                    parent: n,
                                                    parents: i,
                                                    children: t.children || [],
                                                    children_d: t.children_d || [],
                                                    data: t.data,
                                                    state: {},
                                                    li_attr: {
                                                        id: !1
                                                    },
                                                    a_attr: {
                                                        href: "#"
                                                    },
                                                    original: !1
                                                };
                                            for (r in h)
                                                h.hasOwnProperty(r) && (c.state[r] = h[r]);
                                            if (t && t.data && t.data.jstree && t.data.jstree.icon && (c.icon = t.data.jstree.icon),
                                                c.icon !== e && null !== c.icon && "" !== c.icon || (c.icon = !0),
                                                t && t.data && (c.data = t.data,
                                                    t.data.jstree))
                                                for (r in t.data.jstree)
                                                    t.data.jstree.hasOwnProperty(r) && (c.state[r] = t.data.jstree[r]);
                                            if (t && "object" == typeof t.state)
                                                for (r in t.state)
                                                    t.state.hasOwnProperty(r) && (c.state[r] = t.state[r]);
                                            if (t && "object" == typeof t.li_attr)
                                                for (r in t.li_attr)
                                                    t.li_attr.hasOwnProperty(r) && (c.li_attr[r] = t.li_attr[r]);
                                            if (c.li_attr.id || (c.li_attr.id = l),
                                                t && "object" == typeof t.a_attr)
                                                for (r in t.a_attr)
                                                    t.a_attr.hasOwnProperty(r) && (c.a_attr[r] = t.a_attr[r]);
                                            for (t && t.children && !0 === t.children && (c.state.loaded = !1,
                                                    c.children = [],
                                                    c.children_d = []),
                                                p[c.id] = c,
                                                r = 0,
                                                o = c.children.length; r < o; r++)
                                                s = y(p[c.children[r]], c.id, i),
                                                a = p[s],
                                                c.children_d.push(s),
                                                a.children_d.length && (c.children_d = c.children_d.concat(a.children_d));
                                            return delete t.data,
                                                delete t.children,
                                                p[c.id].original = t,
                                                c.state.selected && u.push(c.id),
                                                c.id
                                        },
                                        v = function (t, n, i) {
                                            i = i ? i.concat() : [],
                                                n && i.unshift(n);
                                            var r, o, s, a, l, c = !1;
                                            do {
                                                c = "j" + d + "_" + ++f
                                            } while (p[c]);
                                            l = {
                                                id: !1,
                                                text: "string" == typeof t ? t : "",
                                                icon: "object" != typeof t || t.icon === e || t.icon,
                                                parent: n,
                                                parents: i,
                                                children: [],
                                                children_d: [],
                                                data: null,
                                                state: {},
                                                li_attr: {
                                                    id: !1
                                                },
                                                a_attr: {
                                                    href: "#"
                                                },
                                                original: !1
                                            };
                                            for (r in h)
                                                h.hasOwnProperty(r) && (l.state[r] = h[r]);
                                            if (t && t.id && (l.id = t.id.toString()),
                                                t && t.text && (l.text = t.text),
                                                t && t.data && t.data.jstree && t.data.jstree.icon && (l.icon = t.data.jstree.icon),
                                                l.icon !== e && null !== l.icon && "" !== l.icon || (l.icon = !0),
                                                t && t.data && (l.data = t.data,
                                                    t.data.jstree))
                                                for (r in t.data.jstree)
                                                    t.data.jstree.hasOwnProperty(r) && (l.state[r] = t.data.jstree[r]);
                                            if (t && "object" == typeof t.state)
                                                for (r in t.state)
                                                    t.state.hasOwnProperty(r) && (l.state[r] = t.state[r]);
                                            if (t && "object" == typeof t.li_attr)
                                                for (r in t.li_attr)
                                                    t.li_attr.hasOwnProperty(r) && (l.li_attr[r] = t.li_attr[r]);
                                            if (l.li_attr.id && !l.id && (l.id = l.li_attr.id.toString()),
                                                l.id || (l.id = c),
                                                l.li_attr.id || (l.li_attr.id = l.id),
                                                t && "object" == typeof t.a_attr)
                                                for (r in t.a_attr)
                                                    t.a_attr.hasOwnProperty(r) && (l.a_attr[r] = t.a_attr[r]);
                                            if (t && t.children && t.children.length) {
                                                for (r = 0,
                                                    o = t.children.length; r < o; r++)
                                                    s = v(t.children[r], l.id, i),
                                                    a = p[s],
                                                    l.children.push(s),
                                                    a.children_d.length && (l.children_d = l.children_d.concat(a.children_d));
                                                l.children_d = l.children_d.concat(l.children)
                                            }
                                            return t && t.children && !0 === t.children && (l.state.loaded = !1,
                                                    l.children = [],
                                                    l.children_d = []),
                                                delete t.data,
                                                delete t.children,
                                                l.original = t,
                                                p[l.id] = l,
                                                l.state.selected && u.push(l.id),
                                                l.id
                                        };
                                    if (s.length && s[0].id !== e && s[0].parent !== e) {
                                        for (i = 0,
                                            r = s.length; i < r; i++)
                                            s[i].children || (s[i].children = []),
                                            p[s[i].id.toString()] = s[i];
                                        for (i = 0,
                                            r = s.length; i < r; i++)
                                            p[s[i].parent.toString()].children.push(s[i].id.toString()),
                                            g.children_d.push(s[i].id.toString());
                                        for (i = 0,
                                            r = g.children.length; i < r; i++)
                                            n = y(p[g.children[i]], a, g.parents.concat()),
                                            c.push(n),
                                            p[n].children_d.length && (c = c.concat(p[n].children_d));
                                        for (i = 0,
                                            r = g.parents.length; i < r; i++)
                                            p[g.parents[i]].children_d = p[g.parents[i]].children_d.concat(c);
                                        o = {
                                            cnt: f,
                                            mod: p,
                                            sel: _,
                                            par: a,
                                            dpc: c,
                                            add: u
                                        }
                                    } else {
                                        for (i = 0,
                                            r = s.length; i < r; i++)
                                            (n = v(s[i], a, g.parents.concat())) && (l.push(n),
                                                c.push(n),
                                                p[n].children_d.length && (c = c.concat(p[n].children_d)));
                                        for (g.children = l,
                                            g.children_d = c,
                                            i = 0,
                                            r = g.parents.length; i < r; i++)
                                            p[g.parents[i]].children_d = p[g.parents[i]].children_d.concat(c);
                                        o = {
                                            cnt: f,
                                            mod: p,
                                            sel: _,
                                            par: a,
                                            dpc: c,
                                            add: u
                                        }
                                    }
                                    if ("undefined" != typeof window && void 0 !== window.document)
                                        return o;
                                    postMessage(o)
                                },
                                l = function (e, n) {
                                    if (null !== this.element) {
                                        if (this._cnt = e.cnt,
                                            this._model.data = e.mod,
                                            n) {
                                            var r, o, s = e.add,
                                                a = e.sel,
                                                l = this._data.core.selected.slice(),
                                                c = this._model.data;
                                            if (a.length !== l.length || t.vakata.array_unique(a.concat(l)).length !== a.length) {
                                                for (r = 0,
                                                    o = a.length; r < o; r++)
                                                    -
                                                    1 === t.inArray(a[r], s) && -1 === t.inArray(a[r], l) && (c[a[r]].state.selected = !1);
                                                for (r = 0,
                                                    o = l.length; r < o; r++)
                                                    -
                                                    1 === t.inArray(l[r], a) && (c[l[r]].state.selected = !0)
                                            }
                                        }
                                        e.add.length && (this._data.core.selected = this._data.core.selected.concat(e.add)),
                                            this.trigger("model", {
                                                nodes: e.dpc,
                                                parent: e.par
                                            }),
                                            "#" !== e.par ? (this._node_changed(e.par),
                                                this.redraw()) : this.redraw(!0),
                                            e.add.length && this.trigger("changed", {
                                                action: "model",
                                                selected: this._data.core.selected
                                            }),
                                            i.call(this, !0)
                                    }
                                };
                            if (this.settings.core.worker && window.Blob && window.URL && window.Worker)
                                try {
                                    null === this._wrk && (this._wrk = window.URL.createObjectURL(new window.Blob(["self.onmessage = " + a.toString()], {
                                        type: "text/javascript"
                                    }))), !this._data.core.working || r ? (this._data.core.working = !0,
                                        (o = new window.Worker(this._wrk)).onmessage = t.proxy(function (t) {
                                            l.call(this, t.data, !0);
                                            try {
                                                o.terminate(),
                                                    o = null
                                            } catch (t) {}
                                            this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1
                                        }, this),
                                        s.par ? o.postMessage(s) : this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1) : this._data.core.worker_queue.push([e, n, i, !0])
                                } catch (t) {
                                    l.call(this, a(s), !1),
                                        this._data.core.worker_queue.length ? this._append_json_data.apply(this, this._data.core.worker_queue.shift()) : this._data.core.working = !1
                                }
                            else
                                l.call(this, a(s), !1)
                        }
                    },
                    _parse_model_from_html: function (n, i, r) {
                        r = r ? [].concat(r) : [],
                            i && r.unshift(i);
                        var o, s, a, l, c, u = this._model.data,
                            h = {
                                id: !1,
                                text: !1,
                                icon: !0,
                                parent: i,
                                parents: r,
                                children: [],
                                children_d: [],
                                data: null,
                                state: {},
                                li_attr: {
                                    id: !1
                                },
                                a_attr: {
                                    href: "#"
                                },
                                original: !1
                            };
                        for (a in this._model.default_state)
                            this._model.default_state.hasOwnProperty(a) && (h.state[a] = this._model.default_state[a]);
                        if (l = t.vakata.attributes(n, !0),
                            t.each(l, function (e, n) {
                                if (!(n = t.trim(n)).length)
                                    return !0;
                                h.li_attr[e] = n,
                                    "id" === e && (h.id = n.toString())
                            }),
                            (l = n.children("a").first()).length && (l = t.vakata.attributes(l, !0),
                                t.each(l, function (e, n) {
                                    (n = t.trim(n)).length && (h.a_attr[e] = n)
                                })),
                            (l = n.children("a").first().length ? n.children("a").first().clone() : n.clone()).children("ins, i, ul").remove(),
                            l = l.html(),
                            l = t("<div />").html(l),
                            h.text = this.settings.core.force_text ? l.text() : l.html(),
                            l = n.data(),
                            h.data = l ? t.extend(!0, {}, l) : null,
                            h.state.opened = n.hasClass("jstree-open"),
                            h.state.selected = n.children("a").hasClass("jstree-clicked"),
                            h.state.disabled = n.children("a").hasClass("jstree-disabled"),
                            h.data && h.data.jstree)
                            for (a in h.data.jstree)
                                h.data.jstree.hasOwnProperty(a) && (h.state[a] = h.data.jstree[a]);
                        (l = n.children("a").children(".jstree-themeicon")).length && (h.icon = !l.hasClass("jstree-themeicon-hidden") && l.attr("rel")),
                            h.state.icon !== e && (h.icon = h.state.icon),
                            h.icon !== e && null !== h.icon && "" !== h.icon || (h.icon = !0),
                            l = n.children("ul").children("li");
                        do {
                            c = "j" + this._id + "_" + ++this._cnt
                        } while (u[c]);
                        return h.id = h.li_attr.id ? h.li_attr.id.toString() : c,
                            l.length ? (l.each(t.proxy(function (e, n) {
                                    o = this._parse_model_from_html(t(n), h.id, r),
                                        s = this._model.data[o],
                                        h.children.push(o),
                                        s.children_d.length && (h.children_d = h.children_d.concat(s.children_d))
                                }, this)),
                                h.children_d = h.children_d.concat(h.children)) : n.hasClass("jstree-closed") && (h.state.loaded = !1),
                            h.li_attr.class && (h.li_attr.class = h.li_attr.class.replace("jstree-closed", "").replace("jstree-open", "")),
                            h.a_attr.class && (h.a_attr.class = h.a_attr.class.replace("jstree-clicked", "").replace("jstree-disabled", "")),
                            u[h.id] = h,
                            h.state.selected && this._data.core.selected.push(h.id),
                            h.id
                    },
                    _parse_model_from_flat_json: function (t, n, i) {
                        i = i ? i.concat() : [],
                            n && i.unshift(n);
                        var r, o, s, a, l = t.id.toString(),
                            c = this._model.data,
                            u = this._model.default_state,
                            h = {
                                id: l,
                                text: t.text || "",
                                icon: t.icon === e || t.icon,
                                parent: n,
                                parents: i,
                                children: t.children || [],
                                children_d: t.children_d || [],
                                data: t.data,
                                state: {},
                                li_attr: {
                                    id: !1
                                },
                                a_attr: {
                                    href: "#"
                                },
                                original: !1
                            };
                        for (r in u)
                            u.hasOwnProperty(r) && (h.state[r] = u[r]);
                        if (t && t.data && t.data.jstree && t.data.jstree.icon && (h.icon = t.data.jstree.icon),
                            h.icon !== e && null !== h.icon && "" !== h.icon || (h.icon = !0),
                            t && t.data && (h.data = t.data,
                                t.data.jstree))
                            for (r in t.data.jstree)
                                t.data.jstree.hasOwnProperty(r) && (h.state[r] = t.data.jstree[r]);
                        if (t && "object" == typeof t.state)
                            for (r in t.state)
                                t.state.hasOwnProperty(r) && (h.state[r] = t.state[r]);
                        if (t && "object" == typeof t.li_attr)
                            for (r in t.li_attr)
                                t.li_attr.hasOwnProperty(r) && (h.li_attr[r] = t.li_attr[r]);
                        if (h.li_attr.id || (h.li_attr.id = l),
                            t && "object" == typeof t.a_attr)
                            for (r in t.a_attr)
                                t.a_attr.hasOwnProperty(r) && (h.a_attr[r] = t.a_attr[r]);
                        for (t && t.children && !0 === t.children && (h.state.loaded = !1,
                                h.children = [],
                                h.children_d = []),
                            c[h.id] = h,
                            r = 0,
                            o = h.children.length; r < o; r++)
                            a = c[s = this._parse_model_from_flat_json(c[h.children[r]], h.id, i)],
                            h.children_d.push(s),
                            a.children_d.length && (h.children_d = h.children_d.concat(a.children_d));
                        return delete t.data,
                            delete t.children,
                            c[h.id].original = t,
                            h.state.selected && this._data.core.selected.push(h.id),
                            h.id
                    },
                    _parse_model_from_json: function (t, n, i) {
                        i = i ? i.concat() : [],
                            n && i.unshift(n);
                        var r, o, s, a, l, c = !1,
                            u = this._model.data,
                            h = this._model.default_state;
                        do {
                            c = "j" + this._id + "_" + ++this._cnt
                        } while (u[c]);
                        l = {
                            id: !1,
                            text: "string" == typeof t ? t : "",
                            icon: "object" != typeof t || t.icon === e || t.icon,
                            parent: n,
                            parents: i,
                            children: [],
                            children_d: [],
                            data: null,
                            state: {},
                            li_attr: {
                                id: !1
                            },
                            a_attr: {
                                href: "#"
                            },
                            original: !1
                        };
                        for (r in h)
                            h.hasOwnProperty(r) && (l.state[r] = h[r]);
                        if (t && t.id && (l.id = t.id.toString()),
                            t && t.text && (l.text = t.text),
                            t && t.data && t.data.jstree && t.data.jstree.icon && (l.icon = t.data.jstree.icon),
                            l.icon !== e && null !== l.icon && "" !== l.icon || (l.icon = !0),
                            t && t.data && (l.data = t.data,
                                t.data.jstree))
                            for (r in t.data.jstree)
                                t.data.jstree.hasOwnProperty(r) && (l.state[r] = t.data.jstree[r]);
                        if (t && "object" == typeof t.state)
                            for (r in t.state)
                                t.state.hasOwnProperty(r) && (l.state[r] = t.state[r]);
                        if (t && "object" == typeof t.li_attr)
                            for (r in t.li_attr)
                                t.li_attr.hasOwnProperty(r) && (l.li_attr[r] = t.li_attr[r]);
                        if (l.li_attr.id && !l.id && (l.id = l.li_attr.id.toString()),
                            l.id || (l.id = c),
                            l.li_attr.id || (l.li_attr.id = l.id),
                            t && "object" == typeof t.a_attr)
                            for (r in t.a_attr)
                                t.a_attr.hasOwnProperty(r) && (l.a_attr[r] = t.a_attr[r]);
                        if (t && t.children && t.children.length) {
                            for (r = 0,
                                o = t.children.length; r < o; r++)
                                a = u[s = this._parse_model_from_json(t.children[r], l.id, i)],
                                l.children.push(s),
                                a.children_d.length && (l.children_d = l.children_d.concat(a.children_d));
                            l.children_d = l.children_d.concat(l.children)
                        }
                        return t && t.children && !0 === t.children && (l.state.loaded = !1,
                                l.children = [],
                                l.children_d = []),
                            delete t.data,
                            delete t.children,
                            l.original = t,
                            u[l.id] = l,
                            l.state.selected && this._data.core.selected.push(l.id),
                            l.id
                    },
                    _redraw: function () {
                        var t, e, n, i = this._model.force_full_redraw ? this._model.data["#"].children.concat([]) : this._model.changed.concat([]),
                            r = u.createElement("UL"),
                            o = this._data.core.focused;
                        for (e = 0,
                            n = i.length; e < n; e++)
                            (t = this.redraw_node(i[e], !0, this._model.force_full_redraw)) && this._model.force_full_redraw && r.appendChild(t);
                        this._model.force_full_redraw && (r.className = this.get_container_ul()[0].className,
                                r.setAttribute("role", "group"),
                                this.element.empty().append(r)),
                            null !== o && ((t = this.get_node(o, !0)) && t.length && t.children(".jstree-anchor")[0] !== u.activeElement ? t.children(".jstree-anchor").focus() : this._data.core.focused = null),
                            this._model.force_full_redraw = !1,
                            this._model.changed = [],
                            this.trigger("redraw", {
                                nodes: i
                            })
                    },
                    redraw: function (t) {
                        t && (this._model.force_full_redraw = !0),
                            this._redraw()
                    },
                    draw_children: function (t) {
                        var e = this.get_node(t),
                            n = !1,
                            i = !1,
                            r = !1,
                            o = u;
                        if (!e)
                            return !1;
                        if ("#" === e.id)
                            return this.redraw(!0);
                        if (!(t = this.get_node(t, !0)) || !t.length)
                            return !1;
                        if (t.children(".jstree-children").remove(),
                            t = t[0],
                            e.children.length && e.state.loaded) {
                            for ((r = o.createElement("UL")).setAttribute("role", "group"),
                                r.className = "jstree-children",
                                n = 0,
                                i = e.children.length; n < i; n++)
                                r.appendChild(this.redraw_node(e.children[n], !0, !0));
                            t.appendChild(r)
                        }
                    },
                    redraw_node: function (e, n, i, r) {
                        var o = this.get_node(e),
                            s = !1,
                            a = !1,
                            l = !1,
                            c = !1,
                            d = !1,
                            f = !1,
                            p = "",
                            g = u,
                            _ = this._model.data,
                            y = !1,
                            v = null,
                            m = 0,
                            b = 0;
                        if (!o)
                            return !1;
                        if ("#" === o.id)
                            return this.redraw(!0);
                        if (n = n || 0 === o.children.length,
                            e = u.querySelector ? this.element[0].querySelector("#" + (-1 !== "0123456789".indexOf(o.id[0]) ? "\\3" + o.id[0] + " " + o.id.substr(1).replace(t.jstree.idregex, "\\$&") : o.id.replace(t.jstree.idregex, "\\$&"))) : u.getElementById(o.id))
                            e = t(e),
                            i || ((s = e.parent().parent()[0]) === this.element[0] && (s = null),
                                a = e.index()),
                            n || !o.children.length || e.children(".jstree-children").length || (n = !0),
                            n || (l = e.children(".jstree-children")[0]),
                            y = e.children(".jstree-anchor")[0] === u.activeElement,
                            e.remove();
                        else if (n = !0, !i) {
                            if (!(null === (s = "#" !== o.parent ? t("#" + o.parent.replace(t.jstree.idregex, "\\$&"), this.element)[0] : null) || s && _[o.parent].state.opened))
                                return !1;
                            a = t.inArray(o.id, null === s ? _["#"].children : _[o.parent].children)
                        }
                        e = h.cloneNode(!0),
                            p = "jstree-node ";
                        for (c in o.li_attr)
                            if (o.li_attr.hasOwnProperty(c)) {
                                if ("id" === c)
                                    continue;
                                "class" !== c ? e.setAttribute(c, o.li_attr[c]) : p += o.li_attr[c]
                            }
                        o.a_attr.id || (o.a_attr.id = o.id + "_anchor"),
                            e.setAttribute("aria-selected", !!o.state.selected),
                            e.setAttribute("aria-level", o.parents.length),
                            e.setAttribute("aria-labelledby", o.a_attr.id),
                            o.state.disabled && e.setAttribute("aria-disabled", !0),
                            o.state.loaded && !o.children.length ? p += " jstree-leaf" : (p += o.state.opened && o.state.loaded ? " jstree-open" : " jstree-closed",
                                e.setAttribute("aria-expanded", o.state.opened && o.state.loaded)),
                            null !== o.parent && _[o.parent].children[_[o.parent].children.length - 1] === o.id && (p += " jstree-last"),
                            e.id = o.id,
                            e.className = p,
                            p = (o.state.selected ? " jstree-clicked" : "") + (o.state.disabled ? " jstree-disabled" : "");
                        for (d in o.a_attr)
                            if (o.a_attr.hasOwnProperty(d)) {
                                if ("href" === d && "#" === o.a_attr[d])
                                    continue;
                                "class" !== d ? e.childNodes[1].setAttribute(d, o.a_attr[d]) : p += " " + o.a_attr[d]
                            }
                        if (p.length && (e.childNodes[1].className = "jstree-anchor " + p),
                            (o.icon && !0 !== o.icon || !1 === o.icon) && (!1 === o.icon ? e.childNodes[1].childNodes[0].className += " jstree-themeicon-hidden" : -1 === o.icon.indexOf("/") && -1 === o.icon.indexOf(".") ? e.childNodes[1].childNodes[0].className += " " + o.icon + " jstree-themeicon-custom" : (e.childNodes[1].childNodes[0].style.backgroundImage = "url(" + o.icon + ")",
                                e.childNodes[1].childNodes[0].style.backgroundPosition = "center center",
                                e.childNodes[1].childNodes[0].style.backgroundSize = "auto",
                                e.childNodes[1].childNodes[0].className += " jstree-themeicon-custom")),
                            this.settings.core.force_text ? e.childNodes[1].appendChild(g.createTextNode(o.text)) : e.childNodes[1].innerHTML += o.text,
                            n && o.children.length && (o.state.opened || r) && o.state.loaded) {
                            for ((f = g.createElement("UL")).setAttribute("role", "group"),
                                f.className = "jstree-children",
                                c = 0,
                                d = o.children.length; c < d; c++)
                                f.appendChild(this.redraw_node(o.children[c], n, !0));
                            e.appendChild(f)
                        }
                        if (l && e.appendChild(l), !i) {
                            for (s || (s = this.element[0]),
                                c = 0,
                                d = s.childNodes.length; c < d; c++)
                                if (s.childNodes[c] && s.childNodes[c].className && -1 !== s.childNodes[c].className.indexOf("jstree-children")) {
                                    v = s.childNodes[c];
                                    break
                                }
                            v || ((v = g.createElement("UL")).setAttribute("role", "group"),
                                    v.className = "jstree-children",
                                    s.appendChild(v)),
                                a < (s = v).childNodes.length ? s.insertBefore(e, s.childNodes[a]) : s.appendChild(e),
                                y && (m = this.element[0].scrollTop,
                                    b = this.element[0].scrollLeft,
                                    e.childNodes[1].focus(),
                                    this.element[0].scrollTop = m,
                                    this.element[0].scrollLeft = b)
                        }
                        return o.state.opened && !o.state.loaded && (o.state.opened = !1,
                                setTimeout(t.proxy(function () {
                                    this.open_node(o.id, !1, 0)
                                }, this), 0)),
                            e
                    },
                    open_node: function (n, i, r) {
                        var o, s, a, l;
                        if (t.isArray(n)) {
                            for (o = 0,
                                s = (n = n.slice()).length; o < s; o++)
                                this.open_node(n[o], i, r);
                            return !0
                        }
                        if (!(n = this.get_node(n)) || "#" === n.id)
                            return !1;
                        if (r = r === e ? this.settings.core.animation : r, !this.is_closed(n))
                            return i && i.call(this, n, !1), !1;
                        if (this.is_loaded(n))
                            a = this.get_node(n, !0),
                            l = this,
                            a.length && (r && a.children(".jstree-children").length && a.children(".jstree-children").stop(!0, !0),
                                n.children.length && !this._firstChild(a.children(".jstree-children")[0]) && this.draw_children(n),
                                r ? (this.trigger("before_open", {
                                        node: n
                                    }),
                                    a.children(".jstree-children").css("display", "none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded", !0).children(".jstree-children").stop(!0, !0).slideDown(r, function () {
                                        this.style.display = "",
                                            l.trigger("after_open", {
                                                node: n
                                            })
                                    })) : (this.trigger("before_open", {
                                        node: n
                                    }),
                                    a[0].className = a[0].className.replace("jstree-closed", "jstree-open"),
                                    a[0].setAttribute("aria-expanded", !0))),
                            n.state.opened = !0,
                            i && i.call(this, n, !0),
                            a.length || this.trigger("before_open", {
                                node: n
                            }),
                            this.trigger("open_node", {
                                node: n
                            }),
                            r && a.length || this.trigger("after_open", {
                                node: n
                            });
                        else {
                            if (this.is_loading(n))
                                return setTimeout(t.proxy(function () {
                                    this.open_node(n, i, r)
                                }, this), 500);
                            this.load_node(n, function (t, e) {
                                return e ? this.open_node(t, i, r) : !!i && i.call(this, t, !1)
                            })
                        }
                    },
                    _open_to: function (e) {
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        var n, i, r = e.parents;
                        for (n = 0,
                            i = r.length; n < i; n += 1)
                            "#" !== n && this.open_node(r[n], !1, 0);
                        return t("#" + e.id.replace(t.jstree.idregex, "\\$&"), this.element)
                    },
                    close_node: function (n, i) {
                        var r, o, s, a;
                        if (t.isArray(n)) {
                            for (r = 0,
                                o = (n = n.slice()).length; r < o; r++)
                                this.close_node(n[r], i);
                            return !0
                        }
                        return !(!(n = this.get_node(n)) || "#" === n.id) && (!this.is_closed(n) && (i = i === e ? this.settings.core.animation : i,
                            s = this,
                            (a = this.get_node(n, !0)).length && (i ? a.children(".jstree-children").attr("style", "display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded", !1).children(".jstree-children").stop(!0, !0).slideUp(i, function () {
                                this.style.display = "",
                                    a.children(".jstree-children").remove(),
                                    s.trigger("after_close", {
                                        node: n
                                    })
                            }) : (a[0].className = a[0].className.replace("jstree-open", "jstree-closed"),
                                a.attr("aria-expanded", !1).children(".jstree-children").remove())),
                            n.state.opened = !1,
                            this.trigger("close_node", {
                                node: n
                            }),
                            void(i && a.length || this.trigger("after_close", {
                                node: n
                            }))))
                    },
                    toggle_node: function (e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.toggle_node(e[n]);
                            return !0
                        }
                        return this.is_closed(e) ? this.open_node(e) : this.is_open(e) ? this.close_node(e) : void 0
                    },
                    open_all: function (t, e, n) {
                        if (t || (t = "#"), !(t = this.get_node(t)))
                            return !1;
                        var i, r, o, s = "#" === t.id ? this.get_container_ul() : this.get_node(t, !0);
                        if (!s.length) {
                            for (i = 0,
                                r = t.children_d.length; i < r; i++)
                                this.is_closed(this._model.data[t.children_d[i]]) && (this._model.data[t.children_d[i]].state.opened = !0);
                            return this.trigger("open_all", {
                                node: t
                            })
                        }
                        n = n || s,
                            o = this,
                            (s = this.is_closed(t) ? s.find(".jstree-closed").addBack() : s.find(".jstree-closed")).each(function () {
                                o.open_node(this, function (t, i) {
                                    i && this.is_parent(t) && this.open_all(t, e, n)
                                }, e || 0)
                            }),
                            0 === n.find(".jstree-closed").length && this.trigger("open_all", {
                                node: this.get_node(n)
                            })
                    },
                    close_all: function (e, n) {
                        if (e || (e = "#"), !(e = this.get_node(e)))
                            return !1;
                        var i, r, o = "#" === e.id ? this.get_container_ul() : this.get_node(e, !0),
                            s = this;
                        if (!o.length) {
                            for (i = 0,
                                r = e.children_d.length; i < r; i++)
                                this._model.data[e.children_d[i]].state.opened = !1;
                            return this.trigger("close_all", {
                                node: e
                            })
                        }
                        o = this.is_open(e) ? o.find(".jstree-open").addBack() : o.find(".jstree-open"),
                            t(o.get().reverse()).each(function () {
                                s.close_node(this, n || 0)
                            }),
                            this.trigger("close_all", {
                                node: e
                            })
                    },
                    is_disabled: function (t) {
                        return (t = this.get_node(t)) && t.state && t.state.disabled
                    },
                    enable_node: function (e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.enable_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        e.state.disabled = !1,
                            this.get_node(e, !0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled", !1),
                            this.trigger("enable_node", {
                                node: e
                            })
                    },
                    disable_node: function (e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.disable_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        e.state.disabled = !0,
                            this.get_node(e, !0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled", !0),
                            this.trigger("disable_node", {
                                node: e
                            })
                    },
                    activate_node: function (t, n) {
                        if (this.is_disabled(t))
                            return !1;
                        if (this._data.core.last_clicked = this._data.core.last_clicked && this._data.core.last_clicked.id !== e ? this.get_node(this._data.core.last_clicked.id) : null,
                            this._data.core.last_clicked && !this._data.core.last_clicked.state.selected && (this._data.core.last_clicked = null), !this._data.core.last_clicked && this._data.core.selected.length && (this._data.core.last_clicked = this.get_node(this._data.core.selected[this._data.core.selected.length - 1])),
                            this.settings.core.multiple && (n.metaKey || n.ctrlKey || n.shiftKey) && (!n.shiftKey || this._data.core.last_clicked && this.get_parent(t) && this.get_parent(t) === this._data.core.last_clicked.parent))
                            if (n.shiftKey) {
                                var i, r, o = this.get_node(t).id,
                                    s = this._data.core.last_clicked.id,
                                    a = this.get_node(this._data.core.last_clicked.parent).children,
                                    l = !1;
                                for (i = 0,
                                    r = a.length; i < r; i += 1)
                                    a[i] === o && (l = !l),
                                    a[i] === s && (l = !l),
                                    this.is_disabled(a[i]) || !l && a[i] !== o && a[i] !== s ? this.deselect_node(a[i], !0, n) : this.select_node(a[i], !0, !1, n);
                                this.trigger("changed", {
                                    action: "select_node",
                                    node: this.get_node(t),
                                    selected: this._data.core.selected,
                                    event: n
                                })
                            } else
                                this.is_selected(t) ? this.deselect_node(t, !1, n) : this.select_node(t, !1, !1, n);
                        else
                            !this.settings.core.multiple && (n.metaKey || n.ctrlKey || n.shiftKey) && this.is_selected(t) ? this.deselect_node(t, !1, n) : (this.deselect_all(!0),
                                this.select_node(t, !1, !1, n),
                                this._data.core.last_clicked = this.get_node(t));
                        this.trigger("activate_node", {
                            node: this.get_node(t)
                        })
                    },
                    hover_node: function (t) {
                        if (!(t = this.get_node(t, !0)) || !t.length || t.children(".jstree-hovered").length)
                            return !1;
                        var e = this.element.find(".jstree-hovered"),
                            n = this.element;
                        e && e.length && this.dehover_node(e),
                            t.children(".jstree-anchor").addClass("jstree-hovered"),
                            this.trigger("hover_node", {
                                node: this.get_node(t)
                            }),
                            setTimeout(function () {
                                n.attr("aria-activedescendant", t[0].id)
                            }, 0)
                    },
                    dehover_node: function (t) {
                        if (!(t = this.get_node(t, !0)) || !t.length || !t.children(".jstree-hovered").length)
                            return !1;
                        t.children(".jstree-anchor").removeClass("jstree-hovered"),
                            this.trigger("dehover_node", {
                                node: this.get_node(t)
                            })
                    },
                    select_node: function (e, n, i, r) {
                        var o, s, a;
                        if (t.isArray(e)) {
                            for (s = 0,
                                a = (e = e.slice()).length; s < a; s++)
                                this.select_node(e[s], n, i, r);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        o = this.get_node(e, !0),
                            e.state.selected || (e.state.selected = !0,
                                this._data.core.selected.push(e.id),
                                i || (o = this._open_to(e)),
                                o && o.length && o.attr("aria-selected", !0).children(".jstree-anchor").addClass("jstree-clicked"),
                                this.trigger("select_node", {
                                    node: e,
                                    selected: this._data.core.selected,
                                    event: r
                                }),
                                n || this.trigger("changed", {
                                    action: "select_node",
                                    node: e,
                                    selected: this._data.core.selected,
                                    event: r
                                }))
                    },
                    deselect_node: function (e, n, i) {
                        var r, o, s;
                        if (t.isArray(e)) {
                            for (r = 0,
                                o = (e = e.slice()).length; r < o; r++)
                                this.deselect_node(e[r], n, i);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        s = this.get_node(e, !0),
                            e.state.selected && (e.state.selected = !1,
                                this._data.core.selected = t.vakata.array_remove_item(this._data.core.selected, e.id),
                                s.length && s.attr("aria-selected", !1).children(".jstree-anchor").removeClass("jstree-clicked"),
                                this.trigger("deselect_node", {
                                    node: e,
                                    selected: this._data.core.selected,
                                    event: i
                                }),
                                n || this.trigger("changed", {
                                    action: "deselect_node",
                                    node: e,
                                    selected: this._data.core.selected,
                                    event: i
                                }))
                    },
                    select_all: function (t) {
                        var e, n, i = this._data.core.selected.concat([]);
                        for (this._data.core.selected = this._model.data["#"].children_d.concat(),
                            e = 0,
                            n = this._data.core.selected.length; e < n; e++)
                            this._model.data[this._data.core.selected[e]] && (this._model.data[this._data.core.selected[e]].state.selected = !0);
                        this.redraw(!0),
                            this.trigger("select_all", {
                                selected: this._data.core.selected
                            }),
                            t || this.trigger("changed", {
                                action: "select_all",
                                selected: this._data.core.selected,
                                old_selection: i
                            })
                    },
                    deselect_all: function (t) {
                        var e, n, i = this._data.core.selected.concat([]);
                        for (e = 0,
                            n = this._data.core.selected.length; e < n; e++)
                            this._model.data[this._data.core.selected[e]] && (this._model.data[this._data.core.selected[e]].state.selected = !1);
                        this._data.core.selected = [],
                            this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected", !1),
                            this.trigger("deselect_all", {
                                selected: this._data.core.selected,
                                node: i
                            }),
                            t || this.trigger("changed", {
                                action: "deselect_all",
                                selected: this._data.core.selected,
                                old_selection: i
                            })
                    },
                    is_selected: function (t) {
                        return !(!(t = this.get_node(t)) || "#" === t.id) && t.state.selected
                    },
                    get_selected: function (e) {
                        return e ? t.map(this._data.core.selected, t.proxy(function (t) {
                            return this.get_node(t)
                        }, this)) : this._data.core.selected.slice()
                    },
                    get_top_selected: function (e) {
                        var n, i, r, o, s = this.get_selected(!0),
                            a = {};
                        for (n = 0,
                            i = s.length; n < i; n++)
                            a[s[n].id] = s[n];
                        for (n = 0,
                            i = s.length; n < i; n++)
                            for (r = 0,
                                o = s[n].children_d.length; r < o; r++)
                                a[s[n].children_d[r]] && delete a[s[n].children_d[r]];
                        s = [];
                        for (n in a)
                            a.hasOwnProperty(n) && s.push(n);
                        return e ? t.map(s, t.proxy(function (t) {
                            return this.get_node(t)
                        }, this)) : s
                    },
                    get_bottom_selected: function (e) {
                        var n, i, r = this.get_selected(!0),
                            o = [];
                        for (n = 0,
                            i = r.length; n < i; n++)
                            r[n].children.length || o.push(r[n].id);
                        return e ? t.map(o, t.proxy(function (t) {
                            return this.get_node(t)
                        }, this)) : o
                    },
                    get_state: function () {
                        var t, e = {
                            core: {
                                open: [],
                                scroll: {
                                    left: this.element.scrollLeft(),
                                    top: this.element.scrollTop()
                                },
                                selected: []
                            }
                        };
                        for (t in this._model.data)
                            this._model.data.hasOwnProperty(t) && "#" !== t && (this._model.data[t].state.opened && e.core.open.push(t),
                                this._model.data[t].state.selected && e.core.selected.push(t));
                        return e
                    },
                    set_state: function (n, i) {
                        if (n) {
                            if (n.core) {
                                var r, o;
                                if (n.core.open)
                                    return t.isArray(n.core.open) && n.core.open.length ? this._load_nodes(n.core.open, function (t) {
                                        this.open_node(t, !1, 0),
                                            delete n.core.open,
                                            this.set_state(n, i)
                                    }, !0) : (delete n.core.open,
                                        this.set_state(n, i)), !1;
                                if (n.core.scroll)
                                    return n.core.scroll && n.core.scroll.left !== e && this.element.scrollLeft(n.core.scroll.left),
                                        n.core.scroll && n.core.scroll.top !== e && this.element.scrollTop(n.core.scroll.top),
                                        delete n.core.scroll,
                                        this.set_state(n, i), !1;
                                if (n.core.selected)
                                    return r = this,
                                        this.deselect_all(),
                                        t.each(n.core.selected, function (t, e) {
                                            r.select_node(e, !1, !0)
                                        }),
                                        delete n.core.selected,
                                        this.set_state(n, i), !1;
                                for (o in n)
                                    n.hasOwnProperty(o) && "core" !== o && -1 === t.inArray(o, this.settings.plugins) && delete n[o];
                                if (t.isEmptyObject(n.core))
                                    return delete n.core,
                                        this.set_state(n, i), !1
                            }
                            return !t.isEmptyObject(n) || (n = null,
                                i && i.call(this),
                                this.trigger("set_state"), !1)
                        }
                        return !1
                    },
                    refresh: function (e, n) {
                        this._data.core.state = !0 === n ? {} : this.get_state(),
                            n && t.isFunction(n) && (this._data.core.state = n.call(this, this._data.core.state)),
                            this._cnt = 0,
                            this._model.data = {
                                "#": {
                                    id: "#",
                                    parent: null,
                                    parents: [],
                                    children: [],
                                    children_d: [],
                                    state: {
                                        loaded: !1
                                    }
                                }
                            };
                        var i = this.get_container_ul()[0].className;
                        e || (this.element.html("<ul class='" + i + "' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j" + this._id + "_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>" + this.get_string("Loading ...") + "</a></li></ul>"),
                                this.element.attr("aria-activedescendant", "j" + this._id + "_loading")),
                            this.load_node("#", function (e, n) {
                                n && (this.get_container_ul()[0].className = i,
                                        this._firstChild(this.get_container_ul()[0]) && this.element.attr("aria-activedescendant", this._firstChild(this.get_container_ul()[0]).id),
                                        this.set_state(t.extend(!0, {}, this._data.core.state), function () {
                                            this.trigger("refresh")
                                        })),
                                    this._data.core.state = null
                            })
                    },
                    refresh_node: function (e) {
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        var n = [],
                            i = [];
                        this._data.core.selected.concat([]);
                        i.push(e.id), !0 === e.state.opened && n.push(e.id),
                            this.get_node(e, !0).find(".jstree-open").each(function () {
                                n.push(this.id)
                            }),
                            this._load_nodes(i, t.proxy(function (t) {
                                this.open_node(n, !1, 0),
                                    this.select_node(this._data.core.selected),
                                    this.trigger("refresh_node", {
                                        node: e,
                                        nodes: t
                                    })
                            }, this))
                    },
                    set_id: function (e, n) {
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        var i, r, o = this._model.data;
                        for (n = n.toString(),
                            o[e.parent].children[t.inArray(e.id, o[e.parent].children)] = n,
                            i = 0,
                            r = e.parents.length; i < r; i++)
                            o[e.parents[i]].children_d[t.inArray(e.id, o[e.parents[i]].children_d)] = n;
                        for (i = 0,
                            r = e.children.length; i < r; i++)
                            o[e.children[i]].parent = n;
                        for (i = 0,
                            r = e.children_d.length; i < r; i++)
                            o[e.children_d[i]].parents[t.inArray(e.id, o[e.children_d[i]].parents)] = n;
                        return -1 !== (i = t.inArray(e.id, this._data.core.selected)) && (this._data.core.selected[i] = n),
                            (i = this.get_node(e.id, !0)) && (i.attr("id", n).children(".jstree-anchor").attr("id", n + "_anchor").end().attr("aria-labelledby", n + "_anchor"),
                                this.element.attr("aria-activedescendant") === e.id && this.element.attr("aria-activedescendant", n)),
                            delete o[e.id],
                            e.id = n,
                            e.li_attr.id = n,
                            o[n] = e, !0
                    },
                    get_text: function (t) {
                        return !(!(t = this.get_node(t)) || "#" === t.id) && t.text
                    },
                    set_text: function (e, n) {
                        var i, r;
                        if (t.isArray(e)) {
                            for (i = 0,
                                r = (e = e.slice()).length; i < r; i++)
                                this.set_text(e[i], n);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || "#" === e.id) && (e.text = n,
                            this.get_node(e, !0).length && this.redraw_node(e.id),
                            this.trigger("set_text", {
                                obj: e,
                                text: n
                            }), !0)
                    },
                    get_json: function (e, n, i) {
                        if (!(e = this.get_node(e || "#")))
                            return !1;
                        n && n.flat && !i && (i = []);
                        var r, o, s = {
                            id: e.id,
                            text: e.text,
                            icon: this.get_icon(e),
                            li_attr: t.extend(!0, {}, e.li_attr),
                            a_attr: t.extend(!0, {}, e.a_attr),
                            state: {},
                            data: (!n || !n.no_data) && t.extend(!0, {}, e.data)
                        };
                        if (n && n.flat ? s.parent = e.parent : s.children = [], !n || !n.no_state)
                            for (r in e.state)
                                e.state.hasOwnProperty(r) && (s.state[r] = e.state[r]);
                        if (n && n.no_id && (delete s.id,
                                s.li_attr && s.li_attr.id && delete s.li_attr.id,
                                s.a_attr && s.a_attr.id && delete s.a_attr.id),
                            n && n.flat && "#" !== e.id && i.push(s), !n || !n.no_children)
                            for (r = 0,
                                o = e.children.length; r < o; r++)
                                n && n.flat ? this.get_json(e.children[r], n, i) : s.children.push(this.get_json(e.children[r], n));
                        return n && n.flat ? i : "#" === e.id ? s.children : s
                    },
                    create_node: function (n, i, r, o, s) {
                        if (null === n && (n = "#"), !(n = this.get_node(n)))
                            return !1;
                        if (!(r = r === e ? "last" : r).toString().match(/^(before|after)$/) && !s && !this.is_loaded(n))
                            return this.load_node(n, function () {
                                this.create_node(n, i, r, o, !0)
                            });
                        i || (i = {
                                text: this.get_string("New node")
                            }),
                            "string" == typeof i && (i = {
                                text: i
                            }),
                            i.text === e && (i.text = this.get_string("New node"));
                        var a, l, c, u;
                        switch ("#" === n.id && ("before" === r && (r = "first"),
                                "after" === r && (r = "last")),
                            r) {
                            case "before":
                                a = this.get_node(n.parent),
                                    r = t.inArray(n.id, a.children),
                                    n = a;
                                break;
                            case "after":
                                a = this.get_node(n.parent),
                                    r = t.inArray(n.id, a.children) + 1,
                                    n = a;
                                break;
                            case "inside":
                            case "first":
                                r = 0;
                                break;
                            case "last":
                                r = n.children.length;
                                break;
                            default:
                                r || (r = 0)
                        }
                        if (r > n.children.length && (r = n.children.length),
                            i.id || (i.id = !0), !this.check("create_node", i, n, r))
                            return this.settings.core.error.call(this, this._data.core.last_error), !1;
                        if (!0 === i.id && delete i.id, !(i = this._parse_model_from_json(i, n.id, n.parents.concat())))
                            return !1;
                        for (a = this.get_node(i),
                            (l = []).push(i),
                            l = l.concat(a.children_d),
                            this.trigger("model", {
                                nodes: l,
                                parent: n.id
                            }),
                            n.children_d = n.children_d.concat(l),
                            c = 0,
                            u = n.parents.length; c < u; c++)
                            this._model.data[n.parents[c]].children_d = this._model.data[n.parents[c]].children_d.concat(l);
                        for (i = a,
                            a = [],
                            c = 0,
                            u = n.children.length; c < u; c++)
                            a[c >= r ? c + 1 : c] = n.children[c];
                        return a[r] = i.id,
                            n.children = a,
                            this.redraw_node(n, !0),
                            o && o.call(this, this.get_node(i)),
                            this.trigger("create_node", {
                                node: this.get_node(i),
                                parent: n.id,
                                position: r
                            }),
                            i.id
                    },
                    rename_node: function (e, n) {
                        var i, r, o;
                        if (t.isArray(e)) {
                            for (i = 0,
                                r = (e = e.slice()).length; i < r; i++)
                                this.rename_node(e[i], n);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || "#" === e.id) && (o = e.text,
                            this.check("rename_node", e, this.get_parent(e), n) ? (this.set_text(e, n),
                                this.trigger("rename_node", {
                                    node: e,
                                    text: n,
                                    old: o
                                }), !0) : (this.settings.core.error.call(this, this._data.core.last_error), !1))
                    },
                    delete_node: function (e) {
                        var n, i, r, o, s, a, l, c, u, h;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.delete_node(e[n]);
                            return !0
                        }
                        if (!(e = this.get_node(e)) || "#" === e.id)
                            return !1;
                        if (r = this.get_node(e.parent),
                            o = t.inArray(e.id, r.children),
                            h = !1, !this.check("delete_node", e, r, o))
                            return this.settings.core.error.call(this, this._data.core.last_error), !1;
                        for (-1 !== o && (r.children = t.vakata.array_remove(r.children, o)),
                            (s = e.children_d.concat([])).push(e.id),
                            c = 0,
                            u = s.length; c < u; c++) {
                            for (a = 0,
                                l = e.parents.length; a < l; a++)
                                -
                                1 !== (o = t.inArray(s[c], this._model.data[e.parents[a]].children_d)) && (this._model.data[e.parents[a]].children_d = t.vakata.array_remove(this._model.data[e.parents[a]].children_d, o));
                            this._model.data[s[c]].state.selected && (h = !0, -1 !== (o = t.inArray(s[c], this._data.core.selected)) && (this._data.core.selected = t.vakata.array_remove(this._data.core.selected, o)))
                        }
                        for (this.trigger("delete_node", {
                                node: e,
                                parent: r.id
                            }),
                            h && this.trigger("changed", {
                                action: "delete_node",
                                node: e,
                                selected: this._data.core.selected,
                                parent: r.id
                            }),
                            c = 0,
                            u = s.length; c < u; c++)
                            delete this._model.data[s[c]];
                        return this.redraw_node(r, !0), !0
                    },
                    check: function (e, n, i, r, o) {
                        n = n && n.id ? n : this.get_node(n),
                            i = i && i.id ? i : this.get_node(i);
                        var s = e.match(/^move_node|copy_node|create_node$/i) ? i : n,
                            a = this.settings.core.check_callback;
                        return "move_node" !== e && "copy_node" !== e || o && o.is_multi || n.id !== i.id && t.inArray(n.id, i.children) !== r && -1 === t.inArray(i.id, n.children_d) ? (s && s.data && (s = s.data),
                            s && s.functions && (!1 === s.functions[e] || !0 === s.functions[e]) ? (!1 === s.functions[e] && (this._data.core.last_error = {
                                    error: "check",
                                    plugin: "core",
                                    id: "core_02",
                                    reason: "Node data prevents function: " + e,
                                    data: JSON.stringify({
                                        chk: e,
                                        pos: r,
                                        obj: !(!n || !n.id) && n.id,
                                        par: !(!i || !i.id) && i.id
                                    })
                                }),
                                s.functions[e]) : !(!1 === a || t.isFunction(a) && !1 === a.call(this, e, n, i, r, o) || a && !1 === a[e]) || (this._data.core.last_error = {
                                error: "check",
                                plugin: "core",
                                id: "core_03",
                                reason: "User config for core.check_callback prevents function: " + e,
                                data: JSON.stringify({
                                    chk: e,
                                    pos: r,
                                    obj: !(!n || !n.id) && n.id,
                                    par: !(!i || !i.id) && i.id
                                })
                            }, !1)) : (this._data.core.last_error = {
                            error: "check",
                            plugin: "core",
                            id: "core_01",
                            reason: "Moving parent inside child",
                            data: JSON.stringify({
                                chk: e,
                                pos: r,
                                obj: !(!n || !n.id) && n.id,
                                par: !(!i || !i.id) && i.id
                            })
                        }, !1)
                    },
                    last_error: function () {
                        return this._data.core.last_error
                    },
                    move_node: function (n, i, r, o, s, a, l) {
                        var c, u, h, d, f, p, g, _, y, v, m, b, w, x;
                        if (i = this.get_node(i),
                            r = r === e ? 0 : r, !i)
                            return !1;
                        if (!r.toString().match(/^(before|after)$/) && !s && !this.is_loaded(i))
                            return this.load_node(i, function () {
                                this.move_node(n, i, r, o, !0, !1, l)
                            });
                        if (t.isArray(n)) {
                            if (1 !== n.length) {
                                for (c = 0,
                                    u = n.length; c < u; c++)
                                    (y = this.move_node(n[c], i, r, o, s, !1, l)) && (i = y,
                                        r = "after");
                                return this.redraw(), !0
                            }
                            n = n[0]
                        }
                        if (!(n = n && n.id ? n : this.get_node(n)) || "#" === n.id)
                            return !1;
                        if (h = (n.parent || "#").toString(),
                            f = r.toString().match(/^(before|after)$/) && "#" !== i.id ? this.get_node(i.parent) : i,
                            p = l || (this._model.data[n.id] ? this : t.jstree.reference(n.id)),
                            g = !p || !p._id || this._id !== p._id,
                            d = p && p._id && h && p._model.data[h] && p._model.data[h].children ? t.inArray(n.id, p._model.data[h].children) : -1,
                            p && p._id && (n = p._model.data[n.id]),
                            g)
                            return !!(y = this.copy_node(n, i, r, o, s, !1, l)) && (p && p.delete_node(n),
                                y);
                        switch ("#" === i.id && ("before" === r && (r = "first"),
                                "after" === r && (r = "last")),
                            r) {
                            case "before":
                                r = t.inArray(i.id, f.children);
                                break;
                            case "after":
                                r = t.inArray(i.id, f.children) + 1;
                                break;
                            case "inside":
                            case "first":
                                r = 0;
                                break;
                            case "last":
                                r = f.children.length;
                                break;
                            default:
                                r || (r = 0)
                        }
                        if (r > f.children.length && (r = f.children.length), !this.check("move_node", n, f, r, {
                                core: !0,
                                origin: l,
                                is_multi: p && p._id && p._id !== this._id,
                                is_foreign: !p || !p._id
                            }))
                            return this.settings.core.error.call(this, this._data.core.last_error), !1;
                        if (n.parent === f.id) {
                            for (_ = f.children.concat(), -1 !== (y = t.inArray(n.id, _)) && (_ = t.vakata.array_remove(_, y),
                                    r > y && r--),
                                y = [],
                                v = 0,
                                m = _.length; v < m; v++)
                                y[v >= r ? v + 1 : v] = _[v];
                            y[r] = n.id,
                                f.children = y,
                                this._node_changed(f.id),
                                this.redraw("#" === f.id)
                        } else {
                            for ((y = n.children_d.concat()).push(n.id),
                                v = 0,
                                m = n.parents.length; v < m; v++) {
                                for (_ = [],
                                    b = 0,
                                    w = (x = p._model.data[n.parents[v]].children_d).length; b < w; b++)
                                    -
                                    1 === t.inArray(x[b], y) && _.push(x[b]);
                                p._model.data[n.parents[v]].children_d = _
                            }
                            for (p._model.data[h].children = t.vakata.array_remove_item(p._model.data[h].children, n.id),
                                v = 0,
                                m = f.parents.length; v < m; v++)
                                this._model.data[f.parents[v]].children_d = this._model.data[f.parents[v]].children_d.concat(y);
                            for (_ = [],
                                v = 0,
                                m = f.children.length; v < m; v++)
                                _[v >= r ? v + 1 : v] = f.children[v];
                            for (_[r] = n.id,
                                f.children = _,
                                f.children_d.push(n.id),
                                f.children_d = f.children_d.concat(n.children_d),
                                n.parent = f.id,
                                (y = f.parents.concat()).unshift(f.id),
                                x = n.parents.length,
                                n.parents = y,
                                y = y.concat(),
                                v = 0,
                                m = n.children_d.length; v < m; v++)
                                this._model.data[n.children_d[v]].parents = this._model.data[n.children_d[v]].parents.slice(0, -1 * x),
                                Array.prototype.push.apply(this._model.data[n.children_d[v]].parents, y);
                            "#" !== h && "#" !== f.id || (this._model.force_full_redraw = !0),
                                this._model.force_full_redraw || (this._node_changed(h),
                                    this._node_changed(f.id)),
                                a || this.redraw()
                        }
                        return o && o.call(this, n, f, r),
                            this.trigger("move_node", {
                                node: n,
                                parent: f.id,
                                position: r,
                                old_parent: h,
                                old_position: d,
                                is_multi: p && p._id && p._id !== this._id,
                                is_foreign: !p || !p._id,
                                old_instance: p,
                                new_instance: this
                            }),
                            n.id
                    },
                    copy_node: function (n, i, r, o, s, a, l) {
                        var c, u, h, d, f, p, g, _, y, v;
                        if (i = this.get_node(i),
                            r = r === e ? 0 : r, !i)
                            return !1;
                        if (!r.toString().match(/^(before|after)$/) && !s && !this.is_loaded(i))
                            return this.load_node(i, function () {
                                this.copy_node(n, i, r, o, !0, !1, l)
                            });
                        if (t.isArray(n)) {
                            if (1 !== n.length) {
                                for (c = 0,
                                    u = n.length; c < u; c++)
                                    (d = this.copy_node(n[c], i, r, o, s, !0, l)) && (i = d,
                                        r = "after");
                                return this.redraw(), !0
                            }
                            n = n[0]
                        }
                        if (!(n = n && n.id ? n : this.get_node(n)) || "#" === n.id)
                            return !1;
                        switch (_ = (n.parent || "#").toString(),
                            y = r.toString().match(/^(before|after)$/) && "#" !== i.id ? this.get_node(i.parent) : i,
                            v = l || (this._model.data[n.id] ? this : t.jstree.reference(n.id)), !v || !v._id || this._id !== v._id,
                            v && v._id && (n = v._model.data[n.id]),
                            "#" === i.id && ("before" === r && (r = "first"),
                                "after" === r && (r = "last")),
                            r) {
                            case "before":
                                r = t.inArray(i.id, y.children);
                                break;
                            case "after":
                                r = t.inArray(i.id, y.children) + 1;
                                break;
                            case "inside":
                            case "first":
                                r = 0;
                                break;
                            case "last":
                                r = y.children.length;
                                break;
                            default:
                                r || (r = 0)
                        }
                        if (r > y.children.length && (r = y.children.length), !this.check("copy_node", n, y, r, {
                                core: !0,
                                origin: l,
                                is_multi: v && v._id && v._id !== this._id,
                                is_foreign: !v || !v._id
                            }))
                            return this.settings.core.error.call(this, this._data.core.last_error), !1;
                        if (!(g = v ? v.get_json(n, {
                                no_id: !0,
                                no_data: !0,
                                no_state: !0
                            }) : n))
                            return !1;
                        if (!0 === g.id && delete g.id, !(g = this._parse_model_from_json(g, y.id, y.parents.concat())))
                            return !1;
                        for (d = this.get_node(g),
                            n && n.state && !1 === n.state.loaded && (d.state.loaded = !1),
                            (h = []).push(g),
                            h = h.concat(d.children_d),
                            this.trigger("model", {
                                nodes: h,
                                parent: y.id
                            }),
                            f = 0,
                            p = y.parents.length; f < p; f++)
                            this._model.data[y.parents[f]].children_d = this._model.data[y.parents[f]].children_d.concat(h);
                        for (h = [],
                            f = 0,
                            p = y.children.length; f < p; f++)
                            h[f >= r ? f + 1 : f] = y.children[f];
                        return h[r] = d.id,
                            y.children = h,
                            y.children_d.push(d.id),
                            y.children_d = y.children_d.concat(d.children_d),
                            "#" === y.id && (this._model.force_full_redraw = !0),
                            this._model.force_full_redraw || this._node_changed(y.id),
                            a || this.redraw("#" === y.id),
                            o && o.call(this, d, y, r),
                            this.trigger("copy_node", {
                                node: d,
                                original: n,
                                parent: y.id,
                                position: r,
                                old_parent: _,
                                old_position: v && v._id && _ && v._model.data[_] && v._model.data[_].children ? t.inArray(n.id, v._model.data[_].children) : -1,
                                is_multi: v && v._id && v._id !== this._id,
                                is_foreign: !v || !v._id,
                                old_instance: v,
                                new_instance: this
                            }),
                            d.id
                    },
                    cut: function (e) {
                        if (e || (e = this._data.core.selected.concat()),
                            t.isArray(e) || (e = [e]), !e.length)
                            return !1;
                        var n, i, r, l = [];
                        for (i = 0,
                            r = e.length; i < r; i++)
                            (n = this.get_node(e[i])) && n.id && "#" !== n.id && l.push(n);
                        if (!l.length)
                            return !1;
                        o = l,
                            a = this,
                            s = "move_node",
                            this.trigger("cut", {
                                node: e
                            })
                    },
                    copy: function (e) {
                        if (e || (e = this._data.core.selected.concat()),
                            t.isArray(e) || (e = [e]), !e.length)
                            return !1;
                        var n, i, r, l = [];
                        for (i = 0,
                            r = e.length; i < r; i++)
                            (n = this.get_node(e[i])) && n.id && "#" !== n.id && l.push(n);
                        if (!l.length)
                            return !1;
                        o = l,
                            a = this,
                            s = "copy_node",
                            this.trigger("copy", {
                                node: e
                            })
                    },
                    get_buffer: function () {
                        return {
                            mode: s,
                            node: o,
                            inst: a
                        }
                    },
                    can_paste: function () {
                        return !1 !== s && !1 !== o
                    },
                    paste: function (t, e) {
                        if (!((t = this.get_node(t)) && s && s.match(/^(copy_node|move_node)$/) && o))
                            return !1;
                        this[s](o, t, e, !1, !1, !1, a) && this.trigger("paste", {
                                parent: t.id,
                                node: o,
                                mode: s
                            }),
                            o = !1,
                            s = !1,
                            a = !1
                    },
                    clear_buffer: function () {
                        o = !1,
                            s = !1,
                            a = !1,
                            this.trigger("clear_buffer")
                    },
                    edit: function (e, n, i) {
                        var r, o, s, a, l, c, u, h, d;
                        return !!(e = this.get_node(e)) && (!1 === this.settings.core.check_callback ? (this._data.core.last_error = {
                                error: "check",
                                plugin: "core",
                                id: "core_07",
                                reason: "Could not edit node because of check_callback"
                            },
                            this.settings.core.error.call(this, this._data.core.last_error), !1) : (d = e,
                            n = "string" == typeof n ? n : e.text,
                            this.set_text(e, ""),
                            e = this._open_to(e),
                            d.text = n,
                            r = this._data.core.rtl,
                            o = this.element.width(),
                            s = e.children(".jstree-anchor"),
                            a = t("<span>"),
                            l = n,
                            c = t("<div />", {
                                css: {
                                    position: "absolute",
                                    top: "-200px",
                                    left: r ? "0px" : "-1000px",
                                    visibility: "hidden"
                                }
                            }).appendTo("body"),
                            u = t("<input />", {
                                value: l,
                                class: "jstree-rename-input",
                                css: {
                                    padding: "0",
                                    border: "1px solid silver",
                                    "box-sizing": "border-box",
                                    display: "inline-block",
                                    height: this._data.core.li_height + "px",
                                    lineHeight: this._data.core.li_height + "px",
                                    width: "150px"
                                },
                                blur: t.proxy(function () {
                                    var n, r = a.children(".jstree-rename-input").val(),
                                        o = this.settings.core.force_text;
                                    "" === r && (r = l),
                                        c.remove(),
                                        a.replaceWith(s),
                                        a.remove(),
                                        l = o ? l : t("<div></div>").append(t.parseHTML(l)).html(),
                                        this.set_text(e, l),
                                        (n = !!this.rename_node(e, o ? t("<div></div>").text(r).text() : t("<div></div>").append(t.parseHTML(r)).html())) || this.set_text(e, l),
                                        i && i.call(this, d, n)
                                }, this),
                                keydown: function (t) {
                                    var e = t.which;
                                    27 === e && (this.value = l),
                                        27 !== e && 13 !== e && 37 !== e && 38 !== e && 39 !== e && 40 !== e && 32 !== e || t.stopImmediatePropagation(),
                                        27 !== e && 13 !== e || (t.preventDefault(),
                                            this.blur())
                                },
                                click: function (t) {
                                    t.stopImmediatePropagation()
                                },
                                mousedown: function (t) {
                                    t.stopImmediatePropagation()
                                },
                                keyup: function (t) {
                                    u.width(Math.min(c.text("pW" + this.value).width(), o))
                                },
                                keypress: function (t) {
                                    if (13 === t.which)
                                        return !1
                                }
                            }),
                            h = {
                                fontFamily: s.css("fontFamily") || "",
                                fontSize: s.css("fontSize") || "",
                                fontWeight: s.css("fontWeight") || "",
                                fontStyle: s.css("fontStyle") || "",
                                fontStretch: s.css("fontStretch") || "",
                                fontVariant: s.css("fontVariant") || "",
                                letterSpacing: s.css("letterSpacing") || "",
                                wordSpacing: s.css("wordSpacing") || ""
                            },
                            a.attr("class", s.attr("class")).append(s.contents().clone()).append(u),
                            s.replaceWith(a),
                            c.css(h),
                            void u.css(h).width(Math.min(c.text("pW" + u[0].value).width(), o))[0].select()))
                    },
                    set_theme: function (e, n) {
                        if (!e)
                            return !1;
                        if (!0 === n) {
                            var i = this.settings.core.themes.dir;
                            i || (i = t.jstree.path + "/themes"),
                                n = i + "/" + e + "/style.css"
                        }
                        n && -1 === t.inArray(n, l) && (t("head").append('<link rel="stylesheet" href="' + n + '" type="text/css" />'),
                                l.push(n)),
                            this._data.core.themes.name && this.element.removeClass("jstree-" + this._data.core.themes.name),
                            this._data.core.themes.name = e,
                            this.element.addClass("jstree-" + e),
                            this.element[this.settings.core.themes.responsive ? "addClass" : "removeClass"]("jstree-" + e + "-responsive"),
                            this.trigger("set_theme", {
                                theme: e
                            })
                    },
                    get_theme: function () {
                        return this._data.core.themes.name
                    },
                    set_theme_variant: function (t) {
                        this._data.core.themes.variant && this.element.removeClass("jstree-" + this._data.core.themes.name + "-" + this._data.core.themes.variant),
                            this._data.core.themes.variant = t,
                            t && this.element.addClass("jstree-" + this._data.core.themes.name + "-" + this._data.core.themes.variant)
                    },
                    get_theme_variant: function () {
                        return this._data.core.themes.variant
                    },
                    show_stripes: function () {
                        this._data.core.themes.stripes = !0,
                            this.get_container_ul().addClass("jstree-striped")
                    },
                    hide_stripes: function () {
                        this._data.core.themes.stripes = !1,
                            this.get_container_ul().removeClass("jstree-striped")
                    },
                    toggle_stripes: function () {
                        this._data.core.themes.stripes ? this.hide_stripes() : this.show_stripes()
                    },
                    show_dots: function () {
                        this._data.core.themes.dots = !0,
                            this.get_container_ul().removeClass("jstree-no-dots")
                    },
                    hide_dots: function () {
                        this._data.core.themes.dots = !1,
                            this.get_container_ul().addClass("jstree-no-dots")
                    },
                    toggle_dots: function () {
                        this._data.core.themes.dots ? this.hide_dots() : this.show_dots()
                    },
                    show_icons: function () {
                        this._data.core.themes.icons = !0,
                            this.get_container_ul().removeClass("jstree-no-icons")
                    },
                    hide_icons: function () {
                        this._data.core.themes.icons = !1,
                            this.get_container_ul().addClass("jstree-no-icons")
                    },
                    toggle_icons: function () {
                        this._data.core.themes.icons ? this.hide_icons() : this.show_icons()
                    },
                    set_icon: function (n, i) {
                        var r, o, s, a;
                        if (t.isArray(n)) {
                            for (r = 0,
                                o = (n = n.slice()).length; r < o; r++)
                                this.set_icon(n[r], i);
                            return !0
                        }
                        return !(!(n = this.get_node(n)) || "#" === n.id) && (a = n.icon,
                            n.icon = !0 === i || null === i || i === e || "" === i || i,
                            s = this.get_node(n, !0).children(".jstree-anchor").children(".jstree-themeicon"), !1 === i ? this.hide_icon(n) : !0 === i || null === i || i === e || "" === i ? (s.removeClass("jstree-themeicon-custom " + a).css("background", "").removeAttr("rel"), !1 === a && this.show_icon(n)) : -1 === i.indexOf("/") && -1 === i.indexOf(".") ? (s.removeClass(a).css("background", ""),
                                s.addClass(i + " jstree-themeicon-custom").attr("rel", i), !1 === a && this.show_icon(n)) : (s.removeClass(a).css("background", ""),
                                s.addClass("jstree-themeicon-custom").css("background", "url('" + i + "') center center no-repeat").attr("rel", i), !1 === a && this.show_icon(n)), !0)
                    },
                    get_icon: function (t) {
                        return !(!(t = this.get_node(t)) || "#" === t.id) && t.icon
                    },
                    hide_icon: function (e) {
                        var n, i;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.hide_icon(e[n]);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || "#" === e) && (e.icon = !1,
                            this.get_node(e, !0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"), !0)
                    },
                    show_icon: function (e) {
                        var n, i, r;
                        if (t.isArray(e)) {
                            for (n = 0,
                                i = (e = e.slice()).length; n < i; n++)
                                this.show_icon(e[n]);
                            return !0
                        }
                        return !(!(e = this.get_node(e)) || "#" === e) && (r = this.get_node(e, !0),
                            e.icon = !r.length || r.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),
                            e.icon || (e.icon = !0),
                            r.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"), !0)
                    }
                },
                t.vakata = {},
                t.vakata.attributes = function (e, n) {
                    e = t(e)[0];
                    var i = n ? {} : [];
                    return e && e.attributes && t.each(e.attributes, function (e, r) {
                            -1 === t.inArray(r.name.toLowerCase(), ["style", "contenteditable", "hasfocus", "tabindex"]) && null !== r.value && "" !== t.trim(r.value) && (n ? i[r.name] = r.value : i.push(r.name))
                        }),
                        i
                },
                t.vakata.array_unique = function (t) {
                    var n, i, r = [],
                        o = {};
                    for (n = 0,
                        i = t.length; n < i; n++)
                        o[t[n]] === e && (r.push(t[n]),
                            o[t[n]] = !0);
                    return r
                },
                t.vakata.array_remove = function (t, e, n) {
                    var i = t.slice((n || e) + 1 || t.length);
                    return t.length = e < 0 ? t.length + e : e,
                        t.push.apply(t, i),
                        t
                },
                t.vakata.array_remove_item = function (e, n) {
                    var i = t.inArray(n, e);
                    return -1 !== i ? t.vakata.array_remove(e, i) : e
                };
            var d = u.createElement("I");
            d.className = "jstree-icon jstree-checkbox",
                d.setAttribute("role", "presentation"),
                t.jstree.defaults.checkbox = {
                    visible: !0,
                    three_state: !0,
                    whole_node: !0,
                    keep_selected_style: !0,
                    cascade: "",
                    tie_selection: !0
                },
                t.jstree.plugins.checkbox = function (n, i) {
                    this.bind = function () {
                            i.bind.call(this),
                                this._data.checkbox.uto = !1,
                                this._data.checkbox.selected = [],
                                this.settings.checkbox.three_state && (this.settings.checkbox.cascade = "up+down+undetermined"),
                                this.element.on("init.jstree", t.proxy(function () {
                                    this._data.checkbox.visible = this.settings.checkbox.visible,
                                        this.settings.checkbox.keep_selected_style || this.element.addClass("jstree-checkbox-no-clicked"),
                                        this.settings.checkbox.tie_selection && this.element.addClass("jstree-checkbox-selection")
                                }, this)).on("loading.jstree", t.proxy(function () {
                                    this[this._data.checkbox.visible ? "show_checkboxes" : "hide_checkboxes"]()
                                }, this)), -1 !== this.settings.checkbox.cascade.indexOf("undetermined") && this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree", t.proxy(function () {
                                    this._data.checkbox.uto && clearTimeout(this._data.checkbox.uto),
                                        this._data.checkbox.uto = setTimeout(t.proxy(this._undetermined, this), 50)
                                }, this)),
                                this.settings.checkbox.tie_selection || this.element.on("model.jstree", t.proxy(function (t, e) {
                                    var n, i, r = this._model.data,
                                        o = (r[e.parent],
                                            e.nodes);
                                    for (n = 0,
                                        i = o.length; n < i; n++)
                                        r[o[n]].state.checked = r[o[n]].original && r[o[n]].original.state && r[o[n]].original.state.checked,
                                        r[o[n]].state.checked && this._data.checkbox.selected.push(o[n])
                                }, this)), -1 === this.settings.checkbox.cascade.indexOf("up") && -1 === this.settings.checkbox.cascade.indexOf("down") || this.element.on("model.jstree", t.proxy(function (e, n) {
                                    var i, r, o, s, a, l, c = this._model.data,
                                        u = c[n.parent],
                                        h = n.nodes,
                                        d = [],
                                        f = this.settings.checkbox.cascade,
                                        p = this.settings.checkbox.tie_selection;
                                    if (-1 !== f.indexOf("down"))
                                        if (u.state[p ? "selected" : "checked"]) {
                                            for (r = 0,
                                                o = h.length; r < o; r++)
                                                c[h[r]].state[p ? "selected" : "checked"] = !0;
                                            this._data[p ? "core" : "checkbox"].selected = this._data[p ? "core" : "checkbox"].selected.concat(h)
                                        } else
                                            for (r = 0,
                                                o = h.length; r < o; r++)
                                                if (c[h[r]].state[p ? "selected" : "checked"]) {
                                                    for (s = 0,
                                                        a = c[h[r]].children_d.length; s < a; s++)
                                                        c[c[h[r]].children_d[s]].state[p ? "selected" : "checked"] = !0;
                                                    this._data[p ? "core" : "checkbox"].selected = this._data[p ? "core" : "checkbox"].selected.concat(c[h[r]].children_d)
                                                }
                                    if (-1 !== f.indexOf("up")) {
                                        for (r = 0,
                                            o = u.children_d.length; r < o; r++)
                                            c[u.children_d[r]].children.length || d.push(c[u.children_d[r]].parent);
                                        for (s = 0,
                                            a = (d = t.vakata.array_unique(d)).length; s < a; s++)
                                            for (u = c[d[s]]; u && "#" !== u.id;) {
                                                for (i = 0,
                                                    r = 0,
                                                    o = u.children.length; r < o; r++)
                                                    i += c[u.children[r]].state[p ? "selected" : "checked"];
                                                if (i !== o)
                                                    break;
                                                u.state[p ? "selected" : "checked"] = !0,
                                                    this._data[p ? "core" : "checkbox"].selected.push(u.id),
                                                    (l = this.get_node(u, !0)) && l.length && l.attr("aria-selected", !0).children(".jstree-anchor").addClass(p ? "jstree-clicked" : "jstree-checked"),
                                                    u = this.get_node(u.parent)
                                            }
                                    }
                                    this._data[p ? "core" : "checkbox"].selected = t.vakata.array_unique(this._data[p ? "core" : "checkbox"].selected)
                                }, this)).on(this.settings.checkbox.tie_selection ? "select_node.jstree" : "check_node.jstree", t.proxy(function (e, n) {
                                    var i, r, o, s, a = n.node,
                                        l = this._model.data,
                                        c = this.get_node(a.parent),
                                        u = this.get_node(a, !0),
                                        h = this.settings.checkbox.cascade,
                                        d = this.settings.checkbox.tie_selection;
                                    if (-1 !== h.indexOf("down"))
                                        for (this._data[d ? "core" : "checkbox"].selected = t.vakata.array_unique(this._data[d ? "core" : "checkbox"].selected.concat(a.children_d)),
                                            i = 0,
                                            r = a.children_d.length; i < r; i++)
                                            (s = l[a.children_d[i]]).state[d ? "selected" : "checked"] = !0,
                                            s && s.original && s.original.state && s.original.state.undetermined && (s.original.state.undetermined = !1);
                                    if (-1 !== h.indexOf("up"))
                                        for (; c && "#" !== c.id;) {
                                            for (o = 0,
                                                i = 0,
                                                r = c.children.length; i < r; i++)
                                                o += l[c.children[i]].state[d ? "selected" : "checked"];
                                            if (o !== r)
                                                break;
                                            c.state[d ? "selected" : "checked"] = !0,
                                                this._data[d ? "core" : "checkbox"].selected.push(c.id),
                                                (s = this.get_node(c, !0)) && s.length && s.attr("aria-selected", !0).children(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked"),
                                                c = this.get_node(c.parent)
                                        } -
                                        1 !== h.indexOf("down") && u.length && u.find(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked").parent().attr("aria-selected", !0)
                                }, this)).on(this.settings.checkbox.tie_selection ? "deselect_all.jstree" : "uncheck_all.jstree", t.proxy(function (t, e) {
                                    var n, i, r, o = this.get_node("#"),
                                        s = this._model.data;
                                    for (n = 0,
                                        i = o.children_d.length; n < i; n++)
                                        (r = s[o.children_d[n]]) && r.original && r.original.state && r.original.state.undetermined && (r.original.state.undetermined = !1)
                                }, this)).on(this.settings.checkbox.tie_selection ? "deselect_node.jstree" : "uncheck_node.jstree", t.proxy(function (e, n) {
                                    var i, r, o, s = n.node,
                                        a = this.get_node(s, !0),
                                        l = this.settings.checkbox.cascade,
                                        c = this.settings.checkbox.tie_selection;
                                    if (s && s.original && s.original.state && s.original.state.undetermined && (s.original.state.undetermined = !1), -1 !== l.indexOf("down"))
                                        for (i = 0,
                                            r = s.children_d.length; i < r; i++)
                                            (o = this._model.data[s.children_d[i]]).state[c ? "selected" : "checked"] = !1,
                                            o && o.original && o.original.state && o.original.state.undetermined && (o.original.state.undetermined = !1);
                                    if (-1 !== l.indexOf("up"))
                                        for (i = 0,
                                            r = s.parents.length; i < r; i++)
                                            (o = this._model.data[s.parents[i]]).state[c ? "selected" : "checked"] = !1,
                                            o && o.original && o.original.state && o.original.state.undetermined && (o.original.state.undetermined = !1),
                                            (o = this.get_node(s.parents[i], !0)) && o.length && o.attr("aria-selected", !1).children(".jstree-anchor").removeClass(c ? "jstree-clicked" : "jstree-checked");
                                    for (o = [],
                                        i = 0,
                                        r = this._data[c ? "core" : "checkbox"].selected.length; i < r; i++)
                                        -
                                        1 !== l.indexOf("down") && -1 !== t.inArray(this._data[c ? "core" : "checkbox"].selected[i], s.children_d) || -1 !== l.indexOf("up") && -1 !== t.inArray(this._data[c ? "core" : "checkbox"].selected[i], s.parents) || o.push(this._data[c ? "core" : "checkbox"].selected[i]);
                                    this._data[c ? "core" : "checkbox"].selected = t.vakata.array_unique(o), -1 !== l.indexOf("down") && a.length && a.find(".jstree-anchor").removeClass(c ? "jstree-clicked" : "jstree-checked").parent().attr("aria-selected", !1)
                                }, this)), -1 !== this.settings.checkbox.cascade.indexOf("up") && this.element.on("delete_node.jstree", t.proxy(function (t, e) {
                                    for (var n, i, r, o, s = this.get_node(e.parent), a = this._model.data, l = this.settings.checkbox.tie_selection; s && "#" !== s.id;) {
                                        for (r = 0,
                                            n = 0,
                                            i = s.children.length; n < i; n++)
                                            r += a[s.children[n]].state[l ? "selected" : "checked"];
                                        if (r !== i)
                                            break;
                                        s.state[l ? "selected" : "checked"] = !0,
                                            this._data[l ? "core" : "checkbox"].selected.push(s.id),
                                            (o = this.get_node(s, !0)) && o.length && o.attr("aria-selected", !0).children(".jstree-anchor").addClass(l ? "jstree-clicked" : "jstree-checked"),
                                            s = this.get_node(s.parent)
                                    }
                                }, this)).on("move_node.jstree", t.proxy(function (e, n) {
                                    var i, r, o, s, a, l = n.is_multi,
                                        c = n.old_parent,
                                        u = this.get_node(n.parent),
                                        h = this._model.data,
                                        d = this.settings.checkbox.tie_selection;
                                    if (!l)
                                        for (i = this.get_node(c); i && "#" !== i.id;) {
                                            for (r = 0,
                                                o = 0,
                                                s = i.children.length; o < s; o++)
                                                r += h[i.children[o]].state[d ? "selected" : "checked"];
                                            if (r !== s)
                                                break;
                                            i.state[d ? "selected" : "checked"] = !0,
                                                this._data[d ? "core" : "checkbox"].selected.push(i.id),
                                                (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !0).children(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked"),
                                                i = this.get_node(i.parent)
                                        }
                                    for (i = u; i && "#" !== i.id;) {
                                        for (r = 0,
                                            o = 0,
                                            s = i.children.length; o < s; o++)
                                            r += h[i.children[o]].state[d ? "selected" : "checked"];
                                        if (r === s)
                                            i.state[d ? "selected" : "checked"] || (i.state[d ? "selected" : "checked"] = !0,
                                                this._data[d ? "core" : "checkbox"].selected.push(i.id),
                                                (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !0).children(".jstree-anchor").addClass(d ? "jstree-clicked" : "jstree-checked"));
                                        else {
                                            if (!i.state[d ? "selected" : "checked"])
                                                break;
                                            i.state[d ? "selected" : "checked"] = !1,
                                                this._data[d ? "core" : "checkbox"].selected = t.vakata.array_remove_item(this._data[d ? "core" : "checkbox"].selected, i.id),
                                                (a = this.get_node(i, !0)) && a.length && a.attr("aria-selected", !1).children(".jstree-anchor").removeClass(d ? "jstree-clicked" : "jstree-checked")
                                        }
                                        i = this.get_node(i.parent)
                                    }
                                }, this))
                        },
                        this._undetermined = function () {
                            if (null !== this.element) {
                                var t, n, i, r, o = {},
                                    s = this._model.data,
                                    a = this.settings.checkbox.tie_selection,
                                    l = this._data[a ? "core" : "checkbox"].selected,
                                    c = [],
                                    u = this;
                                for (t = 0,
                                    n = l.length; t < n; t++)
                                    if (s[l[t]] && s[l[t]].parents)
                                        for (i = 0,
                                            r = s[l[t]].parents.length; i < r; i++)
                                            o[s[l[t]].parents[i]] === e && "#" !== s[l[t]].parents[i] && (o[s[l[t]].parents[i]] = !0,
                                                c.push(s[l[t]].parents[i]));
                                for (this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function () {
                                        var a, l = u.get_node(this);
                                        if (l.state.loaded) {
                                            for (t = 0,
                                                n = l.children_d.length; t < n; t++)
                                                if (!(a = s[l.children_d[t]]).state.loaded && a.original && a.original.state && a.original.state.undetermined && !0 === a.original.state.undetermined)
                                                    for (o[a.id] === e && "#" !== a.id && (o[a.id] = !0,
                                                            c.push(a.id)),
                                                        i = 0,
                                                        r = a.parents.length; i < r; i++)
                                                        o[a.parents[i]] === e && "#" !== a.parents[i] && (o[a.parents[i]] = !0,
                                                            c.push(a.parents[i]))
                                        } else if (l.original && l.original.state && l.original.state.undetermined && !0 === l.original.state.undetermined)
                                            for (o[l.id] === e && "#" !== l.id && (o[l.id] = !0,
                                                    c.push(l.id)),
                                                i = 0,
                                                r = l.parents.length; i < r; i++)
                                                o[l.parents[i]] === e && "#" !== l.parents[i] && (o[l.parents[i]] = !0,
                                                    c.push(l.parents[i]))
                                    }),
                                    this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),
                                    t = 0,
                                    n = c.length; t < n; t++)
                                    s[c[t]].state[a ? "selected" : "checked"] || (l = this.get_node(c[t], !0)) && l.length && l.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")
                            }
                        },
                        this.redraw_node = function (e, n, r, o) {
                            if (e = i.redraw_node.apply(this, arguments)) {
                                var s, a, l = null;
                                for (s = 0,
                                    a = e.childNodes.length; s < a; s++)
                                    if (e.childNodes[s] && e.childNodes[s].className && -1 !== e.childNodes[s].className.indexOf("jstree-anchor")) {
                                        l = e.childNodes[s];
                                        break
                                    }
                                l && (!this.settings.checkbox.tie_selection && this._model.data[e.id].state.checked && (l.className += " jstree-checked"),
                                    l.insertBefore(d.cloneNode(!1), l.childNodes[0]))
                            }
                            return r || -1 === this.settings.checkbox.cascade.indexOf("undetermined") || (this._data.checkbox.uto && clearTimeout(this._data.checkbox.uto),
                                    this._data.checkbox.uto = setTimeout(t.proxy(this._undetermined, this), 50)),
                                e
                        },
                        this.show_checkboxes = function () {
                            this._data.core.themes.checkboxes = !0,
                                this.get_container_ul().removeClass("jstree-no-checkboxes")
                        },
                        this.hide_checkboxes = function () {
                            this._data.core.themes.checkboxes = !1,
                                this.get_container_ul().addClass("jstree-no-checkboxes")
                        },
                        this.toggle_checkboxes = function () {
                            this._data.core.themes.checkboxes ? this.hide_checkboxes() : this.show_checkboxes()
                        },
                        this.is_undetermined = function (e) {
                            e = this.get_node(e);
                            var n, i, r = this.settings.checkbox.cascade,
                                o = this.settings.checkbox.tie_selection,
                                s = this._data[o ? "core" : "checkbox"].selected,
                                a = this._model.data;
                            if (!e || !0 === e.state[o ? "selected" : "checked"] || -1 === r.indexOf("undetermined") || -1 === r.indexOf("down") && -1 === r.indexOf("up"))
                                return !1;
                            if (!e.state.loaded && !0 === e.original.state.undetermined)
                                return !0;
                            for (n = 0,
                                i = e.children_d.length; n < i; n++)
                                if (-1 !== t.inArray(e.children_d[n], s) || !a[e.children_d[n]].state.loaded && a[e.children_d[n]].original.state.undetermined)
                                    return !0;
                            return !1
                        },
                        this.activate_node = function (e, n) {
                            return this.settings.checkbox.tie_selection && (this.settings.checkbox.whole_node || t(n.target).hasClass("jstree-checkbox")) && (n.ctrlKey = !0),
                                this.settings.checkbox.tie_selection || !this.settings.checkbox.whole_node && !t(n.target).hasClass("jstree-checkbox") ? i.activate_node.call(this, e, n) : !this.is_disabled(e) && (this.is_checked(e) ? this.uncheck_node(e, n) : this.check_node(e, n),
                                    void this.trigger("activate_node", {
                                        node: this.get_node(e)
                                    }))
                        },
                        this.check_node = function (e, n) {
                            if (this.settings.checkbox.tie_selection)
                                return this.select_node(e, !1, !0, n);
                            var i, r, o;
                            if (t.isArray(e)) {
                                for (r = 0,
                                    o = (e = e.slice()).length; r < o; r++)
                                    this.check_node(e[r], n);
                                return !0
                            }
                            if (!(e = this.get_node(e)) || "#" === e.id)
                                return !1;
                            i = this.get_node(e, !0),
                                e.state.checked || (e.state.checked = !0,
                                    this._data.checkbox.selected.push(e.id),
                                    i && i.length && i.children(".jstree-anchor").addClass("jstree-checked"),
                                    this.trigger("check_node", {
                                        node: e,
                                        selected: this._data.checkbox.selected,
                                        event: n
                                    }))
                        },
                        this.uncheck_node = function (e, n) {
                            if (this.settings.checkbox.tie_selection)
                                return this.deselect_node(e, !1, n);
                            var i, r, o;
                            if (t.isArray(e)) {
                                for (i = 0,
                                    r = (e = e.slice()).length; i < r; i++)
                                    this.uncheck_node(e[i], n);
                                return !0
                            }
                            if (!(e = this.get_node(e)) || "#" === e.id)
                                return !1;
                            o = this.get_node(e, !0),
                                e.state.checked && (e.state.checked = !1,
                                    this._data.checkbox.selected = t.vakata.array_remove_item(this._data.checkbox.selected, e.id),
                                    o.length && o.children(".jstree-anchor").removeClass("jstree-checked"),
                                    this.trigger("uncheck_node", {
                                        node: e,
                                        selected: this._data.checkbox.selected,
                                        event: n
                                    }))
                        },
                        this.check_all = function () {
                            if (this.settings.checkbox.tie_selection)
                                return this.select_all();
                            var t, e;
                            this._data.checkbox.selected.concat([]);
                            for (this._data.checkbox.selected = this._model.data["#"].children_d.concat(),
                                t = 0,
                                e = this._data.checkbox.selected.length; t < e; t++)
                                this._model.data[this._data.checkbox.selected[t]] && (this._model.data[this._data.checkbox.selected[t]].state.checked = !0);
                            this.redraw(!0),
                                this.trigger("check_all", {
                                    selected: this._data.checkbox.selected
                                })
                        },
                        this.uncheck_all = function () {
                            if (this.settings.checkbox.tie_selection)
                                return this.deselect_all();
                            var t, e, n = this._data.checkbox.selected.concat([]);
                            for (t = 0,
                                e = this._data.checkbox.selected.length; t < e; t++)
                                this._model.data[this._data.checkbox.selected[t]] && (this._model.data[this._data.checkbox.selected[t]].state.checked = !1);
                            this._data.checkbox.selected = [],
                                this.element.find(".jstree-checked").removeClass("jstree-checked"),
                                this.trigger("uncheck_all", {
                                    selected: this._data.checkbox.selected,
                                    node: n
                                })
                        },
                        this.is_checked = function (t) {
                            return this.settings.checkbox.tie_selection ? this.is_selected(t) : !(!(t = this.get_node(t)) || "#" === t.id) && t.state.checked
                        },
                        this.get_checked = function (e) {
                            return this.settings.checkbox.tie_selection ? this.get_selected(e) : e ? t.map(this._data.checkbox.selected, t.proxy(function (t) {
                                return this.get_node(t)
                            }, this)) : this._data.checkbox.selected
                        },
                        this.get_top_checked = function (e) {
                            if (this.settings.checkbox.tie_selection)
                                return this.get_top_selected(e);
                            var n, i, r, o, s = this.get_checked(!0),
                                a = {};
                            for (n = 0,
                                i = s.length; n < i; n++)
                                a[s[n].id] = s[n];
                            for (n = 0,
                                i = s.length; n < i; n++)
                                for (r = 0,
                                    o = s[n].children_d.length; r < o; r++)
                                    a[s[n].children_d[r]] && delete a[s[n].children_d[r]];
                            s = [];
                            for (n in a)
                                a.hasOwnProperty(n) && s.push(n);
                            return e ? t.map(s, t.proxy(function (t) {
                                return this.get_node(t)
                            }, this)) : s
                        },
                        this.get_bottom_checked = function (e) {
                            if (this.settings.checkbox.tie_selection)
                                return this.get_bottom_selected(e);
                            var n, i, r = this.get_checked(!0),
                                o = [];
                            for (n = 0,
                                i = r.length; n < i; n++)
                                r[n].children.length || o.push(r[n].id);
                            return e ? t.map(o, t.proxy(function (t) {
                                return this.get_node(t)
                            }, this)) : o
                        },
                        this.load_node = function (e, n) {
                            var r, o, s;
                            if (!t.isArray(e) && !this.settings.checkbox.tie_selection && (s = this.get_node(e)) && s.state.loaded)
                                for (r = 0,
                                    o = s.children_d.length; r < o; r++)
                                    this._model.data[s.children_d[r]].state.checked && (!0,
                                        this._data.checkbox.selected = t.vakata.array_remove_item(this._data.checkbox.selected, s.children_d[r]));
                            return i.load_node.apply(this, arguments)
                        },
                        this.get_state = function () {
                            var t = i.get_state.apply(this, arguments);
                            return this.settings.checkbox.tie_selection ? t : (t.checkbox = this._data.checkbox.selected.slice(),
                                t)
                        },
                        this.set_state = function (e, n) {
                            var r = i.set_state.apply(this, arguments);
                            if (r && e.checkbox) {
                                if (!this.settings.checkbox.tie_selection) {
                                    this.uncheck_all();
                                    var o = this;
                                    t.each(e.checkbox, function (t, e) {
                                        o.check_node(e)
                                    })
                                }
                                return delete e.checkbox,
                                    this.set_state(e, n), !1
                            }
                            return r
                        }
                },
                t.jstree.defaults.contextmenu = {
                    select_node: !0,
                    show_at_node: !0,
                    items: function (e, n) {
                        return {
                            create: {
                                separator_before: !1,
                                separator_after: !0,
                                _disabled: !1,
                                label: "Create",
                                action: function (e) {
                                    var n = t.jstree.reference(e.reference),
                                        i = n.get_node(e.reference);
                                    n.create_node(i, {}, "last", function (t) {
                                        setTimeout(function () {
                                            n.edit(t)
                                        }, 0)
                                    })
                                }
                            },
                            rename: {
                                separator_before: !1,
                                separator_after: !1,
                                _disabled: !1,
                                label: "Rename",
                                action: function (e) {
                                    var n = t.jstree.reference(e.reference),
                                        i = n.get_node(e.reference);
                                    n.edit(i)
                                }
                            },
                            remove: {
                                separator_before: !1,
                                icon: !1,
                                separator_after: !1,
                                _disabled: !1,
                                label: "Delete",
                                action: function (e) {
                                    var n = t.jstree.reference(e.reference),
                                        i = n.get_node(e.reference);
                                    n.is_selected(i) ? n.delete_node(n.get_selected()) : n.delete_node(i)
                                }
                            },
                            ccp: {
                                separator_before: !0,
                                icon: !1,
                                separator_after: !1,
                                label: "Edit",
                                action: !1,
                                submenu: {
                                    cut: {
                                        separator_before: !1,
                                        separator_after: !1,
                                        label: "Cut",
                                        action: function (e) {
                                            var n = t.jstree.reference(e.reference),
                                                i = n.get_node(e.reference);
                                            n.is_selected(i) ? n.cut(n.get_top_selected()) : n.cut(i)
                                        }
                                    },
                                    copy: {
                                        separator_before: !1,
                                        icon: !1,
                                        separator_after: !1,
                                        label: "Copy",
                                        action: function (e) {
                                            var n = t.jstree.reference(e.reference),
                                                i = n.get_node(e.reference);
                                            n.is_selected(i) ? n.copy(n.get_top_selected()) : n.copy(i)
                                        }
                                    },
                                    paste: {
                                        separator_before: !1,
                                        icon: !1,
                                        _disabled: function (e) {
                                            return !t.jstree.reference(e.reference).can_paste()
                                        },
                                        separator_after: !1,
                                        label: "Paste",
                                        action: function (e) {
                                            var n = t.jstree.reference(e.reference),
                                                i = n.get_node(e.reference);
                                            n.paste(i)
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                t.jstree.plugins.contextmenu = function (n, i) {
                    this.bind = function () {
                            i.bind.call(this);
                            var e, n, r = 0,
                                o = null;
                            this.element.on("contextmenu.jstree", ".jstree-anchor", t.proxy(function (t, e) {
                                    t.preventDefault(),
                                        r = t.ctrlKey ? +new Date : 0,
                                        (e || o) && (r = +new Date + 1e4),
                                        o && clearTimeout(o),
                                        this.is_loading(t.currentTarget) || this.show_contextmenu(t.currentTarget, t.pageX, t.pageY, t)
                                }, this)).on("click.jstree", ".jstree-anchor", t.proxy(function (e) {
                                    this._data.contextmenu.visible && (!r || +new Date - r > 250) && t.vakata.context.hide(),
                                        r = 0
                                }, this)).on("touchstart.jstree", ".jstree-anchor", function (i) {
                                    i.originalEvent && i.originalEvent.changedTouches && i.originalEvent.changedTouches[0] && (e = i.pageX,
                                        n = i.pageY,
                                        o = setTimeout(function () {
                                            t(i.currentTarget).trigger("contextmenu", !0)
                                        }, 750))
                                }).on("touchmove.vakata.jstree", function (t) {
                                    o && t.originalEvent && t.originalEvent.changedTouches && t.originalEvent.changedTouches[0] && (Math.abs(e - t.pageX) > 50 || Math.abs(n - t.pageY) > 50) && clearTimeout(o)
                                }).on("touchend.vakata.jstree", function (t) {
                                    o && clearTimeout(o)
                                }),
                                t(u).on("context_hide.vakata.jstree", t.proxy(function () {
                                    this._data.contextmenu.visible = !1
                                }, this))
                        },
                        this.teardown = function () {
                            this._data.contextmenu.visible && t.vakata.context.hide(),
                                i.teardown.call(this)
                        },
                        this.show_contextmenu = function (n, i, r, o) {
                            if (!(n = this.get_node(n)) || "#" === n.id)
                                return !1;
                            var s = this.settings.contextmenu,
                                a = this.get_node(n, !0).children(".jstree-anchor"),
                                l = !1,
                                c = !1;
                            (s.show_at_node || i === e || r === e) && (l = a.offset(),
                                i = l.left,
                                r = l.top + this._data.core.li_height),
                            this.settings.contextmenu.select_node && !this.is_selected(n) && this.activate_node(n, o),
                                c = s.items,
                                t.isFunction(c) && (c = c.call(this, n, t.proxy(function (t) {
                                    this._show_contextmenu(n, i, r, t)
                                }, this))),
                                t.isPlainObject(c) && this._show_contextmenu(n, i, r, c)
                        },
                        this._show_contextmenu = function (e, n, i, r) {
                            var o = this.get_node(e, !0).children(".jstree-anchor");
                            t(u).one("context_show.vakata.jstree", t.proxy(function (e, n) {
                                    var i = "jstree-contextmenu jstree-" + this.get_theme() + "-contextmenu";
                                    t(n.element).addClass(i)
                                }, this)),
                                this._data.contextmenu.visible = !0,
                                t.vakata.context.show(o, {
                                    x: n,
                                    y: i
                                }, r),
                                this.trigger("show_contextmenu", {
                                    node: e,
                                    x: n,
                                    y: i
                                })
                        }
                },
                function (t) {
                    var e = !1,
                        n = {
                            element: !1,
                            reference: !1,
                            position_x: 0,
                            position_y: 0,
                            items: [],
                            html: "",
                            is_visible: !1
                        };
                    t.vakata.context = {
                            settings: {
                                hide_onmouseleave: 0,
                                icons: !0
                            },
                            _trigger: function (e) {
                                t(u).triggerHandler("context_" + e + ".vakata", {
                                    reference: n.reference,
                                    element: n.element,
                                    position: {
                                        x: n.position_x,
                                        y: n.position_y
                                    }
                                })
                            },
                            _execute: function (e) {
                                return !(!(e = n.items[e]) || e._disabled && (!t.isFunction(e._disabled) || e._disabled({
                                    item: e,
                                    reference: n.reference,
                                    element: n.element
                                })) || !e.action) && e.action.call(null, {
                                    item: e,
                                    reference: n.reference,
                                    element: n.element,
                                    position: {
                                        x: n.position_x,
                                        y: n.position_y
                                    }
                                })
                            },
                            _parse: function (e, i) {
                                if (!e)
                                    return !1;
                                i || (n.html = "",
                                    n.items = []);
                                var r, o = "",
                                    s = !1;
                                return i && (o += "<ul>"),
                                    t.each(e, function (e, i) {
                                        if (!i)
                                            return !0;
                                        n.items.push(i), !s && i.separator_before && (o += "<li class='vakata-context-separator'><a href='#' " + (t.vakata.context.settings.icons ? "" : 'style="margin-left:0px;"') + ">&#160;</a></li>"),
                                            s = !1,
                                            o += "<li class='" + (i._class || "") + (!0 === i._disabled || t.isFunction(i._disabled) && i._disabled({
                                                item: i,
                                                reference: n.reference,
                                                element: n.element
                                            }) ? " vakata-contextmenu-disabled " : "") + "' " + (i.shortcut ? " data-shortcut='" + i.shortcut + "' " : "") + ">",
                                            o += "<a href='#' rel='" + (n.items.length - 1) + "'>",
                                            t.vakata.context.settings.icons && (o += "<i ",
                                                i.icon && (-1 !== i.icon.indexOf("/") || -1 !== i.icon.indexOf(".") ? o += " style='background:url(\"" + i.icon + "\") center center no-repeat' " : o += " class='" + i.icon + "' "),
                                                o += "></i><span class='vakata-contextmenu-sep'>&#160;</span>"),
                                            o += (t.isFunction(i.label) ? i.label({
                                                item: e,
                                                reference: n.reference,
                                                element: n.element
                                            }) : i.label) + (i.shortcut ? ' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-' + i.shortcut + '">' + (i.shortcut_label || "") + "</span>" : "") + "</a>",
                                            i.submenu && (r = t.vakata.context._parse(i.submenu, !0)) && (o += r),
                                            o += "</li>",
                                            i.separator_after && (o += "<li class='vakata-context-separator'><a href='#' " + (t.vakata.context.settings.icons ? "" : 'style="margin-left:0px;"') + ">&#160;</a></li>",
                                                s = !0)
                                    }),
                                    o = o.replace(/<li class\='vakata-context-separator'\><\/li\>$/, ""),
                                    i && (o += "</ul>"),
                                    i || (n.html = o,
                                        t.vakata.context._trigger("parse")),
                                    o.length > 10 && o
                            },
                            _show_submenu: function (n) {
                                if ((n = t(n)).length && n.children("ul").length) {
                                    var i = n.children("ul"),
                                        r = n.offset().left + n.outerWidth(),
                                        o = n.offset().top,
                                        s = i.width(),
                                        a = i.height(),
                                        l = t(window).width() + t(window).scrollLeft(),
                                        c = t(window).height() + t(window).scrollTop();
                                    e ? n[r - (s + 10 + n.outerWidth()) < 0 ? "addClass" : "removeClass"]("vakata-context-left") : n[r + s + 10 > l ? "addClass" : "removeClass"]("vakata-context-right"),
                                        o + a + 10 > c && i.css("bottom", "-1px"),
                                        i.show()
                                }
                            },
                            show: function (i, r, o) {
                                var s, a, l, c, u, h, d, f;
                                switch (n.element && n.element.length && n.element.width(""), !0) {
                                    case !r && !i:
                                        return !1;
                                    case !!r && !!i:
                                        n.reference = i,
                                            n.position_x = r.x,
                                            n.position_y = r.y;
                                        break;
                                    case !r && !!i:
                                        n.reference = i,
                                            s = i.offset(),
                                            n.position_x = s.left + i.outerHeight(),
                                            n.position_y = s.top;
                                        break;
                                    case !!r && !i:
                                        n.position_x = r.x,
                                            n.position_y = r.y
                                }
                                i && !o && t(i).data("vakata_contextmenu") && (o = t(i).data("vakata_contextmenu")),
                                    t.vakata.context._parse(o) && n.element.html(n.html),
                                    n.items.length && (n.element.appendTo("body"),
                                        a = n.element,
                                        l = n.position_x,
                                        c = n.position_y,
                                        u = a.width(),
                                        h = a.height(),
                                        d = t(window).width() + t(window).scrollLeft(),
                                        f = t(window).height() + t(window).scrollTop(),
                                        e && (l -= a.outerWidth() - t(i).outerWidth()) < t(window).scrollLeft() + 20 && (l = t(window).scrollLeft() + 20),
                                        l + u + 20 > d && (l = d - (u + 20)),
                                        c + h + 20 > f && (c = f - (h + 20)),
                                        n.element.css({
                                            left: l,
                                            top: c
                                        }).show().find("a").first().focus().parent().addClass("vakata-context-hover"),
                                        n.is_visible = !0,
                                        t.vakata.context._trigger("show"))
                            },
                            hide: function () {
                                n.is_visible && (n.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),
                                    n.is_visible = !1,
                                    t.vakata.context._trigger("hide"))
                            }
                        },
                        t(function () {
                            e = "rtl" === t("body").css("direction");
                            var i = !1;
                            n.element = t("<ul class='vakata-context'></ul>"),
                                n.element.on("mouseenter", "li", function (e) {
                                    e.stopImmediatePropagation(),
                                        t.contains(this, e.relatedTarget) || (i && clearTimeout(i),
                                            n.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),
                                            t(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context", "li").addBack().addClass("vakata-context-hover"),
                                            t.vakata.context._show_submenu(this))
                                }).on("mouseleave", "li", function (e) {
                                    t.contains(this, e.relatedTarget) || t(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")
                                }).on("mouseleave", function (e) {
                                    t(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),
                                        t.vakata.context.settings.hide_onmouseleave && (i = setTimeout(function () {
                                            t.vakata.context.hide()
                                        }, t.vakata.context.settings.hide_onmouseleave))
                                }).on("click", "a", function (e) {
                                    e.preventDefault(),
                                        t(this).blur().parent().hasClass("vakata-context-disabled") || !1 === t.vakata.context._execute(t(this).attr("rel")) || t.vakata.context.hide()
                                }).on("keydown", "a", function (e) {
                                    var i = null;
                                    switch (e.which) {
                                        case 13:
                                        case 32:
                                            e.type = "mouseup",
                                                e.preventDefault(),
                                                t(e.currentTarget).trigger(e);
                                            break;
                                        case 37:
                                            n.is_visible && (n.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),
                                                e.stopImmediatePropagation(),
                                                e.preventDefault());
                                            break;
                                        case 38:
                                            n.is_visible && ((i = n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first()).length || (i = n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),
                                                i.addClass("vakata-context-hover").children("a").focus(),
                                                e.stopImmediatePropagation(),
                                                e.preventDefault());
                                            break;
                                        case 39:
                                            n.is_visible && (n.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),
                                                e.stopImmediatePropagation(),
                                                e.preventDefault());
                                            break;
                                        case 40:
                                            n.is_visible && ((i = n.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first()).length || (i = n.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),
                                                i.addClass("vakata-context-hover").children("a").focus(),
                                                e.stopImmediatePropagation(),
                                                e.preventDefault());
                                            break;
                                        case 27:
                                            t.vakata.context.hide(),
                                                e.preventDefault()
                                    }
                                }).on("keydown", function (t) {
                                    t.preventDefault();
                                    var e = n.element.find(".vakata-contextmenu-shortcut-" + t.which).parent();
                                    e.parent().not(".vakata-context-disabled") && e.click()
                                }),
                                t(u).on("mousedown.vakata.jstree", function (e) {
                                    n.is_visible && !t.contains(n.element[0], e.target) && t.vakata.context.hide()
                                }).on("context_show.vakata.jstree", function (t, i) {
                                    n.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),
                                        e && n.element.addClass("vakata-context-rtl").css("direction", "rtl"),
                                        n.element.find("ul").hide().end()
                                })
                        })
                }(t),
                t.jstree.defaults.dnd = {
                    copy: !0,
                    open_timeout: 500,
                    is_draggable: !0,
                    check_while_dragging: !0,
                    always_copy: !1,
                    inside_pos: 0,
                    drag_selection: !0,
                    touch: !0,
                    large_drop_target: !1,
                    large_drag_target: !1
                },
                t.jstree.plugins.dnd = function (e, n) {
                    this.bind = function () {
                        n.bind.call(this),
                            this.element.on("mousedown.jstree touchstart.jstree", this.settings.dnd.large_drag_target ? ".jstree-node" : ".jstree-anchor", t.proxy(function (e) {
                                if (this.settings.dnd.large_drag_target && t(e.target).closest(".jstree-node")[0] !== e.currentTarget)
                                    return !0;
                                if ("touchstart" === e.type && (!this.settings.dnd.touch || "selected" === this.settings.dnd.touch && !t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))
                                    return !0;
                                var n = this.get_node(e.target),
                                    i = this.is_selected(n) && this.settings.dnd.drag_selection ? this.get_top_selected().length : 1,
                                    r = i > 1 ? i + " " + this.get_string("nodes") : this.get_text(e.currentTarget);
                                return this.settings.core.force_text && (r = t.vakata.html.escape(r)),
                                    n && n.id && "#" !== n.id && (1 === e.which || "touchstart" === e.type) && (!0 === this.settings.dnd.is_draggable || t.isFunction(this.settings.dnd.is_draggable) && this.settings.dnd.is_draggable.call(this, i > 1 ? this.get_top_selected(!0) : [n])) ? (this.element.trigger("mousedown.jstree"),
                                        t.vakata.dnd.start(e, {
                                            jstree: !0,
                                            origin: this,
                                            obj: this.get_node(n, !0),
                                            nodes: i > 1 ? this.get_top_selected() : [n.id]
                                        }, '<div id="jstree-dnd" class="jstree-' + this.get_theme() + " jstree-" + this.get_theme() + "-" + this.get_theme_variant() + " " + (this.settings.core.themes.responsive ? " jstree-dnd-responsive" : "") + '"><i class="jstree-icon jstree-er"></i>' + r + '<ins class="jstree-copy" style="display:none;">+</ins></div>')) : void 0
                            }, this))
                    }
                },
                t(function () {
                    var e = !1,
                        n = !1,
                        i = !1,
                        r = t('<div id="jstree-marker">&#160;</div>').hide();
                    t(u).on("dnd_start.vakata.jstree", function (t, n) {
                        e = !1,
                            n && n.data && n.data.jstree && r.appendTo("body")
                    }).on("dnd_move.vakata.jstree", function (o, s) {
                        if (i && clearTimeout(i),
                            s && s.data && s.data.jstree && (!s.event.target.id || "jstree-marker" !== s.event.target.id)) {
                            var a, l, c, u, h, d, f, p, g, _, y, v, m, b, w = t.jstree.reference(s.event.target),
                                x = !1,
                                E = !1,
                                k = !1;
                            if (w && w._data && w._data.dnd)
                                if (r.attr("class", "jstree-" + w.get_theme() + (w.settings.core.themes.responsive ? " jstree-dnd-responsive" : "")),
                                    s.helper.children().attr("class", "jstree-" + w.get_theme() + " jstree-" + w.get_theme() + "-" + w.get_theme_variant() + " " + (w.settings.core.themes.responsive ? " jstree-dnd-responsive" : "")).find(".jstree-copy").first()[s.data.origin && (s.data.origin.settings.dnd.always_copy || s.data.origin.settings.dnd.copy && (s.event.metaKey || s.event.ctrlKey)) ? "show" : "hide"](),
                                    s.event.target !== w.element[0] && s.event.target !== w.get_container_ul()[0] || 0 !== w.get_container_ul().children().length) {
                                    if ((x = w.settings.dnd.large_drop_target ? t(s.event.target).closest(".jstree-node").children(".jstree-anchor") : t(s.event.target).closest(".jstree-anchor")) && x.length && x.parent().is(".jstree-closed, .jstree-open, .jstree-leaf") && (E = x.offset(),
                                            k = s.event.pageY - E.top,
                                            c = x.outerHeight(),
                                            d = k < c / 3 ? ["b", "i", "a"] : k > c - c / 3 ? ["a", "i", "b"] : k > c / 2 ? ["i", "a", "b"] : ["i", "b", "a"],
                                            t.each(d, function (o, k) {
                                                switch (k) {
                                                    case "b":
                                                        a = E.left - 6,
                                                            l = E.top,
                                                            u = w.get_parent(x),
                                                            h = x.parent().index();
                                                        break;
                                                    case "i":
                                                        m = w.settings.dnd.inside_pos,
                                                            b = w.get_node(x.parent()),
                                                            a = E.left - 2,
                                                            l = E.top + c / 2 + 1,
                                                            u = b.id,
                                                            h = "first" === m ? 0 : "last" === m ? b.children.length : Math.min(m, b.children.length);
                                                        break;
                                                    case "a":
                                                        a = E.left - 6,
                                                            l = E.top + c,
                                                            u = w.get_parent(x),
                                                            h = x.parent().index() + 1
                                                }
                                                for (f = !0,
                                                    p = 0,
                                                    g = s.data.nodes.length; p < g; p++)
                                                    if (_ = s.data.origin && (s.data.origin.settings.dnd.always_copy || s.data.origin.settings.dnd.copy && (s.event.metaKey || s.event.ctrlKey)) ? "copy_node" : "move_node",
                                                        y = h,
                                                        "move_node" === _ && "a" === k && s.data.origin && s.data.origin === w && u === w.get_parent(s.data.nodes[p]) && (v = w.get_node(u),
                                                            y > t.inArray(s.data.nodes[p], v.children) && (y -= 1)), !(f = f && (w && w.settings && w.settings.dnd && !1 === w.settings.dnd.check_while_dragging || w.check(_, s.data.origin && s.data.origin !== w ? s.data.origin.get_node(s.data.nodes[p]) : s.data.nodes[p], u, y, {
                                                            dnd: !0,
                                                            ref: w.get_node(x.parent()),
                                                            pos: k,
                                                            origin: s.data.origin,
                                                            is_multi: s.data.origin && s.data.origin !== w,
                                                            is_foreign: !s.data.origin
                                                        })))) {
                                                        w && w.last_error && (n = w.last_error());
                                                        break
                                                    }
                                                if ("i" === k && x.parent().is(".jstree-closed") && w.settings.dnd.open_timeout && (i = setTimeout(function (t, e) {
                                                        return function () {
                                                            t.open_node(e)
                                                        }
                                                    }(w, x), w.settings.dnd.open_timeout)),
                                                    f)
                                                    return e = {
                                                            ins: w,
                                                            par: u,
                                                            pos: "i" !== k || "last" !== m || 0 !== h || w.is_loaded(b) ? h : "last"
                                                        },
                                                        r.css({
                                                            left: a + "px",
                                                            top: l + "px"
                                                        }).show(),
                                                        s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),
                                                        n = {},
                                                        d = !0, !1
                                            }), !0 === d))
                                        return
                                } else {
                                    for (f = !0,
                                        p = 0,
                                        g = s.data.nodes.length; p < g && (f = f && w.check(s.data.origin && (s.data.origin.settings.dnd.always_copy || s.data.origin.settings.dnd.copy && (s.event.metaKey || s.event.ctrlKey)) ? "copy_node" : "move_node", s.data.origin && s.data.origin !== w ? s.data.origin.get_node(s.data.nodes[p]) : s.data.nodes[p], "#", "last", {
                                            dnd: !0,
                                            ref: w.get_node("#"),
                                            pos: "i",
                                            origin: s.data.origin,
                                            is_multi: s.data.origin && s.data.origin !== w,
                                            is_foreign: !s.data.origin
                                        })); p++)
                                    ;
                                    if (f)
                                        return e = {
                                                ins: w,
                                                par: "#",
                                                pos: "last"
                                            },
                                            r.hide(),
                                            void s.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok")
                                }
                            e = !1,
                                s.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),
                                r.hide()
                        }
                    }).on("dnd_scroll.vakata.jstree", function (t, n) {
                        n && n.data && n.data.jstree && (r.hide(),
                            e = !1,
                            n.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))
                    }).on("dnd_stop.vakata.jstree", function (o, s) {
                        if (i && clearTimeout(i),
                            s && s.data && s.data.jstree) {
                            r.hide().detach();
                            var a, l, c = [];
                            if (e) {
                                for (a = 0,
                                    l = s.data.nodes.length; a < l; a++)
                                    c[a] = s.data.origin ? s.data.origin.get_node(s.data.nodes[a]) : s.data.nodes[a];
                                e.ins[s.data.origin && (s.data.origin.settings.dnd.always_copy || s.data.origin.settings.dnd.copy && (s.event.metaKey || s.event.ctrlKey)) ? "copy_node" : "move_node"](c, e.par, e.pos, !1, !1, !1, s.data.origin)
                            } else
                                (a = t(s.event.target).closest(".jstree")).length && n && n.error && "check" === n.error && (a = a.jstree(!0)) && a.settings.core.error.call(this, n)
                        }
                    }).on("keyup.jstree keydown.jstree", function (e, n) {
                        (n = t.vakata.dnd._get()) && n.data && n.data.jstree && n.helper.find(".jstree-copy").first()[n.data.origin && (n.data.origin.settings.dnd.always_copy || n.data.origin.settings.dnd.copy && (e.metaKey || e.ctrlKey)) ? "show" : "hide"]()
                    })
                }),
                function (t) {
                    t.vakata.html = {
                        div: t("<div />"),
                        escape: function (e) {
                            return t.vakata.html.div.text(e).html()
                        },
                        strip: function (e) {
                            return t.vakata.html.div.empty().append(t.parseHTML(e)).text()
                        }
                    };
                    var e = {
                        element: !1,
                        target: !1,
                        is_down: !1,
                        is_drag: !1,
                        helper: !1,
                        helper_w: 0,
                        data: !1,
                        init_x: 0,
                        init_y: 0,
                        scroll_l: 0,
                        scroll_t: 0,
                        scroll_e: !1,
                        scroll_i: !1,
                        is_touch: !1
                    };
                    t.vakata.dnd = {
                        settings: {
                            scroll_speed: 10,
                            scroll_proximity: 20,
                            helper_left: 5,
                            helper_top: 10,
                            threshold: 5,
                            threshold_touch: 50
                        },
                        _trigger: function (e, n) {
                            var i = t.vakata.dnd._get();
                            i.event = n,
                                t(u).triggerHandler("dnd_" + e + ".vakata", i)
                        },
                        _get: function () {
                            return {
                                data: e.data,
                                element: e.element,
                                helper: e.helper
                            }
                        },
                        _clean: function () {
                            e.helper && e.helper.remove(),
                                e.scroll_i && (clearInterval(e.scroll_i),
                                    e.scroll_i = !1),
                                e = {
                                    element: !1,
                                    target: !1,
                                    is_down: !1,
                                    is_drag: !1,
                                    helper: !1,
                                    helper_w: 0,
                                    data: !1,
                                    init_x: 0,
                                    init_y: 0,
                                    scroll_l: 0,
                                    scroll_t: 0,
                                    scroll_e: !1,
                                    scroll_i: !1,
                                    is_touch: !1
                                },
                                t(u).off("mousemove.vakata.jstree touchmove.vakata.jstree", t.vakata.dnd.drag),
                                t(u).off("mouseup.vakata.jstree touchend.vakata.jstree", t.vakata.dnd.stop)
                        },
                        _scroll: function (n) {
                            if (!e.scroll_e || !e.scroll_l && !e.scroll_t)
                                return e.scroll_i && (clearInterval(e.scroll_i),
                                    e.scroll_i = !1), !1;
                            if (!e.scroll_i)
                                return e.scroll_i = setInterval(t.vakata.dnd._scroll, 100), !1;
                            if (!0 === n)
                                return !1;
                            var i = e.scroll_e.scrollTop(),
                                r = e.scroll_e.scrollLeft();
                            e.scroll_e.scrollTop(i + e.scroll_t * t.vakata.dnd.settings.scroll_speed),
                                e.scroll_e.scrollLeft(r + e.scroll_l * t.vakata.dnd.settings.scroll_speed),
                                i === e.scroll_e.scrollTop() && r === e.scroll_e.scrollLeft() || t.vakata.dnd._trigger("scroll", e.scroll_e)
                        },
                        start: function (n, i, r) {
                            "touchstart" === n.type && n.originalEvent && n.originalEvent.changedTouches && n.originalEvent.changedTouches[0] && (n.pageX = n.originalEvent.changedTouches[0].pageX,
                                    n.pageY = n.originalEvent.changedTouches[0].pageY,
                                    n.target = u.elementFromPoint(n.originalEvent.changedTouches[0].pageX - window.pageXOffset, n.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                                e.is_drag && t.vakata.dnd.stop({});
                            try {
                                n.currentTarget.unselectable = "on",
                                    n.currentTarget.onselectstart = function () {
                                        return !1
                                    },
                                    n.currentTarget.style && (n.currentTarget.style.MozUserSelect = "none")
                            } catch (t) {}
                            return e.init_x = n.pageX,
                                e.init_y = n.pageY,
                                e.data = i,
                                e.is_down = !0,
                                e.element = n.currentTarget,
                                e.target = n.target,
                                e.is_touch = "touchstart" === n.type, !1 !== r && (e.helper = t("<div id='vakata-dnd'></div>").html(r).css({
                                    display: "block",
                                    margin: "0",
                                    padding: "0",
                                    position: "absolute",
                                    top: "-2000px",
                                    lineHeight: "16px",
                                    zIndex: "10000"
                                })),
                                t(u).on("mousemove.vakata.jstree touchmove.vakata.jstree", t.vakata.dnd.drag),
                                t(u).on("mouseup.vakata.jstree touchend.vakata.jstree", t.vakata.dnd.stop), !1
                        },
                        drag: function (n) {
                            if ("touchmove" === n.type && n.originalEvent && n.originalEvent.changedTouches && n.originalEvent.changedTouches[0] && (n.pageX = n.originalEvent.changedTouches[0].pageX,
                                    n.pageY = n.originalEvent.changedTouches[0].pageY,
                                    n.target = u.elementFromPoint(n.originalEvent.changedTouches[0].pageX - window.pageXOffset, n.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                                e.is_down) {
                                if (!e.is_drag) {
                                    if (!(Math.abs(n.pageX - e.init_x) > (e.is_touch ? t.vakata.dnd.settings.threshold_touch : t.vakata.dnd.settings.threshold) || Math.abs(n.pageY - e.init_y) > (e.is_touch ? t.vakata.dnd.settings.threshold_touch : t.vakata.dnd.settings.threshold)))
                                        return;
                                    e.helper && (e.helper.appendTo("body"),
                                            e.helper_w = e.helper.outerWidth()),
                                        e.is_drag = !0,
                                        t.vakata.dnd._trigger("start", n)
                                }
                                var i = !1,
                                    r = !1,
                                    o = !1,
                                    s = !1,
                                    a = !1,
                                    l = !1,
                                    c = !1,
                                    h = !1,
                                    d = !1,
                                    f = !1;
                                return e.scroll_t = 0,
                                    e.scroll_l = 0,
                                    e.scroll_e = !1,
                                    t(t(n.target).parentsUntil("body").addBack().get().reverse()).filter(function () {
                                        return /^auto|scroll$/.test(t(this).css("overflow")) && (this.scrollHeight > this.offsetHeight || this.scrollWidth > this.offsetWidth)
                                    }).each(function () {
                                        var i = t(this),
                                            r = i.offset();
                                        if (this.scrollHeight > this.offsetHeight && (r.top + i.height() - n.pageY < t.vakata.dnd.settings.scroll_proximity && (e.scroll_t = 1),
                                                n.pageY - r.top < t.vakata.dnd.settings.scroll_proximity && (e.scroll_t = -1)),
                                            this.scrollWidth > this.offsetWidth && (r.left + i.width() - n.pageX < t.vakata.dnd.settings.scroll_proximity && (e.scroll_l = 1),
                                                n.pageX - r.left < t.vakata.dnd.settings.scroll_proximity && (e.scroll_l = -1)),
                                            e.scroll_t || e.scroll_l)
                                            return e.scroll_e = t(this), !1
                                    }),
                                    e.scroll_e || (i = t(u),
                                        r = t(window),
                                        o = i.height(),
                                        s = r.height(),
                                        a = i.width(),
                                        l = r.width(),
                                        c = i.scrollTop(),
                                        h = i.scrollLeft(),
                                        o > s && n.pageY - c < t.vakata.dnd.settings.scroll_proximity && (e.scroll_t = -1),
                                        o > s && s - (n.pageY - c) < t.vakata.dnd.settings.scroll_proximity && (e.scroll_t = 1),
                                        a > l && n.pageX - h < t.vakata.dnd.settings.scroll_proximity && (e.scroll_l = -1),
                                        a > l && l - (n.pageX - h) < t.vakata.dnd.settings.scroll_proximity && (e.scroll_l = 1),
                                        (e.scroll_t || e.scroll_l) && (e.scroll_e = i)),
                                    e.scroll_e && t.vakata.dnd._scroll(!0),
                                    e.helper && (d = parseInt(n.pageY + t.vakata.dnd.settings.helper_top, 10),
                                        f = parseInt(n.pageX + t.vakata.dnd.settings.helper_left, 10),
                                        o && d + 25 > o && (d = o - 50),
                                        a && f + e.helper_w > a && (f = a - (e.helper_w + 2)),
                                        e.helper.css({
                                            left: f + "px",
                                            top: d + "px"
                                        })),
                                    t.vakata.dnd._trigger("move", n), !1
                            }
                        },
                        stop: function (n) {
                            if ("touchend" === n.type && n.originalEvent && n.originalEvent.changedTouches && n.originalEvent.changedTouches[0] && (n.pageX = n.originalEvent.changedTouches[0].pageX,
                                    n.pageY = n.originalEvent.changedTouches[0].pageY,
                                    n.target = u.elementFromPoint(n.originalEvent.changedTouches[0].pageX - window.pageXOffset, n.originalEvent.changedTouches[0].pageY - window.pageYOffset)),
                                e.is_drag)
                                t.vakata.dnd._trigger("stop", n);
                            else if ("touchend" === n.type && n.target === e.target) {
                                var i = setTimeout(function () {
                                    t(n.target).click()
                                }, 100);
                                t(n.target).one("click", function () {
                                    i && clearTimeout(i)
                                })
                            }
                            return t.vakata.dnd._clean(), !1
                        }
                    }
                }(t),
                t.jstree.defaults.massload = null,
                t.jstree.plugins.massload = function (e, n) {
                    this.init = function (t, e) {
                            n.init.call(this, t, e),
                                this._data.massload = {}
                        },
                        this._load_nodes = function (e, i, r) {
                            var o = this.settings.massload;
                            return r && !t.isEmptyObject(this._data.massload) ? n._load_nodes.call(this, e, i, r) : t.isFunction(o) ? o.call(this, e, t.proxy(function (t) {
                                if (t)
                                    for (var o in t)
                                        t.hasOwnProperty(o) && (this._data.massload[o] = t[o]);
                                n._load_nodes.call(this, e, i, r)
                            }, this)) : "object" == typeof o && o && o.url ? (o = t.extend(!0, {}, o),
                                t.isFunction(o.url) && (o.url = o.url.call(this, e)),
                                t.isFunction(o.data) && (o.data = o.data.call(this, e)),
                                t.ajax(o).done(t.proxy(function (t, o, s) {
                                    if (t)
                                        for (var a in t)
                                            t.hasOwnProperty(a) && (this._data.massload[a] = t[a]);
                                    n._load_nodes.call(this, e, i, r)
                                }, this)).fail(t.proxy(function (t) {
                                    n._load_nodes.call(this, e, i, r)
                                }, this))) : n._load_nodes.call(this, e, i, r)
                        },
                        this._load_node = function (e, i) {
                            var r = this._data.massload[e.id];
                            return r ? this["string" == typeof r ? "_append_html_data" : "_append_json_data"](e, "string" == typeof r ? t(t.parseHTML(r)).filter(function () {
                                return 3 !== this.nodeType
                            }) : r, function (t) {
                                i.call(this, t),
                                    delete this._data.massload[e.id]
                            }) : n._load_node.call(this, e, i)
                        }
                },
                t.jstree.defaults.search = {
                    ajax: !1,
                    fuzzy: !1,
                    case_sensitive: !1,
                    show_only_matches: !1,
                    show_only_matches_children: !1,
                    close_opened_onclear: !0,
                    search_leaves_only: !1,
                    search_callback: !1
                },
                t.jstree.plugins.search = function (n, i) {
                    this.bind = function () {
                            i.bind.call(this),
                                this._data.search.str = "",
                                this._data.search.dom = t(),
                                this._data.search.res = [],
                                this._data.search.opn = [],
                                this._data.search.som = !1,
                                this._data.search.smc = !1,
                                this.element.on("before_open.jstree", t.proxy(function (e, n) {
                                    var i, r, o = this._data.search.res,
                                        s = [],
                                        a = t();
                                    if (o && o.length && (this._data.search.dom = t(this.element[0].querySelectorAll("#" + t.map(o, function (e) {
                                                return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                                            }).join(", #"))),
                                            this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),
                                            this._data.search.som && this._data.search.res.length)) {
                                        for (i = 0,
                                            r = o.length; i < r; i++)
                                            s = s.concat(this.get_node(o[i]).parents);
                                        a = (s = t.vakata.array_remove_item(t.vakata.array_unique(s), "#")).length ? t(this.element[0].querySelectorAll("#" + t.map(s, function (e) {
                                                return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                                            }).join(", #"))) : t(),
                                            this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function () {
                                                return this.nextSibling
                                            }).removeClass("jstree-last"),
                                            a = a.add(this._data.search.dom),
                                            this._data.search.smc && this._data.search.dom.children(".jstree-children").find(".jstree-node").show(),
                                            a.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function () {
                                                t(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")
                                            })
                                    }
                                }, this)).on("search.jstree", t.proxy(function (e, n) {
                                    this._data.search.som && n.nodes.length && (this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function () {
                                            return this.nextSibling
                                        }).removeClass("jstree-last"),
                                        this._data.search.smc && n.nodes.children(".jstree-children").find(".jstree-node").show(),
                                        n.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function () {
                                            t(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")
                                        }))
                                }, this)).on("clear_search.jstree", t.proxy(function (t, e) {
                                    this._data.search.som && e.nodes.length && this.element.find(".jstree-node").css("display", "").filter(".jstree-last").filter(function () {
                                        return this.nextSibling
                                    }).removeClass("jstree-last")
                                }, this))
                        },
                        this.search = function (n, i, r, o, s, a) {
                            if (!1 === n || "" === t.trim(n.toString()))
                                return this.clear_search();
                            o = this.get_node(o),
                                o = o && o.id ? o.id : null,
                                n = n.toString();
                            var l = this.settings.search,
                                c = !!l.ajax && l.ajax,
                                u = this._model.data,
                                h = null,
                                d = [],
                                f = [];
                            if (this._data.search.res.length && !s && this.clear_search(),
                                r === e && (r = l.show_only_matches),
                                a === e && (a = l.show_only_matches_children), !i && !1 !== c)
                                return t.isFunction(c) ? c.call(this, n, t.proxy(function (e) {
                                    e && e.d && (e = e.d),
                                        this._load_nodes(t.isArray(e) ? t.vakata.array_unique(e) : [], function () {
                                            this.search(n, !0, r, o, s)
                                        }, !0)
                                }, this), o) : ((c = t.extend({}, c)).data || (c.data = {}),
                                    c.data.str = n,
                                    o && (c.data.inside = o),
                                    t.ajax(c).fail(t.proxy(function () {
                                        this._data.core.last_error = {
                                                error: "ajax",
                                                plugin: "search",
                                                id: "search_01",
                                                reason: "Could not load search parents",
                                                data: JSON.stringify(c)
                                            },
                                            this.settings.core.error.call(this, this._data.core.last_error)
                                    }, this)).done(t.proxy(function (e) {
                                        e && e.d && (e = e.d),
                                            this._load_nodes(t.isArray(e) ? t.vakata.array_unique(e) : [], function () {
                                                this.search(n, !0, r, o, s)
                                            }, !0)
                                    }, this)));
                            s || (this._data.search.str = n,
                                    this._data.search.dom = t(),
                                    this._data.search.res = [],
                                    this._data.search.opn = [],
                                    this._data.search.som = r,
                                    this._data.search.smc = a),
                                h = new t.vakata.search(n, !0, {
                                    caseSensitive: l.case_sensitive,
                                    fuzzy: l.fuzzy
                                }),
                                t.each(u[o || "#"].children_d, function (t, e) {
                                    var i = u[e];
                                    i.text && (l.search_callback && l.search_callback.call(this, n, i) || !l.search_callback && h.search(i.text).isMatch) && (!l.search_leaves_only || i.state.loaded && 0 === i.children.length) && (d.push(e),
                                        f = f.concat(i.parents))
                                }),
                                d.length && (f = t.vakata.array_unique(f),
                                    this._search_open(f),
                                    s ? (this._data.search.dom = this._data.search.dom.add(t(this.element[0].querySelectorAll("#" + t.map(d, function (e) {
                                            return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                                        }).join(", #")))),
                                        this._data.search.res = t.vakata.array_unique(this._data.search.res.concat(d))) : (this._data.search.dom = t(this.element[0].querySelectorAll("#" + t.map(d, function (e) {
                                            return -1 !== "0123456789".indexOf(e[0]) ? "\\3" + e[0] + " " + e.substr(1).replace(t.jstree.idregex, "\\$&") : e.replace(t.jstree.idregex, "\\$&")
                                        }).join(", #"))),
                                        this._data.search.res = d),
                                    this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),
                                this.trigger("search", {
                                    nodes: this._data.search.dom,
                                    str: n,
                                    res: this._data.search.res,
                                    show_only_matches: r
                                })
                        },
                        this.clear_search = function () {
                            this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),
                                this.settings.search.close_opened_onclear && this.close_node(this._data.search.opn, 0),
                                this.trigger("clear_search", {
                                    nodes: this._data.search.dom,
                                    str: this._data.search.str,
                                    res: this._data.search.res
                                }),
                                this._data.search.str = "",
                                this._data.search.res = [],
                                this._data.search.opn = [],
                                this._data.search.dom = t()
                        },
                        this._search_open = function (e) {
                            var n = this;
                            t.each(e.concat([]), function (i, r) {
                                if ("#" === r)
                                    return !0;
                                try {
                                    r = t("#" + r.replace(t.jstree.idregex, "\\$&"), n.element)
                                } catch (t) {}
                                r && r.length && n.is_closed(r) && (n._data.search.opn.push(r[0].id),
                                    n.open_node(r, function () {
                                        n._search_open(e)
                                    }, 0))
                            })
                        }
                },
                function (t) {
                    t.vakata.search = function (e, n, i) {
                            i = i || {}, !1 !== (i = t.extend({}, t.vakata.search.defaults, i)).fuzzy && (i.fuzzy = !0),
                                e = i.caseSensitive ? e : e.toLowerCase();
                            var r, o, s, a, l = i.location,
                                c = i.distance,
                                u = i.threshold,
                                h = e.length;
                            return h > 32 && (i.fuzzy = !1),
                                i.fuzzy && (r = 1 << h - 1,
                                    o = function () {
                                        var t = {},
                                            n = 0;
                                        for (n = 0; n < h; n++)
                                            t[e.charAt(n)] = 0;
                                        for (n = 0; n < h; n++)
                                            t[e.charAt(n)] |= 1 << h - n - 1;
                                        return t
                                    }(),
                                    s = function (t, e) {
                                        var n = t / h,
                                            i = Math.abs(l - e);
                                        return c ? n + i / c : i ? 1 : n
                                    }
                                ),
                                a = function (t) {
                                    if (t = i.caseSensitive ? t : t.toLowerCase(),
                                        e === t || -1 !== t.indexOf(e))
                                        return {
                                            isMatch: !0,
                                            score: 0
                                        };
                                    if (!i.fuzzy)
                                        return {
                                            isMatch: !1,
                                            score: 1
                                        };
                                    var n, a, c, d, f, p, g, _, y, v = t.length,
                                        m = u,
                                        b = t.indexOf(e, l),
                                        w = h + v,
                                        x = 1,
                                        E = [];
                                    for (-1 !== b && (m = Math.min(s(0, b), m), -1 !== (b = t.lastIndexOf(e, l + h)) && (m = Math.min(s(0, b), m))),
                                        b = -1,
                                        n = 0; n < h; n++) {
                                        for (c = 0,
                                            d = w; c < d;)
                                            s(n, l + d) <= m ? c = d : w = d,
                                            d = Math.floor((w - c) / 2 + c);
                                        for (w = d,
                                            p = Math.max(1, l - d + 1),
                                            g = Math.min(l + d, v) + h,
                                            (_ = new Array(g + 2))[g + 1] = (1 << n) - 1,
                                            a = g; a >= p; a--)
                                            if (y = o[t.charAt(a - 1)],
                                                _[a] = 0 === n ? (_[a + 1] << 1 | 1) & y : (_[a + 1] << 1 | 1) & y | (f[a + 1] | f[a]) << 1 | 1 | f[a + 1],
                                                _[a] & r && (x = s(n, a - 1)) <= m) {
                                                if (m = x,
                                                    b = a - 1,
                                                    E.push(b), !(b > l))
                                                    break;
                                                p = Math.max(1, 2 * l - b)
                                            }
                                        if (s(n + 1, l) > m)
                                            break;
                                        f = _
                                    }
                                    return {
                                        isMatch: b >= 0,
                                        score: x
                                    }
                                }, !0 === n ? {
                                    search: a
                                } : a(n)
                        },
                        t.vakata.search.defaults = {
                            location: 0,
                            distance: 100,
                            threshold: .6,
                            fuzzy: !1,
                            caseSensitive: !1
                        }
                }(t),
                t.jstree.defaults.sort = function (t, e) {
                    return this.get_text(t) > this.get_text(e) ? 1 : -1
                },
                t.jstree.plugins.sort = function (e, n) {
                    this.bind = function () {
                            n.bind.call(this),
                                this.element.on("model.jstree", t.proxy(function (t, e) {
                                    this.sort(e.parent, !0)
                                }, this)).on("rename_node.jstree create_node.jstree", t.proxy(function (t, e) {
                                    this.sort(e.parent || e.node.parent, !1),
                                        this.redraw_node(e.parent || e.node.parent, !0)
                                }, this)).on("move_node.jstree copy_node.jstree", t.proxy(function (t, e) {
                                    this.sort(e.parent, !1),
                                        this.redraw_node(e.parent, !0)
                                }, this))
                        },
                        this.sort = function (e, n) {
                            var i, r;
                            if ((e = this.get_node(e)) && e.children && e.children.length && (e.children.sort(t.proxy(this.settings.sort, this)),
                                    n))
                                for (i = 0,
                                    r = e.children_d.length; i < r; i++)
                                    this.sort(e.children_d[i], !1)
                        }
                };
            var f = !1;
            t.jstree.defaults.state = {
                    key: "jstree",
                    events: "changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",
                    ttl: !1,
                    filter: !1
                },
                t.jstree.plugins.state = function (e, n) {
                    this.bind = function () {
                            n.bind.call(this);
                            var e = t.proxy(function () {
                                this.element.on(this.settings.state.events, t.proxy(function () {
                                        f && clearTimeout(f),
                                            f = setTimeout(t.proxy(function () {
                                                this.save_state()
                                            }, this), 100)
                                    }, this)),
                                    this.trigger("state_ready")
                            }, this);
                            this.element.on("ready.jstree", t.proxy(function (t, n) {
                                this.element.one("restore_state.jstree", e),
                                    this.restore_state() || e()
                            }, this))
                        },
                        this.save_state = function () {
                            var e = {
                                state: this.get_state(),
                                ttl: this.settings.state.ttl,
                                sec: +new Date
                            };
                            t.vakata.storage.set(this.settings.state.key, JSON.stringify(e))
                        },
                        this.restore_state = function () {
                            var e = t.vakata.storage.get(this.settings.state.key);
                            if (e)
                                try {
                                    e = JSON.parse(e)
                                } catch (t) {
                                    return !1
                                }
                            return !(e && e.ttl && e.sec && +new Date - e.sec > e.ttl) && (e && e.state && (e = e.state),
                                e && t.isFunction(this.settings.state.filter) && (e = this.settings.state.filter.call(this, e)), !!e && (this.element.one("set_state.jstree", function (n, i) {
                                        i.instance.trigger("restore_state", {
                                            state: t.extend(!0, {}, e)
                                        })
                                    }),
                                    this.set_state(e), !0))
                        },
                        this.clear_state = function () {
                            return t.vakata.storage.del(this.settings.state.key)
                        }
                },
                function (t, e) {
                    t.vakata.storage = {
                        set: function (t, e) {
                            return window.localStorage.setItem(t, e)
                        },
                        get: function (t) {
                            return window.localStorage.getItem(t)
                        },
                        del: function (t) {
                            return window.localStorage.removeItem(t)
                        }
                    }
                }(t),
                t.jstree.defaults.types = {
                    "#": {},
                    default: {}
                },
                t.jstree.plugins.types = function (n, i) {
                    this.init = function (t, n) {
                            var r, o;
                            if (n && n.types && n.types.default)
                                for (r in n.types)
                                    if ("default" !== r && "#" !== r && n.types.hasOwnProperty(r))
                                        for (o in n.types.default)
                                            n.types.default.hasOwnProperty(o) && n.types[r][o] === e && (n.types[r][o] = n.types.default[o]);
                            i.init.call(this, t, n),
                                this._model.data["#"].type = "#"
                        },
                        this.refresh = function (t, e) {
                            i.refresh.call(this, t, e),
                                this._model.data["#"].type = "#"
                        },
                        this.bind = function () {
                            this.element.on("model.jstree", t.proxy(function (t, n) {
                                    var i, r, o = this._model.data,
                                        s = n.nodes,
                                        a = this.settings.types,
                                        l = "default";
                                    for (i = 0,
                                        r = s.length; i < r; i++)
                                        l = "default",
                                        o[s[i]].original && o[s[i]].original.type && a[o[s[i]].original.type] && (l = o[s[i]].original.type),
                                        o[s[i]].data && o[s[i]].data.jstree && o[s[i]].data.jstree.type && a[o[s[i]].data.jstree.type] && (l = o[s[i]].data.jstree.type),
                                        o[s[i]].type = l, !0 === o[s[i]].icon && a[l].icon !== e && (o[s[i]].icon = a[l].icon);
                                    o["#"].type = "#"
                                }, this)),
                                i.bind.call(this)
                        },
                        this.get_json = function (e, n, r) {
                            var o, s, a = this._model.data,
                                l = n ? t.extend(!0, {}, n, {
                                    no_id: !1
                                }) : {},
                                c = i.get_json.call(this, e, l, r);
                            if (!1 === c)
                                return !1;
                            if (t.isArray(c))
                                for (o = 0,
                                    s = c.length; o < s; o++)
                                    c[o].type = c[o].id && a[c[o].id] && a[c[o].id].type ? a[c[o].id].type : "default",
                                    n && n.no_id && (delete c[o].id,
                                        c[o].li_attr && c[o].li_attr.id && delete c[o].li_attr.id,
                                        c[o].a_attr && c[o].a_attr.id && delete c[o].a_attr.id);
                            else
                                c.type = c.id && a[c.id] && a[c.id].type ? a[c.id].type : "default",
                                n && n.no_id && (c = this._delete_ids(c));
                            return c
                        },
                        this._delete_ids = function (e) {
                            if (t.isArray(e)) {
                                for (var n = 0, i = e.length; n < i; n++)
                                    e[n] = this._delete_ids(e[n]);
                                return e
                            }
                            return delete e.id,
                                e.li_attr && e.li_attr.id && delete e.li_attr.id,
                                e.a_attr && e.a_attr.id && delete e.a_attr.id,
                                e.children && t.isArray(e.children) && (e.children = this._delete_ids(e.children)),
                                e
                        },
                        this.check = function (n, r, o, s, a) {
                            if (!1 === i.check.call(this, n, r, o, s, a))
                                return !1;
                            r = r && r.id ? r : this.get_node(r),
                                o = o && o.id ? o : this.get_node(o);
                            var l, c, u, h, d = r && r.id ? a && a.origin ? a.origin : t.jstree.reference(r.id) : null;
                            switch (d = d && d._model && d._model.data ? d._model.data : null,
                                n) {
                                case "create_node":
                                case "move_node":
                                case "copy_node":
                                    if ("move_node" !== n || -1 === t.inArray(r.id, o.children)) {
                                        if ((l = this.get_rules(o)).max_children !== e && -1 !== l.max_children && l.max_children === o.children.length)
                                            return this._data.core.last_error = {
                                                error: "check",
                                                plugin: "types",
                                                id: "types_01",
                                                reason: "max_children prevents function: " + n,
                                                data: JSON.stringify({
                                                    chk: n,
                                                    pos: s,
                                                    obj: !(!r || !r.id) && r.id,
                                                    par: !(!o || !o.id) && o.id
                                                })
                                            }, !1;
                                        if (l.valid_children !== e && -1 !== l.valid_children && -1 === t.inArray(r.type || "default", l.valid_children))
                                            return this._data.core.last_error = {
                                                error: "check",
                                                plugin: "types",
                                                id: "types_02",
                                                reason: "valid_children prevents function: " + n,
                                                data: JSON.stringify({
                                                    chk: n,
                                                    pos: s,
                                                    obj: !(!r || !r.id) && r.id,
                                                    par: !(!o || !o.id) && o.id
                                                })
                                            }, !1;
                                        if (d && r.children_d && r.parents) {
                                            for (c = 0,
                                                u = 0,
                                                h = r.children_d.length; u < h; u++)
                                                c = Math.max(c, d[r.children_d[u]].parents.length);
                                            c = c - r.parents.length + 1
                                        }
                                        (c <= 0 || c === e) && (c = 1);
                                        do {
                                            if (l.max_depth !== e && -1 !== l.max_depth && l.max_depth < c)
                                                return this._data.core.last_error = {
                                                    error: "check",
                                                    plugin: "types",
                                                    id: "types_03",
                                                    reason: "max_depth prevents function: " + n,
                                                    data: JSON.stringify({
                                                        chk: n,
                                                        pos: s,
                                                        obj: !(!r || !r.id) && r.id,
                                                        par: !(!o || !o.id) && o.id
                                                    })
                                                }, !1;
                                            o = this.get_node(o.parent),
                                                l = this.get_rules(o),
                                                c++
                                        } while (o)
                                    }
                            }
                            return !0
                        },
                        this.get_rules = function (t) {
                            if (!(t = this.get_node(t)))
                                return !1;
                            var n = this.get_type(t, !0);
                            return n.max_depth === e && (n.max_depth = -1),
                                n.max_children === e && (n.max_children = -1),
                                n.valid_children === e && (n.valid_children = -1),
                                n
                        },
                        this.get_type = function (e, n) {
                            return !!(e = this.get_node(e)) && (n ? t.extend({
                                type: e.type
                            }, this.settings.types[e.type]) : e.type)
                        },
                        this.set_type = function (n, i) {
                            var r, o, s, a, l;
                            if (t.isArray(n)) {
                                for (o = 0,
                                    s = (n = n.slice()).length; o < s; o++)
                                    this.set_type(n[o], i);
                                return !0
                            }
                            return r = this.settings.types,
                                n = this.get_node(n), !(!r[i] || !n) && (a = n.type,
                                    l = this.get_icon(n),
                                    n.type = i,
                                    (!0 === l || r[a] && r[a].icon !== e && l === r[a].icon) && this.set_icon(n, r[i].icon === e || r[i].icon), !0)
                        }
                },
                t.jstree.defaults.unique = {
                    case_sensitive: !1,
                    duplicate: function (t, e) {
                        return t + " (" + e + ")"
                    }
                },
                t.jstree.plugins.unique = function (n, i) {
                    this.check = function (e, n, r, o, s) {
                            if (!1 === i.check.call(this, e, n, r, o, s))
                                return !1;
                            if (n = n && n.id ? n : this.get_node(n), !(r = r && r.id ? r : this.get_node(r)) || !r.children)
                                return !0;
                            var a, l, c = "rename_node" === e ? o : n.text,
                                u = [],
                                h = this.settings.unique.case_sensitive,
                                d = this._model.data;
                            for (a = 0,
                                l = r.children.length; a < l; a++)
                                u.push(h ? d[r.children[a]].text : d[r.children[a]].text.toLowerCase());
                            switch (h || (c = c.toLowerCase()),
                                e) {
                                case "delete_node":
                                    return !0;
                                case "rename_node":
                                    return (a = -1 === t.inArray(c, u) || n.text && n.text[h ? "toString" : "toLowerCase"]() === c) || (this._data.core.last_error = {
                                            error: "check",
                                            plugin: "unique",
                                            id: "unique_01",
                                            reason: "Child with name " + c + " already exists. Preventing: " + e,
                                            data: JSON.stringify({
                                                chk: e,
                                                pos: o,
                                                obj: !(!n || !n.id) && n.id,
                                                par: !(!r || !r.id) && r.id
                                            })
                                        }),
                                        a;
                                case "create_node":
                                    return (a = -1 === t.inArray(c, u)) || (this._data.core.last_error = {
                                            error: "check",
                                            plugin: "unique",
                                            id: "unique_04",
                                            reason: "Child with name " + c + " already exists. Preventing: " + e,
                                            data: JSON.stringify({
                                                chk: e,
                                                pos: o,
                                                obj: !(!n || !n.id) && n.id,
                                                par: !(!r || !r.id) && r.id
                                            })
                                        }),
                                        a;
                                case "copy_node":
                                    return (a = -1 === t.inArray(c, u)) || (this._data.core.last_error = {
                                            error: "check",
                                            plugin: "unique",
                                            id: "unique_02",
                                            reason: "Child with name " + c + " already exists. Preventing: " + e,
                                            data: JSON.stringify({
                                                chk: e,
                                                pos: o,
                                                obj: !(!n || !n.id) && n.id,
                                                par: !(!r || !r.id) && r.id
                                            })
                                        }),
                                        a;
                                case "move_node":
                                    return (a = n.parent === r.id && (!s || !s.is_multi) || -1 === t.inArray(c, u)) || (this._data.core.last_error = {
                                            error: "check",
                                            plugin: "unique",
                                            id: "unique_03",
                                            reason: "Child with name " + c + " already exists. Preventing: " + e,
                                            data: JSON.stringify({
                                                chk: e,
                                                pos: o,
                                                obj: !(!n || !n.id) && n.id,
                                                par: !(!r || !r.id) && r.id
                                            })
                                        }),
                                        a
                            }
                            return !0
                        },
                        this.create_node = function (n, r, o, s, a) {
                            if (!r || r.text === e) {
                                if (null === n && (n = "#"), !(n = this.get_node(n)))
                                    return i.create_node.call(this, n, r, o, s, a);
                                if (!(o = o === e ? "last" : o).toString().match(/^(before|after)$/) && !a && !this.is_loaded(n))
                                    return i.create_node.call(this, n, r, o, s, a);
                                r || (r = {});
                                var l, c, u, h, d, f = this._model.data,
                                    p = this.settings.unique.case_sensitive,
                                    g = this.settings.unique.duplicate;
                                for (c = l = this.get_string("New node"),
                                    u = [],
                                    h = 0,
                                    d = n.children.length; h < d; h++)
                                    u.push(p ? f[n.children[h]].text : f[n.children[h]].text.toLowerCase());
                                for (h = 1; - 1 !== t.inArray(p ? c : c.toLowerCase(), u);)
                                    c = g.call(this, l, ++h).toString();
                                r.text = c
                            }
                            return i.create_node.call(this, n, r, o, s, a)
                        }
                };
            var p = u.createElement("DIV");
            if (p.setAttribute("unselectable", "on"),
                p.setAttribute("role", "presentation"),
                p.className = "jstree-wholerow",
                p.innerHTML = "&#160;",
                t.jstree.plugins.wholerow = function (e, n) {
                    this.bind = function () {
                            n.bind.call(this),
                                this.element.on("ready.jstree set_state.jstree", t.proxy(function () {
                                    this.hide_dots()
                                }, this)).on("init.jstree loading.jstree ready.jstree", t.proxy(function () {
                                    this.get_container_ul().addClass("jstree-wholerow-ul")
                                }, this)).on("deselect_all.jstree", t.proxy(function (t, e) {
                                    this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")
                                }, this)).on("changed.jstree", t.proxy(function (t, e) {
                                    this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");
                                    var n, i, r = !1;
                                    for (n = 0,
                                        i = e.selected.length; n < i; n++)
                                        (r = this.get_node(e.selected[n], !0)) && r.length && r.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")
                                }, this)).on("open_node.jstree", t.proxy(function (t, e) {
                                    this.get_node(e.node, !0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")
                                }, this)).on("hover_node.jstree dehover_node.jstree", t.proxy(function (t, e) {
                                    "hover_node" === t.type && this.is_disabled(e.node) || this.get_node(e.node, !0).children(".jstree-wholerow")["hover_node" === t.type ? "addClass" : "removeClass"]("jstree-wholerow-hovered")
                                }, this)).on("contextmenu.jstree", ".jstree-wholerow", t.proxy(function (e) {
                                    e.preventDefault();
                                    var n = t.Event("contextmenu", {
                                        metaKey: e.metaKey,
                                        ctrlKey: e.ctrlKey,
                                        altKey: e.altKey,
                                        shiftKey: e.shiftKey,
                                        pageX: e.pageX,
                                        pageY: e.pageY
                                    });
                                    t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)
                                }, this)).on("click.jstree", ".jstree-wholerow", function (e) {
                                    e.stopImmediatePropagation();
                                    var n = t.Event("click", {
                                        metaKey: e.metaKey,
                                        ctrlKey: e.ctrlKey,
                                        altKey: e.altKey,
                                        shiftKey: e.shiftKey
                                    });
                                    t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()
                                }).on("click.jstree", ".jstree-leaf > .jstree-ocl", t.proxy(function (e) {
                                    e.stopImmediatePropagation();
                                    var n = t.Event("click", {
                                        metaKey: e.metaKey,
                                        ctrlKey: e.ctrlKey,
                                        altKey: e.altKey,
                                        shiftKey: e.shiftKey
                                    });
                                    t(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()
                                }, this)).on("mouseover.jstree", ".jstree-wholerow, .jstree-icon", t.proxy(function (t) {
                                    return t.stopImmediatePropagation(),
                                        this.is_disabled(t.currentTarget) || this.hover_node(t.currentTarget), !1
                                }, this)).on("mouseleave.jstree", ".jstree-node", t.proxy(function (t) {
                                    this.dehover_node(t.currentTarget)
                                }, this))
                        },
                        this.teardown = function () {
                            this.settings.wholerow && this.element.find(".jstree-wholerow").remove(),
                                n.teardown.call(this)
                        },
                        this.redraw_node = function (e, i, r, o) {
                            if (e = n.redraw_node.apply(this, arguments)) {
                                var s = p.cloneNode(!0); -
                                1 !== t.inArray(e.id, this._data.core.selected) && (s.className += " jstree-wholerow-clicked"),
                                    this._data.core.focused && this._data.core.focused === e.id && (s.className += " jstree-wholerow-hovered"),
                                    e.insertBefore(s, e.childNodes[0])
                            }
                            return e
                        }
                },
                u.registerElement && Object && Object.create) {
                var g = Object.create(HTMLElement.prototype);
                g.createdCallback = function () {
                    var e, n = {
                        core: {},
                        plugins: []
                    };
                    for (e in t.jstree.plugins)
                        t.jstree.plugins.hasOwnProperty(e) && this.attributes[e] && (n.plugins.push(e),
                            this.getAttribute(e) && JSON.parse(this.getAttribute(e)) && (n[e] = JSON.parse(this.getAttribute(e))));
                    for (e in t.jstree.defaults.core)
                        t.jstree.defaults.core.hasOwnProperty(e) && this.attributes[e] && (n.core[e] = JSON.parse(this.getAttribute(e)) || this.getAttribute(e));
                    t(this).jstree(n)
                };
                try {
                    u.registerElement("vakata-jstree", {
                        prototype: g
                    })
                } catch (t) {}
            }
        }
    }),
    function (t, e) {
        "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Quill = e() : t.Quill = e()
    }(this, function () {
        return function (t) {
            function e(i) {
                if (n[i])
                    return n[i].exports;
                var r = n[i] = {
                    i: i,
                    l: !1,
                    exports: {}
                };
                return t[i].call(r.exports, r, r.exports, e),
                    r.l = !0,
                    r.exports
            }
            var n = {};
            return e.m = t,
                e.c = n,
                e.d = function (t, n, i) {
                    e.o(t, n) || Object.defineProperty(t, n, {
                        configurable: !1,
                        enumerable: !0,
                        get: i
                    })
                },
                e.n = function (t) {
                    var n = t && t.__esModule ? function () {
                            return t.default
                        } :
                        function () {
                            return t
                        };
                    return e.d(n, "a", n),
                        n
                },
                e.o = function (t, e) {
                    return Object.prototype.hasOwnProperty.call(t, e)
                },
                e.p = "",
                e(e.s = 109)
        }([function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = n(17),
                r = n(18),
                o = n(19),
                s = n(45),
                a = n(46),
                l = n(47),
                c = n(48),
                u = n(49),
                h = n(12),
                d = n(32),
                f = n(33),
                p = n(31),
                g = n(1),
                _ = {
                    Scope: g.Scope,
                    create: g.create,
                    find: g.find,
                    query: g.query,
                    register: g.register,
                    Container: i.default,
                    Format: r.default,
                    Leaf: o.default,
                    Embed: c.default,
                    Scroll: s.default,
                    Block: l.default,
                    Inline: a.default,
                    Text: u.default,
                    Attributor: {
                        Attribute: h.default,
                        Class: d.default,
                        Style: f.default,
                        Store: p.default
                    }
                };
            e.default = _
        }, function (t, e, n) {
            "use strict";

            function i(t, n) {
                return void 0 === n && (n = !1),
                    null == t ? null : null != t[e.DATA_KEY] ? t[e.DATA_KEY].blot : n ? i(t.parentNode, n) : null
            }

            function r(t, e) {
                void 0 === e && (e = d.ANY);
                var n;
                if ("string" == typeof t)
                    n = h[t] || l[t];
                else if (t instanceof Text || t.nodeType === Node.TEXT_NODE)
                    n = h.text;
                else if ("number" == typeof t)
                    t & d.LEVEL & d.BLOCK ? n = h.block : t & d.LEVEL & d.INLINE && (n = h.inline);
                else if (t instanceof HTMLElement) {
                    var i = (t.getAttribute("class") || "").split(/\s+/);
                    for (var r in i)
                        if (n = c[i[r]])
                            break;
                    n = n || u[t.tagName]
                }
                return null == n ? null : e & d.LEVEL & n.scope && e & d.TYPE & n.scope ? n : null
            }

            function o() {
                for (var t = [], e = 0; e < arguments.length; e++)
                    t[e] = arguments[e];
                if (t.length > 1)
                    return t.map(function (t) {
                        return o(t)
                    });
                var n = t[0];
                if ("string" != typeof n.blotName && "string" != typeof n.attrName)
                    throw new a("Invalid definition");
                if ("abstract" === n.blotName)
                    throw new a("Cannot register abstract class");
                return h[n.blotName || n.attrName] = n,
                    "string" == typeof n.keyName ? l[n.keyName] = n : (null != n.className && (c[n.className] = n),
                        null != n.tagName && (Array.isArray(n.tagName) ? n.tagName = n.tagName.map(function (t) {
                                return t.toUpperCase()
                            }) : n.tagName = n.tagName.toUpperCase(),
                            (Array.isArray(n.tagName) ? n.tagName : [n.tagName]).forEach(function (t) {
                                null != u[t] && null != n.className || (u[t] = n)
                            }))),
                    n
            }
            var s = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function (t) {
                function e(e) {
                    var n = this;
                    return e = "[Parchment] " + e,
                        n = t.call(this, e) || this,
                        n.message = e,
                        n.name = n.constructor.name,
                        n
                }
                return s(e, t),
                    e
            }(Error);
            e.ParchmentError = a;
            var l = {},
                c = {},
                u = {},
                h = {};
            e.DATA_KEY = "__blot";
            var d;
            ! function (t) {
                t[t.TYPE = 3] = "TYPE",
                    t[t.LEVEL = 12] = "LEVEL",
                    t[t.ATTRIBUTE = 13] = "ATTRIBUTE",
                    t[t.BLOT = 14] = "BLOT",
                    t[t.INLINE = 7] = "INLINE",
                    t[t.BLOCK = 11] = "BLOCK",
                    t[t.BLOCK_BLOT = 10] = "BLOCK_BLOT",
                    t[t.INLINE_BLOT = 6] = "INLINE_BLOT",
                    t[t.BLOCK_ATTRIBUTE = 9] = "BLOCK_ATTRIBUTE",
                    t[t.INLINE_ATTRIBUTE = 5] = "INLINE_ATTRIBUTE",
                    t[t.ANY = 15] = "ANY"
            }(d = e.Scope || (e.Scope = {})),
            e.create = function (t, e) {
                    var n = r(t);
                    if (null == n)
                        throw new a("Unable to create " + t + " blot");
                    var i = n;
                    return new i(t instanceof Node || t.nodeType === Node.TEXT_NODE ? t : i.create(e), e)
                },
                e.find = i,
                e.query = r,
                e.register = o
        }, function (t, e, n) {
            var i = n(51),
                r = n(11),
                o = n(3),
                s = n(20),
                a = String.fromCharCode(0),
                l = function (t) {
                    Array.isArray(t) ? this.ops = t : null != t && Array.isArray(t.ops) ? this.ops = t.ops : this.ops = []
                };
            l.prototype.insert = function (t, e) {
                    var n = {};
                    return 0 === t.length ? this : (n.insert = t,
                        null != e && "object" == typeof e && Object.keys(e).length > 0 && (n.attributes = e),
                        this.push(n))
                },
                l.prototype.delete = function (t) {
                    return t <= 0 ? this : this.push({
                        delete: t
                    })
                },
                l.prototype.retain = function (t, e) {
                    if (t <= 0)
                        return this;
                    var n = {
                        retain: t
                    };
                    return null != e && "object" == typeof e && Object.keys(e).length > 0 && (n.attributes = e),
                        this.push(n)
                },
                l.prototype.push = function (t) {
                    var e = this.ops.length,
                        n = this.ops[e - 1];
                    if (t = o(!0, {}, t),
                        "object" == typeof n) {
                        if ("number" == typeof t.delete && "number" == typeof n.delete)
                            return this.ops[e - 1] = {
                                    delete: n.delete + t.delete
                                },
                                this;
                        if ("number" == typeof n.delete && null != t.insert && (e -= 1,
                                "object" != typeof (n = this.ops[e - 1])))
                            return this.ops.unshift(t),
                                this;
                        if (r(t.attributes, n.attributes)) {
                            if ("string" == typeof t.insert && "string" == typeof n.insert)
                                return this.ops[e - 1] = {
                                        insert: n.insert + t.insert
                                    },
                                    "object" == typeof t.attributes && (this.ops[e - 1].attributes = t.attributes),
                                    this;
                            if ("number" == typeof t.retain && "number" == typeof n.retain)
                                return this.ops[e - 1] = {
                                        retain: n.retain + t.retain
                                    },
                                    "object" == typeof t.attributes && (this.ops[e - 1].attributes = t.attributes),
                                    this
                        }
                    }
                    return e === this.ops.length ? this.ops.push(t) : this.ops.splice(e, 0, t),
                        this
                },
                l.prototype.chop = function () {
                    var t = this.ops[this.ops.length - 1];
                    return t && t.retain && !t.attributes && this.ops.pop(),
                        this
                },
                l.prototype.filter = function (t) {
                    return this.ops.filter(t)
                },
                l.prototype.forEach = function (t) {
                    this.ops.forEach(t)
                },
                l.prototype.map = function (t) {
                    return this.ops.map(t)
                },
                l.prototype.partition = function (t) {
                    var e = [],
                        n = [];
                    return this.forEach(function (i) {
                        (t(i) ? e : n).push(i)
                    }), [e, n]
                },
                l.prototype.reduce = function (t, e) {
                    return this.ops.reduce(t, e)
                },
                l.prototype.changeLength = function () {
                    return this.reduce(function (t, e) {
                        return e.insert ? t + s.length(e) : e.delete ? t - e.delete : t
                    }, 0)
                },
                l.prototype.length = function () {
                    return this.reduce(function (t, e) {
                        return t + s.length(e)
                    }, 0)
                },
                l.prototype.slice = function (t, e) {
                    t = t || 0,
                        "number" != typeof e && (e = 1 / 0);
                    for (var n = [], i = s.iterator(this.ops), r = 0; r < e && i.hasNext();) {
                        var o;
                        r < t ? o = i.next(t - r) : (o = i.next(e - r),
                                n.push(o)),
                            r += s.length(o)
                    }
                    return new l(n)
                },
                l.prototype.compose = function (t) {
                    for (var e = s.iterator(this.ops), n = s.iterator(t.ops), i = new l; e.hasNext() || n.hasNext();)
                        if ("insert" === n.peekType())
                            i.push(n.next());
                        else if ("delete" === e.peekType())
                        i.push(e.next());
                    else {
                        var r = Math.min(e.peekLength(), n.peekLength()),
                            o = e.next(r),
                            a = n.next(r);
                        if ("number" == typeof a.retain) {
                            var c = {};
                            "number" == typeof o.retain ? c.retain = r : c.insert = o.insert;
                            var u = s.attributes.compose(o.attributes, a.attributes, "number" == typeof o.retain);
                            u && (c.attributes = u),
                                i.push(c)
                        } else
                            "number" == typeof a.delete && "number" == typeof o.retain && i.push(a)
                    }
                    return i.chop()
                },
                l.prototype.concat = function (t) {
                    var e = new l(this.ops.slice());
                    return t.ops.length > 0 && (e.push(t.ops[0]),
                            e.ops = e.ops.concat(t.ops.slice(1))),
                        e
                },
                l.prototype.diff = function (t, e) {
                    if (this.ops === t.ops)
                        return new l;
                    var n = [this, t].map(function (e) {
                            return e.map(function (n) {
                                if (null != n.insert)
                                    return "string" == typeof n.insert ? n.insert : a;
                                var i = e === t ? "on" : "with";
                                throw new Error("diff() called " + i + " non-document")
                            }).join("")
                        }),
                        o = new l,
                        c = i(n[0], n[1], e),
                        u = s.iterator(this.ops),
                        h = s.iterator(t.ops);
                    return c.forEach(function (t) {
                            for (var e = t[1].length; e > 0;) {
                                var n = 0;
                                switch (t[0]) {
                                    case i.INSERT:
                                        n = Math.min(h.peekLength(), e),
                                            o.push(h.next(n));
                                        break;
                                    case i.DELETE:
                                        n = Math.min(e, u.peekLength()),
                                            u.next(n),
                                            o.delete(n);
                                        break;
                                    case i.EQUAL:
                                        n = Math.min(u.peekLength(), h.peekLength(), e);
                                        var a = u.next(n),
                                            l = h.next(n);
                                        r(a.insert, l.insert) ? o.retain(n, s.attributes.diff(a.attributes, l.attributes)) : o.push(l).delete(n)
                                }
                                e -= n
                            }
                        }),
                        o.chop()
                },
                l.prototype.eachLine = function (t, e) {
                    e = e || "\n";
                    for (var n = s.iterator(this.ops), i = new l, r = 0; n.hasNext();) {
                        if ("insert" !== n.peekType())
                            return;
                        var o = n.peek(),
                            a = s.length(o) - n.peekLength(),
                            c = "string" == typeof o.insert ? o.insert.indexOf(e, a) - a : -1;
                        if (c < 0)
                            i.push(n.next());
                        else if (c > 0)
                            i.push(n.next(c));
                        else {
                            if (!1 === t(i, n.next(1).attributes || {}, r))
                                return;
                            r += 1,
                                i = new l
                        }
                    }
                    i.length() > 0 && t(i, {}, r)
                },
                l.prototype.transform = function (t, e) {
                    if (e = !!e,
                        "number" == typeof t)
                        return this.transformPosition(t, e);
                    for (var n = s.iterator(this.ops), i = s.iterator(t.ops), r = new l; n.hasNext() || i.hasNext();)
                        if ("insert" !== n.peekType() || !e && "insert" === i.peekType())
                            if ("insert" === i.peekType())
                                r.push(i.next());
                            else {
                                var o = Math.min(n.peekLength(), i.peekLength()),
                                    a = n.next(o),
                                    c = i.next(o);
                                if (a.delete)
                                    continue;
                                c.delete ? r.push(c) : r.retain(o, s.attributes.transform(a.attributes, c.attributes, e))
                            }
                    else
                        r.retain(s.length(n.next()));
                    return r.chop()
                },
                l.prototype.transformPosition = function (t, e) {
                    e = !!e;
                    for (var n = s.iterator(this.ops), i = 0; n.hasNext() && i <= t;) {
                        var r = n.peekLength(),
                            o = n.peekType();
                        n.next(),
                            "delete" !== o ? ("insert" === o && (i < t || !e) && (t += r),
                                i += r) : t -= Math.min(r, t - i)
                    }
                    return t
                },
                t.exports = l
        }, function (t, e) {
            "use strict";
            var n = Object.prototype.hasOwnProperty,
                i = Object.prototype.toString,
                r = function (t) {
                    return "function" == typeof Array.isArray ? Array.isArray(t) : "[object Array]" === i.call(t)
                },
                o = function (t) {
                    if (!t || "[object Object]" !== i.call(t))
                        return !1;
                    var e = n.call(t, "constructor"),
                        r = t.constructor && t.constructor.prototype && n.call(t.constructor.prototype, "isPrototypeOf");
                    if (t.constructor && !e && !r)
                        return !1;
                    var o;
                    for (o in t)
                    ;
                    return void 0 === o || n.call(t, o)
                };
            t.exports = function t() {
                var e, n, i, s, a, l, c = arguments[0],
                    u = 1,
                    h = arguments.length,
                    d = !1;
                for ("boolean" == typeof c && (d = c,
                        c = arguments[1] || {},
                        u = 2),
                    (null == c || "object" != typeof c && "function" != typeof c) && (c = {}); u < h; ++u)
                    if (null != (e = arguments[u]))
                        for (n in e)
                            i = c[n],
                            c !== (s = e[n]) && (d && s && (o(s) || (a = r(s))) ? (a ? (a = !1,
                                    l = i && r(i) ? i : []) : l = i && o(i) ? i : {},
                                c[n] = t(d, l, s)) : void 0 !== s && (c[n] = s));
                return c
            }
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t) {
                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return null == t ? e : ("function" == typeof t.formats && (e = (0,
                        u.default)(e, t.formats())),
                    null == t.parent || "scroll" == t.parent.blotName || t.parent.statics.scope !== t.statics.scope ? e : a(t.parent, e))
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.BlockEmbed = e.bubbleFormats = void 0;
            var l = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                c = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                u = i(n(3)),
                h = i(n(2)),
                d = i(n(0)),
                f = i(n(16)),
                p = i(n(6)),
                g = i(n(7)),
                _ = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, d.default.Embed),
                        l(e, [{
                            key: "attach",
                            value: function () {
                                c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "attach", this).call(this),
                                    this.attributes = new d.default.Attributor.Store(this.domNode)
                            }
                        }, {
                            key: "delta",
                            value: function () {
                                return (new h.default).insert(this.value(), (0,
                                    u.default)(this.formats(), this.attributes.values()))
                            }
                        }, {
                            key: "format",
                            value: function (t, e) {
                                var n = d.default.query(t, d.default.Scope.BLOCK_ATTRIBUTE);
                                null != n && this.attributes.attribute(n, e)
                            }
                        }, {
                            key: "formatAt",
                            value: function (t, e, n, i) {
                                this.format(n, i)
                            }
                        }, {
                            key: "insertAt",
                            value: function (t, n, i) {
                                if ("string" == typeof n && n.endsWith("\n")) {
                                    var r = d.default.create(y.blotName);
                                    this.parent.insertBefore(r, 0 === t ? this : this.next),
                                        r.insertAt(0, n.slice(0, -1))
                                } else
                                    c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, i)
                            }
                        }]),
                        e
                }();
            _.scope = d.default.Scope.BLOCK_BLOT;
            var y = function (t) {
                function e(t) {
                    r(this, e);
                    var n = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                    return n.cache = {},
                        n
                }
                return s(e, d.default.Block),
                    l(e, [{
                        key: "delta",
                        value: function () {
                            return null == this.cache.delta && (this.cache.delta = this.descendants(d.default.Leaf).reduce(function (t, e) {
                                    return 0 === e.length() ? t : t.insert(e.value(), a(e))
                                }, new h.default).insert("\n", a(this))),
                                this.cache.delta
                        }
                    }, {
                        key: "deleteAt",
                        value: function (t, n) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "deleteAt", this).call(this, t, n),
                                this.cache = {}
                        }
                    }, {
                        key: "formatAt",
                        value: function (t, n, i, r) {
                            n <= 0 || (d.default.query(i, d.default.Scope.BLOCK) ? t + n === this.length() && this.format(i, r) : c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, Math.min(n, this.length() - t - 1), i, r),
                                this.cache = {})
                        }
                    }, {
                        key: "insertAt",
                        value: function (t, n, i) {
                            if (null != i)
                                return c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, i);
                            if (0 !== n.length) {
                                var r = n.split("\n"),
                                    o = r.shift();
                                o.length > 0 && (t < this.length() - 1 || null == this.children.tail ? c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, Math.min(t, this.length() - 1), o) : this.children.tail.insertAt(this.children.tail.length(), o),
                                    this.cache = {});
                                var s = this;
                                r.reduce(function (t, e) {
                                    return (s = s.split(t, !0)).insertAt(0, e),
                                        e.length
                                }, t + o.length)
                            }
                        }
                    }, {
                        key: "insertBefore",
                        value: function (t, n) {
                            var i = this.children.head;
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n),
                                i instanceof f.default && i.remove(),
                                this.cache = {}
                        }
                    }, {
                        key: "length",
                        value: function () {
                            return null == this.cache.length && (this.cache.length = c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "length", this).call(this) + 1),
                                this.cache.length
                        }
                    }, {
                        key: "moveChildren",
                        value: function (t, n) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "moveChildren", this).call(this, t, n),
                                this.cache = {}
                        }
                    }, {
                        key: "optimize",
                        value: function (t) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t),
                                this.cache = {}
                        }
                    }, {
                        key: "path",
                        value: function (t) {
                            return c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "path", this).call(this, t, !0)
                        }
                    }, {
                        key: "removeChild",
                        value: function (t) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "removeChild", this).call(this, t),
                                this.cache = {}
                        }
                    }, {
                        key: "split",
                        value: function (t) {
                            var n = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
                            if (n && (0 === t || t >= this.length() - 1)) {
                                var i = this.clone();
                                return 0 === t ? (this.parent.insertBefore(i, this),
                                    this) : (this.parent.insertBefore(i, this.next),
                                    i)
                            }
                            var r = c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "split", this).call(this, t, n);
                            return this.cache = {},
                                r
                        }
                    }]),
                    e
            }();
            y.blotName = "block",
                y.tagName = "P",
                y.defaultChild = "break",
                y.allowedChildren = [p.default, d.default.Embed, g.default],
                e.bubbleFormats = a,
                e.BlockEmbed = _,
                e.default = y
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                if ((e = (0,
                        b.default)(!0, {
                        container: t,
                        modules: {
                            clipboard: !0,
                            keyboard: !0,
                            history: !0
                        }
                    }, e)).theme && e.theme !== k.DEFAULTS.theme) {
                    if (e.theme = k.import("themes/" + e.theme),
                        null == e.theme)
                        throw new Error("Invalid theme " + e.theme + ". Did you register it?")
                } else
                    e.theme = x.default;
                var n = (0,
                    b.default)(!0, {}, e.theme.DEFAULTS);
                [n, e].forEach(function (t) {
                    t.modules = t.modules || {},
                        Object.keys(t.modules).forEach(function (e) {
                            !0 === t.modules[e] && (t.modules[e] = {})
                        })
                });
                var i = Object.keys(n.modules).concat(Object.keys(e.modules)).reduce(function (t, e) {
                    var n = k.import("modules/" + e);
                    return null == n ? E.error("Cannot load " + e + " module. Are you sure you registered it?") : t[e] = n.DEFAULTS || {},
                        t
                }, {});
                return null != e.modules && e.modules.toolbar && e.modules.toolbar.constructor !== Object && (e.modules.toolbar = {
                        container: e.modules.toolbar
                    }),
                    e = (0,
                        b.default)(!0, {}, k.DEFAULTS, {
                        modules: i
                    }, n, e), ["bounds", "container", "scrollingContainer"].forEach(function (t) {
                        "string" == typeof e[t] && (e[t] = document.querySelector(e[t]))
                    }),
                    e.modules = Object.keys(e.modules).reduce(function (t, n) {
                        return e.modules[n] && (t[n] = e.modules[n]),
                            t
                    }, {}),
                    e
            }

            function a(t, e, n, i) {
                if (this.options.strict && !this.isEnabled() && e === g.default.sources.USER)
                    return new f.default;
                var r = null == n ? null : this.getSelection(),
                    o = this.editor.delta,
                    s = t();
                if (null != r && (!0 === n && (n = r.index),
                        null == i ? r = c(r, s, e) : 0 !== i && (r = c(r, n, i, e)),
                        this.setSelection(r, g.default.sources.SILENT)),
                    s.length() > 0) {
                    var a, l = [g.default.events.TEXT_CHANGE, s, o, e];
                    if ((a = this.emitter).emit.apply(a, [g.default.events.EDITOR_CHANGE].concat(l)),
                        e !== g.default.sources.SILENT) {
                        var u;
                        (u = this.emitter).emit.apply(u, l)
                    }
                }
                return s
            }

            function l(t, e, n, i, r) {
                var o = {};
                return "number" == typeof t.index && "number" == typeof t.length ? "number" != typeof e ? (r = i,
                        i = n,
                        n = e,
                        e = t.length,
                        t = t.index) : (e = t.length,
                        t = t.index) : "number" != typeof e && (r = i,
                        i = n,
                        n = e,
                        e = 0),
                    "object" === (void 0 === n ? "undefined" : u(n)) ? (o = n,
                        r = i) : "string" == typeof n && (null != i ? o[n] = i : r = n),
                    r = r || g.default.sources.API, [t, e, o, r]
            }

            function c(t, e, n, i) {
                if (null == t)
                    return null;
                var r = void 0,
                    o = void 0;
                if (e instanceof f.default) {
                    var s = [t.index, t.index + t.length].map(function (t) {
                            return e.transformPosition(t, i !== g.default.sources.USER)
                        }),
                        a = h(s, 2);
                    r = a[0],
                        o = a[1]
                } else {
                    var l = [t.index, t.index + t.length].map(function (t) {
                            return t < e || t === e && i === g.default.sources.USER ? t : n >= 0 ? t + n : Math.max(e, t + n)
                        }),
                        c = h(l, 2);
                    r = c[0],
                        o = c[1]
                }
                return new v.Range(r, o - r)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.overload = e.expandConfig = void 0;
            var u = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
                    return typeof t
                } :
                function (t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                h = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                d = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }();
            n(50);
            var f = i(n(2)),
                p = i(n(14)),
                g = i(n(8)),
                _ = i(n(9)),
                y = i(n(0)),
                v = n(15),
                m = i(v),
                b = i(n(3)),
                w = i(n(10)),
                x = i(n(34)),
                E = (0,
                    w.default)("quill"),
                k = function () {
                    function t(e) {
                        var n = this,
                            i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                        if (o(this, t),
                            this.options = s(e, i),
                            this.container = this.options.container,
                            null == this.container)
                            return E.error("Invalid Quill container", e);
                        this.options.debug && t.debug(this.options.debug);
                        var r = this.container.innerHTML.trim();
                        this.container.classList.add("ql-container"),
                            this.container.innerHTML = "",
                            this.container.__quill = this,
                            this.root = this.addContainer("ql-editor"),
                            this.root.classList.add("ql-blank"),
                            this.root.setAttribute("data-gramm", !1),
                            this.scrollingContainer = this.options.scrollingContainer || this.root,
                            this.emitter = new g.default,
                            this.scroll = y.default.create(this.root, {
                                emitter: this.emitter,
                                whitelist: this.options.formats
                            }),
                            this.editor = new p.default(this.scroll),
                            this.selection = new m.default(this.scroll, this.emitter),
                            this.theme = new this.options.theme(this, this.options),
                            this.keyboard = this.theme.addModule("keyboard"),
                            this.clipboard = this.theme.addModule("clipboard"),
                            this.history = this.theme.addModule("history"),
                            this.theme.init(),
                            this.emitter.on(g.default.events.EDITOR_CHANGE, function (t) {
                                t === g.default.events.TEXT_CHANGE && n.root.classList.toggle("ql-blank", n.editor.isBlank())
                            }),
                            this.emitter.on(g.default.events.SCROLL_UPDATE, function (t, e) {
                                var i = n.selection.lastRange,
                                    r = i && 0 === i.length ? i.index : void 0;
                                a.call(n, function () {
                                    return n.editor.update(null, e, r)
                                }, t)
                            });
                        var l = this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">" + r + "<p><br></p></div>");
                        this.setContents(l),
                            this.history.clear(),
                            this.options.placeholder && this.root.setAttribute("data-placeholder", this.options.placeholder),
                            this.options.readOnly && this.disable()
                    }
                    return d(t, null, [{
                            key: "debug",
                            value: function (t) {
                                !0 === t && (t = "log"),
                                    w.default.level(t)
                            }
                        }, {
                            key: "find",
                            value: function (t) {
                                return t.__quill || y.default.find(t)
                            }
                        }, {
                            key: "import",
                            value: function (t) {
                                return null == this.imports[t] && E.error("Cannot import " + t + ". Are you sure it was registered?"),
                                    this.imports[t]
                            }
                        }, {
                            key: "register",
                            value: function (t, e) {
                                var n = this,
                                    i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                                if ("string" != typeof t) {
                                    var r = t.attrName || t.blotName;
                                    "string" == typeof r ? this.register("formats/" + r, t, e) : Object.keys(t).forEach(function (i) {
                                        n.register(i, t[i], e)
                                    })
                                } else
                                    null == this.imports[t] || i || E.warn("Overwriting " + t + " with", e),
                                    this.imports[t] = e,
                                    (t.startsWith("blots/") || t.startsWith("formats/")) && "abstract" !== e.blotName ? y.default.register(e) : t.startsWith("modules") && "function" == typeof e.register && e.register()
                            }
                        }]),
                        d(t, [{
                            key: "addContainer",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                                if ("string" == typeof t) {
                                    var n = t;
                                    (t = document.createElement("div")).classList.add(n)
                                }
                                return this.container.insertBefore(t, e),
                                    t
                            }
                        }, {
                            key: "blur",
                            value: function () {
                                this.selection.setRange(null)
                            }
                        }, {
                            key: "deleteText",
                            value: function (t, e, n) {
                                var i = this,
                                    r = l(t, e, n),
                                    o = h(r, 4);
                                return t = o[0],
                                    e = o[1],
                                    n = o[3],
                                    a.call(this, function () {
                                        return i.editor.deleteText(t, e)
                                    }, n, t, -1 * e)
                            }
                        }, {
                            key: "disable",
                            value: function () {
                                this.enable(!1)
                            }
                        }, {
                            key: "enable",
                            value: function () {
                                var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                                this.scroll.enable(t),
                                    this.container.classList.toggle("ql-disabled", !t)
                            }
                        }, {
                            key: "focus",
                            value: function () {
                                var t = this.scrollingContainer.scrollTop;
                                this.selection.focus(),
                                    this.scrollingContainer.scrollTop = t,
                                    this.scrollIntoView()
                            }
                        }, {
                            key: "format",
                            value: function (t, e) {
                                var n = this,
                                    i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : g.default.sources.API;
                                return a.call(this, function () {
                                    var i = n.getSelection(!0),
                                        o = new f.default;
                                    if (null == i)
                                        return o;
                                    if (y.default.query(t, y.default.Scope.BLOCK))
                                        o = n.editor.formatLine(i.index, i.length, r({}, t, e));
                                    else {
                                        if (0 === i.length)
                                            return n.selection.format(t, e),
                                                o;
                                        o = n.editor.formatText(i.index, i.length, r({}, t, e))
                                    }
                                    return n.setSelection(i, g.default.sources.SILENT),
                                        o
                                }, i)
                            }
                        }, {
                            key: "formatLine",
                            value: function (t, e, n, i, r) {
                                var o = this,
                                    s = void 0,
                                    c = l(t, e, n, i, r),
                                    u = h(c, 4);
                                return t = u[0],
                                    e = u[1],
                                    s = u[2],
                                    r = u[3],
                                    a.call(this, function () {
                                        return o.editor.formatLine(t, e, s)
                                    }, r, t, 0)
                            }
                        }, {
                            key: "formatText",
                            value: function (t, e, n, i, r) {
                                var o = this,
                                    s = void 0,
                                    c = l(t, e, n, i, r),
                                    u = h(c, 4);
                                return t = u[0],
                                    e = u[1],
                                    s = u[2],
                                    r = u[3],
                                    a.call(this, function () {
                                        return o.editor.formatText(t, e, s)
                                    }, r, t, 0)
                            }
                        }, {
                            key: "getBounds",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                                    n = void 0;
                                n = "number" == typeof t ? this.selection.getBounds(t, e) : this.selection.getBounds(t.index, t.length);
                                var i = this.container.getBoundingClientRect();
                                return {
                                    bottom: n.bottom - i.top,
                                    height: n.height,
                                    left: n.left - i.left,
                                    right: n.right - i.left,
                                    top: n.top - i.top,
                                    width: n.width
                                }
                            }
                        }, {
                            key: "getContents",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                                    e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.getLength() - t,
                                    n = l(t, e),
                                    i = h(n, 2);
                                return t = i[0],
                                    e = i[1],
                                    this.editor.getContents(t, e)
                            }
                        }, {
                            key: "getFormat",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.getSelection(!0),
                                    e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                                return "number" == typeof t ? this.editor.getFormat(t, e) : this.editor.getFormat(t.index, t.length)
                            }
                        }, {
                            key: "getIndex",
                            value: function (t) {
                                return t.offset(this.scroll)
                            }
                        }, {
                            key: "getLength",
                            value: function () {
                                return this.scroll.length()
                            }
                        }, {
                            key: "getLeaf",
                            value: function (t) {
                                return this.scroll.leaf(t)
                            }
                        }, {
                            key: "getLine",
                            value: function (t) {
                                return this.scroll.line(t)
                            }
                        }, {
                            key: "getLines",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                                    e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE;
                                return "number" != typeof t ? this.scroll.lines(t.index, t.length) : this.scroll.lines(t, e)
                            }
                        }, {
                            key: "getModule",
                            value: function (t) {
                                return this.theme.modules[t]
                            }
                        }, {
                            key: "getSelection",
                            value: function () {
                                return arguments.length > 0 && void 0 !== arguments[0] && arguments[0] && this.focus(),
                                    this.update(),
                                    this.selection.getRange()[0]
                            }
                        }, {
                            key: "getText",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                                    e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.getLength() - t,
                                    n = l(t, e),
                                    i = h(n, 2);
                                return t = i[0],
                                    e = i[1],
                                    this.editor.getText(t, e)
                            }
                        }, {
                            key: "hasFocus",
                            value: function () {
                                return this.selection.hasFocus()
                            }
                        }, {
                            key: "insertEmbed",
                            value: function (e, n, i) {
                                var r = this,
                                    o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : t.sources.API;
                                return a.call(this, function () {
                                    return r.editor.insertEmbed(e, n, i)
                                }, o, e)
                            }
                        }, {
                            key: "insertText",
                            value: function (t, e, n, i, r) {
                                var o = this,
                                    s = void 0,
                                    c = l(t, 0, n, i, r),
                                    u = h(c, 4);
                                return t = u[0],
                                    s = u[2],
                                    r = u[3],
                                    a.call(this, function () {
                                        return o.editor.insertText(t, e, s)
                                    }, r, t, e.length)
                            }
                        }, {
                            key: "isEnabled",
                            value: function () {
                                return !this.container.classList.contains("ql-disabled")
                            }
                        }, {
                            key: "off",
                            value: function () {
                                return this.emitter.off.apply(this.emitter, arguments)
                            }
                        }, {
                            key: "on",
                            value: function () {
                                return this.emitter.on.apply(this.emitter, arguments)
                            }
                        }, {
                            key: "once",
                            value: function () {
                                return this.emitter.once.apply(this.emitter, arguments)
                            }
                        }, {
                            key: "pasteHTML",
                            value: function (t, e, n) {
                                this.clipboard.dangerouslyPasteHTML(t, e, n)
                            }
                        }, {
                            key: "removeFormat",
                            value: function (t, e, n) {
                                var i = this,
                                    r = l(t, e, n),
                                    o = h(r, 4);
                                return t = o[0],
                                    e = o[1],
                                    n = o[3],
                                    a.call(this, function () {
                                        return i.editor.removeFormat(t, e)
                                    }, n, t)
                            }
                        }, {
                            key: "scrollIntoView",
                            value: function () {
                                this.selection.scrollIntoView(this.scrollingContainer)
                            }
                        }, {
                            key: "setContents",
                            value: function (t) {
                                var e = this,
                                    n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g.default.sources.API;
                                return a.call(this, function () {
                                    t = new f.default(t);
                                    var n = e.getLength(),
                                        i = e.editor.deleteText(0, n),
                                        r = e.editor.applyDelta(t),
                                        o = r.ops[r.ops.length - 1];
                                    return null != o && "string" == typeof o.insert && "\n" === o.insert[o.insert.length - 1] && (e.editor.deleteText(e.getLength() - 1, 1),
                                            r.delete(1)),
                                        i.compose(r)
                                }, n)
                            }
                        }, {
                            key: "setSelection",
                            value: function (e, n, i) {
                                if (null == e)
                                    this.selection.setRange(null, n || t.sources.API);
                                else {
                                    var r = l(e, n, i),
                                        o = h(r, 4);
                                    e = o[0],
                                        n = o[1],
                                        i = o[3],
                                        this.selection.setRange(new v.Range(e, n), i),
                                        i !== g.default.sources.SILENT && this.selection.scrollIntoView(this.scrollingContainer)
                                }
                            }
                        }, {
                            key: "setText",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g.default.sources.API,
                                    n = (new f.default).insert(t);
                                return this.setContents(n, e)
                            }
                        }, {
                            key: "update",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : g.default.sources.USER,
                                    e = this.scroll.update(t);
                                return this.selection.update(t),
                                    e
                            }
                        }, {
                            key: "updateContents",
                            value: function (t) {
                                var e = this,
                                    n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : g.default.sources.API;
                                return a.call(this, function () {
                                    return t = new f.default(t),
                                        e.editor.applyDelta(t, n)
                                }, n, !0)
                            }
                        }]),
                        t
                }();
            k.DEFAULTS = {
                    bounds: null,
                    formats: null,
                    modules: {},
                    placeholder: "",
                    readOnly: !1,
                    scrollingContainer: null,
                    strict: !0,
                    theme: "default"
                },
                k.events = g.default.events,
                k.sources = g.default.sources,
                k.version = "1.3.4",
                k.imports = {
                    delta: f.default,
                    parchment: y.default,
                    "core/module": _.default,
                    "core/theme": x.default
                },
                e.expandConfig = s,
                e.overload = l,
                e.default = k
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = i(n(7)),
                u = i(n(0)),
                h = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, u.default.Inline),
                        a(e, [{
                            key: "formatAt",
                            value: function (t, n, i, r) {
                                if (e.compare(this.statics.blotName, i) < 0 && u.default.query(i, u.default.Scope.BLOT)) {
                                    var o = this.isolate(t, n);
                                    r && o.wrap(i, r)
                                } else
                                    l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, n, i, r)
                            }
                        }, {
                            key: "optimize",
                            value: function (t) {
                                if (l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t),
                                    this.parent instanceof e && e.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {
                                    var n = this.parent.isolate(this.offset(), this.length());
                                    this.moveChildren(n),
                                        n.wrap(this)
                                }
                            }
                        }], [{
                            key: "compare",
                            value: function (t, n) {
                                var i = e.order.indexOf(t),
                                    r = e.order.indexOf(n);
                                return i >= 0 || r >= 0 ? i - r : t === n ? 0 : t < n ? -1 : 1
                            }
                        }]),
                        e
                }();
            h.allowedChildren = [h, u.default.Embed, c.default],
                h.order = ["cursor", "inline", "underline", "strike", "italic", "bold", "script", "link", "code"],
                e.default = h
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                a = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, s.default.Text),
                        e
                }();
            e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = i(n(54)),
                u = (0,
                    i(n(10)).default)("quill:events");
            ["selectionchange", "mousedown", "mouseup", "click"].forEach(function (t) {
                document.addEventListener(t, function () {
                    for (var t = arguments.length, e = Array(t), n = 0; n < t; n++)
                        e[n] = arguments[n];
                    [].slice.call(document.querySelectorAll(".ql-container")).forEach(function (t) {
                        if (t.__quill && t.__quill.emitter) {
                            var n;
                            (n = t.__quill.emitter).handleDOM.apply(n, e)
                        }
                    })
                })
            });
            var h = function (t) {
                function e() {
                    r(this, e);
                    var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                    return t.listeners = {},
                        t.on("error", u.error),
                        t
                }
                return s(e, c.default),
                    a(e, [{
                        key: "emit",
                        value: function () {
                            u.log.apply(u, arguments),
                                l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "emit", this).apply(this, arguments)
                        }
                    }, {
                        key: "handleDOM",
                        value: function (t) {
                            for (var e = arguments.length, n = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++)
                                n[i - 1] = arguments[i];
                            (this.listeners[t.type] || []).forEach(function (e) {
                                var i = e.node,
                                    r = e.handler;
                                (t.target === i || i.contains(t.target)) && r.apply(void 0, [t].concat(n))
                            })
                        }
                    }, {
                        key: "listenDOM",
                        value: function (t, e, n) {
                            this.listeners[t] || (this.listeners[t] = []),
                                this.listeners[t].push({
                                    node: e,
                                    handler: n
                                })
                        }
                    }]),
                    e
            }();
            h.events = {
                    EDITOR_CHANGE: "editor-change",
                    SCROLL_BEFORE_UPDATE: "scroll-before-update",
                    SCROLL_OPTIMIZE: "scroll-optimize",
                    SCROLL_UPDATE: "scroll-update",
                    SELECTION_CHANGE: "selection-change",
                    TEXT_CHANGE: "text-change"
                },
                h.sources = {
                    API: "api",
                    SILENT: "silent",
                    USER: "user"
                },
                e.default = h
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = function t(e) {
                var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                i(this, t),
                    this.quill = e,
                    this.options = n
            };
            r.DEFAULTS = {},
                e.default = r
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                if (o.indexOf(t) <= o.indexOf(s)) {
                    for (var e, n = arguments.length, i = Array(n > 1 ? n - 1 : 0), r = 1; r < n; r++)
                        i[r - 1] = arguments[r];
                    (e = console)[t].apply(e, i)
                }
            }

            function r(t) {
                return o.reduce(function (e, n) {
                    return e[n] = i.bind(console, n, t),
                        e
                }, {})
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = ["error", "warn", "log", "info"],
                s = "warn";
            i.level = r.level = function (t) {
                    s = t
                },
                e.default = r
        }, function (t, e, n) {
            function i(t) {
                return null === t || void 0 === t
            }

            function r(t) {
                return !(!t || "object" != typeof t || "number" != typeof t.length) && ("function" == typeof t.copy && "function" == typeof t.slice && !(t.length > 0 && "number" != typeof t[0]))
            }

            function o(t, e, n) {
                var o, u;
                if (i(t) || i(e))
                    return !1;
                if (t.prototype !== e.prototype)
                    return !1;
                if (l(t))
                    return !!l(e) && (t = s.call(t),
                        e = s.call(e),
                        c(t, e, n));
                if (r(t)) {
                    if (!r(e))
                        return !1;
                    if (t.length !== e.length)
                        return !1;
                    for (o = 0; o < t.length; o++)
                        if (t[o] !== e[o])
                            return !1;
                    return !0
                }
                try {
                    var h = a(t),
                        d = a(e)
                } catch (t) {
                    return !1
                }
                if (h.length != d.length)
                    return !1;
                for (h.sort(),
                    d.sort(),
                    o = h.length - 1; o >= 0; o--)
                    if (h[o] != d[o])
                        return !1;
                for (o = h.length - 1; o >= 0; o--)
                    if (u = h[o], !c(t[u], e[u], n))
                        return !1;
                return typeof t == typeof e
            }
            var s = Array.prototype.slice,
                a = n(52),
                l = n(53),
                c = t.exports = function (t, e, n) {
                    return n || (n = {}),
                        t === e || (t instanceof Date && e instanceof Date ? t.getTime() === e.getTime() : !t || !e || "object" != typeof t && "object" != typeof e ? n.strict ? t === e : t == e : o(t, e, n))
                }
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = n(1),
                r = function () {
                    function t(t, e, n) {
                        void 0 === n && (n = {}),
                            this.attrName = t,
                            this.keyName = e;
                        var r = i.Scope.TYPE & i.Scope.ATTRIBUTE;
                        null != n.scope ? this.scope = n.scope & i.Scope.LEVEL | r : this.scope = i.Scope.ATTRIBUTE,
                            null != n.whitelist && (this.whitelist = n.whitelist)
                    }
                    return t.keys = function (t) {
                            return [].map.call(t.attributes, function (t) {
                                return t.name
                            })
                        },
                        t.prototype.add = function (t, e) {
                            return !!this.canAdd(t, e) && (t.setAttribute(this.keyName, e), !0)
                        },
                        t.prototype.canAdd = function (t, e) {
                            return null != i.query(t, i.Scope.BLOT & (this.scope | i.Scope.TYPE)) && (null == this.whitelist || this.whitelist.indexOf(e) > -1)
                        },
                        t.prototype.remove = function (t) {
                            t.removeAttribute(this.keyName)
                        },
                        t.prototype.value = function (t) {
                            var e = t.getAttribute(this.keyName);
                            return this.canAdd(t, e) ? e : ""
                        },
                        t
                }();
            e.default = r
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.Code = void 0;
            var a = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                l = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                c = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                u = i(n(2)),
                h = i(n(0)),
                d = i(n(4)),
                f = i(n(6)),
                p = i(n(7)),
                g = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, f.default),
                        e
                }();
            g.blotName = "code",
                g.tagName = "CODE";
            var _ = function (t) {
                function e() {
                    return r(this, e),
                        o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                }
                return s(e, d.default),
                    l(e, [{
                        key: "delta",
                        value: function () {
                            var t = this,
                                e = this.domNode.textContent;
                            return e.endsWith("\n") && (e = e.slice(0, -1)),
                                e.split("\n").reduce(function (e, n) {
                                    return e.insert(n).insert("\n", t.formats())
                                }, new u.default)
                        }
                    }, {
                        key: "format",
                        value: function (t, n) {
                            if (t !== this.statics.blotName || !n) {
                                var i = this.descendant(p.default, this.length() - 1),
                                    r = a(i, 1)[0];
                                null != r && r.deleteAt(r.length() - 1, 1),
                                    c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n)
                            }
                        }
                    }, {
                        key: "formatAt",
                        value: function (t, n, i, r) {
                            if (0 !== n && null != h.default.query(i, h.default.Scope.BLOCK) && (i !== this.statics.blotName || r !== this.statics.formats(this.domNode))) {
                                var o = this.newlineIndex(t);
                                if (!(o < 0 || o >= t + n)) {
                                    var s = this.newlineIndex(t, !0) + 1,
                                        a = o - s + 1,
                                        l = this.isolate(s, a),
                                        c = l.next;
                                    l.format(i, r),
                                        c instanceof e && c.formatAt(0, t - s + n - a, i, r)
                                }
                            }
                        }
                    }, {
                        key: "insertAt",
                        value: function (t, e, n) {
                            if (null == n) {
                                var i = this.descendant(p.default, t),
                                    r = a(i, 2),
                                    o = r[0],
                                    s = r[1];
                                o.insertAt(s, e)
                            }
                        }
                    }, {
                        key: "length",
                        value: function () {
                            var t = this.domNode.textContent.length;
                            return this.domNode.textContent.endsWith("\n") ? t : t + 1
                        }
                    }, {
                        key: "newlineIndex",
                        value: function (t) {
                            if (arguments.length > 1 && void 0 !== arguments[1] && arguments[1])
                                return this.domNode.textContent.slice(0, t).lastIndexOf("\n");
                            var e = this.domNode.textContent.slice(t).indexOf("\n");
                            return e > -1 ? t + e : -1
                        }
                    }, {
                        key: "optimize",
                        value: function (t) {
                            this.domNode.textContent.endsWith("\n") || this.appendChild(h.default.create("text", "\n")),
                                c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t);
                            var n = this.next;
                            null != n && n.prev === this && n.statics.blotName === this.statics.blotName && this.statics.formats(this.domNode) === n.statics.formats(n.domNode) && (n.optimize(t),
                                n.moveChildren(this),
                                n.remove())
                        }
                    }, {
                        key: "replace",
                        value: function (t) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replace", this).call(this, t), [].slice.call(this.domNode.querySelectorAll("*")).forEach(function (t) {
                                var e = h.default.find(t);
                                null == e ? t.parentNode.removeChild(t) : e instanceof h.default.Embed ? e.remove() : e.unwrap()
                            })
                        }
                    }], [{
                        key: "create",
                        value: function (t) {
                            var n = c(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
                            return n.setAttribute("spellcheck", !1),
                                n
                        }
                    }, {
                        key: "formats",
                        value: function () {
                            return !0
                        }
                    }]),
                    e
            }();
            _.blotName = "code-block",
                _.tagName = "PRE",
                _.TAB = "  ",
                e.Code = g,
                e.default = _
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                return Object.keys(e).reduce(function (n, i) {
                    return null == t[i] ? n : (e[i] === t[i] ? n[i] = e[i] : Array.isArray(e[i]) ? e[i].indexOf(t[i]) < 0 && (n[i] = e[i].concat([t[i]])) : n[i] = [e[i], t[i]],
                        n)
                }, {})
            }

            function a(t) {
                return t.reduce(function (t, e) {
                    if (1 === e.insert) {
                        var n = (0,
                            m.default)(e.attributes);
                        return delete n.image,
                            t.insert({
                                image: e.attributes.image
                            }, n)
                    }
                    if (null == e.attributes || !0 !== e.attributes.list && !0 !== e.attributes.bullet || ((e = (0,
                            m.default)(e)).attributes.list ? e.attributes.list = "ordered" : (e.attributes.list = "bullet",
                            delete e.attributes.bullet)),
                        "string" == typeof e.insert) {
                        var i = e.insert.replace(/\r\n/g, "\n").replace(/\r/g, "\n");
                        return t.insert(i, e.attributes)
                    }
                    return t.push(e)
                }, new h.default)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
                    return typeof t
                } :
                function (t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                c = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                u = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                h = i(n(2)),
                d = i(n(20)),
                f = i(n(0)),
                p = i(n(13)),
                g = i(n(23)),
                _ = n(4),
                y = i(_),
                v = i(n(16)),
                m = i(n(21)),
                b = i(n(11)),
                w = i(n(3)),
                x = /^[ -~]*$/,
                E = function () {
                    function t(e) {
                        o(this, t),
                            this.scroll = e,
                            this.delta = this.getDelta()
                    }
                    return u(t, [{
                            key: "applyDelta",
                            value: function (t) {
                                var e = this,
                                    n = !1;
                                this.scroll.update();
                                var i = this.scroll.length();
                                return this.scroll.batchStart(),
                                    (t = a(t)).reduce(function (t, r) {
                                        var o = r.retain || r.delete || r.insert.length || 1,
                                            s = r.attributes || {};
                                        if (null != r.insert) {
                                            if ("string" == typeof r.insert) {
                                                var a = r.insert;
                                                a.endsWith("\n") && n && (n = !1,
                                                        a = a.slice(0, -1)),
                                                    t >= i && !a.endsWith("\n") && (n = !0),
                                                    e.scroll.insertAt(t, a);
                                                var u = e.scroll.line(t),
                                                    h = c(u, 2),
                                                    p = h[0],
                                                    g = h[1],
                                                    v = (0,
                                                        w.default)({}, (0,
                                                        _.bubbleFormats)(p));
                                                if (p instanceof y.default) {
                                                    var m = p.descendant(f.default.Leaf, g),
                                                        b = c(m, 1)[0];
                                                    v = (0,
                                                        w.default)(v, (0,
                                                        _.bubbleFormats)(b))
                                                }
                                                s = d.default.attributes.diff(v, s) || {}
                                            } else if ("object" === l(r.insert)) {
                                                var x = Object.keys(r.insert)[0];
                                                if (null == x)
                                                    return t;
                                                e.scroll.insertAt(t, x, r.insert[x])
                                            }
                                            i += o
                                        }
                                        return Object.keys(s).forEach(function (n) {
                                                e.scroll.formatAt(t, o, n, s[n])
                                            }),
                                            t + o
                                    }, 0),
                                    t.reduce(function (t, n) {
                                        return "number" == typeof n.delete ? (e.scroll.deleteAt(t, n.delete),
                                            t) : t + (n.retain || n.insert.length || 1)
                                    }, 0),
                                    this.scroll.batchEnd(),
                                    this.update(t)
                            }
                        }, {
                            key: "deleteText",
                            value: function (t, e) {
                                return this.scroll.deleteAt(t, e),
                                    this.update((new h.default).retain(t).delete(e))
                            }
                        }, {
                            key: "formatLine",
                            value: function (t, e) {
                                var n = this,
                                    i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                                return this.scroll.update(),
                                    Object.keys(i).forEach(function (r) {
                                        if (null == n.scroll.whitelist || n.scroll.whitelist[r]) {
                                            var o = n.scroll.lines(t, Math.max(e, 1)),
                                                s = e;
                                            o.forEach(function (e) {
                                                var o = e.length();
                                                if (e instanceof p.default) {
                                                    var a = t - e.offset(n.scroll),
                                                        l = e.newlineIndex(a + s) - a + 1;
                                                    e.formatAt(a, l, r, i[r])
                                                } else
                                                    e.format(r, i[r]);
                                                s -= o
                                            })
                                        }
                                    }),
                                    this.scroll.optimize(),
                                    this.update((new h.default).retain(t).retain(e, (0,
                                        m.default)(i)))
                            }
                        }, {
                            key: "formatText",
                            value: function (t, e) {
                                var n = this,
                                    i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                                return Object.keys(i).forEach(function (r) {
                                        n.scroll.formatAt(t, e, r, i[r])
                                    }),
                                    this.update((new h.default).retain(t).retain(e, (0,
                                        m.default)(i)))
                            }
                        }, {
                            key: "getContents",
                            value: function (t, e) {
                                return this.delta.slice(t, t + e)
                            }
                        }, {
                            key: "getDelta",
                            value: function () {
                                return this.scroll.lines().reduce(function (t, e) {
                                    return t.concat(e.delta())
                                }, new h.default)
                            }
                        }, {
                            key: "getFormat",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                                    n = [],
                                    i = [];
                                0 === e ? this.scroll.path(t).forEach(function (t) {
                                    var e = c(t, 1)[0];
                                    e instanceof y.default ? n.push(e) : e instanceof f.default.Leaf && i.push(e)
                                }) : (n = this.scroll.lines(t, e),
                                    i = this.scroll.descendants(f.default.Leaf, t, e));
                                var r = [n, i].map(function (t) {
                                    if (0 === t.length)
                                        return {};
                                    for (var e = (0,
                                            _.bubbleFormats)(t.shift()); Object.keys(e).length > 0;) {
                                        var n = t.shift();
                                        if (null == n)
                                            return e;
                                        e = s((0,
                                            _.bubbleFormats)(n), e)
                                    }
                                    return e
                                });
                                return w.default.apply(w.default, r)
                            }
                        }, {
                            key: "getText",
                            value: function (t, e) {
                                return this.getContents(t, e).filter(function (t) {
                                    return "string" == typeof t.insert
                                }).map(function (t) {
                                    return t.insert
                                }).join("")
                            }
                        }, {
                            key: "insertEmbed",
                            value: function (t, e, n) {
                                return this.scroll.insertAt(t, e, n),
                                    this.update((new h.default).retain(t).insert(r({}, e, n)))
                            }
                        }, {
                            key: "insertText",
                            value: function (t, e) {
                                var n = this,
                                    i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                                return e = e.replace(/\r\n/g, "\n").replace(/\r/g, "\n"),
                                    this.scroll.insertAt(t, e),
                                    Object.keys(i).forEach(function (r) {
                                        n.scroll.formatAt(t, e.length, r, i[r])
                                    }),
                                    this.update((new h.default).retain(t).insert(e, (0,
                                        m.default)(i)))
                            }
                        }, {
                            key: "isBlank",
                            value: function () {
                                if (0 == this.scroll.children.length)
                                    return !0;
                                if (this.scroll.children.length > 1)
                                    return !1;
                                var t = this.scroll.children.head;
                                return t.statics.blotName === y.default.blotName && (!(t.children.length > 1) && t.children.head instanceof v.default)
                            }
                        }, {
                            key: "removeFormat",
                            value: function (t, e) {
                                var n = this.getText(t, e),
                                    i = this.scroll.line(t + e),
                                    r = c(i, 2),
                                    o = r[0],
                                    s = r[1],
                                    a = 0,
                                    l = new h.default;
                                null != o && (a = o instanceof p.default ? o.newlineIndex(s) - s + 1 : o.length() - s,
                                    l = o.delta().slice(s, s + a - 1).insert("\n"));
                                var u = this.getContents(t, e + a).diff((new h.default).insert(n).concat(l)),
                                    d = (new h.default).retain(t).concat(u);
                                return this.applyDelta(d)
                            }
                        }, {
                            key: "update",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [],
                                    n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : void 0,
                                    i = this.delta;
                                if (1 === e.length && "characterData" === e[0].type && e[0].target.data.match(x) && f.default.find(e[0].target)) {
                                    var r = f.default.find(e[0].target),
                                        o = (0,
                                            _.bubbleFormats)(r),
                                        s = r.offset(this.scroll),
                                        a = e[0].oldValue.replace(g.default.CONTENTS, ""),
                                        l = (new h.default).insert(a),
                                        c = (new h.default).insert(r.value());
                                    t = (new h.default).retain(s).concat(l.diff(c, n)).reduce(function (t, e) {
                                            return e.insert ? t.insert(e.insert, o) : t.push(e)
                                        }, new h.default),
                                        this.delta = i.compose(t)
                                } else
                                    this.delta = this.getDelta(),
                                    t && (0,
                                        b.default)(i.compose(t), this.delta) || (t = i.diff(this.delta, n));
                                return t
                            }
                        }]),
                        t
                }();
            e.default = E
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t) {
                if (Array.isArray(t)) {
                    for (var e = 0, n = Array(t.length); e < t.length; e++)
                        n[e] = t[e];
                    return n
                }
                return Array.from(t)
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                try {
                    e.parentNode
                } catch (t) {
                    return !1
                }
                return e instanceof Text && (e = e.parentNode),
                    t.contains(e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.Range = void 0;
            var a = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                l = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                c = i(n(0)),
                u = i(n(21)),
                h = i(n(11)),
                d = i(n(8)),
                f = (0,
                    i(n(10)).default)("quill:selection"),
                p = function t(e) {
                    var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0;
                    o(this, t),
                        this.index = e,
                        this.length = n
                },
                g = function () {
                    function t(e, n) {
                        var i = this;
                        o(this, t),
                            this.emitter = n,
                            this.scroll = e,
                            this.composing = !1,
                            this.mouseDown = !1,
                            this.root = this.scroll.domNode,
                            this.cursor = c.default.create("cursor", this),
                            this.lastRange = this.savedRange = new p(0, 0),
                            this.handleComposition(),
                            this.handleDragging(),
                            this.emitter.listenDOM("selectionchange", document, function () {
                                i.mouseDown || setTimeout(i.update.bind(i, d.default.sources.USER), 1)
                            }),
                            this.emitter.on(d.default.events.EDITOR_CHANGE, function (t, e) {
                                t === d.default.events.TEXT_CHANGE && e.length() > 0 && i.update(d.default.sources.SILENT)
                            }),
                            this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE, function () {
                                if (i.hasFocus()) {
                                    var t = i.getNativeRange();
                                    null != t && t.start.node !== i.cursor.textNode && i.emitter.once(d.default.events.SCROLL_UPDATE, function () {
                                        try {
                                            i.setNativeRange(t.start.node, t.start.offset, t.end.node, t.end.offset)
                                        } catch (t) {}
                                    })
                                }
                            }),
                            this.emitter.on(d.default.events.SCROLL_OPTIMIZE, function (t, e) {
                                if (e.range) {
                                    var n = e.range,
                                        r = n.startNode,
                                        o = n.startOffset,
                                        s = n.endNode,
                                        a = n.endOffset;
                                    i.setNativeRange(r, o, s, a)
                                }
                            }),
                            this.update(d.default.sources.SILENT)
                    }
                    return l(t, [{
                            key: "handleComposition",
                            value: function () {
                                var t = this;
                                this.root.addEventListener("compositionstart", function () {
                                        t.composing = !0
                                    }),
                                    this.root.addEventListener("compositionend", function () {
                                        if (t.composing = !1,
                                            t.cursor.parent) {
                                            var e = t.cursor.restore();
                                            if (!e)
                                                return;
                                            setTimeout(function () {
                                                t.setNativeRange(e.startNode, e.startOffset, e.endNode, e.endOffset)
                                            }, 1)
                                        }
                                    })
                            }
                        }, {
                            key: "handleDragging",
                            value: function () {
                                var t = this;
                                this.emitter.listenDOM("mousedown", document.body, function () {
                                        t.mouseDown = !0
                                    }),
                                    this.emitter.listenDOM("mouseup", document.body, function () {
                                        t.mouseDown = !1,
                                            t.update(d.default.sources.USER)
                                    })
                            }
                        }, {
                            key: "focus",
                            value: function () {
                                this.hasFocus() || (this.root.focus(),
                                    this.setRange(this.savedRange))
                            }
                        }, {
                            key: "format",
                            value: function (t, e) {
                                if (null == this.scroll.whitelist || this.scroll.whitelist[t]) {
                                    this.scroll.update();
                                    var n = this.getNativeRange();
                                    if (null != n && n.native.collapsed && !c.default.query(t, c.default.Scope.BLOCK)) {
                                        if (n.start.node !== this.cursor.textNode) {
                                            var i = c.default.find(n.start.node, !1);
                                            if (null == i)
                                                return;
                                            if (i instanceof c.default.Leaf) {
                                                var r = i.split(n.start.offset);
                                                i.parent.insertBefore(this.cursor, r)
                                            } else
                                                i.insertBefore(this.cursor, n.start.node);
                                            this.cursor.attach()
                                        }
                                        this.cursor.format(t, e),
                                            this.scroll.optimize(),
                                            this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length),
                                            this.update()
                                    }
                                }
                            }
                        }, {
                            key: "getBounds",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                                    n = this.scroll.length();
                                t = Math.min(t, n - 1),
                                    e = Math.min(t + e, n - 1) - t;
                                var i = void 0,
                                    r = this.scroll.leaf(t),
                                    o = a(r, 2),
                                    s = o[0],
                                    l = o[1];
                                if (null == s)
                                    return null;
                                var c = s.position(l, !0),
                                    u = a(c, 2);
                                i = u[0],
                                    l = u[1];
                                var h = document.createRange();
                                if (e > 0) {
                                    h.setStart(i, l);
                                    var d = this.scroll.leaf(t + e),
                                        f = a(d, 2);
                                    if (s = f[0],
                                        l = f[1],
                                        null == s)
                                        return null;
                                    var p = s.position(l, !0),
                                        g = a(p, 2);
                                    return i = g[0],
                                        l = g[1],
                                        h.setEnd(i, l),
                                        h.getBoundingClientRect()
                                }
                                var _ = "left",
                                    y = void 0;
                                return i instanceof Text ? (l < i.data.length ? (h.setStart(i, l),
                                        h.setEnd(i, l + 1)) : (h.setStart(i, l - 1),
                                        h.setEnd(i, l),
                                        _ = "right"),
                                    y = h.getBoundingClientRect()) : (y = s.domNode.getBoundingClientRect(),
                                    l > 0 && (_ = "right")), {
                                    bottom: y.top + y.height,
                                    height: y.height,
                                    left: y[_],
                                    right: y[_],
                                    top: y.top,
                                    width: 0
                                }
                            }
                        }, {
                            key: "getNativeRange",
                            value: function () {
                                var t = document.getSelection();
                                if (null == t || t.rangeCount <= 0)
                                    return null;
                                var e = t.getRangeAt(0);
                                if (null == e)
                                    return null;
                                var n = this.normalizeNative(e);
                                return f.info("getNativeRange", n),
                                    n
                            }
                        }, {
                            key: "getRange",
                            value: function () {
                                var t = this.getNativeRange();
                                return null == t ? [null, null] : [this.normalizedToRange(t), t]
                            }
                        }, {
                            key: "hasFocus",
                            value: function () {
                                return document.activeElement === this.root
                            }
                        }, {
                            key: "normalizedToRange",
                            value: function (t) {
                                var e = this,
                                    n = [
                                        [t.start.node, t.start.offset]
                                    ];
                                t.native.collapsed || n.push([t.end.node, t.end.offset]);
                                var i = n.map(function (t) {
                                        var n = a(t, 2),
                                            i = n[0],
                                            r = n[1],
                                            o = c.default.find(i, !0),
                                            s = o.offset(e.scroll);
                                        return 0 === r ? s : o instanceof c.default.Container ? s + o.length() : s + o.index(i, r)
                                    }),
                                    o = Math.min(Math.max.apply(Math, r(i)), this.scroll.length() - 1),
                                    s = Math.min.apply(Math, [o].concat(r(i)));
                                return new p(s, o - s)
                            }
                        }, {
                            key: "normalizeNative",
                            value: function (t) {
                                if (!s(this.root, t.startContainer) || !t.collapsed && !s(this.root, t.endContainer))
                                    return null;
                                var e = {
                                    start: {
                                        node: t.startContainer,
                                        offset: t.startOffset
                                    },
                                    end: {
                                        node: t.endContainer,
                                        offset: t.endOffset
                                    },
                                    native: t
                                };
                                return [e.start, e.end].forEach(function (t) {
                                        for (var e = t.node, n = t.offset; !(e instanceof Text) && e.childNodes.length > 0;)
                                            if (e.childNodes.length > n)
                                                e = e.childNodes[n],
                                                n = 0;
                                            else {
                                                if (e.childNodes.length !== n)
                                                    break;
                                                n = (e = e.lastChild) instanceof Text ? e.data.length : e.childNodes.length + 1
                                            }
                                        t.node = e,
                                            t.offset = n
                                    }),
                                    e
                            }
                        }, {
                            key: "rangeToNative",
                            value: function (t) {
                                var e = this,
                                    n = t.collapsed ? [t.index] : [t.index, t.index + t.length],
                                    i = [],
                                    r = this.scroll.length();
                                return n.forEach(function (t, n) {
                                        t = Math.min(r - 1, t);
                                        var o = void 0,
                                            s = e.scroll.leaf(t),
                                            l = a(s, 2),
                                            c = l[0],
                                            u = l[1],
                                            h = c.position(u, 0 !== n),
                                            d = a(h, 2);
                                        o = d[0],
                                            u = d[1],
                                            i.push(o, u)
                                    }),
                                    i.length < 2 && (i = i.concat(i)),
                                    i
                            }
                        }, {
                            key: "scrollIntoView",
                            value: function (t) {
                                var e = this.lastRange;
                                if (null != e) {
                                    var n = this.getBounds(e.index, e.length);
                                    if (null != n) {
                                        var i = this.scroll.length() - 1,
                                            r = this.scroll.line(Math.min(e.index, i)),
                                            o = a(r, 1)[0],
                                            s = o;
                                        if (e.length > 0) {
                                            var l = this.scroll.line(Math.min(e.index + e.length, i));
                                            s = a(l, 1)[0]
                                        }
                                        if (null != o && null != s) {
                                            var c = t.getBoundingClientRect();
                                            n.top < c.top ? t.scrollTop -= c.top - n.top : n.bottom > c.bottom && (t.scrollTop += n.bottom - c.bottom)
                                        }
                                    }
                                }
                            }
                        }, {
                            key: "setNativeRange",
                            value: function (t, e) {
                                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : t,
                                    i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : e,
                                    r = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
                                if (f.info("setNativeRange", t, e, n, i),
                                    null == t || null != this.root.parentNode && null != t.parentNode && null != n.parentNode) {
                                    var o = document.getSelection();
                                    if (null != o)
                                        if (null != t) {
                                            this.hasFocus() || this.root.focus();
                                            var s = (this.getNativeRange() || {}).native;
                                            if (null == s || r || t !== s.startContainer || e !== s.startOffset || n !== s.endContainer || i !== s.endOffset) {
                                                "BR" == t.tagName && (e = [].indexOf.call(t.parentNode.childNodes, t),
                                                        t = t.parentNode),
                                                    "BR" == n.tagName && (i = [].indexOf.call(n.parentNode.childNodes, n),
                                                        n = n.parentNode);
                                                var a = document.createRange();
                                                a.setStart(t, e),
                                                    a.setEnd(n, i),
                                                    o.removeAllRanges(),
                                                    o.addRange(a)
                                            }
                                        } else
                                            o.removeAllRanges(),
                                            this.root.blur(),
                                            document.body.focus()
                                }
                            }
                        }, {
                            key: "setRange",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                                    n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : d.default.sources.API;
                                if ("string" == typeof e && (n = e,
                                        e = !1),
                                    f.info("setRange", t),
                                    null != t) {
                                    var i = this.rangeToNative(t);
                                    this.setNativeRange.apply(this, r(i).concat([e]))
                                } else
                                    this.setNativeRange(null);
                                this.update(n)
                            }
                        }, {
                            key: "update",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : d.default.sources.USER,
                                    e = this.lastRange,
                                    n = this.getRange(),
                                    i = a(n, 2),
                                    r = i[0],
                                    o = i[1];
                                if (this.lastRange = r,
                                    null != this.lastRange && (this.savedRange = this.lastRange), !(0,
                                        h.default)(e, this.lastRange)) {
                                    var s;
                                    !this.composing && null != o && o.native.collapsed && o.start.node !== this.cursor.textNode && this.cursor.restore();
                                    var l = [d.default.events.SELECTION_CHANGE, (0,
                                        u.default)(this.lastRange), (0,
                                        u.default)(e), t];
                                    if ((s = this.emitter).emit.apply(s, [d.default.events.EDITOR_CHANGE].concat(l)),
                                        t !== d.default.sources.SILENT) {
                                        var c;
                                        (c = this.emitter).emit.apply(c, l)
                                    }
                                }
                            }
                        }]),
                        t
                }();
            e.Range = p,
                e.default = g
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                c = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default.Embed),
                        s(e, [{
                            key: "insertInto",
                            value: function (t, n) {
                                0 === t.children.length ? a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertInto", this).call(this, t, n) : this.remove()
                            }
                        }, {
                            key: "length",
                            value: function () {
                                return 0
                            }
                        }, {
                            key: "value",
                            value: function () {
                                return ""
                            }
                        }], [{
                            key: "value",
                            value: function () {}
                        }]),
                        e
                }();
            c.blotName = "break",
                c.tagName = "BR",
                e.default = c
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                var e = a.find(t);
                if (null == e)
                    try {
                        e = a.create(t)
                    } catch (n) {
                        e = a.create(a.Scope.INLINE), [].slice.call(t.childNodes).forEach(function (t) {
                                e.domNode.appendChild(t)
                            }),
                            t.parentNode.replaceChild(e.domNode, t),
                            e.attach()
                    }
                return e
            }
            var r = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = n(44),
                s = n(30),
                a = n(1),
                l = function (t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return r(e, t),
                        e.prototype.appendChild = function (t) {
                            this.insertBefore(t)
                        },
                        e.prototype.attach = function () {
                            var e = this;
                            t.prototype.attach.call(this),
                                this.children = new o.default, [].slice.call(this.domNode.childNodes).reverse().forEach(function (t) {
                                    try {
                                        var n = i(t);
                                        e.insertBefore(n, e.children.head)
                                    } catch (t) {
                                        if (t instanceof a.ParchmentError)
                                            return;
                                        throw t
                                    }
                                })
                        },
                        e.prototype.deleteAt = function (t, e) {
                            if (0 === t && e === this.length())
                                return this.remove();
                            this.children.forEachAt(t, e, function (t, e, n) {
                                t.deleteAt(e, n)
                            })
                        },
                        e.prototype.descendant = function (t, n) {
                            var i = this.children.find(n),
                                r = i[0],
                                o = i[1];
                            return null == t.blotName && t(r) || null != t.blotName && r instanceof t ? [r, o] : r instanceof e ? r.descendant(t, o) : [null, -1]
                        },
                        e.prototype.descendants = function (t, n, i) {
                            void 0 === n && (n = 0),
                                void 0 === i && (i = Number.MAX_VALUE);
                            var r = [],
                                o = i;
                            return this.children.forEachAt(n, i, function (n, i, s) {
                                    (null == t.blotName && t(n) || null != t.blotName && n instanceof t) && r.push(n),
                                        n instanceof e && (r = r.concat(n.descendants(t, i, o))),
                                        o -= s
                                }),
                                r
                        },
                        e.prototype.detach = function () {
                            this.children.forEach(function (t) {
                                    t.detach()
                                }),
                                t.prototype.detach.call(this)
                        },
                        e.prototype.formatAt = function (t, e, n, i) {
                            this.children.forEachAt(t, e, function (t, e, r) {
                                t.formatAt(e, r, n, i)
                            })
                        },
                        e.prototype.insertAt = function (t, e, n) {
                            var i = this.children.find(t),
                                r = i[0],
                                o = i[1];
                            if (r)
                                r.insertAt(o, e, n);
                            else {
                                var s = null == n ? a.create("text", e) : a.create(e, n);
                                this.appendChild(s)
                            }
                        },
                        e.prototype.insertBefore = function (t, e) {
                            if (null != this.statics.allowedChildren && !this.statics.allowedChildren.some(function (e) {
                                    return t instanceof e
                                }))
                                throw new a.ParchmentError("Cannot insert " + t.statics.blotName + " into " + this.statics.blotName);
                            t.insertInto(this, e)
                        },
                        e.prototype.length = function () {
                            return this.children.reduce(function (t, e) {
                                return t + e.length()
                            }, 0)
                        },
                        e.prototype.moveChildren = function (t, e) {
                            this.children.forEach(function (n) {
                                t.insertBefore(n, e)
                            })
                        },
                        e.prototype.optimize = function (e) {
                            if (t.prototype.optimize.call(this, e),
                                0 === this.children.length)
                                if (null != this.statics.defaultChild) {
                                    var n = a.create(this.statics.defaultChild);
                                    this.appendChild(n),
                                        n.optimize(e)
                                } else
                                    this.remove()
                        },
                        e.prototype.path = function (t, n) {
                            void 0 === n && (n = !1);
                            var i = this.children.find(t, n),
                                r = i[0],
                                o = i[1],
                                s = [
                                    [this, t]
                                ];
                            return r instanceof e ? s.concat(r.path(o, n)) : (null != r && s.push([r, o]),
                                s)
                        },
                        e.prototype.removeChild = function (t) {
                            this.children.remove(t)
                        },
                        e.prototype.replace = function (n) {
                            n instanceof e && n.moveChildren(this),
                                t.prototype.replace.call(this, n)
                        },
                        e.prototype.split = function (t, e) {
                            if (void 0 === e && (e = !1), !e) {
                                if (0 === t)
                                    return this;
                                if (t === this.length())
                                    return this.next
                            }
                            var n = this.clone();
                            return this.parent.insertBefore(n, this.next),
                                this.children.forEachAt(t, this.length(), function (t, i, r) {
                                    t = t.split(i, e),
                                        n.appendChild(t)
                                }),
                                n
                        },
                        e.prototype.unwrap = function () {
                            this.moveChildren(this.parent, this.next),
                                this.remove()
                        },
                        e.prototype.update = function (t, e) {
                            var n = this,
                                r = [],
                                o = [];
                            t.forEach(function (t) {
                                    t.target === n.domNode && "childList" === t.type && (r.push.apply(r, t.addedNodes),
                                        o.push.apply(o, t.removedNodes))
                                }),
                                o.forEach(function (t) {
                                    if (!(null != t.parentNode && "IFRAME" !== t.tagName && document.body.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {
                                        var e = a.find(t);
                                        null != e && (null != e.domNode.parentNode && e.domNode.parentNode !== n.domNode || e.detach())
                                    }
                                }),
                                r.filter(function (t) {
                                    return t.parentNode == n.domNode
                                }).sort(function (t, e) {
                                    return t === e ? 0 : t.compareDocumentPosition(e) & Node.DOCUMENT_POSITION_FOLLOWING ? 1 : -1
                                }).forEach(function (t) {
                                    var e = null;
                                    null != t.nextSibling && (e = a.find(t.nextSibling));
                                    var r = i(t);
                                    r.next == e && null != r.next || (null != r.parent && r.parent.removeChild(n),
                                        n.insertBefore(r, e))
                                })
                        },
                        e
                }(s.default);
            e.default = l
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = n(12),
                o = n(31),
                s = n(17),
                a = n(1),
                l = function (t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return i(e, t),
                        e.formats = function (t) {
                            return "string" == typeof this.tagName || (Array.isArray(this.tagName) ? t.tagName.toLowerCase() : void 0)
                        },
                        e.prototype.attach = function () {
                            t.prototype.attach.call(this),
                                this.attributes = new o.default(this.domNode)
                        },
                        e.prototype.format = function (t, e) {
                            var n = a.query(t);
                            n instanceof r.default ? this.attributes.attribute(n, e) : e && (null == n || t === this.statics.blotName && this.formats()[t] === e || this.replaceWith(t, e))
                        },
                        e.prototype.formats = function () {
                            var t = this.attributes.values(),
                                e = this.statics.formats(this.domNode);
                            return null != e && (t[this.statics.blotName] = e),
                                t
                        },
                        e.prototype.replaceWith = function (e, n) {
                            var i = t.prototype.replaceWith.call(this, e, n);
                            return this.attributes.copy(i),
                                i
                        },
                        e.prototype.update = function (e, n) {
                            var i = this;
                            t.prototype.update.call(this, e, n),
                                e.some(function (t) {
                                    return t.target === i.domNode && "attributes" === t.type
                                }) && this.attributes.build()
                        },
                        e.prototype.wrap = function (n, i) {
                            var r = t.prototype.wrap.call(this, n, i);
                            return r instanceof e && r.statics.scope === this.statics.scope && this.attributes.move(r),
                                r
                        },
                        e
                }(s.default);
            e.default = l
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = n(30),
                o = n(1),
                s = function (t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return i(e, t),
                        e.value = function (t) {
                            return !0
                        },
                        e.prototype.index = function (t, e) {
                            return this.domNode === t || this.domNode.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_CONTAINED_BY ? Math.min(e, 1) : -1
                        },
                        e.prototype.position = function (t, e) {
                            var n = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);
                            return t > 0 && (n += 1), [this.parent.domNode, n]
                        },
                        e.prototype.value = function () {
                            return t = {},
                                t[this.statics.blotName] = this.statics.value(this.domNode) || !0,
                                t;
                            var t
                        },
                        e.scope = o.Scope.INLINE_BLOT,
                        e
                }(r.default);
            e.default = s
        }, function (t, e, n) {
            function i(t) {
                this.ops = t,
                    this.index = 0,
                    this.offset = 0
            }
            var r = n(11),
                o = n(3),
                s = {
                    attributes: {
                        compose: function (t, e, n) {
                            "object" != typeof t && (t = {}),
                                "object" != typeof e && (e = {});
                            var i = o(!0, {}, e);
                            n || (i = Object.keys(i).reduce(function (t, e) {
                                return null != i[e] && (t[e] = i[e]),
                                    t
                            }, {}));
                            for (var r in t)
                                void 0 !== t[r] && void 0 === e[r] && (i[r] = t[r]);
                            return Object.keys(i).length > 0 ? i : void 0
                        },
                        diff: function (t, e) {
                            "object" != typeof t && (t = {}),
                                "object" != typeof e && (e = {});
                            var n = Object.keys(t).concat(Object.keys(e)).reduce(function (n, i) {
                                return r(t[i], e[i]) || (n[i] = void 0 === e[i] ? null : e[i]),
                                    n
                            }, {});
                            return Object.keys(n).length > 0 ? n : void 0
                        },
                        transform: function (t, e, n) {
                            if ("object" != typeof t)
                                return e;
                            if ("object" == typeof e) {
                                if (!n)
                                    return e;
                                var i = Object.keys(e).reduce(function (n, i) {
                                    return void 0 === t[i] && (n[i] = e[i]),
                                        n
                                }, {});
                                return Object.keys(i).length > 0 ? i : void 0
                            }
                        }
                    },
                    iterator: function (t) {
                        return new i(t)
                    },
                    length: function (t) {
                        return "number" == typeof t.delete ? t.delete : "number" == typeof t.retain ? t.retain : "string" == typeof t.insert ? t.insert.length : 1
                    }
                };
            i.prototype.hasNext = function () {
                    return this.peekLength() < 1 / 0
                },
                i.prototype.next = function (t) {
                    t || (t = 1 / 0);
                    var e = this.ops[this.index];
                    if (e) {
                        var n = this.offset,
                            i = s.length(e);
                        if (t >= i - n ? (t = i - n,
                                this.index += 1,
                                this.offset = 0) : this.offset += t,
                            "number" == typeof e.delete)
                            return {
                                delete: t
                            };
                        var r = {};
                        return e.attributes && (r.attributes = e.attributes),
                            "number" == typeof e.retain ? r.retain = t : "string" == typeof e.insert ? r.insert = e.insert.substr(n, t) : r.insert = e.insert,
                            r
                    }
                    return {
                        retain: 1 / 0
                    }
                },
                i.prototype.peek = function () {
                    return this.ops[this.index]
                },
                i.prototype.peekLength = function () {
                    return this.ops[this.index] ? s.length(this.ops[this.index]) - this.offset : 1 / 0
                },
                i.prototype.peekType = function () {
                    return this.ops[this.index] ? "number" == typeof this.ops[this.index].delete ? "delete" : "number" == typeof this.ops[this.index].retain ? "retain" : "insert" : "retain"
                },
                t.exports = s
        }, function (t, e) {
            var n = function () {
                "use strict";

                function t(t, e) {
                    return null != e && t instanceof e
                }

                function e(n, a, l, c, u) {
                    function h(n, l) {
                        if (null === n)
                            return null;
                        if (0 === l)
                            return n;
                        var g, _;
                        if ("object" != typeof n)
                            return n;
                        if (t(n, r))
                            g = new r;
                        else if (t(n, o))
                            g = new o;
                        else if (t(n, s))
                            g = new s(function (t, e) {
                                n.then(function (e) {
                                    t(h(e, l - 1))
                                }, function (t) {
                                    e(h(t, l - 1))
                                })
                            });
                        else if (e.__isArray(n))
                            g = [];
                        else if (e.__isRegExp(n))
                            g = new RegExp(n.source, i(n)),
                            n.lastIndex && (g.lastIndex = n.lastIndex);
                        else if (e.__isDate(n))
                            g = new Date(n.getTime());
                        else {
                            if (p && Buffer.isBuffer(n))
                                return g = new Buffer(n.length),
                                    n.copy(g),
                                    g;
                            t(n, Error) ? g = Object.create(n) : void 0 === c ? (_ = Object.getPrototypeOf(n),
                                g = Object.create(_)) : (g = Object.create(c),
                                _ = c)
                        }
                        if (a) {
                            var y = d.indexOf(n);
                            if (-1 != y)
                                return f[y];
                            d.push(n),
                                f.push(g)
                        }
                        t(n, r) && n.forEach(function (t, e) {
                                var n = h(e, l - 1),
                                    i = h(t, l - 1);
                                g.set(n, i)
                            }),
                            t(n, o) && n.forEach(function (t) {
                                var e = h(t, l - 1);
                                g.add(e)
                            });
                        for (var v in n) {
                            var m;
                            _ && (m = Object.getOwnPropertyDescriptor(_, v)),
                                m && null == m.set || (g[v] = h(n[v], l - 1))
                        }
                        if (Object.getOwnPropertySymbols)
                            for (var b = Object.getOwnPropertySymbols(n), v = 0; v < b.length; v++) {
                                var w = b[v];
                                (!(k = Object.getOwnPropertyDescriptor(n, w)) || k.enumerable || u) && (g[w] = h(n[w], l - 1),
                                    k.enumerable || Object.defineProperty(g, w, {
                                        enumerable: !1
                                    }))
                            }
                        if (u)
                            for (var x = Object.getOwnPropertyNames(n), v = 0; v < x.length; v++) {
                                var E = x[v],
                                    k = Object.getOwnPropertyDescriptor(n, E);
                                k && k.enumerable || (g[E] = h(n[E], l - 1),
                                    Object.defineProperty(g, E, {
                                        enumerable: !1
                                    }))
                            }
                        return g
                    }
                    "object" == typeof a && (l = a.depth,
                        c = a.prototype,
                        u = a.includeNonEnumerable,
                        a = a.circular);
                    var d = [],
                        f = [],
                        p = "undefined" != typeof Buffer;
                    return void 0 === a && (a = !0),
                        void 0 === l && (l = 1 / 0),
                        h(n, l)
                }

                function n(t) {
                    return Object.prototype.toString.call(t)
                }

                function i(t) {
                    var e = "";
                    return t.global && (e += "g"),
                        t.ignoreCase && (e += "i"),
                        t.multiline && (e += "m"),
                        e
                }
                var r;
                try {
                    r = Map
                } catch (t) {
                    r = function () {}
                }
                var o;
                try {
                    o = Set
                } catch (t) {
                    o = function () {}
                }
                var s;
                try {
                    s = Promise
                } catch (t) {
                    s = function () {}
                }
                return e.clonePrototype = function (t) {
                        if (null === t)
                            return null;
                        var e = function () {};
                        return e.prototype = t,
                            new e
                    },
                    e.__objToStr = n,
                    e.__isDate = function (t) {
                        return "object" == typeof t && "[object Date]" === n(t)
                    },
                    e.__isArray = function (t) {
                        return "object" == typeof t && "[object Array]" === n(t)
                    },
                    e.__isRegExp = function (t) {
                        return "object" == typeof t && "[object RegExp]" === n(t)
                    },
                    e.__getRegExpFlags = i,
                    e
            }();
            "object" == typeof t && t.exports && (t.exports = n)
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t) {
                return t instanceof p.default || t instanceof f.BlockEmbed
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var l = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                c = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                u = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                h = i(n(0)),
                d = i(n(8)),
                f = n(4),
                p = i(f),
                g = i(n(16)),
                _ = i(n(13)),
                y = i(n(24)),
                v = function (t) {
                    function e(t, n) {
                        r(this, e);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                        return i.emitter = n.emitter,
                            Array.isArray(n.whitelist) && (i.whitelist = n.whitelist.reduce(function (t, e) {
                                return t[e] = !0,
                                    t
                            }, {})),
                            i.domNode.addEventListener("DOMNodeInserted", function () {}),
                            i.optimize(),
                            i.enable(),
                            i
                    }
                    return s(e, h.default.Scroll),
                        c(e, [{
                            key: "batchStart",
                            value: function () {
                                this.batch = !0
                            }
                        }, {
                            key: "batchEnd",
                            value: function () {
                                this.batch = !1,
                                    this.optimize()
                            }
                        }, {
                            key: "deleteAt",
                            value: function (t, n) {
                                var i = this.line(t),
                                    r = l(i, 2),
                                    o = r[0],
                                    s = r[1],
                                    a = this.line(t + n),
                                    c = l(a, 1)[0];
                                if (u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "deleteAt", this).call(this, t, n),
                                    null != c && o !== c && s > 0) {
                                    if (o instanceof f.BlockEmbed || c instanceof f.BlockEmbed)
                                        return void this.optimize();
                                    if (o instanceof _.default) {
                                        var h = o.newlineIndex(o.length(), !0);
                                        if (h > -1 && (o = o.split(h + 1)) === c)
                                            return void this.optimize()
                                    } else if (c instanceof _.default) {
                                        var d = c.newlineIndex(0);
                                        d > -1 && c.split(d + 1)
                                    }
                                    var p = c.children.head instanceof g.default ? null : c.children.head;
                                    o.moveChildren(c, p),
                                        o.remove()
                                }
                                this.optimize()
                            }
                        }, {
                            key: "enable",
                            value: function () {
                                var t = !(arguments.length > 0 && void 0 !== arguments[0]) || arguments[0];
                                this.domNode.setAttribute("contenteditable", t)
                            }
                        }, {
                            key: "formatAt",
                            value: function (t, n, i, r) {
                                (null == this.whitelist || this.whitelist[i]) && (u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "formatAt", this).call(this, t, n, i, r),
                                    this.optimize())
                            }
                        }, {
                            key: "insertAt",
                            value: function (t, n, i) {
                                if (null == i || null == this.whitelist || this.whitelist[n]) {
                                    if (t >= this.length())
                                        if (null == i || null == h.default.query(n, h.default.Scope.BLOCK)) {
                                            var r = h.default.create(this.statics.defaultChild);
                                            this.appendChild(r),
                                                null == i && n.endsWith("\n") && (n = n.slice(0, -1)),
                                                r.insertAt(0, n, i)
                                        } else {
                                            var o = h.default.create(n, i);
                                            this.appendChild(o)
                                        }
                                    else
                                        u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertAt", this).call(this, t, n, i);
                                    this.optimize()
                                }
                            }
                        }, {
                            key: "insertBefore",
                            value: function (t, n) {
                                if (t.statics.scope === h.default.Scope.INLINE_BLOT) {
                                    var i = h.default.create(this.statics.defaultChild);
                                    i.appendChild(t),
                                        t = i
                                }
                                u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n)
                            }
                        }, {
                            key: "leaf",
                            value: function (t) {
                                return this.path(t).pop() || [null, -1]
                            }
                        }, {
                            key: "line",
                            value: function (t) {
                                return t === this.length() ? this.line(t - 1) : this.descendant(a, t)
                            }
                        }, {
                            key: "lines",
                            value: function () {
                                return function t(e, n, i) {
                                    var r = [],
                                        o = i;
                                    return e.children.forEachAt(n, i, function (e, n, i) {
                                            a(e) ? r.push(e) : e instanceof h.default.Container && (r = r.concat(t(e, n, o))),
                                                o -= i
                                        }),
                                        r
                                }(this, arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0, arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : Number.MAX_VALUE)
                            }
                        }, {
                            key: "optimize",
                            value: function () {
                                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [],
                                    n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                                !0 !== this.batch && (u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t, n),
                                    t.length > 0 && this.emitter.emit(d.default.events.SCROLL_OPTIMIZE, t, n))
                            }
                        }, {
                            key: "path",
                            value: function (t) {
                                return u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "path", this).call(this, t).slice(1)
                            }
                        }, {
                            key: "update",
                            value: function (t) {
                                if (!0 !== this.batch) {
                                    var n = d.default.sources.USER;
                                    "string" == typeof t && (n = t),
                                        Array.isArray(t) || (t = this.observer.takeRecords()),
                                        t.length > 0 && this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE, n, t),
                                        u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "update", this).call(this, t.concat([])),
                                        t.length > 0 && this.emitter.emit(d.default.events.SCROLL_UPDATE, n, t)
                                }
                            }
                        }]),
                        e
                }();
            v.blotName = "scroll",
                v.className = "ql-editor",
                v.tagName = "DIV",
                v.defaultChild = "block",
                v.allowedChildren = [p.default, f.BlockEmbed, y.default],
                e.default = v
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                u = i(n(0)),
                h = i(n(7)),
                d = function (t) {
                    function e(t, n) {
                        r(this, e);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                        return i.selection = n,
                            i.textNode = document.createTextNode(e.CONTENTS),
                            i.domNode.appendChild(i.textNode),
                            i._length = 0,
                            i
                    }
                    return s(e, u.default.Embed),
                        c(e, null, [{
                            key: "value",
                            value: function () {}
                        }]),
                        c(e, [{
                            key: "detach",
                            value: function () {
                                null != this.parent && this.parent.removeChild(this)
                            }
                        }, {
                            key: "format",
                            value: function (t, n) {
                                if (0 !== this._length)
                                    return l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
                                for (var i = this, r = 0; null != i && i.statics.scope !== u.default.Scope.BLOCK_BLOT;)
                                    r += i.offset(i.parent),
                                    i = i.parent;
                                null != i && (this._length = e.CONTENTS.length,
                                    i.optimize(),
                                    i.formatAt(r, e.CONTENTS.length, t, n),
                                    this._length = 0)
                            }
                        }, {
                            key: "index",
                            value: function (t, n) {
                                return t === this.textNode ? 0 : l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "index", this).call(this, t, n)
                            }
                        }, {
                            key: "length",
                            value: function () {
                                return this._length
                            }
                        }, {
                            key: "position",
                            value: function () {
                                return [this.textNode, this.textNode.data.length]
                            }
                        }, {
                            key: "remove",
                            value: function () {
                                l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "remove", this).call(this),
                                    this.parent = null
                            }
                        }, {
                            key: "restore",
                            value: function () {
                                if (!this.selection.composing && null != this.parent) {
                                    var t = this.textNode,
                                        n = this.selection.getNativeRange(),
                                        i = void 0,
                                        r = void 0,
                                        o = void 0;
                                    if (null != n && n.start.node === t && n.end.node === t) {
                                        var s = [t, n.start.offset, n.end.offset];
                                        i = s[0],
                                            r = s[1],
                                            o = s[2]
                                    }
                                    for (; null != this.domNode.lastChild && this.domNode.lastChild !== this.textNode;)
                                        this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);
                                    if (this.textNode.data !== e.CONTENTS) {
                                        var l = this.textNode.data.split(e.CONTENTS).join("");
                                        this.next instanceof h.default ? (i = this.next.domNode,
                                            this.next.insertAt(0, l),
                                            this.textNode.data = e.CONTENTS) : (this.textNode.data = l,
                                            this.parent.insertBefore(u.default.create(this.textNode), this),
                                            this.textNode = document.createTextNode(e.CONTENTS),
                                            this.domNode.appendChild(this.textNode))
                                    }
                                    if (this.remove(),
                                        null != r) {
                                        var c = [r, o].map(function (t) {
                                                return Math.max(0, Math.min(i.data.length, t - 1))
                                            }),
                                            d = a(c, 2);
                                        return r = d[0],
                                            o = d[1], {
                                                startNode: i,
                                                startOffset: r,
                                                endNode: i,
                                                endOffset: o
                                            }
                                    }
                                }
                            }
                        }, {
                            key: "update",
                            value: function (t, e) {
                                var n = this;
                                if (t.some(function (t) {
                                        return "characterData" === t.type && t.target === n.textNode
                                    })) {
                                    var i = this.restore();
                                    i && (e.range = i)
                                }
                            }
                        }, {
                            key: "value",
                            value: function () {
                                return ""
                            }
                        }]),
                        e
                }();
            d.blotName = "cursor",
                d.className = "ql-cursor",
                d.tagName = "span",
                d.CONTENTS = "\ufeff",
                e.default = d
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = i(n(0)),
                l = n(4),
                c = i(l),
                u = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, a.default.Container),
                        e
                }();
            u.allowedChildren = [c.default, l.BlockEmbed, u],
                e.default = u
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = i(n(0)),
                u = i(n(7)),
                h = "\ufeff",
                d = function (t) {
                    function e(t) {
                        r(this, e);
                        var n = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                        return n.contentNode = document.createElement("span"),
                            n.contentNode.setAttribute("contenteditable", !1), [].slice.call(n.domNode.childNodes).forEach(function (t) {
                                n.contentNode.appendChild(t)
                            }),
                            n.leftGuard = document.createTextNode(h),
                            n.rightGuard = document.createTextNode(h),
                            n.domNode.appendChild(n.leftGuard),
                            n.domNode.appendChild(n.contentNode),
                            n.domNode.appendChild(n.rightGuard),
                            n
                    }
                    return s(e, c.default.Embed),
                        a(e, [{
                            key: "index",
                            value: function (t, n) {
                                return t === this.leftGuard ? 0 : t === this.rightGuard ? 1 : l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "index", this).call(this, t, n)
                            }
                        }, {
                            key: "restore",
                            value: function (t) {
                                var e = void 0,
                                    n = void 0,
                                    i = t.data.split(h).join("");
                                if (t === this.leftGuard)
                                    if (this.prev instanceof u.default) {
                                        var r = this.prev.length();
                                        this.prev.insertAt(r, i),
                                            e = {
                                                startNode: this.prev.domNode,
                                                startOffset: r + i.length
                                            }
                                    } else
                                        n = document.createTextNode(i),
                                        this.parent.insertBefore(c.default.create(n), this),
                                        e = {
                                            startNode: n,
                                            startOffset: i.length
                                        };
                                else
                                    t === this.rightGuard && (this.next instanceof u.default ? (this.next.insertAt(0, i),
                                        e = {
                                            startNode: this.next.domNode,
                                            startOffset: i.length
                                        }) : (n = document.createTextNode(i),
                                        this.parent.insertBefore(c.default.create(n), this.next),
                                        e = {
                                            startNode: n,
                                            startOffset: i.length
                                        }));
                                return t.data = h,
                                    e
                            }
                        }, {
                            key: "update",
                            value: function (t, e) {
                                var n = this;
                                t.forEach(function (t) {
                                    if ("characterData" === t.type && (t.target === n.leftGuard || t.target === n.rightGuard)) {
                                        var i = n.restore(t.target);
                                        i && (e.range = i)
                                    }
                                })
                            }
                        }]),
                        e
                }();
            e.default = d
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.ColorStyle = e.ColorClass = e.ColorAttributor = void 0;
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                c = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default.Attributor.Style),
                        s(e, [{
                            key: "value",
                            value: function (t) {
                                var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t);
                                return n.startsWith("rgb(") ? (n = n.replace(/^[^\d]+/, "").replace(/[^\d]+$/, ""),
                                    "#" + n.split(",").map(function (t) {
                                        return ("00" + parseInt(t).toString(16)).slice(-2)
                                    }).join("")) : n
                            }
                        }]),
                        e
                }(),
                u = new l.default.Attributor.Class("color", "ql-color", {
                    scope: l.default.Scope.INLINE
                }),
                h = new c("color", "color", {
                    scope: l.default.Scope.INLINE
                });
            e.ColorAttributor = c,
                e.ColorClass = u,
                e.ColorStyle = h
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function s(t, e) {
                var n = document.createElement("a");
                n.href = t;
                var i = n.href.slice(0, n.href.indexOf(":"));
                return e.indexOf(i) > -1
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.sanitize = e.default = void 0;
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(6)),
                u = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, c.default),
                        a(e, [{
                            key: "format",
                            value: function (t, n) {
                                if (t !== this.statics.blotName || !n)
                                    return l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n);
                                n = this.constructor.sanitize(n),
                                    this.domNode.setAttribute("href", n)
                            }
                        }], [{
                            key: "create",
                            value: function (t) {
                                var n = l(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
                                return t = this.sanitize(t),
                                    n.setAttribute("href", t),
                                    n.setAttribute("target", "_blank"),
                                    n
                            }
                        }, {
                            key: "formats",
                            value: function (t) {
                                return t.getAttribute("href")
                            }
                        }, {
                            key: "sanitize",
                            value: function (t) {
                                return s(t, this.PROTOCOL_WHITELIST) ? t : this.SANITIZED_URL
                            }
                        }]),
                        e
                }();
            u.blotName = "link",
                u.tagName = "A",
                u.SANITIZED_URL = "about:blank",
                u.PROTOCOL_WHITELIST = ["http", "https", "mailto", "tel"],
                e.default = u,
                e.sanitize = s
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
                    return typeof t
                } :
                function (t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                o = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(107)),
                a = function () {
                    function t(e) {
                        var n = this;
                        i(this, t),
                            this.select = e,
                            this.container = document.createElement("span"),
                            this.buildPicker(),
                            this.select.style.display = "none",
                            this.select.parentNode.insertBefore(this.container, this.select),
                            this.label.addEventListener("mousedown", function () {
                                n.container.classList.toggle("ql-expanded")
                            }),
                            this.select.addEventListener("change", this.update.bind(this))
                    }
                    return o(t, [{
                            key: "buildItem",
                            value: function (t) {
                                var e = this,
                                    n = document.createElement("span");
                                return n.classList.add("ql-picker-item"),
                                    t.hasAttribute("value") && n.setAttribute("data-value", t.getAttribute("value")),
                                    t.textContent && n.setAttribute("data-label", t.textContent),
                                    n.addEventListener("click", function () {
                                        e.selectItem(n, !0)
                                    }),
                                    n
                            }
                        }, {
                            key: "buildLabel",
                            value: function () {
                                var t = document.createElement("span");
                                return t.classList.add("ql-picker-label"),
                                    t.innerHTML = s.default,
                                    this.container.appendChild(t),
                                    t
                            }
                        }, {
                            key: "buildOptions",
                            value: function () {
                                var t = this,
                                    e = document.createElement("span");
                                e.classList.add("ql-picker-options"), [].slice.call(this.select.options).forEach(function (n) {
                                        var i = t.buildItem(n);
                                        e.appendChild(i), !0 === n.selected && t.selectItem(i)
                                    }),
                                    this.container.appendChild(e)
                            }
                        }, {
                            key: "buildPicker",
                            value: function () {
                                var t = this;
                                [].slice.call(this.select.attributes).forEach(function (e) {
                                        t.container.setAttribute(e.name, e.value)
                                    }),
                                    this.container.classList.add("ql-picker"),
                                    this.label = this.buildLabel(),
                                    this.buildOptions()
                            }
                        }, {
                            key: "close",
                            value: function () {
                                this.container.classList.remove("ql-expanded")
                            }
                        }, {
                            key: "selectItem",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                                    n = this.container.querySelector(".ql-selected");
                                if (t !== n && (null != n && n.classList.remove("ql-selected"),
                                        null != t && (t.classList.add("ql-selected"),
                                            this.select.selectedIndex = [].indexOf.call(t.parentNode.children, t),
                                            t.hasAttribute("data-value") ? this.label.setAttribute("data-value", t.getAttribute("data-value")) : this.label.removeAttribute("data-value"),
                                            t.hasAttribute("data-label") ? this.label.setAttribute("data-label", t.getAttribute("data-label")) : this.label.removeAttribute("data-label"),
                                            e))) {
                                    if ("function" == typeof Event)
                                        this.select.dispatchEvent(new Event("change"));
                                    else if ("object" === ("undefined" == typeof Event ? "undefined" : r(Event))) {
                                        var i = document.createEvent("Event");
                                        i.initEvent("change", !0, !0),
                                            this.select.dispatchEvent(i)
                                    }
                                    this.close()
                                }
                            }
                        }, {
                            key: "update",
                            value: function () {
                                var t = void 0;
                                if (this.select.selectedIndex > -1) {
                                    var e = this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];
                                    t = this.select.options[this.select.selectedIndex],
                                        this.selectItem(e)
                                } else
                                    this.selectItem(null);
                                var n = null != t && t !== this.select.querySelector("option[selected]");
                                this.label.classList.toggle("ql-active", n)
                            }
                        }]),
                        t
                }();
            e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = i(n(0)),
                o = i(n(5)),
                s = n(4),
                a = i(s),
                l = i(n(16)),
                c = i(n(24)),
                u = i(n(23)),
                h = i(n(25)),
                d = i(n(6)),
                f = i(n(22)),
                p = i(n(7)),
                g = i(n(55)),
                _ = i(n(42)),
                y = i(n(35));
            o.default.register({
                    "blots/block": a.default,
                    "blots/block/embed": s.BlockEmbed,
                    "blots/break": l.default,
                    "blots/container": c.default,
                    "blots/cursor": u.default,
                    "blots/embed": h.default,
                    "blots/inline": d.default,
                    "blots/scroll": f.default,
                    "blots/text": p.default,
                    "modules/clipboard": g.default,
                    "modules/history": _.default,
                    "modules/keyboard": y.default
                }),
                r.default.register(a.default, l.default, u.default, d.default, f.default, p.default),
                e.default = o.default
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = n(1),
                r = function () {
                    function t(t) {
                        this.domNode = t,
                            this.attach()
                    }
                    return Object.defineProperty(t.prototype, "statics", {
                            get: function () {
                                return this.constructor
                            },
                            enumerable: !0,
                            configurable: !0
                        }),
                        t.create = function (t) {
                            if (null == this.tagName)
                                throw new i.ParchmentError("Blot definition missing tagName");
                            var e;
                            return Array.isArray(this.tagName) ? ("string" == typeof t && (t = t.toUpperCase(),
                                        parseInt(t).toString() === t && (t = parseInt(t))),
                                    e = "number" == typeof t ? document.createElement(this.tagName[t - 1]) : this.tagName.indexOf(t) > -1 ? document.createElement(t) : document.createElement(this.tagName[0])) : e = document.createElement(this.tagName),
                                this.className && e.classList.add(this.className),
                                e
                        },
                        t.prototype.attach = function () {
                            this.domNode[i.DATA_KEY] = {
                                blot: this
                            }
                        },
                        t.prototype.clone = function () {
                            var t = this.domNode.cloneNode(!1);
                            return i.create(t)
                        },
                        t.prototype.detach = function () {
                            null != this.parent && this.parent.removeChild(this),
                                delete this.domNode[i.DATA_KEY]
                        },
                        t.prototype.deleteAt = function (t, e) {
                            this.isolate(t, e).remove()
                        },
                        t.prototype.formatAt = function (t, e, n, r) {
                            var o = this.isolate(t, e);
                            if (null != i.query(n, i.Scope.BLOT) && r)
                                o.wrap(n, r);
                            else if (null != i.query(n, i.Scope.ATTRIBUTE)) {
                                var s = i.create(this.statics.scope);
                                o.wrap(s),
                                    s.format(n, r)
                            }
                        },
                        t.prototype.insertAt = function (t, e, n) {
                            var r = null == n ? i.create("text", e) : i.create(e, n),
                                o = this.split(t);
                            this.parent.insertBefore(r, o)
                        },
                        t.prototype.insertInto = function (t, e) {
                            if (null != this.parent && this.parent.children.remove(this),
                                t.children.insertBefore(this, e),
                                null != e)
                                var n = e.domNode;
                            null != this.next && this.domNode.nextSibling == n || t.domNode.insertBefore(this.domNode, void 0 !== n ? n : null),
                                this.parent = t,
                                this.scroll = t.scroll
                        },
                        t.prototype.isolate = function (t, e) {
                            var n = this.split(t);
                            return n.split(e),
                                n
                        },
                        t.prototype.length = function () {
                            return 1
                        },
                        t.prototype.offset = function (t) {
                            return void 0 === t && (t = this.parent),
                                null == this.parent || this == t ? 0 : this.parent.children.offset(this) + this.parent.offset(t)
                        },
                        t.prototype.optimize = function (t) {
                            null != this.domNode[i.DATA_KEY] && delete this.domNode[i.DATA_KEY].mutations
                        },
                        t.prototype.remove = function () {
                            null != this.domNode.parentNode && this.domNode.parentNode.removeChild(this.domNode),
                                this.detach()
                        },
                        t.prototype.replace = function (t) {
                            null != t.parent && (t.parent.insertBefore(this, t.next),
                                t.remove())
                        },
                        t.prototype.replaceWith = function (t, e) {
                            var n = "string" == typeof t ? i.create(t, e) : t;
                            return n.replace(this),
                                n
                        },
                        t.prototype.split = function (t, e) {
                            return 0 === t ? this : this.next
                        },
                        t.prototype.update = function (t, e) {},
                        t.prototype.wrap = function (t, e) {
                            var n = "string" == typeof t ? i.create(t, e) : t;
                            return null != this.parent && this.parent.insertBefore(n, this.next),
                                n.appendChild(this),
                                n
                        },
                        t.blotName = "abstract",
                        t
                }();
            e.default = r
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = n(12),
                r = n(32),
                o = n(33),
                s = n(1),
                a = function () {
                    function t(t) {
                        this.attributes = {},
                            this.domNode = t,
                            this.build()
                    }
                    return t.prototype.attribute = function (t, e) {
                            e ? t.add(this.domNode, e) && (null != t.value(this.domNode) ? this.attributes[t.attrName] = t : delete this.attributes[t.attrName]) : (t.remove(this.domNode),
                                delete this.attributes[t.attrName])
                        },
                        t.prototype.build = function () {
                            var t = this;
                            this.attributes = {};
                            var e = i.default.keys(this.domNode),
                                n = r.default.keys(this.domNode),
                                a = o.default.keys(this.domNode);
                            e.concat(n).concat(a).forEach(function (e) {
                                var n = s.query(e, s.Scope.ATTRIBUTE);
                                n instanceof i.default && (t.attributes[n.attrName] = n)
                            })
                        },
                        t.prototype.copy = function (t) {
                            var e = this;
                            Object.keys(this.attributes).forEach(function (n) {
                                var i = e.attributes[n].value(e.domNode);
                                t.format(n, i)
                            })
                        },
                        t.prototype.move = function (t) {
                            var e = this;
                            this.copy(t),
                                Object.keys(this.attributes).forEach(function (t) {
                                    e.attributes[t].remove(e.domNode)
                                }),
                                this.attributes = {}
                        },
                        t.prototype.values = function () {
                            var t = this;
                            return Object.keys(this.attributes).reduce(function (e, n) {
                                return e[n] = t.attributes[n].value(t.domNode),
                                    e
                            }, {})
                        },
                        t
                }();
            e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                return (t.getAttribute("class") || "").split(/\s+/).filter(function (t) {
                    return 0 === t.indexOf(e + "-")
                })
            }
            var r = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = function (t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }
                return r(e, t),
                    e.keys = function (t) {
                        return (t.getAttribute("class") || "").split(/\s+/).map(function (t) {
                            return t.split("-").slice(0, -1).join("-")
                        })
                    },
                    e.prototype.add = function (t, e) {
                        return !!this.canAdd(t, e) && (this.remove(t),
                            t.classList.add(this.keyName + "-" + e), !0)
                    },
                    e.prototype.remove = function (t) {
                        i(t, this.keyName).forEach(function (e) {
                                t.classList.remove(e)
                            }),
                            0 === t.classList.length && t.removeAttribute("class")
                    },
                    e.prototype.value = function (t) {
                        var e = (i(t, this.keyName)[0] || "").slice(this.keyName.length + 1);
                        return this.canAdd(t, e) ? e : ""
                    },
                    e
            }(n(12).default);
            e.default = o
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                var e = t.split("-"),
                    n = e.slice(1).map(function (t) {
                        return t[0].toUpperCase() + t.slice(1)
                    }).join("");
                return e[0] + n
            }
            var r = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = function (t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }
                return r(e, t),
                    e.keys = function (t) {
                        return (t.getAttribute("style") || "").split(";").map(function (t) {
                            return t.split(":")[0].trim()
                        })
                    },
                    e.prototype.add = function (t, e) {
                        return !!this.canAdd(t, e) && (t.style[i(this.keyName)] = e, !0)
                    },
                    e.prototype.remove = function (t) {
                        t.style[i(this.keyName)] = "",
                            t.getAttribute("style") || t.removeAttribute("style")
                    },
                    e.prototype.value = function (t) {
                        var e = t.style[i(this.keyName)];
                        return this.canAdd(t, e) ? e : ""
                    },
                    e
            }(n(12).default);
            e.default = o
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                o = function () {
                    function t(e, n) {
                        i(this, t),
                            this.quill = e,
                            this.options = n,
                            this.modules = {}
                    }
                    return r(t, [{
                            key: "init",
                            value: function () {
                                var t = this;
                                Object.keys(this.options.modules).forEach(function (e) {
                                    null == t.modules[e] && t.addModule(e)
                                })
                            }
                        }, {
                            key: "addModule",
                            value: function (t) {
                                var e = this.quill.constructor.import("modules/" + t);
                                return this.modules[t] = new e(this.quill, this.options.modules[t] || {}),
                                    this.modules[t]
                            }
                        }]),
                        t
                }();
            o.DEFAULTS = {
                    modules: {}
                },
                o.themes = {
                    default: o
                },
                e.default = o
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function a(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function l(t, e) {
                var n, i = t === P.keys.LEFT ? "prefix" : "suffix";
                return n = {
                        key: t,
                        shiftKey: e
                    },
                    r(n, i, /^$/),
                    r(n, "handler", function (n) {
                        var i = n.index;
                        t === P.keys.RIGHT && (i += n.length + 1);
                        var r = this.quill.getLeaf(i);
                        return !(y(r, 1)[0] instanceof T.default) || (t === P.keys.LEFT ? e ? this.quill.setSelection(n.index - 1, n.length + 1, O.default.sources.USER) : this.quill.setSelection(n.index - 1, O.default.sources.USER) : e ? this.quill.setSelection(n.index, n.length + 1, O.default.sources.USER) : this.quill.setSelection(n.index + n.length + 1, O.default.sources.USER), !1)
                    }),
                    n
            }

            function c(t, e) {
                if (!(0 === t.index || this.quill.getLength() <= 1)) {
                    var n = this.quill.getLine(t.index),
                        i = y(n, 1)[0],
                        r = {};
                    if (0 === e.offset) {
                        var o = this.quill.getLine(t.index - 1),
                            s = y(o, 1)[0];
                        if (null != s && s.length() > 1) {
                            var a = i.formats(),
                                l = this.quill.getFormat(t.index - 1, 1);
                            r = E.default.attributes.diff(a, l) || {}
                        }
                    }
                    var c = /[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix) ? 2 : 1;
                    this.quill.deleteText(t.index - c, c, O.default.sources.USER),
                        Object.keys(r).length > 0 && this.quill.formatLine(t.index - c, c, r, O.default.sources.USER),
                        this.quill.focus()
                }
            }

            function u(t, e) {
                var n = /^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix) ? 2 : 1;
                if (!(t.index >= this.quill.getLength() - n)) {
                    var i = {},
                        r = 0,
                        o = this.quill.getLine(t.index),
                        s = y(o, 1)[0];
                    if (e.offset >= s.length() - 1) {
                        var a = this.quill.getLine(t.index + 1),
                            l = y(a, 1)[0];
                        if (l) {
                            var c = s.formats(),
                                u = this.quill.getFormat(t.index, 1);
                            i = E.default.attributes.diff(c, u) || {},
                                r = l.length()
                        }
                    }
                    this.quill.deleteText(t.index, n, O.default.sources.USER),
                        Object.keys(i).length > 0 && this.quill.formatLine(t.index + r - 1, n, i, O.default.sources.USER)
                }
            }

            function h(t) {
                var e = this.quill.getLines(t),
                    n = {};
                if (e.length > 1) {
                    var i = e[0].formats(),
                        r = e[e.length - 1].formats();
                    n = E.default.attributes.diff(r, i) || {}
                }
                this.quill.deleteText(t, O.default.sources.USER),
                    Object.keys(n).length > 0 && this.quill.formatLine(t.index, 1, n, O.default.sources.USER),
                    this.quill.setSelection(t.index, O.default.sources.SILENT),
                    this.quill.focus()
            }

            function d(t, e) {
                var n = this;
                t.length > 0 && this.quill.scroll.deleteAt(t.index, t.length);
                var i = Object.keys(e.format).reduce(function (t, n) {
                    return k.default.query(n, k.default.Scope.BLOCK) && !Array.isArray(e.format[n]) && (t[n] = e.format[n]),
                        t
                }, {});
                this.quill.insertText(t.index, "\n", i, O.default.sources.USER),
                    this.quill.setSelection(t.index + 1, O.default.sources.SILENT),
                    this.quill.focus(),
                    Object.keys(e.format).forEach(function (t) {
                        null == i[t] && (Array.isArray(e.format[t]) || "link" !== t && n.quill.format(t, e.format[t], O.default.sources.USER))
                    })
            }

            function f(t) {
                return {
                    key: P.keys.TAB,
                    shiftKey: !t,
                    format: {
                        "code-block": !0
                    },
                    handler: function (e) {
                        var n = k.default.query("code-block"),
                            i = e.index,
                            r = e.length,
                            o = this.quill.scroll.descendant(n, i),
                            s = y(o, 2),
                            a = s[0],
                            l = s[1];
                        if (null != a) {
                            var c = this.quill.getIndex(a),
                                u = a.newlineIndex(l, !0) + 1,
                                h = a.newlineIndex(c + l + r),
                                d = a.domNode.textContent.slice(u, h).split("\n");
                            l = 0,
                                d.forEach(function (e, o) {
                                    t ? (a.insertAt(u + l, n.TAB),
                                            l += n.TAB.length,
                                            0 === o ? i += n.TAB.length : r += n.TAB.length) : e.startsWith(n.TAB) && (a.deleteAt(u + l, n.TAB.length),
                                            l -= n.TAB.length,
                                            0 === o ? i -= n.TAB.length : r -= n.TAB.length),
                                        l += e.length + 1
                                }),
                                this.quill.update(O.default.sources.USER),
                                this.quill.setSelection(i, r, O.default.sources.SILENT)
                        }
                    }
                }
            }

            function p(t) {
                return {
                    key: t[0].toUpperCase(),
                    shortKey: !0,
                    handler: function (e, n) {
                        this.quill.format(t, !n.format[t], O.default.sources.USER)
                    }
                }
            }

            function g(t) {
                if ("string" == typeof t || "number" == typeof t)
                    return g({
                        key: t
                    });
                if ("object" === (void 0 === t ? "undefined" : _(t)) && (t = (0,
                        m.default)(t, !1)),
                    "string" == typeof t.key)
                    if (null != P.keys[t.key.toUpperCase()])
                        t.key = P.keys[t.key.toUpperCase()];
                    else {
                        if (1 !== t.key.length)
                            return null;
                        t.key = t.key.toUpperCase().charCodeAt(0)
                    }
                return t.shortKey && (t[A] = t.shortKey,
                        delete t.shortKey),
                    t
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.SHORTKEY = e.default = void 0;
            var _ = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
                    return typeof t
                } :
                function (t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                y = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                v = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                m = i(n(21)),
                b = i(n(11)),
                w = i(n(3)),
                x = i(n(2)),
                E = i(n(20)),
                k = i(n(0)),
                T = i(n(25)),
                O = i(n(5)),
                C = i(n(10)),
                S = i(n(9)),
                j = (0,
                    C.default)("quill:keyboard"),
                A = /Mac/i.test(navigator.platform) ? "metaKey" : "ctrlKey",
                P = function (t) {
                    function e(t, n) {
                        o(this, e);
                        var i = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return i.bindings = {},
                            Object.keys(i.options.bindings).forEach(function (e) {
                                ("list autofill" !== e || null == t.scroll.whitelist || t.scroll.whitelist.list) && i.options.bindings[e] && i.addBinding(i.options.bindings[e])
                            }),
                            i.addBinding({
                                key: e.keys.ENTER,
                                shiftKey: null
                            }, d),
                            i.addBinding({
                                key: e.keys.ENTER,
                                metaKey: null,
                                ctrlKey: null,
                                altKey: null
                            }, function () {}),
                            /Firefox/i.test(navigator.userAgent) ? (i.addBinding({
                                    key: e.keys.BACKSPACE
                                }, {
                                    collapsed: !0
                                }, c),
                                i.addBinding({
                                    key: e.keys.DELETE
                                }, {
                                    collapsed: !0
                                }, u)) : (i.addBinding({
                                    key: e.keys.BACKSPACE
                                }, {
                                    collapsed: !0,
                                    prefix: /^.?$/
                                }, c),
                                i.addBinding({
                                    key: e.keys.DELETE
                                }, {
                                    collapsed: !0,
                                    suffix: /^.?$/
                                }, u)),
                            i.addBinding({
                                key: e.keys.BACKSPACE
                            }, {
                                collapsed: !1
                            }, h),
                            i.addBinding({
                                key: e.keys.DELETE
                            }, {
                                collapsed: !1
                            }, h),
                            i.addBinding({
                                key: e.keys.BACKSPACE,
                                altKey: null,
                                ctrlKey: null,
                                metaKey: null,
                                shiftKey: null
                            }, {
                                collapsed: !0,
                                offset: 0
                            }, c),
                            i.listen(),
                            i
                    }
                    return a(e, S.default),
                        v(e, null, [{
                            key: "match",
                            value: function (t, e) {
                                return e = g(e), !["altKey", "ctrlKey", "metaKey", "shiftKey"].some(function (n) {
                                    return !!e[n] !== t[n] && null !== e[n]
                                }) && e.key === (t.which || t.keyCode)
                            }
                        }]),
                        v(e, [{
                            key: "addBinding",
                            value: function (t) {
                                var e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},
                                    n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                                    i = g(t);
                                if (null == i || null == i.key)
                                    return j.warn("Attempted to add invalid keyboard binding", i);
                                "function" == typeof e && (e = {
                                        handler: e
                                    }),
                                    "function" == typeof n && (n = {
                                        handler: n
                                    }),
                                    i = (0,
                                        w.default)(i, e, n),
                                    this.bindings[i.key] = this.bindings[i.key] || [],
                                    this.bindings[i.key].push(i)
                            }
                        }, {
                            key: "listen",
                            value: function () {
                                var t = this;
                                this.quill.root.addEventListener("keydown", function (n) {
                                    if (!n.defaultPrevented) {
                                        var i = n.which || n.keyCode,
                                            r = (t.bindings[i] || []).filter(function (t) {
                                                return e.match(n, t)
                                            });
                                        if (0 !== r.length) {
                                            var o = t.quill.getSelection();
                                            if (null != o && t.quill.hasFocus()) {
                                                var s = t.quill.getLine(o.index),
                                                    a = y(s, 2),
                                                    l = a[0],
                                                    c = a[1],
                                                    u = t.quill.getLeaf(o.index),
                                                    h = y(u, 2),
                                                    d = h[0],
                                                    f = h[1],
                                                    p = 0 === o.length ? [d, f] : t.quill.getLeaf(o.index + o.length),
                                                    g = y(p, 2),
                                                    v = g[0],
                                                    m = g[1],
                                                    w = d instanceof k.default.Text ? d.value().slice(0, f) : "",
                                                    x = v instanceof k.default.Text ? v.value().slice(m) : "",
                                                    E = {
                                                        collapsed: 0 === o.length,
                                                        empty: 0 === o.length && l.length() <= 1,
                                                        format: t.quill.getFormat(o),
                                                        offset: c,
                                                        prefix: w,
                                                        suffix: x
                                                    };
                                                r.some(function (e) {
                                                    if (null != e.collapsed && e.collapsed !== E.collapsed)
                                                        return !1;
                                                    if (null != e.empty && e.empty !== E.empty)
                                                        return !1;
                                                    if (null != e.offset && e.offset !== E.offset)
                                                        return !1;
                                                    if (Array.isArray(e.format)) {
                                                        if (e.format.every(function (t) {
                                                                return null == E.format[t]
                                                            }))
                                                            return !1
                                                    } else if ("object" === _(e.format) && !Object.keys(e.format).every(function (t) {
                                                            return !0 === e.format[t] ? null != E.format[t] : !1 === e.format[t] ? null == E.format[t] : (0,
                                                                b.default)(e.format[t], E.format[t])
                                                        }))
                                                        return !1;
                                                    return !(null != e.prefix && !e.prefix.test(E.prefix)) && (!(null != e.suffix && !e.suffix.test(E.suffix)) && !0 !== e.handler.call(t, o, E))
                                                }) && n.preventDefault()
                                            }
                                        }
                                    }
                                })
                            }
                        }]),
                        e
                }();
            P.keys = {
                    BACKSPACE: 8,
                    TAB: 9,
                    ENTER: 13,
                    ESCAPE: 27,
                    LEFT: 37,
                    UP: 38,
                    RIGHT: 39,
                    DOWN: 40,
                    DELETE: 46
                },
                P.DEFAULTS = {
                    bindings: {
                        bold: p("bold"),
                        italic: p("italic"),
                        underline: p("underline"),
                        indent: {
                            key: P.keys.TAB,
                            format: ["blockquote", "indent", "list"],
                            handler: function (t, e) {
                                if (e.collapsed && 0 !== e.offset)
                                    return !0;
                                this.quill.format("indent", "+1", O.default.sources.USER)
                            }
                        },
                        outdent: {
                            key: P.keys.TAB,
                            shiftKey: !0,
                            format: ["blockquote", "indent", "list"],
                            handler: function (t, e) {
                                if (e.collapsed && 0 !== e.offset)
                                    return !0;
                                this.quill.format("indent", "-1", O.default.sources.USER)
                            }
                        },
                        "outdent backspace": {
                            key: P.keys.BACKSPACE,
                            collapsed: !0,
                            shiftKey: null,
                            metaKey: null,
                            ctrlKey: null,
                            altKey: null,
                            format: ["indent", "list"],
                            offset: 0,
                            handler: function (t, e) {
                                null != e.format.indent ? this.quill.format("indent", "-1", O.default.sources.USER) : null != e.format.list && this.quill.format("list", !1, O.default.sources.USER)
                            }
                        },
                        "indent code-block": f(!0),
                        "outdent code-block": f(!1),
                        "remove tab": {
                            key: P.keys.TAB,
                            shiftKey: !0,
                            collapsed: !0,
                            prefix: /\t$/,
                            handler: function (t) {
                                this.quill.deleteText(t.index - 1, 1, O.default.sources.USER)
                            }
                        },
                        tab: {
                            key: P.keys.TAB,
                            handler: function (t) {
                                this.quill.history.cutoff();
                                var e = (new x.default).retain(t.index).delete(t.length).insert("\t");
                                this.quill.updateContents(e, O.default.sources.USER),
                                    this.quill.history.cutoff(),
                                    this.quill.setSelection(t.index + 1, O.default.sources.SILENT)
                            }
                        },
                        "list empty enter": {
                            key: P.keys.ENTER,
                            collapsed: !0,
                            format: ["list"],
                            empty: !0,
                            handler: function (t, e) {
                                this.quill.format("list", !1, O.default.sources.USER),
                                    e.format.indent && this.quill.format("indent", !1, O.default.sources.USER)
                            }
                        },
                        "checklist enter": {
                            key: P.keys.ENTER,
                            collapsed: !0,
                            format: {
                                list: "checked"
                            },
                            handler: function (t) {
                                var e = this.quill.getLine(t.index),
                                    n = y(e, 2),
                                    i = n[0],
                                    r = n[1],
                                    o = (new x.default).retain(t.index).insert("\n", {
                                        list: "checked"
                                    }).retain(i.length() - r - 1).retain(1, {
                                        list: "unchecked"
                                    });
                                this.quill.updateContents(o, O.default.sources.USER),
                                    this.quill.setSelection(t.index + 1, O.default.sources.SILENT),
                                    this.quill.scrollIntoView()
                            }
                        },
                        "header enter": {
                            key: P.keys.ENTER,
                            collapsed: !0,
                            format: ["header"],
                            suffix: /^$/,
                            handler: function (t, e) {
                                var n = this.quill.getLine(t.index),
                                    i = y(n, 2),
                                    r = i[0],
                                    o = i[1],
                                    s = (new x.default).retain(t.index).insert("\n", e.format).retain(r.length() - o - 1).retain(1, {
                                        header: null
                                    });
                                this.quill.updateContents(s, O.default.sources.USER),
                                    this.quill.setSelection(t.index + 1, O.default.sources.SILENT),
                                    this.quill.scrollIntoView()
                            }
                        },
                        "list autofill": {
                            key: " ",
                            collapsed: !0,
                            format: {
                                list: !1
                            },
                            prefix: /^\s*?(\d+\.|-|\[ ?\]|\[x\])$/,
                            handler: function (t, e) {
                                var n = e.prefix.length,
                                    i = this.quill.getLine(t.index),
                                    r = y(i, 2),
                                    o = r[0],
                                    s = r[1];
                                if (s > n)
                                    return !0;
                                var a = void 0;
                                switch (e.prefix.trim()) {
                                    case "[]":
                                    case "[ ]":
                                        a = "unchecked";
                                        break;
                                    case "[x]":
                                        a = "checked";
                                        break;
                                    case "-":
                                        a = "bullet";
                                        break;
                                    default:
                                        a = "ordered"
                                }
                                this.quill.insertText(t.index, " ", O.default.sources.USER),
                                    this.quill.history.cutoff();
                                var l = (new x.default).retain(t.index - s).delete(n + 1).retain(o.length() - 2 - s).retain(1, {
                                    list: a
                                });
                                this.quill.updateContents(l, O.default.sources.USER),
                                    this.quill.history.cutoff(),
                                    this.quill.setSelection(t.index - n, O.default.sources.SILENT)
                            }
                        },
                        "code exit": {
                            key: P.keys.ENTER,
                            collapsed: !0,
                            format: ["code-block"],
                            prefix: /\n\n$/,
                            suffix: /^\s+$/,
                            handler: function (t) {
                                var e = this.quill.getLine(t.index),
                                    n = y(e, 2),
                                    i = n[0],
                                    r = n[1],
                                    o = (new x.default).retain(t.index + i.length() - r - 2).retain(1, {
                                        "code-block": null
                                    }).delete(1);
                                this.quill.updateContents(o, O.default.sources.USER)
                            }
                        },
                        "embed left": l(P.keys.LEFT, !1),
                        "embed left shift": l(P.keys.LEFT, !0),
                        "embed right": l(P.keys.RIGHT, !1),
                        "embed right shift": l(P.keys.RIGHT, !0)
                    }
                },
                e.default = P,
                e.SHORTKEY = A
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.AlignStyle = e.AlignClass = e.AlignAttribute = void 0;
            var i = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                r = {
                    scope: i.default.Scope.BLOCK,
                    whitelist: ["right", "center", "justify"]
                },
                o = new i.default.Attributor.Attribute("align", "align", r),
                s = new i.default.Attributor.Class("align", "ql-align", r),
                a = new i.default.Attributor.Style("align", "text-align", r);
            e.AlignAttribute = o,
                e.AlignClass = s,
                e.AlignStyle = a
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.BackgroundStyle = e.BackgroundClass = void 0;
            var i = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                r = n(26),
                o = new i.default.Attributor.Class("background", "ql-bg", {
                    scope: i.default.Scope.INLINE
                }),
                s = new r.ColorAttributor("background", "background-color", {
                    scope: i.default.Scope.INLINE
                });
            e.BackgroundClass = o,
                e.BackgroundStyle = s
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.DirectionStyle = e.DirectionClass = e.DirectionAttribute = void 0;
            var i = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                r = {
                    scope: i.default.Scope.BLOCK,
                    whitelist: ["rtl"]
                },
                o = new i.default.Attributor.Attribute("direction", "dir", r),
                s = new i.default.Attributor.Class("direction", "ql-direction", r),
                a = new i.default.Attributor.Style("direction", "direction", r);
            e.DirectionAttribute = o,
                e.DirectionClass = s,
                e.DirectionStyle = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.FontClass = e.FontStyle = void 0;
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                c = {
                    scope: l.default.Scope.INLINE,
                    whitelist: ["serif", "monospace"]
                },
                u = new l.default.Attributor.Class("font", "ql-font", c),
                h = new(function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default.Attributor.Style),
                        s(e, [{
                            key: "value",
                            value: function (t) {
                                return a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t).replace(/["']/g, "")
                            }
                        }]),
                        e
                }())("font", "font-family", c);
            e.FontStyle = h,
                e.FontClass = u
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.SizeStyle = e.SizeClass = void 0;
            var i = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                r = new i.default.Attributor.Class("size", "ql-size", {
                    scope: i.default.Scope.INLINE,
                    whitelist: ["small", "large", "huge"]
                }),
                o = new i.default.Attributor.Style("size", "font-size", {
                    scope: i.default.Scope.INLINE,
                    whitelist: ["10px", "18px", "32px"]
                });
            e.SizeClass = r,
                e.SizeStyle = o
        }, function (t, e, n) {
            "use strict";
            t.exports = {
                align: {
                    "": n(76),
                    center: n(77),
                    right: n(78),
                    justify: n(79)
                },
                background: n(80),
                blockquote: n(81),
                bold: n(82),
                clean: n(83),
                code: n(58),
                "code-block": n(58),
                color: n(84),
                direction: {
                    "": n(85),
                    rtl: n(86)
                },
                float: {
                    center: n(87),
                    full: n(88),
                    left: n(89),
                    right: n(90)
                },
                formula: n(91),
                header: {
                    1: n(92),
                    2: n(93)
                },
                italic: n(94),
                image: n(95),
                indent: {
                    "+1": n(96),
                    "-1": n(97)
                },
                link: n(98),
                list: {
                    ordered: n(99),
                    bullet: n(100),
                    check: n(101)
                },
                script: {
                    sub: n(102),
                    super: n(103)
                },
                strike: n(104),
                underline: n(105),
                video: n(106)
            }
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t) {
                var e = t.ops[t.ops.length - 1];
                return null != e && (null != e.insert ? "string" == typeof e.insert && e.insert.endsWith("\n") : null != e.attributes && Object.keys(e.attributes).some(function (t) {
                    return null != u.default.query(t, u.default.Scope.BLOCK)
                }))
            }

            function l(t) {
                var e = t.reduce(function (t, e) {
                        return t += e.delete || 0
                    }, 0),
                    n = t.length() - e;
                return a(t) && (n -= 1),
                    n
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.getLastChangeIndex = e.default = void 0;
            var c = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                u = i(n(0)),
                h = i(n(5)),
                d = i(n(9)),
                f = function (t) {
                    function e(t, n) {
                        r(this, e);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return i.lastRecorded = 0,
                            i.ignoreChange = !1,
                            i.clear(),
                            i.quill.on(h.default.events.EDITOR_CHANGE, function (t, e, n, r) {
                                t !== h.default.events.TEXT_CHANGE || i.ignoreChange || (i.options.userOnly && r !== h.default.sources.USER ? i.transform(e) : i.record(e, n))
                            }),
                            i.quill.keyboard.addBinding({
                                key: "Z",
                                shortKey: !0
                            }, i.undo.bind(i)),
                            i.quill.keyboard.addBinding({
                                key: "Z",
                                shortKey: !0,
                                shiftKey: !0
                            }, i.redo.bind(i)),
                            /Win/i.test(navigator.platform) && i.quill.keyboard.addBinding({
                                key: "Y",
                                shortKey: !0
                            }, i.redo.bind(i)),
                            i
                    }
                    return s(e, d.default),
                        c(e, [{
                            key: "change",
                            value: function (t, e) {
                                if (0 !== this.stack[t].length) {
                                    var n = this.stack[t].pop();
                                    this.lastRecorded = 0,
                                        this.ignoreChange = !0,
                                        this.quill.updateContents(n[t], h.default.sources.USER),
                                        this.ignoreChange = !1;
                                    var i = l(n[t]);
                                    this.quill.setSelection(i),
                                        this.stack[e].push(n)
                                }
                            }
                        }, {
                            key: "clear",
                            value: function () {
                                this.stack = {
                                    undo: [],
                                    redo: []
                                }
                            }
                        }, {
                            key: "cutoff",
                            value: function () {
                                this.lastRecorded = 0
                            }
                        }, {
                            key: "record",
                            value: function (t, e) {
                                if (0 !== t.ops.length) {
                                    this.stack.redo = [];
                                    var n = this.quill.getContents().diff(e),
                                        i = Date.now();
                                    if (this.lastRecorded + this.options.delay > i && this.stack.undo.length > 0) {
                                        var r = this.stack.undo.pop();
                                        n = n.compose(r.undo),
                                            t = r.redo.compose(t)
                                    } else
                                        this.lastRecorded = i;
                                    this.stack.undo.push({
                                            redo: t,
                                            undo: n
                                        }),
                                        this.stack.undo.length > this.options.maxStack && this.stack.undo.shift()
                                }
                            }
                        }, {
                            key: "redo",
                            value: function () {
                                this.change("redo", "undo")
                            }
                        }, {
                            key: "transform",
                            value: function (t) {
                                this.stack.undo.forEach(function (e) {
                                        e.undo = t.transform(e.undo, !0),
                                            e.redo = t.transform(e.redo, !0)
                                    }),
                                    this.stack.redo.forEach(function (e) {
                                        e.undo = t.transform(e.undo, !0),
                                            e.redo = t.transform(e.redo, !0)
                                    })
                            }
                        }, {
                            key: "undo",
                            value: function () {
                                this.change("undo", "redo")
                            }
                        }]),
                        e
                }();
            f.DEFAULTS = {
                    delay: 1e3,
                    maxStack: 100,
                    userOnly: !1
                },
                e.default = f,
                e.getLastChangeIndex = l
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function a(t) {
                var e = t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/) || t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);
                return e ? (e[1] || "https") + "://www.youtube.com/embed/" + e[2] + "?showinfo=0" : (e = t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/)) ? (e[1] || "https") + "://player.vimeo.com/video/" + e[2] + "/" : t
            }

            function l(t, e) {
                var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                e.forEach(function (e) {
                    var i = document.createElement("option");
                    e === n ? i.setAttribute("selected", "selected") : i.setAttribute("value", e),
                        t.appendChild(i)
                })
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.BaseTooltip = void 0;
            var c = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                u = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                h = i(n(3)),
                d = i(n(2)),
                f = i(n(8)),
                p = i(n(35)),
                g = i(n(34)),
                _ = i(n(59)),
                y = i(n(60)),
                v = i(n(28)),
                m = i(n(61)),
                b = [!1, "center", "right", "justify"],
                w = ["#000000", "#e60000", "#ff9900", "#ffff00", "#008a00", "#0066cc", "#9933ff", "#ffffff", "#facccc", "#ffebcc", "#ffffcc", "#cce8cc", "#cce0f5", "#ebd6ff", "#bbbbbb", "#f06666", "#ffc266", "#ffff66", "#66b966", "#66a3e0", "#c285ff", "#888888", "#a10000", "#b26b00", "#b2b200", "#006100", "#0047b2", "#6b24b2", "#444444", "#5c0000", "#663d00", "#666600", "#003700", "#002966", "#3d1466"],
                x = [!1, "serif", "monospace"],
                E = ["1", "2", "3", !1],
                k = ["small", !1, "large", "huge"],
                T = function (t) {
                    function e(t, n) {
                        r(this, e);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return t.emitter.listenDOM("click", document.body, function e(n) {
                                if (!document.body.contains(t.root))
                                    return document.body.removeEventListener("click", e);
                                null == i.tooltip || i.tooltip.root.contains(n.target) || document.activeElement === i.tooltip.textbox || i.quill.hasFocus() || i.tooltip.hide(),
                                    null != i.pickers && i.pickers.forEach(function (t) {
                                        t.container.contains(n.target) || t.close()
                                    })
                            }),
                            i
                    }
                    return s(e, g.default),
                        c(e, [{
                            key: "addModule",
                            value: function (t) {
                                var n = u(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "addModule", this).call(this, t);
                                return "toolbar" === t && this.extendToolbar(n),
                                    n
                            }
                        }, {
                            key: "buildButtons",
                            value: function (t, e) {
                                t.forEach(function (t) {
                                    (t.getAttribute("class") || "").split(/\s+/).forEach(function (n) {
                                        if (n.startsWith("ql-") && (n = n.slice("ql-".length),
                                                null != e[n]))
                                            if ("direction" === n)
                                                t.innerHTML = e[n][""] + e[n].rtl;
                                            else if ("string" == typeof e[n])
                                            t.innerHTML = e[n];
                                        else {
                                            var i = t.value || "";
                                            null != i && e[n][i] && (t.innerHTML = e[n][i])
                                        }
                                    })
                                })
                            }
                        }, {
                            key: "buildPickers",
                            value: function (t, e) {
                                var n = this;
                                this.pickers = t.map(function (t) {
                                    if (t.classList.contains("ql-align"))
                                        return null == t.querySelector("option") && l(t, b),
                                            new y.default(t, e.align);
                                    if (t.classList.contains("ql-background") || t.classList.contains("ql-color")) {
                                        var n = t.classList.contains("ql-background") ? "background" : "color";
                                        return null == t.querySelector("option") && l(t, w, "background" === n ? "#ffffff" : "#000000"),
                                            new _.default(t, e[n])
                                    }
                                    return null == t.querySelector("option") && (t.classList.contains("ql-font") ? l(t, x) : t.classList.contains("ql-header") ? l(t, E) : t.classList.contains("ql-size") && l(t, k)),
                                        new v.default(t)
                                });
                                this.quill.on(f.default.events.EDITOR_CHANGE, function () {
                                    n.pickers.forEach(function (t) {
                                        t.update()
                                    })
                                })
                            }
                        }]),
                        e
                }();
            T.DEFAULTS = (0,
                h.default)(!0, {}, g.default.DEFAULTS, {
                modules: {
                    toolbar: {
                        handlers: {
                            formula: function () {
                                this.quill.theme.tooltip.edit("formula")
                            },
                            image: function () {
                                var t = this,
                                    e = this.container.querySelector("input.ql-image[type=file]");
                                null == e && ((e = document.createElement("input")).setAttribute("type", "file"),
                                        e.setAttribute("accept", "image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),
                                        e.classList.add("ql-image"),
                                        e.addEventListener("change", function () {
                                            if (null != e.files && null != e.files[0]) {
                                                var n = new FileReader;
                                                n.onload = function (n) {
                                                        var i = t.quill.getSelection(!0);
                                                        t.quill.updateContents((new d.default).retain(i.index).delete(i.length).insert({
                                                                image: n.target.result
                                                            }), f.default.sources.USER),
                                                            t.quill.setSelection(i.index + 1, f.default.sources.SILENT),
                                                            e.value = ""
                                                    },
                                                    n.readAsDataURL(e.files[0])
                                            }
                                        }),
                                        this.container.appendChild(e)),
                                    e.click()
                            },
                            video: function () {
                                this.quill.theme.tooltip.edit("video")
                            }
                        }
                    }
                }
            });
            var O = function (t) {
                function e(t, n) {
                    r(this, e);
                    var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                    return i.textbox = i.root.querySelector('input[type="text"]'),
                        i.listen(),
                        i
                }
                return s(e, m.default),
                    c(e, [{
                        key: "listen",
                        value: function () {
                            var t = this;
                            this.textbox.addEventListener("keydown", function (e) {
                                p.default.match(e, "enter") ? (t.save(),
                                    e.preventDefault()) : p.default.match(e, "escape") && (t.cancel(),
                                    e.preventDefault())
                            })
                        }
                    }, {
                        key: "cancel",
                        value: function () {
                            this.hide()
                        }
                    }, {
                        key: "edit",
                        value: function () {
                            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "link",
                                e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : null;
                            this.root.classList.remove("ql-hidden"),
                                this.root.classList.add("ql-editing"),
                                null != e ? this.textbox.value = e : t !== this.root.getAttribute("data-mode") && (this.textbox.value = ""),
                                this.position(this.quill.getBounds(this.quill.selection.savedRange)),
                                this.textbox.select(),
                                this.textbox.setAttribute("placeholder", this.textbox.getAttribute("data-" + t) || ""),
                                this.root.setAttribute("data-mode", t)
                        }
                    }, {
                        key: "restoreFocus",
                        value: function () {
                            var t = this.quill.scrollingContainer.scrollTop;
                            this.quill.focus(),
                                this.quill.scrollingContainer.scrollTop = t
                        }
                    }, {
                        key: "save",
                        value: function () {
                            var t = this.textbox.value;
                            switch (this.root.getAttribute("data-mode")) {
                                case "link":
                                    var e = this.quill.root.scrollTop;
                                    this.linkRange ? (this.quill.formatText(this.linkRange, "link", t, f.default.sources.USER),
                                            delete this.linkRange) : (this.restoreFocus(),
                                            this.quill.format("link", t, f.default.sources.USER)),
                                        this.quill.root.scrollTop = e;
                                    break;
                                case "video":
                                    t = a(t);
                                case "formula":
                                    if (!t)
                                        break;
                                    var n = this.quill.getSelection(!0);
                                    if (null != n) {
                                        var i = n.index + n.length;
                                        this.quill.insertEmbed(i, this.root.getAttribute("data-mode"), t, f.default.sources.USER),
                                            "formula" === this.root.getAttribute("data-mode") && this.quill.insertText(i + 1, " ", f.default.sources.USER),
                                            this.quill.setSelection(i + 2, f.default.sources.USER)
                                    }
                            }
                            this.textbox.value = "",
                                this.hide()
                        }
                    }]),
                    e
            }();
            e.BaseTooltip = O,
                e.default = T
        }, function (t, e, n) {
            "use strict";
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var i = function () {
                function t() {
                    this.head = this.tail = void 0,
                        this.length = 0
                }
                return t.prototype.append = function () {
                        for (var t = [], e = 0; e < arguments.length; e++)
                            t[e] = arguments[e];
                        this.insertBefore(t[0], void 0),
                            t.length > 1 && this.append.apply(this, t.slice(1))
                    },
                    t.prototype.contains = function (t) {
                        for (var e, n = this.iterator(); e = n();)
                            if (e === t)
                                return !0;
                        return !1
                    },
                    t.prototype.insertBefore = function (t, e) {
                        t.next = e,
                            null != e ? (t.prev = e.prev,
                                null != e.prev && (e.prev.next = t),
                                e.prev = t,
                                e === this.head && (this.head = t)) : null != this.tail ? (this.tail.next = t,
                                t.prev = this.tail,
                                this.tail = t) : (t.prev = void 0,
                                this.head = this.tail = t),
                            this.length += 1
                    },
                    t.prototype.offset = function (t) {
                        for (var e = 0, n = this.head; null != n;) {
                            if (n === t)
                                return e;
                            e += n.length(),
                                n = n.next
                        }
                        return -1
                    },
                    t.prototype.remove = function (t) {
                        this.contains(t) && (null != t.prev && (t.prev.next = t.next),
                            null != t.next && (t.next.prev = t.prev),
                            t === this.head && (this.head = t.next),
                            t === this.tail && (this.tail = t.prev),
                            this.length -= 1)
                    },
                    t.prototype.iterator = function (t) {
                        return void 0 === t && (t = this.head),
                            function () {
                                var e = t;
                                return null != t && (t = t.next),
                                    e
                            }
                    },
                    t.prototype.find = function (t, e) {
                        void 0 === e && (e = !1);
                        for (var n, i = this.iterator(); n = i();) {
                            var r = n.length();
                            if (t < r || e && t === r && (null == n.next || 0 !== n.next.length()))
                                return [n, t];
                            t -= r
                        }
                        return [null, 0]
                    },
                    t.prototype.forEach = function (t) {
                        for (var e, n = this.iterator(); e = n();)
                            t(e)
                    },
                    t.prototype.forEachAt = function (t, e, n) {
                        if (!(e <= 0))
                            for (var i, r = this.find(t), o = r[0], s = t - r[1], a = this.iterator(o);
                                (i = a()) && s < t + e;) {
                                var l = i.length();
                                t > s ? n(i, t - s, Math.min(e, s + l - t)) : n(i, 0, Math.min(l, t + e - s)),
                                    s += l
                            }
                    },
                    t.prototype.map = function (t) {
                        return this.reduce(function (e, n) {
                            return e.push(t(n)),
                                e
                        }, [])
                    },
                    t.prototype.reduce = function (t, e) {
                        for (var n, i = this.iterator(); n = i();)
                            e = t(e, n);
                        return e
                    },
                    t
            }();
            e.default = i
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = n(17),
                o = n(1),
                s = {
                    attributes: !0,
                    characterData: !0,
                    characterDataOldValue: !0,
                    childList: !0,
                    subtree: !0
                },
                a = function (t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.parent = null,
                            n.observer = new MutationObserver(function (t) {
                                n.update(t)
                            }),
                            n.observer.observe(n.domNode, s),
                            n.scroll = n,
                            n
                    }
                    return i(e, t),
                        e.prototype.detach = function () {
                            t.prototype.detach.call(this),
                                this.observer.disconnect()
                        },
                        e.prototype.deleteAt = function (e, n) {
                            this.update(),
                                0 === e && n === this.length() ? this.children.forEach(function (t) {
                                    t.remove()
                                }) : t.prototype.deleteAt.call(this, e, n)
                        },
                        e.prototype.formatAt = function (e, n, i, r) {
                            this.update(),
                                t.prototype.formatAt.call(this, e, n, i, r)
                        },
                        e.prototype.insertAt = function (e, n, i) {
                            this.update(),
                                t.prototype.insertAt.call(this, e, n, i)
                        },
                        e.prototype.optimize = function (e, n) {
                            var i = this;
                            void 0 === e && (e = []),
                                void 0 === n && (n = {}),
                                t.prototype.optimize.call(this, n);
                            for (var s = [].slice.call(this.observer.takeRecords()); s.length > 0;)
                                e.push(s.pop());
                            for (var a = function (t, e) {
                                    void 0 === e && (e = !0),
                                        null != t && t !== i && null != t.domNode.parentNode && (null == t.domNode[o.DATA_KEY].mutations && (t.domNode[o.DATA_KEY].mutations = []),
                                            e && a(t.parent))
                                }, l = function (t) {
                                    null != t.domNode[o.DATA_KEY] && null != t.domNode[o.DATA_KEY].mutations && (t instanceof r.default && t.children.forEach(l),
                                        t.optimize(n))
                                }, c = e, u = 0; c.length > 0; u += 1) {
                                if (u >= 100)
                                    throw new Error("[Parchment] Maximum optimize iterations reached");
                                for (c.forEach(function (t) {
                                        var e = o.find(t.target, !0);
                                        null != e && (e.domNode === t.target && ("childList" === t.type ? (a(o.find(t.previousSibling, !1)), [].forEach.call(t.addedNodes, function (t) {
                                                var e = o.find(t, !1);
                                                a(e, !1),
                                                    e instanceof r.default && e.children.forEach(function (t) {
                                                        a(t, !1)
                                                    })
                                            })) : "attributes" === t.type && a(e.prev)),
                                            a(e))
                                    }),
                                    this.children.forEach(l),
                                    s = (c = [].slice.call(this.observer.takeRecords())).slice(); s.length > 0;)
                                    e.push(s.pop())
                            }
                        },
                        e.prototype.update = function (e, n) {
                            var i = this;
                            void 0 === n && (n = {}),
                                (e = e || this.observer.takeRecords()).map(function (t) {
                                    var e = o.find(t.target, !0);
                                    if (null != e)
                                        return null == e.domNode[o.DATA_KEY].mutations ? (e.domNode[o.DATA_KEY].mutations = [t],
                                            e) : (e.domNode[o.DATA_KEY].mutations.push(t),
                                            null)
                                }).forEach(function (t) {
                                    null != t && t !== i && null != t.domNode[o.DATA_KEY] && t.update(t.domNode[o.DATA_KEY].mutations || [], n)
                                }),
                                null != this.domNode[o.DATA_KEY].mutations && t.prototype.update.call(this, this.domNode[o.DATA_KEY].mutations, n),
                                this.optimize(e, n)
                        },
                        e.blotName = "scroll",
                        e.defaultChild = "block",
                        e.scope = o.Scope.BLOCK_BLOT,
                        e.tagName = "DIV",
                        e
                }(r.default);
            e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (Object.keys(t).length !== Object.keys(e).length)
                    return !1;
                for (var n in t)
                    if (t[n] !== e[n])
                        return !1;
                return !0
            }
            var r = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var o = n(18),
                s = n(1),
                a = function (t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return r(e, t),
                        e.formats = function (n) {
                            if (n.tagName !== e.tagName)
                                return t.formats.call(this, n)
                        },
                        e.prototype.format = function (n, i) {
                            var r = this;
                            n !== this.statics.blotName || i ? t.prototype.format.call(this, n, i) : (this.children.forEach(function (t) {
                                    t instanceof o.default || (t = t.wrap(e.blotName, !0)),
                                        r.attributes.copy(t)
                                }),
                                this.unwrap())
                        },
                        e.prototype.formatAt = function (e, n, i, r) {
                            null != this.formats()[i] || s.query(i, s.Scope.ATTRIBUTE) ? this.isolate(e, n).format(i, r) : t.prototype.formatAt.call(this, e, n, i, r)
                        },
                        e.prototype.optimize = function (n) {
                            t.prototype.optimize.call(this, n);
                            var r = this.formats();
                            if (0 === Object.keys(r).length)
                                return this.unwrap();
                            var o = this.next;
                            o instanceof e && o.prev === this && i(r, o.formats()) && (o.moveChildren(this),
                                o.remove())
                        },
                        e.blotName = "inline",
                        e.scope = s.Scope.INLINE_BLOT,
                        e.tagName = "SPAN",
                        e
                }(o.default);
            e.default = a
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = n(18),
                o = n(1),
                s = function (t) {
                    function e() {
                        return null !== t && t.apply(this, arguments) || this
                    }
                    return i(e, t),
                        e.formats = function (n) {
                            var i = o.query(e.blotName).tagName;
                            if (n.tagName !== i)
                                return t.formats.call(this, n)
                        },
                        e.prototype.format = function (n, i) {
                            null != o.query(n, o.Scope.BLOCK) && (n !== this.statics.blotName || i ? t.prototype.format.call(this, n, i) : this.replaceWith(e.blotName))
                        },
                        e.prototype.formatAt = function (e, n, i, r) {
                            null != o.query(i, o.Scope.BLOCK) ? this.format(i, r) : t.prototype.formatAt.call(this, e, n, i, r)
                        },
                        e.prototype.insertAt = function (e, n, i) {
                            if (null == i || null != o.query(n, o.Scope.INLINE))
                                t.prototype.insertAt.call(this, e, n, i);
                            else {
                                var r = this.split(e),
                                    s = o.create(n, i);
                                r.parent.insertBefore(s, r)
                            }
                        },
                        e.prototype.update = function (e, n) {
                            navigator.userAgent.match(/Trident/) ? this.attach() : t.prototype.update.call(this, e, n)
                        },
                        e.blotName = "block",
                        e.scope = o.Scope.BLOCK_BLOT,
                        e.tagName = "P",
                        e
                }(r.default);
            e.default = s
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = function (t) {
                function e() {
                    return null !== t && t.apply(this, arguments) || this
                }
                return i(e, t),
                    e.formats = function (t) {},
                    e.prototype.format = function (e, n) {
                        t.prototype.formatAt.call(this, 0, this.length(), e, n)
                    },
                    e.prototype.formatAt = function (e, n, i, r) {
                        0 === e && n === this.length() ? this.format(i, r) : t.prototype.formatAt.call(this, e, n, i, r)
                    },
                    e.prototype.formats = function () {
                        return this.statics.formats(this.domNode)
                    },
                    e
            }(n(19).default);
            e.default = r
        }, function (t, e, n) {
            "use strict";
            var i = this && this.__extends || function () {
                var t = Object.setPrototypeOf || {
                    __proto__: []
                }
                instanceof Array && function (t, e) {
                        t.__proto__ = e
                    } ||
                    function (t, e) {
                        for (var n in e)
                            e.hasOwnProperty(n) && (t[n] = e[n])
                    };
                return function (e, n) {
                    function i() {
                        this.constructor = e
                    }
                    t(e, n),
                        e.prototype = null === n ? Object.create(n) : (i.prototype = n.prototype,
                            new i)
                }
            }();
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = n(19),
                o = n(1),
                s = function (t) {
                    function e(e) {
                        var n = t.call(this, e) || this;
                        return n.text = n.statics.value(n.domNode),
                            n
                    }
                    return i(e, t),
                        e.create = function (t) {
                            return document.createTextNode(t)
                        },
                        e.value = function (t) {
                            var e = t.data;
                            return e.normalize && (e = e.normalize()),
                                e
                        },
                        e.prototype.deleteAt = function (t, e) {
                            this.domNode.data = this.text = this.text.slice(0, t) + this.text.slice(t + e)
                        },
                        e.prototype.index = function (t, e) {
                            return this.domNode === t ? e : -1
                        },
                        e.prototype.insertAt = function (e, n, i) {
                            null == i ? (this.text = this.text.slice(0, e) + n + this.text.slice(e),
                                this.domNode.data = this.text) : t.prototype.insertAt.call(this, e, n, i)
                        },
                        e.prototype.length = function () {
                            return this.text.length
                        },
                        e.prototype.optimize = function (n) {
                            t.prototype.optimize.call(this, n),
                                this.text = this.statics.value(this.domNode),
                                0 === this.text.length ? this.remove() : this.next instanceof e && this.next.prev === this && (this.insertAt(this.length(), this.next.value()),
                                    this.next.remove())
                        },
                        e.prototype.position = function (t, e) {
                            return void 0 === e && (e = !1), [this.domNode, t]
                        },
                        e.prototype.split = function (t, e) {
                            if (void 0 === e && (e = !1), !e) {
                                if (0 === t)
                                    return this;
                                if (t === this.length())
                                    return this.next
                            }
                            var n = o.create(this.domNode.splitText(t));
                            return this.parent.insertBefore(n, this.next),
                                this.text = this.statics.value(this.domNode),
                                n
                        },
                        e.prototype.update = function (t, e) {
                            var n = this;
                            t.some(function (t) {
                                return "characterData" === t.type && t.target === n.domNode
                            }) && (this.text = this.statics.value(this.domNode))
                        },
                        e.prototype.value = function () {
                            return this.text
                        },
                        e.blotName = "text",
                        e.scope = o.Scope.INLINE_BLOT,
                        e
                }(r.default);
            e.default = s
        }, function (t, e, n) {
            "use strict";
            var i = document.createElement("div");
            if (i.classList.toggle("test-class", !1),
                i.classList.contains("test-class")) {
                var r = DOMTokenList.prototype.toggle;
                DOMTokenList.prototype.toggle = function (t, e) {
                    return arguments.length > 1 && !this.contains(t) == !e ? e : r.call(this, t)
                }
            }
            String.prototype.startsWith || (String.prototype.startsWith = function (t, e) {
                    return e = e || 0,
                        this.substr(e, t.length) === t
                }),
                String.prototype.endsWith || (String.prototype.endsWith = function (t, e) {
                    var n = this.toString();
                    ("number" != typeof e || !isFinite(e) || Math.floor(e) !== e || e > n.length) && (e = n.length),
                    e -= t.length;
                    var i = n.indexOf(t, e);
                    return -1 !== i && i === e
                }),
                Array.prototype.find || Object.defineProperty(Array.prototype, "find", {
                    value: function (t) {
                        if (null === this)
                            throw new TypeError("Array.prototype.find called on null or undefined");
                        if ("function" != typeof t)
                            throw new TypeError("predicate must be a function");
                        for (var e, n = Object(this), i = n.length >>> 0, r = arguments[1], o = 0; o < i; o++)
                            if (e = n[o],
                                t.call(r, e, o, n))
                                return e
                    }
                }),
                document.addEventListener("DOMContentLoaded", function () {
                    document.execCommand("enableObjectResizing", !1, !1),
                        document.execCommand("autoUrlDetect", !1, !1)
                })
        }, function (t, e) {
            function n(t, e, n) {
                if (t == e)
                    return t ? [
                        [_, t]
                    ] : [];
                (n < 0 || t.length < n) && (n = null);
                var r = s(t, e),
                    o = t.substring(0, r);
                r = a(t = t.substring(r), e = e.substring(r));
                var l = t.substring(t.length - r),
                    u = i(t = t.substring(0, t.length - r), e = e.substring(0, e.length - r));
                return o && u.unshift([_, o]),
                    l && u.push([_, l]),
                    c(u),
                    null != n && (u = h(u, n)),
                    u = d(u)
            }

            function i(t, e) {
                var i;
                if (!t)
                    return [
                        [g, e]
                    ];
                if (!e)
                    return [
                        [p, t]
                    ];
                var o = t.length > e.length ? t : e,
                    s = t.length > e.length ? e : t,
                    a = o.indexOf(s);
                if (-1 != a)
                    return i = [
                            [g, o.substring(0, a)],
                            [_, s],
                            [g, o.substring(a + s.length)]
                        ],
                        t.length > e.length && (i[0][0] = i[2][0] = p),
                        i;
                if (1 == s.length)
                    return [
                        [p, t],
                        [g, e]
                    ];
                var c = l(t, e);
                if (c) {
                    var u = c[0],
                        h = c[1],
                        d = c[2],
                        f = c[3],
                        y = c[4],
                        v = n(u, d),
                        m = n(h, f);
                    return v.concat([
                        [_, y]
                    ], m)
                }
                return r(t, e)
            }

            function r(t, e) {
                for (var n = t.length, i = e.length, r = Math.ceil((n + i) / 2), s = r, a = 2 * r, l = new Array(a), c = new Array(a), u = 0; u < a; u++)
                    l[u] = -1,
                    c[u] = -1;
                l[s + 1] = 0,
                    c[s + 1] = 0;
                for (var h = n - i, d = h % 2 != 0, f = 0, _ = 0, y = 0, v = 0, m = 0; m < r; m++) {
                    for (var b = -m + f; b <= m - _; b += 2) {
                        for (var w, x = s + b, E = (w = b == -m || b != m && l[x - 1] < l[x + 1] ? l[x + 1] : l[x - 1] + 1) - b; w < n && E < i && t.charAt(w) == e.charAt(E);)
                            w++,
                            E++;
                        if (l[x] = w,
                            w > n)
                            _ += 2;
                        else if (E > i)
                            f += 2;
                        else if (d && (O = s + h - b) >= 0 && O < a && -1 != c[O] && w >= (T = n - c[O]))
                            return o(t, e, w, E)
                    }
                    for (var k = -m + y; k <= m - v; k += 2) {
                        for (var T, O = s + k, C = (T = k == -m || k != m && c[O - 1] < c[O + 1] ? c[O + 1] : c[O - 1] + 1) - k; T < n && C < i && t.charAt(n - T - 1) == e.charAt(i - C - 1);)
                            T++,
                            C++;
                        if (c[O] = T,
                            T > n)
                            v += 2;
                        else if (C > i)
                            y += 2;
                        else if (!d && (x = s + h - k) >= 0 && x < a && -1 != l[x]) {
                            E = s + (w = l[x]) - x;
                            if (T = n - T,
                                w >= T)
                                return o(t, e, w, E)
                        }
                    }
                }
                return [
                    [p, t],
                    [g, e]
                ]
            }

            function o(t, e, i, r) {
                var o = t.substring(0, i),
                    s = e.substring(0, r),
                    a = t.substring(i),
                    l = e.substring(r),
                    c = n(o, s),
                    u = n(a, l);
                return c.concat(u)
            }

            function s(t, e) {
                if (!t || !e || t.charAt(0) != e.charAt(0))
                    return 0;
                for (var n = 0, i = Math.min(t.length, e.length), r = i, o = 0; n < r;)
                    t.substring(o, r) == e.substring(o, r) ? o = n = r : i = r,
                    r = Math.floor((i - n) / 2 + n);
                return r
            }

            function a(t, e) {
                if (!t || !e || t.charAt(t.length - 1) != e.charAt(e.length - 1))
                    return 0;
                for (var n = 0, i = Math.min(t.length, e.length), r = i, o = 0; n < r;)
                    t.substring(t.length - r, t.length - o) == e.substring(e.length - r, e.length - o) ? o = n = r : i = r,
                    r = Math.floor((i - n) / 2 + n);
                return r
            }

            function l(t, e) {
                function n(t, e, n) {
                    for (var i, r, o, l, c = t.substring(n, n + Math.floor(t.length / 4)), u = -1, h = ""; - 1 != (u = e.indexOf(c, u + 1));) {
                        var d = s(t.substring(n), e.substring(u)),
                            f = a(t.substring(0, n), e.substring(0, u));
                        h.length < f + d && (h = e.substring(u - f, u) + e.substring(u, u + d),
                            i = t.substring(0, n - f),
                            r = t.substring(n + d),
                            o = e.substring(0, u - f),
                            l = e.substring(u + d))
                    }
                    return 2 * h.length >= t.length ? [i, r, o, l, h] : null
                }
                var i = t.length > e.length ? t : e,
                    r = t.length > e.length ? e : t;
                if (i.length < 4 || 2 * r.length < i.length)
                    return null;
                var o, l = n(i, r, Math.ceil(i.length / 4)),
                    c = n(i, r, Math.ceil(i.length / 2));
                if (!l && !c)
                    return null;
                o = c ? l && l[4].length > c[4].length ? l : c : l;
                var u, h, d, f;
                return t.length > e.length ? (u = o[0],
                    h = o[1],
                    d = o[2],
                    f = o[3]) : (d = o[0],
                    f = o[1],
                    u = o[2],
                    h = o[3]), [u, h, d, f, o[4]]
            }

            function c(t) {
                t.push([_, ""]);
                for (var e, n = 0, i = 0, r = 0, o = "", l = ""; n < t.length;)
                    switch (t[n][0]) {
                        case g:
                            r++,
                            l += t[n][1],
                                n++;
                            break;
                        case p:
                            i++,
                            o += t[n][1],
                                n++;
                            break;
                        case _:
                            i + r > 1 ? (0 !== i && 0 !== r && (0 !== (e = s(l, o)) && (n - i - r > 0 && t[n - i - r - 1][0] == _ ? t[n - i - r - 1][1] += l.substring(0, e) : (t.splice(0, 0, [_, l.substring(0, e)]),
                                                n++),
                                            l = l.substring(e),
                                            o = o.substring(e)),
                                        0 !== (e = a(l, o)) && (t[n][1] = l.substring(l.length - e) + t[n][1],
                                            l = l.substring(0, l.length - e),
                                            o = o.substring(0, o.length - e))),
                                    0 === i ? t.splice(n - r, i + r, [g, l]) : 0 === r ? t.splice(n - i, i + r, [p, o]) : t.splice(n - i - r, i + r, [p, o], [g, l]),
                                    n = n - i - r + (i ? 1 : 0) + (r ? 1 : 0) + 1) : 0 !== n && t[n - 1][0] == _ ? (t[n - 1][1] += t[n][1],
                                    t.splice(n, 1)) : n++,
                                r = 0,
                                i = 0,
                                o = "",
                                l = ""
                    }
                "" === t[t.length - 1][1] && t.pop();
                var u = !1;
                for (n = 1; n < t.length - 1;)
                    t[n - 1][0] == _ && t[n + 1][0] == _ && (t[n][1].substring(t[n][1].length - t[n - 1][1].length) == t[n - 1][1] ? (t[n][1] = t[n - 1][1] + t[n][1].substring(0, t[n][1].length - t[n - 1][1].length),
                        t[n + 1][1] = t[n - 1][1] + t[n + 1][1],
                        t.splice(n - 1, 1),
                        u = !0) : t[n][1].substring(0, t[n + 1][1].length) == t[n + 1][1] && (t[n - 1][1] += t[n + 1][1],
                        t[n][1] = t[n][1].substring(t[n + 1][1].length) + t[n + 1][1],
                        t.splice(n + 1, 1),
                        u = !0)),
                    n++;
                u && c(t)
            }

            function u(t, e) {
                if (0 === e)
                    return [_, t];
                for (var n = 0, i = 0; i < t.length; i++) {
                    var r = t[i];
                    if (r[0] === p || r[0] === _) {
                        var o = n + r[1].length;
                        if (e === o)
                            return [i + 1, t];
                        if (e < o) {
                            t = t.slice();
                            var s = e - n,
                                a = [r[0], r[1].slice(0, s)],
                                l = [r[0], r[1].slice(s)];
                            return t.splice(i, 1, a, l), [i + 1, t]
                        }
                        n = o
                    }
                }
                throw new Error("cursor_pos is out of bounds!")
            }

            function h(t, e) {
                var n = u(t, e),
                    i = n[1],
                    r = n[0],
                    o = i[r],
                    s = i[r + 1];
                if (null == o)
                    return t;
                if (o[0] !== _)
                    return t;
                if (null != s && o[1] + s[1] === s[1] + o[1])
                    return i.splice(r, 2, s, o),
                        f(i, r, 2);
                if (null != s && 0 === s[1].indexOf(o[1])) {
                    i.splice(r, 2, [s[0], o[1]], [0, o[1]]);
                    var a = s[1].slice(o[1].length);
                    return a.length > 0 && i.splice(r + 2, 0, [s[0], a]),
                        f(i, r, 3)
                }
                return t
            }

            function d(t) {
                for (var e = !1, n = function (t) {
                        return t.charCodeAt(0) >= 56320 && t.charCodeAt(0) <= 57343
                    }, i = 2; i < t.length; i += 1)
                    t[i - 2][0] === _ && function (t) {
                        return t.charCodeAt(t.length - 1) >= 55296 && t.charCodeAt(t.length - 1) <= 56319
                    }(t[i - 2][1]) && t[i - 1][0] === p && n(t[i - 1][1]) && t[i][0] === g && n(t[i][1]) && (e = !0,
                        t[i - 1][1] = t[i - 2][1].slice(-1) + t[i - 1][1],
                        t[i][1] = t[i - 2][1].slice(-1) + t[i][1],
                        t[i - 2][1] = t[i - 2][1].slice(0, -1));
                if (!e)
                    return t;
                for (var r = [], i = 0; i < t.length; i += 1)
                    t[i][1].length > 0 && r.push(t[i]);
                return r
            }

            function f(t, e, n) {
                for (var i = e + n - 1; i >= 0 && i >= e - 1; i--)
                    if (i + 1 < t.length) {
                        var r = t[i],
                            o = t[i + 1];
                        r[0] === o[1] && t.splice(i, 2, [r[0], r[1] + o[1]])
                    }
                return t
            }
            var p = -1,
                g = 1,
                _ = 0,
                y = n;
            y.INSERT = g,
                y.DELETE = p,
                y.EQUAL = _,
                t.exports = y
        }, function (t, e) {
            function n(t) {
                var e = [];
                for (var n in t)
                    e.push(n);
                return e
            }
            (t.exports = "function" == typeof Object.keys ? Object.keys : n).shim = n
        }, function (t, e) {
            function n(t) {
                return "[object Arguments]" == Object.prototype.toString.call(t)
            }

            function i(t) {
                return t && "object" == typeof t && "number" == typeof t.length && Object.prototype.hasOwnProperty.call(t, "callee") && !Object.prototype.propertyIsEnumerable.call(t, "callee") || !1
            }
            var r = "[object Arguments]" == function () {
                return Object.prototype.toString.call(arguments)
            }();
            (e = t.exports = r ? n : i).supported = n,
                e.unsupported = i
        }, function (t, e) {
            "use strict";

            function n() {}

            function i(t, e, n) {
                this.fn = t,
                    this.context = e,
                    this.once = n || !1
            }

            function r() {
                this._events = new n,
                    this._eventsCount = 0
            }
            var o = Object.prototype.hasOwnProperty,
                s = "~";
            Object.create && (n.prototype = Object.create(null),
                    (new n).__proto__ || (s = !1)),
                r.prototype.eventNames = function () {
                    var t, e, n = [];
                    if (0 === this._eventsCount)
                        return n;
                    for (e in t = this._events)
                        o.call(t, e) && n.push(s ? e.slice(1) : e);
                    return Object.getOwnPropertySymbols ? n.concat(Object.getOwnPropertySymbols(t)) : n
                },
                r.prototype.listeners = function (t, e) {
                    var n = s ? s + t : t,
                        i = this._events[n];
                    if (e)
                        return !!i;
                    if (!i)
                        return [];
                    if (i.fn)
                        return [i.fn];
                    for (var r = 0, o = i.length, a = new Array(o); r < o; r++)
                        a[r] = i[r].fn;
                    return a
                },
                r.prototype.emit = function (t, e, n, i, r, o) {
                    var a = s ? s + t : t;
                    if (!this._events[a])
                        return !1;
                    var l, c, u = this._events[a],
                        h = arguments.length;
                    if (u.fn) {
                        switch (u.once && this.removeListener(t, u.fn, void 0, !0),
                            h) {
                            case 1:
                                return u.fn.call(u.context), !0;
                            case 2:
                                return u.fn.call(u.context, e), !0;
                            case 3:
                                return u.fn.call(u.context, e, n), !0;
                            case 4:
                                return u.fn.call(u.context, e, n, i), !0;
                            case 5:
                                return u.fn.call(u.context, e, n, i, r), !0;
                            case 6:
                                return u.fn.call(u.context, e, n, i, r, o), !0
                        }
                        for (c = 1,
                            l = new Array(h - 1); c < h; c++)
                            l[c - 1] = arguments[c];
                        u.fn.apply(u.context, l)
                    } else {
                        var d, f = u.length;
                        for (c = 0; c < f; c++)
                            switch (u[c].once && this.removeListener(t, u[c].fn, void 0, !0),
                                h) {
                                case 1:
                                    u[c].fn.call(u[c].context);
                                    break;
                                case 2:
                                    u[c].fn.call(u[c].context, e);
                                    break;
                                case 3:
                                    u[c].fn.call(u[c].context, e, n);
                                    break;
                                case 4:
                                    u[c].fn.call(u[c].context, e, n, i);
                                    break;
                                default:
                                    if (!l)
                                        for (d = 1,
                                            l = new Array(h - 1); d < h; d++)
                                            l[d - 1] = arguments[d];
                                    u[c].fn.apply(u[c].context, l)
                            }
                    }
                    return !0
                },
                r.prototype.on = function (t, e, n) {
                    var r = new i(e, n || this),
                        o = s ? s + t : t;
                    return this._events[o] ? this._events[o].fn ? this._events[o] = [this._events[o], r] : this._events[o].push(r) : (this._events[o] = r,
                            this._eventsCount++),
                        this
                },
                r.prototype.once = function (t, e, n) {
                    var r = new i(e, n || this, !0),
                        o = s ? s + t : t;
                    return this._events[o] ? this._events[o].fn ? this._events[o] = [this._events[o], r] : this._events[o].push(r) : (this._events[o] = r,
                            this._eventsCount++),
                        this
                },
                r.prototype.removeListener = function (t, e, i, r) {
                    var o = s ? s + t : t;
                    if (!this._events[o])
                        return this;
                    if (!e)
                        return 0 == --this._eventsCount ? this._events = new n : delete this._events[o],
                            this;
                    var a = this._events[o];
                    if (a.fn)
                        a.fn !== e || r && !a.once || i && a.context !== i || (0 == --this._eventsCount ? this._events = new n : delete this._events[o]);
                    else {
                        for (var l = 0, c = [], u = a.length; l < u; l++)
                            (a[l].fn !== e || r && !a[l].once || i && a[l].context !== i) && c.push(a[l]);
                        c.length ? this._events[o] = 1 === c.length ? c[0] : c : 0 == --this._eventsCount ? this._events = new n : delete this._events[o]
                    }
                    return this
                },
                r.prototype.removeAllListeners = function (t) {
                    var e;
                    return t ? (e = s ? s + t : t,
                            this._events[e] && (0 == --this._eventsCount ? this._events = new n : delete this._events[e])) : (this._events = new n,
                            this._eventsCount = 0),
                        this
                },
                r.prototype.off = r.prototype.removeListener,
                r.prototype.addListener = r.prototype.on,
                r.prototype.setMaxListeners = function () {
                    return this
                },
                r.prefixed = s,
                r.EventEmitter = r,
                void 0 !== t && (t.exports = r)
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function a(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function l(t, e, n) {
                return "object" === (void 0 === e ? "undefined" : m(e)) ? Object.keys(e).reduce(function (t, n) {
                    return l(t, n, e[n])
                }, t) : t.reduce(function (t, i) {
                    return i.attributes && i.attributes[e] ? t.push(i) : t.insert(i.insert, (0,
                        x.default)({}, r({}, e, n), i.attributes))
                }, new E.default)
            }

            function c(t) {
                if (t.nodeType !== Node.ELEMENT_NODE)
                    return {};
                return t["__ql-computed-style"] || (t["__ql-computed-style"] = window.getComputedStyle(t))
            }

            function u(t, e) {
                for (var n = "", i = t.ops.length - 1; i >= 0 && n.length < e.length; --i) {
                    var r = t.ops[i];
                    if ("string" != typeof r.insert)
                        break;
                    n = r.insert + n
                }
                return n.slice(-1 * e.length) === e
            }

            function h(t) {
                if (0 === t.childNodes.length)
                    return !1;
                var e = c(t);
                return ["block", "list-item"].indexOf(e.display) > -1
            }

            function d(t, e, n) {
                return t.nodeType === t.TEXT_NODE ? n.reduce(function (e, n) {
                    return n(t, e)
                }, new E.default) : t.nodeType === t.ELEMENT_NODE ? [].reduce.call(t.childNodes || [], function (i, r) {
                    var o = d(r, e, n);
                    return r.nodeType === t.ELEMENT_NODE && (o = e.reduce(function (t, e) {
                                return e(r, t)
                            }, o),
                            o = (r[R] || []).reduce(function (t, e) {
                                return e(r, t)
                            }, o)),
                        i.concat(o)
                }, new E.default) : new E.default
            }

            function f(t, e, n) {
                return l(n, t, !0)
            }

            function p(t, e) {
                var n = k.default.Attributor.Attribute.keys(t),
                    i = k.default.Attributor.Class.keys(t),
                    r = k.default.Attributor.Style.keys(t),
                    o = {};
                return n.concat(i).concat(r).forEach(function (e) {
                        var n = k.default.query(e, k.default.Scope.ATTRIBUTE);
                        null != n && (o[n.attrName] = n.value(t),
                            o[n.attrName]) || (null != (n = q[e]) && n.attrName === e && (o[n.attrName] = n.value(t) || void 0),
                            null != (n = B[e]) && n.attrName === e && (n = B[e],
                                o[n.attrName] = n.value(t) || void 0))
                    }),
                    Object.keys(o).length > 0 && (e = l(e, o)),
                    e
            }

            function g(t, e) {
                var n = k.default.query(t);
                if (null == n)
                    return e;
                if (n.prototype instanceof k.default.Embed) {
                    var i = {},
                        r = n.value(t);
                    null != r && (i[n.blotName] = r,
                        e = (new E.default).insert(i, n.formats(t)))
                } else
                    "function" == typeof n.formats && (e = l(e, n.blotName, n.formats(t)));
                return e
            }

            function _(t, e) {
                return u(e, "\n") || (h(t) || e.length() > 0 && t.nextSibling && h(t.nextSibling)) && e.insert("\n"),
                    e
            }

            function y(t, e) {
                if (h(t) && null != t.nextElementSibling && !u(e, "\n\n")) {
                    var n = t.offsetHeight + parseFloat(c(t).marginTop) + parseFloat(c(t).marginBottom);
                    t.nextElementSibling.offsetTop > t.offsetTop + 1.5 * n && e.insert("\n")
                }
                return e
            }

            function v(t, e) {
                var n = t.data;
                if ("O:P" === t.parentNode.tagName)
                    return e.insert(n.trim());
                if (0 === n.trim().length && t.parentNode.classList.contains("ql-clipboard"))
                    return e;
                if (!c(t.parentNode).whiteSpace.startsWith("pre")) {
                    var i = function (t, e) {
                        return (e = e.replace(/[^\u00a0]/g, "")).length < 1 && t ? " " : e
                    };
                    n = (n = n.replace(/\r\n/g, " ").replace(/\n/g, " ")).replace(/\s\s+/g, i.bind(i, !0)),
                        (null == t.previousSibling && h(t.parentNode) || null != t.previousSibling && h(t.previousSibling)) && (n = n.replace(/^\s+/, i.bind(i, !1))),
                        (null == t.nextSibling && h(t.parentNode) || null != t.nextSibling && h(t.nextSibling)) && (n = n.replace(/\s+$/, i.bind(i, !1)))
                }
                return e.insert(n)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.matchText = e.matchSpacing = e.matchNewline = e.matchBlot = e.matchAttributor = e.default = void 0;
            var m = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
                    return typeof t
                } :
                function (t) {
                    return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
                },
                b = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                w = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                x = i(n(3)),
                E = i(n(2)),
                k = i(n(0)),
                T = i(n(5)),
                O = i(n(10)),
                C = i(n(9)),
                S = n(36),
                j = n(37),
                A = i(n(13)),
                P = n(26),
                D = n(38),
                I = n(39),
                N = n(40),
                L = (0,
                    O.default)("quill:clipboard"),
                R = "__ql-matcher",
                M = [
                    [Node.TEXT_NODE, v],
                    [Node.TEXT_NODE, _],
                    ["br", function (t, e) {
                        return u(e, "\n") || e.insert("\n"),
                            e
                    }],
                    [Node.ELEMENT_NODE, _],
                    [Node.ELEMENT_NODE, g],
                    [Node.ELEMENT_NODE, y],
                    [Node.ELEMENT_NODE, p],
                    [Node.ELEMENT_NODE, function (t, e) {
                        var n = {},
                            i = t.style || {};
                        return i.fontStyle && "italic" === c(t).fontStyle && (n.italic = !0),
                            i.fontWeight && (c(t).fontWeight.startsWith("bold") || parseInt(c(t).fontWeight) >= 700) && (n.bold = !0),
                            Object.keys(n).length > 0 && (e = l(e, n)),
                            parseFloat(i.textIndent || 0) > 0 && (e = (new E.default).insert("\t").concat(e)),
                            e
                    }],
                    ["li", function (t, e) {
                        var n = k.default.query(t);
                        if (null == n || "list-item" !== n.blotName || !u(e, "\n"))
                            return e;
                        for (var i = -1, r = t.parentNode; !r.classList.contains("ql-clipboard");)
                            "list" === (k.default.query(r) || {}).blotName && (i += 1),
                            r = r.parentNode;
                        return i <= 0 ? e : e.compose((new E.default).retain(e.length() - 1).retain(1, {
                            indent: i
                        }))
                    }],
                    ["b", f.bind(f, "bold")],
                    ["i", f.bind(f, "italic")],
                    ["style", function () {
                        return new E.default
                    }]
                ],
                q = [S.AlignAttribute, D.DirectionAttribute].reduce(function (t, e) {
                    return t[e.keyName] = e,
                        t
                }, {}),
                B = [S.AlignStyle, j.BackgroundStyle, P.ColorStyle, D.DirectionStyle, I.FontStyle, N.SizeStyle].reduce(function (t, e) {
                    return t[e.keyName] = e,
                        t
                }, {}),
                $ = function (t) {
                    function e(t, n) {
                        o(this, e);
                        var i = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return i.quill.root.addEventListener("paste", i.onPaste.bind(i)),
                            i.container = i.quill.addContainer("ql-clipboard"),
                            i.container.setAttribute("contenteditable", !0),
                            i.container.setAttribute("tabindex", -1),
                            i.matchers = [],
                            M.concat(i.options.matchers).forEach(function (t) {
                                var e = b(t, 2),
                                    r = e[0],
                                    o = e[1];
                                (n.matchVisual || o !== y) && i.addMatcher(r, o)
                            }),
                            i
                    }
                    return a(e, C.default),
                        w(e, [{
                            key: "addMatcher",
                            value: function (t, e) {
                                this.matchers.push([t, e])
                            }
                        }, {
                            key: "convert",
                            value: function (t) {
                                if ("string" == typeof t)
                                    return this.container.innerHTML = t.replace(/\>\r?\n +\</g, "><"),
                                        this.convert();
                                var e = this.quill.getFormat(this.quill.selection.savedRange.index);
                                if (e[A.default.blotName]) {
                                    var n = this.container.innerText;
                                    return this.container.innerHTML = "",
                                        (new E.default).insert(n, r({}, A.default.blotName, e[A.default.blotName]))
                                }
                                var i = this.prepareMatching(),
                                    o = b(i, 2),
                                    s = o[0],
                                    a = o[1],
                                    l = d(this.container, s, a);
                                return u(l, "\n") && null == l.ops[l.ops.length - 1].attributes && (l = l.compose((new E.default).retain(l.length() - 1).delete(1))),
                                    L.log("convert", this.container.innerHTML, l),
                                    this.container.innerHTML = "",
                                    l
                            }
                        }, {
                            key: "dangerouslyPasteHTML",
                            value: function (t, e) {
                                var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : T.default.sources.API;
                                if ("string" == typeof t)
                                    return this.quill.setContents(this.convert(t), e);
                                var i = this.convert(e);
                                return this.quill.updateContents((new E.default).retain(t).concat(i), n)
                            }
                        }, {
                            key: "onPaste",
                            value: function (t) {
                                var e = this;
                                if (!t.defaultPrevented && this.quill.isEnabled()) {
                                    var n = this.quill.getSelection(),
                                        i = (new E.default).retain(n.index),
                                        r = this.quill.scrollingContainer.scrollTop;
                                    this.container.focus(),
                                        this.quill.selection.update(T.default.sources.SILENT),
                                        setTimeout(function () {
                                            i = i.concat(e.convert()).delete(n.length),
                                                e.quill.updateContents(i, T.default.sources.USER),
                                                e.quill.setSelection(i.length() - n.length, T.default.sources.SILENT),
                                                e.quill.scrollingContainer.scrollTop = r,
                                                e.quill.focus()
                                        }, 1)
                                }
                            }
                        }, {
                            key: "prepareMatching",
                            value: function () {
                                var t = this,
                                    e = [],
                                    n = [];
                                return this.matchers.forEach(function (i) {
                                    var r = b(i, 2),
                                        o = r[0],
                                        s = r[1];
                                    switch (o) {
                                        case Node.TEXT_NODE:
                                            n.push(s);
                                            break;
                                        case Node.ELEMENT_NODE:
                                            e.push(s);
                                            break;
                                        default:
                                            [].forEach.call(t.container.querySelectorAll(o), function (t) {
                                                t[R] = t[R] || [],
                                                    t[R].push(s)
                                            })
                                    }
                                }), [e, n]
                            }
                        }]),
                        e
                }();
            $.DEFAULTS = {
                    matchers: [],
                    matchVisual: !0
                },
                e.default = $,
                e.matchAttributor = p,
                e.matchBlot = g,
                e.matchNewline = _,
                e.matchSpacing = y,
                e.matchText = v
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(6)),
                c = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default),
                        s(e, [{
                            key: "optimize",
                            value: function (t) {
                                a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t),
                                    this.domNode.tagName !== this.statics.tagName[0] && this.replaceWith(this.statics.blotName)
                            }
                        }], [{
                            key: "create",
                            value: function () {
                                return a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this)
                            }
                        }, {
                            key: "formats",
                            value: function () {
                                return !0
                            }
                        }]),
                        e
                }();
            c.blotName = "bold",
                c.tagName = ["STRONG", "B"],
                e.default = c
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function a(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }

            function l(t, e, n) {
                var i = document.createElement("button");
                i.setAttribute("type", "button"),
                    i.classList.add("ql-" + e),
                    null != n && (i.value = n),
                    t.appendChild(i)
            }

            function c(t, e) {
                Array.isArray(e[0]) || (e = [e]),
                    e.forEach(function (e) {
                        var n = document.createElement("span");
                        n.classList.add("ql-formats"),
                            e.forEach(function (t) {
                                if ("string" == typeof t)
                                    l(n, t);
                                else {
                                    var e = Object.keys(t)[0],
                                        i = t[e];
                                    Array.isArray(i) ? u(n, e, i) : l(n, e, i)
                                }
                            }),
                            t.appendChild(n)
                    })
            }

            function u(t, e, n) {
                var i = document.createElement("select");
                i.classList.add("ql-" + e),
                    n.forEach(function (t) {
                        var e = document.createElement("option");
                        !1 !== t ? e.setAttribute("value", t) : e.setAttribute("selected", "selected"),
                            i.appendChild(e)
                    }),
                    t.appendChild(i)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.addControls = e.default = void 0;
            var h = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                d = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                f = i(n(2)),
                p = i(n(0)),
                g = i(n(5)),
                _ = i(n(10)),
                y = i(n(9)),
                v = (0,
                    _.default)("quill:toolbar"),
                m = function (t) {
                    function e(t, n) {
                        o(this, e);
                        var i = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        if (Array.isArray(i.options.container)) {
                            var r = document.createElement("div");
                            c(r, i.options.container),
                                t.container.parentNode.insertBefore(r, t.container),
                                i.container = r
                        } else
                            "string" == typeof i.options.container ? i.container = document.querySelector(i.options.container) : i.container = i.options.container;
                        if (!(i.container instanceof HTMLElement)) {
                            var a;
                            return a = v.error("Container required for toolbar", i.options),
                                s(i, a)
                        }
                        return i.container.classList.add("ql-toolbar"),
                            i.controls = [],
                            i.handlers = {},
                            Object.keys(i.options.handlers).forEach(function (t) {
                                i.addHandler(t, i.options.handlers[t])
                            }), [].forEach.call(i.container.querySelectorAll("button, select"), function (t) {
                                i.attach(t)
                            }),
                            i.quill.on(g.default.events.EDITOR_CHANGE, function (t, e) {
                                t === g.default.events.SELECTION_CHANGE && i.update(e)
                            }),
                            i.quill.on(g.default.events.SCROLL_OPTIMIZE, function () {
                                var t = i.quill.selection.getRange(),
                                    e = h(t, 1)[0];
                                i.update(e)
                            }),
                            i
                    }
                    return a(e, y.default),
                        d(e, [{
                            key: "addHandler",
                            value: function (t, e) {
                                this.handlers[t] = e
                            }
                        }, {
                            key: "attach",
                            value: function (t) {
                                var e = this,
                                    n = [].find.call(t.classList, function (t) {
                                        return 0 === t.indexOf("ql-")
                                    });
                                if (n) {
                                    if (n = n.slice("ql-".length),
                                        "BUTTON" === t.tagName && t.setAttribute("type", "button"),
                                        null == this.handlers[n]) {
                                        if (null != this.quill.scroll.whitelist && null == this.quill.scroll.whitelist[n])
                                            return void v.warn("ignoring attaching to disabled format", n, t);
                                        if (null == p.default.query(n))
                                            return void v.warn("ignoring attaching to nonexistent format", n, t)
                                    }
                                    var i = "SELECT" === t.tagName ? "change" : "click";
                                    t.addEventListener(i, function (i) {
                                            var o = void 0;
                                            if ("SELECT" === t.tagName) {
                                                if (t.selectedIndex < 0)
                                                    return;
                                                var s = t.options[t.selectedIndex];
                                                o = !s.hasAttribute("selected") && (s.value || !1)
                                            } else
                                                o = !t.classList.contains("ql-active") && (t.value || !t.hasAttribute("value")),
                                                i.preventDefault();
                                            e.quill.focus();
                                            var a = e.quill.selection.getRange(),
                                                l = h(a, 1)[0];
                                            if (null != e.handlers[n])
                                                e.handlers[n].call(e, o);
                                            else if (p.default.query(n).prototype instanceof p.default.Embed) {
                                                if (!(o = prompt("Enter " + n)))
                                                    return;
                                                e.quill.updateContents((new f.default).retain(l.index).delete(l.length).insert(r({}, n, o)), g.default.sources.USER)
                                            } else
                                                e.quill.format(n, o, g.default.sources.USER);
                                            e.update(l)
                                        }),
                                        this.controls.push([n, t])
                                }
                            }
                        }, {
                            key: "update",
                            value: function (t) {
                                var e = null == t ? {} : this.quill.getFormat(t);
                                this.controls.forEach(function (n) {
                                    var i = h(n, 2),
                                        r = i[0],
                                        o = i[1];
                                    if ("SELECT" === o.tagName) {
                                        var s = void 0;
                                        if (null == t)
                                            s = null;
                                        else if (null == e[r])
                                            s = o.querySelector("option[selected]");
                                        else if (!Array.isArray(e[r])) {
                                            var a = e[r];
                                            "string" == typeof a && (a = a.replace(/\"/g, '\\"')),
                                                s = o.querySelector('option[value="' + a + '"]')
                                        }
                                        null == s ? (o.value = "",
                                            o.selectedIndex = -1) : s.selected = !0
                                    } else if (null == t)
                                        o.classList.remove("ql-active");
                                    else if (o.hasAttribute("value")) {
                                        var l = e[r] === o.getAttribute("value") || null != e[r] && e[r].toString() === o.getAttribute("value") || null == e[r] && !o.getAttribute("value");
                                        o.classList.toggle("ql-active", l)
                                    } else
                                        o.classList.toggle("ql-active", null != e[r])
                                })
                            }
                        }]),
                        e
                }();
            m.DEFAULTS = {},
                m.DEFAULTS = {
                    container: null,
                    handlers: {
                        clean: function () {
                            var t = this,
                                e = this.quill.getSelection();
                            if (null != e)
                                if (0 == e.length) {
                                    var n = this.quill.getFormat();
                                    Object.keys(n).forEach(function (e) {
                                        null != p.default.query(e, p.default.Scope.INLINE) && t.quill.format(e, !1)
                                    })
                                } else
                                    this.quill.removeFormat(e, g.default.sources.USER)
                        },
                        direction: function (t) {
                            var e = this.quill.getFormat().align;
                            "rtl" === t && null == e ? this.quill.format("align", "right", g.default.sources.USER) : t || "right" !== e || this.quill.format("align", !1, g.default.sources.USER),
                                this.quill.format("direction", t, g.default.sources.USER)
                        },
                        indent: function (t) {
                            var e = this.quill.getSelection(),
                                n = this.quill.getFormat(e),
                                i = parseInt(n.indent || 0);
                            if ("+1" === t || "-1" === t) {
                                var r = "+1" === t ? 1 : -1;
                                "rtl" === n.direction && (r *= -1),
                                    this.quill.format("indent", i + r, g.default.sources.USER)
                            }
                        },
                        link: function (t) {
                            !0 === t && (t = prompt("Enter link URL:")),
                                this.quill.format("link", t, g.default.sources.USER)
                        },
                        list: function (t) {
                            var e = this.quill.getSelection(),
                                n = this.quill.getFormat(e);
                            "check" === t ? "checked" === n.list || "unchecked" === n.list ? this.quill.format("list", !1, g.default.sources.USER) : this.quill.format("list", "unchecked", g.default.sources.USER) : this.quill.format("list", t, g.default.sources.USER)
                        }
                    }
                },
                e.default = m,
                e.addControls = c
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(28)),
                c = function (t) {
                    function e(t, n) {
                        i(this, e);
                        var o = r(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                        return o.label.innerHTML = n,
                            o.container.classList.add("ql-color-picker"), [].slice.call(o.container.querySelectorAll(".ql-picker-item"), 0, 7).forEach(function (t) {
                                t.classList.add("ql-primary")
                            }),
                            o
                    }
                    return o(e, l.default),
                        s(e, [{
                            key: "buildItem",
                            value: function (t) {
                                var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "buildItem", this).call(this, t);
                                return n.style.backgroundColor = t.getAttribute("value") || "",
                                    n
                            }
                        }, {
                            key: "selectItem",
                            value: function (t, n) {
                                a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "selectItem", this).call(this, t, n);
                                var i = this.label.querySelector(".ql-color-label"),
                                    r = t ? t.getAttribute("data-value") || "" : "";
                                i && ("line" === i.tagName ? i.style.stroke = r : i.style.fill = r)
                            }
                        }]),
                        e
                }();
            e.default = c
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(28)),
                c = function (t) {
                    function e(t, n) {
                        i(this, e);
                        var o = r(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t));
                        return o.container.classList.add("ql-icon-picker"), [].forEach.call(o.container.querySelectorAll(".ql-picker-item"), function (t) {
                                t.innerHTML = n[t.getAttribute("data-value") || ""]
                            }),
                            o.defaultItem = o.container.querySelector(".ql-selected"),
                            o.selectItem(o.defaultItem),
                            o
                    }
                    return o(e, l.default),
                        s(e, [{
                            key: "selectItem",
                            value: function (t, n) {
                                a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "selectItem", this).call(this, t, n),
                                    t = t || this.defaultItem,
                                    this.label.innerHTML = t.innerHTML
                            }
                        }]),
                        e
                }();
            e.default = c
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                o = function () {
                    function t(e, n) {
                        var r = this;
                        i(this, t),
                            this.quill = e,
                            this.boundsContainer = n || document.body,
                            this.root = e.addContainer("ql-tooltip"),
                            this.root.innerHTML = this.constructor.TEMPLATE,
                            this.quill.root === this.quill.scrollingContainer && this.quill.root.addEventListener("scroll", function () {
                                r.root.style.marginTop = -1 * r.quill.root.scrollTop + "px"
                            }),
                            this.hide()
                    }
                    return r(t, [{
                            key: "hide",
                            value: function () {
                                this.root.classList.add("ql-hidden")
                            }
                        }, {
                            key: "position",
                            value: function (t) {
                                var e = t.left + t.width / 2 - this.root.offsetWidth / 2,
                                    n = t.bottom + this.quill.root.scrollTop;
                                this.root.style.left = e + "px",
                                    this.root.style.top = n + "px",
                                    this.root.classList.remove("ql-flip");
                                var i = this.boundsContainer.getBoundingClientRect(),
                                    r = this.root.getBoundingClientRect(),
                                    o = 0;
                                if (r.right > i.right && (o = i.right - r.right,
                                        this.root.style.left = e + o + "px"),
                                    r.left < i.left && (o = i.left - r.left,
                                        this.root.style.left = e + o + "px"),
                                    r.bottom > i.bottom) {
                                    var s = r.bottom - r.top,
                                        a = t.bottom - t.top + s;
                                    this.root.style.top = n - a + "px",
                                        this.root.classList.add("ql-flip")
                                }
                                return o
                            }
                        }, {
                            key: "show",
                            value: function () {
                                this.root.classList.remove("ql-editing"),
                                    this.root.classList.remove("ql-hidden")
                            }
                        }]),
                        t
                }();
            e.default = o
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var a = function () {
                    function t(t, e) {
                        var n = [],
                            i = !0,
                            r = !1,
                            o = void 0;
                        try {
                            for (var s, a = t[Symbol.iterator](); !(i = (s = a.next()).done) && (n.push(s.value), !e || n.length !== e); i = !0)
                            ;
                        } catch (t) {
                            r = !0,
                                o = t
                        } finally {
                            try {
                                !i && a.return && a.return()
                            } finally {
                                if (r)
                                    throw o
                            }
                        }
                        return n
                    }
                    return function (e, n) {
                        if (Array.isArray(e))
                            return e;
                        if (Symbol.iterator in Object(e))
                            return t(e, n);
                        throw new TypeError("Invalid attempt to destructure non-iterable instance")
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                u = i(n(3)),
                h = i(n(8)),
                d = n(43),
                f = i(d),
                p = i(n(27)),
                g = n(15),
                _ = i(n(41)),
                y = [
                    [{
                        header: ["1", "2", "3", !1]
                    }],
                    ["bold", "italic", "underline", "link"],
                    [{
                        list: "ordered"
                    }, {
                        list: "bullet"
                    }],
                    ["clean"]
                ],
                v = function (t) {
                    function e(t, n) {
                        r(this, e),
                            null != n.modules.toolbar && null == n.modules.toolbar.container && (n.modules.toolbar.container = y);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return i.quill.container.classList.add("ql-snow"),
                            i
                    }
                    return s(e, f.default),
                        c(e, [{
                            key: "extendToolbar",
                            value: function (t) {
                                t.container.classList.add("ql-snow"),
                                    this.buildButtons([].slice.call(t.container.querySelectorAll("button")), _.default),
                                    this.buildPickers([].slice.call(t.container.querySelectorAll("select")), _.default),
                                    this.tooltip = new m(this.quill, this.options.bounds),
                                    t.container.querySelector(".ql-link") && this.quill.keyboard.addBinding({
                                        key: "K",
                                        shortKey: !0
                                    }, function (e, n) {
                                        t.handlers.link.call(t, !n.format.link)
                                    })
                            }
                        }]),
                        e
                }();
            v.DEFAULTS = (0,
                u.default)(!0, {}, f.default.DEFAULTS, {
                modules: {
                    toolbar: {
                        handlers: {
                            link: function (t) {
                                if (t) {
                                    var e = this.quill.getSelection();
                                    if (null == e || 0 == e.length)
                                        return;
                                    var n = this.quill.getText(e);
                                    /^\S+@\S+\.\S+$/.test(n) && 0 !== n.indexOf("mailto:") && (n = "mailto:" + n),
                                        this.quill.theme.tooltip.edit("link", n)
                                } else
                                    this.quill.format("link", !1)
                            }
                        }
                    }
                }
            });
            var m = function (t) {
                function e(t, n) {
                    r(this, e);
                    var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                    return i.preview = i.root.querySelector("a.ql-preview"),
                        i
                }
                return s(e, d.BaseTooltip),
                    c(e, [{
                        key: "listen",
                        value: function () {
                            var t = this;
                            l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "listen", this).call(this),
                                this.root.querySelector("a.ql-action").addEventListener("click", function (e) {
                                    t.root.classList.contains("ql-editing") ? t.save() : t.edit("link", t.preview.textContent),
                                        e.preventDefault()
                                }),
                                this.root.querySelector("a.ql-remove").addEventListener("click", function (e) {
                                    if (null != t.linkRange) {
                                        var n = t.linkRange;
                                        t.restoreFocus(),
                                            t.quill.formatText(n, "link", !1, h.default.sources.USER),
                                            delete t.linkRange
                                    }
                                    e.preventDefault(),
                                        t.hide()
                                }),
                                this.quill.on(h.default.events.SELECTION_CHANGE, function (e, n, i) {
                                    if (null != e) {
                                        if (0 === e.length && i === h.default.sources.USER) {
                                            var r = t.quill.scroll.descendant(p.default, e.index),
                                                o = a(r, 2),
                                                s = o[0],
                                                l = o[1];
                                            if (null != s) {
                                                t.linkRange = new g.Range(e.index - l, s.length());
                                                var c = p.default.formats(s.domNode);
                                                return t.preview.textContent = c,
                                                    t.preview.setAttribute("href", c),
                                                    t.show(),
                                                    void t.position(t.quill.getBounds(t.linkRange))
                                            }
                                        } else
                                            delete t.linkRange;
                                        t.hide()
                                    }
                                })
                        }
                    }, {
                        key: "show",
                        value: function () {
                            l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "show", this).call(this),
                                this.root.removeAttribute("data-mode")
                        }
                    }]),
                    e
            }();
            m.TEMPLATE = ['<a class="ql-preview" target="_blank" href="about:blank"></a>', '<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">', '<a class="ql-action"></a>', '<a class="ql-remove"></a>'].join(""),
                e.default = v
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var r = i(n(29)),
                o = n(36),
                s = n(38),
                a = n(64),
                l = i(n(65)),
                c = i(n(66)),
                u = n(67),
                h = i(u),
                d = n(37),
                f = n(26),
                p = n(39),
                g = n(40),
                _ = i(n(56)),
                y = i(n(68)),
                v = i(n(27)),
                m = i(n(69)),
                b = i(n(70)),
                w = i(n(71)),
                x = i(n(72)),
                E = i(n(73)),
                k = n(13),
                T = i(k),
                O = i(n(74)),
                C = i(n(75)),
                S = i(n(57)),
                j = i(n(41)),
                A = i(n(28)),
                P = i(n(59)),
                D = i(n(60)),
                I = i(n(61)),
                N = i(n(108)),
                L = i(n(62));
            r.default.register({
                    "attributors/attribute/direction": s.DirectionAttribute,
                    "attributors/class/align": o.AlignClass,
                    "attributors/class/background": d.BackgroundClass,
                    "attributors/class/color": f.ColorClass,
                    "attributors/class/direction": s.DirectionClass,
                    "attributors/class/font": p.FontClass,
                    "attributors/class/size": g.SizeClass,
                    "attributors/style/align": o.AlignStyle,
                    "attributors/style/background": d.BackgroundStyle,
                    "attributors/style/color": f.ColorStyle,
                    "attributors/style/direction": s.DirectionStyle,
                    "attributors/style/font": p.FontStyle,
                    "attributors/style/size": g.SizeStyle
                }, !0),
                r.default.register({
                    "formats/align": o.AlignClass,
                    "formats/direction": s.DirectionClass,
                    "formats/indent": a.IndentClass,
                    "formats/background": d.BackgroundStyle,
                    "formats/color": f.ColorStyle,
                    "formats/font": p.FontClass,
                    "formats/size": g.SizeClass,
                    "formats/blockquote": l.default,
                    "formats/code-block": T.default,
                    "formats/header": c.default,
                    "formats/list": h.default,
                    "formats/bold": _.default,
                    "formats/code": k.Code,
                    "formats/italic": y.default,
                    "formats/link": v.default,
                    "formats/script": m.default,
                    "formats/strike": b.default,
                    "formats/underline": w.default,
                    "formats/image": x.default,
                    "formats/video": E.default,
                    "formats/list/item": u.ListItem,
                    "modules/formula": O.default,
                    "modules/syntax": C.default,
                    "modules/toolbar": S.default,
                    "themes/bubble": N.default,
                    "themes/snow": L.default,
                    "ui/icons": j.default,
                    "ui/picker": A.default,
                    "ui/icon-picker": D.default,
                    "ui/color-picker": P.default,
                    "ui/tooltip": I.default
                }, !0),
                e.default = r.default
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.IndentClass = void 0;
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                c = new(function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default.Attributor.Class),
                        s(e, [{
                            key: "add",
                            value: function (t, n) {
                                if ("+1" === n || "-1" === n) {
                                    var i = this.value(t) || 0;
                                    n = "+1" === n ? i + 1 : i - 1
                                }
                                return 0 === n ? (this.remove(t), !0) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "add", this).call(this, t, n)
                            }
                        }, {
                            key: "canAdd",
                            value: function (t, n) {
                                return a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "canAdd", this).call(this, t, n) || a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "canAdd", this).call(this, t, parseInt(n))
                            }
                        }, {
                            key: "value",
                            value: function (t) {
                                return parseInt(a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "value", this).call(this, t)) || void 0
                            }
                        }]),
                        e
                }())("indent", "ql-indent", {
                    scope: l.default.Scope.BLOCK,
                    whitelist: [1, 2, 3, 4, 5, 6, 7, 8]
                });
            e.IndentClass = c
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(4)),
                a = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, s.default),
                        e
                }();
            a.blotName = "blockquote",
                a.tagName = "blockquote",
                e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(4)),
                l = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, a.default),
                        s(e, null, [{
                            key: "formats",
                            value: function (t) {
                                return this.tagName.indexOf(t.tagName) + 1
                            }
                        }]),
                        e
                }();
            l.blotName = "header",
                l.tagName = ["H1", "H2", "H3", "H4", "H5", "H6"],
                e.default = l
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e, n) {
                return e in t ? Object.defineProperty(t, e, {
                        value: n,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = n,
                    t
            }

            function o(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function s(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function a(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.ListItem = void 0;
            var l = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                c = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                u = i(n(0)),
                h = i(n(4)),
                d = i(n(24)),
                f = function (t) {
                    function e() {
                        return o(this, e),
                            s(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return a(e, h.default),
                        l(e, [{
                            key: "format",
                            value: function (t, n) {
                                t !== p.blotName || n ? c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n) : this.replaceWith(u.default.create(this.statics.scope))
                            }
                        }, {
                            key: "remove",
                            value: function () {
                                null == this.prev && null == this.next ? this.parent.remove() : c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "remove", this).call(this)
                            }
                        }, {
                            key: "replaceWith",
                            value: function (t, n) {
                                return this.parent.isolate(this.offset(this.parent), this.length()),
                                    t === this.parent.statics.blotName ? (this.parent.replaceWith(t, n),
                                        this) : (this.parent.unwrap(),
                                        c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replaceWith", this).call(this, t, n))
                            }
                        }], [{
                            key: "formats",
                            value: function (t) {
                                return t.tagName === this.tagName ? void 0 : c(e.__proto__ || Object.getPrototypeOf(e), "formats", this).call(this, t)
                            }
                        }]),
                        e
                }();
            f.blotName = "list-item",
                f.tagName = "LI";
            var p = function (t) {
                function e(t) {
                    o(this, e);
                    var n = s(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t)),
                        i = function (e) {
                            if (e.target.parentNode === t) {
                                var i = n.statics.formats(t),
                                    r = u.default.find(e.target);
                                "checked" === i ? r.format("list", "unchecked") : "unchecked" === i && r.format("list", "checked")
                            }
                        };
                    return t.addEventListener("touchstart", i),
                        t.addEventListener("mousedown", i),
                        n
                }
                return a(e, d.default),
                    l(e, null, [{
                        key: "create",
                        value: function (t) {
                            var n = "ordered" === t ? "OL" : "UL",
                                i = c(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, n);
                            return "checked" !== t && "unchecked" !== t || i.setAttribute("data-checked", "checked" === t),
                                i
                        }
                    }, {
                        key: "formats",
                        value: function (t) {
                            return "OL" === t.tagName ? "ordered" : "UL" === t.tagName ? t.hasAttribute("data-checked") ? "true" === t.getAttribute("data-checked") ? "checked" : "unchecked" : "bullet" : void 0
                        }
                    }]),
                    l(e, [{
                        key: "format",
                        value: function (t, e) {
                            this.children.length > 0 && this.children.tail.format(t, e)
                        }
                    }, {
                        key: "formats",
                        value: function () {
                            return r({}, this.statics.blotName, this.statics.formats(this.domNode))
                        }
                    }, {
                        key: "insertBefore",
                        value: function (t, n) {
                            if (t instanceof f)
                                c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "insertBefore", this).call(this, t, n);
                            else {
                                var i = null == n ? this.length() : n.offset(this),
                                    r = this.split(i);
                                r.parent.insertBefore(t, r)
                            }
                        }
                    }, {
                        key: "optimize",
                        value: function (t) {
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "optimize", this).call(this, t);
                            var n = this.next;
                            null != n && n.prev === this && n.statics.blotName === this.statics.blotName && n.domNode.tagName === this.domNode.tagName && n.domNode.getAttribute("data-checked") === this.domNode.getAttribute("data-checked") && (n.moveChildren(this),
                                n.remove())
                        }
                    }, {
                        key: "replace",
                        value: function (t) {
                            if (t.statics.blotName !== this.statics.blotName) {
                                var n = u.default.create(this.statics.defaultChild);
                                t.moveChildren(n),
                                    this.appendChild(n)
                            }
                            c(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replace", this).call(this, t)
                        }
                    }]),
                    e
            }();
            p.blotName = "list",
                p.scope = u.default.Scope.BLOCK_BLOT,
                p.tagName = ["OL", "UL"],
                p.defaultChild = "list-item",
                p.allowedChildren = [f],
                e.ListItem = f,
                e.default = p
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(56)),
                a = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, s.default),
                        e
                }();
            a.blotName = "italic",
                a.tagName = ["EM", "I"],
                e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(6)),
                c = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default),
                        s(e, null, [{
                            key: "create",
                            value: function (t) {
                                return "super" === t ? document.createElement("sup") : "sub" === t ? document.createElement("sub") : a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t)
                            }
                        }, {
                            key: "formats",
                            value: function (t) {
                                return "SUB" === t.tagName ? "sub" : "SUP" === t.tagName ? "super" : void 0
                            }
                        }]),
                        e
                }();
            c.blotName = "script",
                c.tagName = ["SUB", "SUP"],
                e.default = c
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(6)),
                a = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, s.default),
                        e
                }();
            a.blotName = "strike",
                a.tagName = "S",
                e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(6)),
                a = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, s.default),
                        e
                }();
            a.blotName = "underline",
                a.tagName = "U",
                e.default = a
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(0)),
                c = n(27),
                u = ["alt", "height", "width"],
                h = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.default.Embed),
                        s(e, [{
                            key: "format",
                            value: function (t, n) {
                                u.indexOf(t) > -1 ? n ? this.domNode.setAttribute(t, n) : this.domNode.removeAttribute(t) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n)
                            }
                        }], [{
                            key: "create",
                            value: function (t) {
                                var n = a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
                                return "string" == typeof t && n.setAttribute("src", this.sanitize(t)),
                                    n
                            }
                        }, {
                            key: "formats",
                            value: function (t) {
                                return u.reduce(function (e, n) {
                                    return t.hasAttribute(n) && (e[n] = t.getAttribute(n)),
                                        e
                                }, {})
                            }
                        }, {
                            key: "match",
                            value: function (t) {
                                return /\.(jpe?g|gif|png)$/.test(t) || /^data:image\/.+;base64/.test(t)
                            }
                        }, {
                            key: "sanitize",
                            value: function (t) {
                                return (0,
                                    c.sanitize)(t, ["http", "https", "data"]) ? t : "//:0"
                            }
                        }, {
                            key: "value",
                            value: function (t) {
                                return t.getAttribute("src")
                            }
                        }]),
                        e
                }();
            h.blotName = "image",
                h.tagName = "IMG",
                e.default = h
        }, function (t, e, n) {
            "use strict";

            function i(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function r(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function o(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                value: !0
            });
            var s = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = n(4),
                c = function (t) {
                    return t && t.__esModule ? t : {
                        default: t
                    }
                }(n(27)),
                u = ["height", "width"],
                h = function (t) {
                    function e() {
                        return i(this, e),
                            r(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return o(e, l.BlockEmbed),
                        s(e, [{
                            key: "format",
                            value: function (t, n) {
                                u.indexOf(t) > -1 ? n ? this.domNode.setAttribute(t, n) : this.domNode.removeAttribute(t) : a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "format", this).call(this, t, n)
                            }
                        }], [{
                            key: "create",
                            value: function (t) {
                                var n = a(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
                                return n.setAttribute("frameborder", "0"),
                                    n.setAttribute("allowfullscreen", !0),
                                    n.setAttribute("src", this.sanitize(t)),
                                    n
                            }
                        }, {
                            key: "formats",
                            value: function (t) {
                                return u.reduce(function (e, n) {
                                    return t.hasAttribute(n) && (e[n] = t.getAttribute(n)),
                                        e
                                }, {})
                            }
                        }, {
                            key: "sanitize",
                            value: function (t) {
                                return c.default.sanitize(t)
                            }
                        }, {
                            key: "value",
                            value: function (t) {
                                return t.getAttribute("src")
                            }
                        }]),
                        e
                }();
            h.blotName = "video",
                h.className = "ql-video",
                h.tagName = "IFRAME",
                e.default = h
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.FormulaBlot = void 0;
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = i(n(25)),
                u = i(n(5)),
                h = i(n(9)),
                d = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, c.default),
                        a(e, null, [{
                            key: "create",
                            value: function (t) {
                                var n = l(e.__proto__ || Object.getPrototypeOf(e), "create", this).call(this, t);
                                return "string" == typeof t && (window.katex.render(t, n, {
                                            throwOnError: !1,
                                            errorColor: "#f00"
                                        }),
                                        n.setAttribute("data-value", t)),
                                    n
                            }
                        }, {
                            key: "value",
                            value: function (t) {
                                return t.getAttribute("data-value")
                            }
                        }]),
                        e
                }();
            d.blotName = "formula",
                d.className = "ql-formula",
                d.tagName = "SPAN";
            var f = function (t) {
                function e() {
                    r(this, e);
                    var t = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this));
                    if (null == window.katex)
                        throw new Error("Formula module requires KaTeX.");
                    return t
                }
                return s(e, h.default),
                    a(e, null, [{
                        key: "register",
                        value: function () {
                            u.default.register(d, !0)
                        }
                    }]),
                    e
            }();
            e.FormulaBlot = d,
                e.default = f
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.CodeToken = e.CodeBlock = void 0;
            var a = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                l = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                c = i(n(0)),
                u = i(n(5)),
                h = i(n(9)),
                d = i(n(13)),
                f = function (t) {
                    function e() {
                        return r(this, e),
                            o(this, (e.__proto__ || Object.getPrototypeOf(e)).apply(this, arguments))
                    }
                    return s(e, d.default),
                        a(e, [{
                            key: "replaceWith",
                            value: function (t) {
                                this.domNode.textContent = this.domNode.textContent,
                                    this.attach(),
                                    l(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "replaceWith", this).call(this, t)
                            }
                        }, {
                            key: "highlight",
                            value: function (t) {
                                var e = this.domNode.textContent;
                                this.cachedText !== e && ((e.trim().length > 0 || null == this.cachedText) && (this.domNode.innerHTML = t(e),
                                        this.domNode.normalize(),
                                        this.attach()),
                                    this.cachedText = e)
                            }
                        }]),
                        e
                }();
            f.className = "ql-syntax";
            var p = new c.default.Attributor.Class("token", "hljs", {
                    scope: c.default.Scope.INLINE
                }),
                g = function (t) {
                    function e(t, n) {
                        r(this, e);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        if ("function" != typeof i.options.highlight)
                            throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");
                        var s = null;
                        return i.quill.on(u.default.events.SCROLL_OPTIMIZE, function () {
                                clearTimeout(s),
                                    s = setTimeout(function () {
                                        i.highlight(),
                                            s = null
                                    }, i.options.interval)
                            }),
                            i.highlight(),
                            i
                    }
                    return s(e, h.default),
                        a(e, null, [{
                            key: "register",
                            value: function () {
                                u.default.register(p, !0),
                                    u.default.register(f, !0)
                            }
                        }]),
                        a(e, [{
                            key: "highlight",
                            value: function () {
                                var t = this;
                                if (!this.quill.selection.composing) {
                                    this.quill.update(u.default.sources.USER);
                                    var e = this.quill.getSelection();
                                    this.quill.scroll.descendants(f).forEach(function (e) {
                                            e.highlight(t.options.highlight)
                                        }),
                                        this.quill.update(u.default.sources.SILENT),
                                        null != e && this.quill.setSelection(e, u.default.sources.SILENT)
                                }
                            }
                        }]),
                        e
                }();
            g.DEFAULTS = {
                    highlight: null == window.hljs ? null : function (t) {
                        return window.hljs.highlightAuto(t).value
                    },
                    interval: 1e3
                },
                e.CodeBlock = f,
                e.CodeToken = p,
                e.default = g
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'
        }, function (t, e) {
            t.exports = '<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'
        }, function (t, e) {
            t.exports = '<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'
        }, function (t, e, n) {
            "use strict";

            function i(t) {
                return t && t.__esModule ? t : {
                    default: t
                }
            }

            function r(t, e) {
                if (!(t instanceof e))
                    throw new TypeError("Cannot call a class as a function")
            }

            function o(t, e) {
                if (!t)
                    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !e || "object" != typeof e && "function" != typeof e ? t : e
            }

            function s(t, e) {
                if ("function" != typeof e && null !== e)
                    throw new TypeError("Super expression must either be null or a function, not " + typeof e);
                t.prototype = Object.create(e && e.prototype, {
                        constructor: {
                            value: t,
                            enumerable: !1,
                            writable: !0,
                            configurable: !0
                        }
                    }),
                    e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
            }
            Object.defineProperty(e, "__esModule", {
                    value: !0
                }),
                e.default = e.BubbleTooltip = void 0;
            var a = function t(e, n, i) {
                    null === e && (e = Function.prototype);
                    var r = Object.getOwnPropertyDescriptor(e, n);
                    if (void 0 === r) {
                        var o = Object.getPrototypeOf(e);
                        return null === o ? void 0 : t(o, n, i)
                    }
                    if ("value" in r)
                        return r.value;
                    var s = r.get;
                    if (void 0 !== s)
                        return s.call(i)
                },
                l = function () {
                    function t(t, e) {
                        for (var n = 0; n < e.length; n++) {
                            var i = e[n];
                            i.enumerable = i.enumerable || !1,
                                i.configurable = !0,
                                "value" in i && (i.writable = !0),
                                Object.defineProperty(t, i.key, i)
                        }
                    }
                    return function (e, n, i) {
                        return n && t(e.prototype, n),
                            i && t(e, i),
                            e
                    }
                }(),
                c = i(n(3)),
                u = i(n(8)),
                h = n(43),
                d = i(h),
                f = n(15),
                p = i(n(41)),
                g = [
                    ["bold", "italic", "link"],
                    [{
                        header: 1
                    }, {
                        header: 2
                    }, "blockquote"]
                ],
                _ = function (t) {
                    function e(t, n) {
                        r(this, e),
                            null != n.modules.toolbar && null == n.modules.toolbar.container && (n.modules.toolbar.container = g);
                        var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                        return i.quill.container.classList.add("ql-bubble"),
                            i
                    }
                    return s(e, d.default),
                        l(e, [{
                            key: "extendToolbar",
                            value: function (t) {
                                this.tooltip = new y(this.quill, this.options.bounds),
                                    this.tooltip.root.appendChild(t.container),
                                    this.buildButtons([].slice.call(t.container.querySelectorAll("button")), p.default),
                                    this.buildPickers([].slice.call(t.container.querySelectorAll("select")), p.default)
                            }
                        }]),
                        e
                }();
            _.DEFAULTS = (0,
                c.default)(!0, {}, d.default.DEFAULTS, {
                modules: {
                    toolbar: {
                        handlers: {
                            link: function (t) {
                                t ? this.quill.theme.tooltip.edit() : this.quill.format("link", !1)
                            }
                        }
                    }
                }
            });
            var y = function (t) {
                function e(t, n) {
                    r(this, e);
                    var i = o(this, (e.__proto__ || Object.getPrototypeOf(e)).call(this, t, n));
                    return i.quill.on(u.default.events.EDITOR_CHANGE, function (t, e, n, r) {
                            if (t === u.default.events.SELECTION_CHANGE)
                                if (null != e && e.length > 0 && r === u.default.sources.USER) {
                                    i.show(),
                                        i.root.style.left = "0px",
                                        i.root.style.width = "",
                                        i.root.style.width = i.root.offsetWidth + "px";
                                    var o = i.quill.getLines(e.index, e.length);
                                    if (1 === o.length)
                                        i.position(i.quill.getBounds(e));
                                    else {
                                        var s = o[o.length - 1],
                                            a = i.quill.getIndex(s),
                                            l = Math.min(s.length() - 1, e.index + e.length - a),
                                            c = i.quill.getBounds(new f.Range(a, l));
                                        i.position(c)
                                    }
                                } else
                                    document.activeElement !== i.textbox && i.quill.hasFocus() && i.hide()
                        }),
                        i
                }
                return s(e, h.BaseTooltip),
                    l(e, [{
                        key: "listen",
                        value: function () {
                            var t = this;
                            a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "listen", this).call(this),
                                this.root.querySelector(".ql-close").addEventListener("click", function () {
                                    t.root.classList.remove("ql-editing")
                                }),
                                this.quill.on(u.default.events.SCROLL_OPTIMIZE, function () {
                                    setTimeout(function () {
                                        if (!t.root.classList.contains("ql-hidden")) {
                                            var e = t.quill.getSelection();
                                            null != e && t.position(t.quill.getBounds(e))
                                        }
                                    }, 1)
                                })
                        }
                    }, {
                        key: "cancel",
                        value: function () {
                            this.show()
                        }
                    }, {
                        key: "position",
                        value: function (t) {
                            var n = a(e.prototype.__proto__ || Object.getPrototypeOf(e.prototype), "position", this).call(this, t),
                                i = this.root.querySelector(".ql-tooltip-arrow");
                            if (i.style.marginLeft = "",
                                0 === n)
                                return n;
                            i.style.marginLeft = -1 * n - i.offsetWidth / 2 + "px"
                        }
                    }]),
                    e
            }();
            y.TEMPLATE = ['<span class="ql-tooltip-arrow"></span>', '<div class="ql-tooltip-editor">', '<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">', '<a class="ql-close"></a>', "</div>"].join(""),
                e.BubbleTooltip = y,
                e.default = _
        }, function (t, e, n) {
            t.exports = n(63)
        }]).default
    }),
    Vector2.prototype.add = function (t) {
        return new Vector2(this.x + t.x, this.y + t.y)
    },
    Vector2.prototype.subtract = function (t) {
        return new Vector2(this.x - t.x, this.y - t.y)
    },
    Vector2.prototype.multiply = function (t) {
        return new Vector2(this.x * t, this.y * t)
    },
    Vector2.prototype.magnitude = function () {
        return Math.sqrt(this.x * this.x + this.y * this.y)
    },
    Vector2.prototype.normalize = function () {
        return this.multiply(1 / this.magnitude())
    },
    Vector2.prototype.distance = function (t) {
        var e = t.y - this.y,
            n = t.x - this.x;
        return Math.sqrt(e * e + n * n)
    },
    Vector2.prototype.distanceSquared = function (t) {
        var e = t.y - this.y,
            n = t.x - this.x;
        return e * e + n * n
    },
    Vector2.prototype.vectorIsWithinDist = function (t, e) {
        return this.distanceSquared(t) <= e * e
    };
var DEBUG_LINE_SEGMENT = !1;
LineSegment.prototype.calculateIntersectionWithLineSegment = function (t) {
    var e = new Line(this.startPoint, this.endPoint),
        n = new Line(t.startPoint, t.endPoint),
        i = e.calculateSlopeIntercept(),
        r = n.calculateSlopeIntercept();
    if (isNaN(i.m) || isNaN(r.m))
        return !1;
    if (Math.abs(i.m) == 1 / 0) {
        if (Math.abs(r.m) == 1 / 0)
            return !1;
        if (o = this.__calculateIntersectionAsStraightLine(t, r, .1))
            return o
    } else if (Math.abs(r.m) == 1 / 0) {
        var o = t.__calculateIntersectionAsStraightLine(this, i, .1);
        if (o)
            return o
    }
    var s = (r.b - i.b) / (i.m - r.m),
        a = new Vector2(s, i.m * s + i.b),
        l = this.pointInDomainAndRange(a, .1) && t.pointInDomainAndRange(a, .1);
    if (DEBUG_DRAW && DEBUG_LINE_SEGMENT) {
        var c = new Line(DEBUG_TRANSFORM_FUNCTION(this.startPoint), DEBUG_TRANSFORM_FUNCTION(this.endPoint)),
            u = c.extendPoints(999999),
            h = new Line(DEBUG_TRANSFORM_FUNCTION(n.startPoint), DEBUG_TRANSFORM_FUNCTION(n.endPoint)),
            d = h.extendPoints(999999),
            f = DEBUG_TRANSFORM_FUNCTION(a);
        DEBUG_DRAWER.drawLineSegment(u.startPoint, u.endPoint, {
                strokeStyle: "blue"
            }),
            DEBUG_DRAWER.drawLineSegment(c.startPoint, c.endPoint, {
                strokeStyle: "cyan"
            }),
            DEBUG_DRAWER.drawLineSegment(d.startPoint, d.endPoint, {
                strokeStyle: "DarkGoldenRod"
            }),
            DEBUG_DRAWER.drawLineSegment(h.startPoint, h.endPoint, {
                strokeStyle: "yellow"
            }),
            l && DEBUG_DRAWER.drawX(f.x, f.y, 25, 25, {
                strokeStyle: "red"
            })
    }
    return !!l && a
}
LineSegment.prototype.__calculateIntersectionAsStraightLine = function (t, e, n) {
    if (t.isInDomain(this.startPoint.x, n)) {
        var i = new Vector2(this.startPoint.x, e.m * this.startPoint.x + e.b);
        if (this.isInRange(i.y, n) && t.isInRange(i.y, n))
            return i
    }
    return !1
}
LineSegment.prototype.calculateIntersectionWithPoint = function (t) {
    var e = new Line(this.startPoint, this.endPoint).calculateSlopeIntercept(),
        n = t.x,
        i = new Vector2(n, e.m * n + e.b),
        r = this.pointInDomainAndRange(i, .2) && i.vectorIsWithinDist(t, .2);
    if (DEBUG_DRAW && DEBUG_LINE_SEGMENT) {
        var o = new Line(DEBUG_TRANSFORM_FUNCTION(this.startPoint), DEBUG_TRANSFORM_FUNCTION(this.endPoint)),
            s = o.extendPoints(999999),
            a = DEBUG_TRANSFORM_FUNCTION(i);
        DEBUG_DRAWER.drawLineSegment(s.startPoint, s.endPoint, {
                strokeStyle: "blue"
            }),
            DEBUG_DRAWER.drawLineSegment(o.startPoint, o.endPoint, {
                strokeStyle: "cyan"
            }),
            r && DEBUG_DRAWER.drawX(a.x, a.y, 25, 25, {
                strokeStyle: "red"
            })
    }
    return !!r && i
}
LineSegment.prototype.pointInDomainAndRange = function (t, e) {
    void 0 == e && (e = 0);
    var n = this.isInDomain(t.x, e),
        i = this.isInRange(t.y, e);
    return n && i
}
LineSegment.prototype.isInDomain = function (t, e) {
    void 0 == e && (e = 0);
    var n = Math.min(this.startPoint.x, this.endPoint.x),
        i = Math.max(this.startPoint.x, this.endPoint.x);
    return t >= n - e && t <= i + e
}
LineSegment.prototype.isInRange = function (t, e) {
    void 0 == e && (e = 0);
    var n = Math.min(this.startPoint.y, this.endPoint.y),
        i = Math.max(this.startPoint.y, this.endPoint.y);
    return t >= n - e && t <= i + e
}
LineSegment.prototype.domain = function () {
    return new Vector2(Math.min(this.startPoint.x, this.endPoint.x), Math.max(this.startPoint.x, this.endPoint.x))
}
LineSegment.prototype.range = function () {
    return new Vector2(Math.min(this.startPoint.y, this.endPoint.y), Math.max(this.startPoint.y, this.endPoint.y))
}
Line.prototype.extendPoints = function (t) {
    var e = this.endPoint.subtract(this.startPoint).normalize().multiply(t);
    return new Line(this.startPoint.subtract(e), this.startPoint.add(e))
}
Line.prototype.calculateSlopeIntercept = function () {
    var t = (this.endPoint.y - this.startPoint.y) / (this.endPoint.x - this.startPoint.x);
    return {
        m: t,
        b: this.endPoint.y - t * this.endPoint.x
    }
}
var DEBUG_RAY = !1,
    Ray = function (t, e) {
        this.startPoint = t,
            this.endPoint = e
    };
Ray.prototype.extendPoint = function (t) {
    var e = this.endPoint.subtract(this.startPoint).normalize().multiply(t);
    return new Ray(this.startPoint, this.startPoint.add(e))
}
Ray.prototype.calculateIntersectionWithLineSegment = function (t) {
    var e = this.extendPoint(999999);
    return new LineSegment(e.startPoint, e.endPoint).calculateIntersectionWithLineSegment(t)
}
Ray.prototype.calculateIntersectionWithLineSegment = function (t) {
    var e = this.extendPoint(999999);
    return new LineSegment(e.startPoint, e.endPoint).calculateIntersectionWithLineSegment(t)
}
Ray.prototype.calculateIntersectionWithPoint = function (t) {
    var e = this.extendPoint(999999);
    return new LineSegment(e.startPoint, e.endPoint).calculateIntersectionWithPoint(t)
}
Ray.prototype.calculateIntersectionWithPoints = function (t) {
    var e = [];
    return $.each(t, function (t, n) {
                var i = this.calculateIntersectionWithPoint(n);
                i && e.push(i)
            }
            .bind(this)),
        e
}
var DEBUG_POLYGON = !1,
    Polygon = function (t) {
        this.points = t,
            this.centerPoint = this.calculateCenterPoint(this.points),
            this.lines = this.calculateLines(this.points)
    };
Polygon.prototype.doesContainsPoint = function (t) {
    if (this.lines = this.calculateLines(this.points),
        t.vectorsWithinDist(this.points))
        return !1;
    var e, n, i = 0;
    do {
        i++,
        n = (e = new Ray(t, new Vector2(t.x + 10 * Math.random() + 1, t.y + 10 * Math.random() + 1))).calculateIntersectionWithPoints(this.points).length > 0
    } while (n && i < 15);
    var r = [];
    $.each(this.lines, function (t, n) {
        var i = e.calculateIntersectionWithLineSegment(n);
        i && r.push(i)
    });
    var o = r.length % 2 == 0,
        s = !Boolean(o);
    if (DEBUG_DRAW && DEBUG_POLYGON) {
        var a = new Ray(DEBUG_TRANSFORM_FUNCTION(e.startPoint), DEBUG_TRANSFORM_FUNCTION(e.endPoint));
        DEBUG_DRAWER.drawLineSegment(a.startPoint, a.extendPoint(999999).endPoint, {
                strokeStyle: "green"
            }),
            $.each(this.lines, function (t, e) {
                var n = new LineSegment(DEBUG_TRANSFORM_FUNCTION(e.startPoint), DEBUG_TRANSFORM_FUNCTION(e.endPoint));
                DEBUG_DRAWER.drawLineSegment(n.startPoint, n.endPoint, {
                    strokeStyle: "yellow"
                })
            }),
            $.each(r, function (t, e) {
                var n = DEBUG_TRANSFORM_FUNCTION(e);
                DEBUG_DRAWER.drawX(n.x, n.y, 25, 25, {
                    strokeStyle: "red"
                })
            })
    }
    return s
}
Polygon.prototype.calculateCenterPoint = function (t) {
    var e = 0,
        n = 0;
    $.each(t, function (t, i) {
        e += i.x,
            n += i.y
    });
    var i = t.length,
        r = new Vector2(e /= i, n /= i);
    if (DEBUG_DRAW && DEBUG_POLYGON) {
        var o = DEBUG_TRANSFORM_FUNCTION(r);
        DEBUG_DRAWER.drawCircle(o.x, o.y, 10, {
            fillStyle: "green"
        })
    }
    return r
}
Polygon.prototype.calculateLines = function (t) {
    var e = t.length,
        n = [];
    $.each(t, function (i, r) {
            if (e > 1 && i != e - 1) {
                var o = new LineSegment(r, t[i + 1]);
                n.push(o)
            }
        }
        .bind(this));
    var i = new LineSegment(t[e - 1], t[0]);
    return n.push(i),
        n
}
var Drawer = function (t) {
    t && (this.context = t),
        this.__noContextError = "You must define a context before drawing:\nvar myDrawer = new Drawer(context);\nor\nmyDrawer.context = canvas.getContext('2d');"
};
Drawer.prototype.drawLineSegment = function (t, e, n) {
    this.__startDraw(n),
        this.context.beginPath(),
        this.context.moveTo(t.x, t.y),
        this.context.lineTo(e.x, e.y),
        this.__stroke(n),
        this.context.closePath()
}
Drawer.prototype.drawDoubleLineSegment = function (t, e, n, i) {
    this.drawLineSegment(t, e, n),
        this.drawLineSegment(t, e, i)
}
Drawer.prototype.drawDoublePoly = function (t, e, n) {
    this.drawPoly(t, e),
        this.drawPoly(t, n)
}
Drawer.prototype.drawPoly = function (t, e) {
    $.each(t, function (n, i) {
            var r = n == t.length - 1 ? t[0] : t[n + 1];
            this.drawLineSegment(i, r, e)
        }
        .bind(this))
}
Drawer.prototype.drawConnectedPoints = function (t, e) {
    $.each(t, function (n, i) {
            if (n == t.length - 1)
                return !1;
            var r = t[n + 1];
            this.drawLineSegment(i, r, e)
        }
        .bind(this))
}
Drawer.prototype.drawDoubleConnectedPoints = function (t, e, n) {
    this.drawConnectedPoints(t, e),
        this.drawConnectedPoints(t, n)
}
Drawer.prototype.drawLine = function (t, e) {
    t = t.extendPoints(999999),
        this.drawLineSegment(t.startPoint, t.endPoint, e)
}
Drawer.prototype.drawCircle = function (t, e, n, i) {
    this.__startDraw(i),
        this.context.beginPath(),
        this.context.arc(t, e, n, 0, 2 * Math.PI),
        this.__stroke(i),
        this.__fill(i),
        this.context.closePath()
}
Drawer.prototype.drawDoubleCircle = function (t, e, n, i, r) {
    this.drawCircle(t, e, n, i),
        this.drawCircle(t, e, n, r)
}
Drawer.prototype.drawConcentricCircles = function (t, e, n, i, r, o) {
    this.drawCircle(t, e, n, r),
        this.drawCircle(t, e, i, o)
}
Drawer.prototype.drawX = function (t, e, n, i, r) {
    this.__startDraw(r);
    var o = n / 2;
    this.context.beginPath(),
        this.context.moveTo(t - o, e - o),
        this.context.lineTo(t + o, e + o),
        this.context.moveTo(t + o, e - o),
        this.context.lineTo(t - o, e + o),
        this.context.stroke(),
        this.context.closePath()
}
Drawer.prototype.__startDraw = function (t) {
    if (!this.context)
        throw this.__noContextError;
    this.__resetStyle(),
        this.__applyStyle(t)
}
Drawer.prototype.__applyStyle = function (t) {
    t && (t.fillStyle && (this.context.fillStyle = t.fillStyle),
        t.strokeStyle && (this.context.strokeStyle = t.strokeStyle),
        t.lineWidth && (this.context.lineWidth = t.lineWidth),
        t.lineCap && (this.context.lineCap = t.lineCap))
}
Drawer.prototype.__resetStyle = function (t) {
    this.context.fillStyle = null,
        this.context.strokeStyle = null,
        this.context.lineWidth = 0
}
Drawer.prototype.__fill = function (t) {
    t && t.fillStyle && this.context.fill()
}
Drawer.prototype.__stroke = function (t) {
    t && (t.strokeStyle || t.lineWidth) && this.context.stroke()
}
var SelectedBBDrawer = function () {
    this.BB_STROKE_STYLE = "rgb(65, 244, 226)",
        this.BB_LINE_WIDTH = 1,
        this.BB_LINE_DASH = [5],
        this.BB_PADDING = 10,
        this.BB_OUTER_LINE_STROKE_STYLE = "#0e6b9c",
        this.BB_INNER_LINE_STROKE_STYLE = "#7bc9f5",
        this.BB_OUTER_LINE_WIDTH = 3,
        this.BB_INNER_LINE_WIDTH = 1,
        this.DELETE_RADIUS = 8,
        this.IDLED_DELETE_FILL_STYLE = "rgba(255, 0, 0, .8)",
        this.HOVERED_DELETE_FILL_STYLE = "rgba(120, 0, 0, .8)",
        this.outerLineStyle = {
            strokeStyle: this.BB_OUTER_LINE_STROKE_STYLE,
            lineWidth: this.BB_OUTER_LINE_WIDTH,
            lineCap: "square"
        },
        this.innerLineStyle = {
            strokeStyle: this.BB_INNER_LINE_STROKE_STYLE,
            lineWidth: this.BB_INNER_LINE_WIDTH,
            lineCap: "square"
        },
        this.__drawer = new Drawer
}
SelectedBBDrawer.prototype.drawBB = function (t, e, n) {
    this.drawRect(t, e),
        this.drawDeleteCircle(t, e, n),
        this.drawDeleteCross(t, e)
}
SelectedBBDrawer.prototype.drawRect = function (t, e) {
    var n = [{
        x: e.x + e.width / 2 + this.BB_PADDING - this.DELETE_RADIUS,
        y: e.y - e.height / 2 - this.BB_PADDING
    }, {
        x: e.x - e.width / 2 - this.BB_PADDING,
        y: e.y - e.height / 2 - this.BB_PADDING
    }, {
        x: e.x - e.width / 2 - this.BB_PADDING,
        y: e.y + e.height / 2 + this.BB_PADDING
    }, {
        x: e.x + e.width / 2 + this.BB_PADDING,
        y: e.y + e.height / 2 + this.BB_PADDING
    }, {
        x: e.x + e.width / 2 + this.BB_PADDING,
        y: e.y - e.height / 2 - this.BB_PADDING + this.DELETE_RADIUS
    }];
    this.__drawer.context = t,
        t.setLineDash(this.BB_LINE_DASH),
        this.__drawer.drawDoubleConnectedPoints(n, this.outerLineStyle, this.innerLineStyle),
        t.setLineDash([])
}
SelectedBBDrawer.prototype.getDeleteButtonPos = function (t) {
    var e = t.x + t.width / 2 + this.BB_PADDING,
        n = t.y + -t.height / 2 - this.BB_PADDING;
    return new Vector(e, n)
}
SelectedBBDrawer.prototype.drawDeleteCircle = function (t, e, n) {
    var i = e.x,
        r = e.y,
        o = this.IDLED_DELETE_FILL_STYLE;
    n && (o = this.HOVERED_DELETE_FILL_STYLE),
        t.beginPath(),
        t.arc(i + e.width / 2 + this.BB_PADDING, r - e.height / 2 - this.BB_PADDING, this.DELETE_RADIUS, 0, 2 * Math.PI),
        t.fillStyle = o,
        t.fill(),
        t.closePath()
}
SelectedBBDrawer.prototype.drawDeleteCross = function (t, e) {
    var n = e.x,
        i = e.y;
    t.strokeStyle = "white",
        t.lineWidth = 2;
    t.beginPath(),
        t.moveTo(n + e.width / 2 + this.BB_PADDING - this.DELETE_RADIUS / Math.sqrt(2) * .7, i - e.height / 2 - this.BB_PADDING - this.DELETE_RADIUS / Math.sqrt(2) * .7),
        t.lineTo(n + e.width / 2 + this.BB_PADDING + this.DELETE_RADIUS / Math.sqrt(2) * .7, i - e.height / 2 - this.BB_PADDING + this.DELETE_RADIUS / Math.sqrt(2) * .7),
        t.moveTo(n + e.width / 2 + this.BB_PADDING - this.DELETE_RADIUS / Math.sqrt(2) * .7, i - e.height / 2 - this.BB_PADDING + this.DELETE_RADIUS / Math.sqrt(2) * .7),
        t.lineTo(n + e.width / 2 + this.BB_PADDING + this.DELETE_RADIUS / Math.sqrt(2) * .7, i - e.height / 2 - this.BB_PADDING - this.DELETE_RADIUS / Math.sqrt(2) * .7),
        t.stroke(),
        t.closePath()
}
var PointDrawer = function () {
    this.OUTER_DOT_RADIUS = 10,
        this.INNER_DOT_RADIUS = .6 * this.OUTER_DOT_RADIUS,
        this.IDLED_DOT_OUTER_FILL_STYLE = "rgba(0, 124, 189, .75)",
        this.IDLED_DOT_INNER_FILL_STYLE = "rgba(131, 211, 255, .9)",
        this.HOVERED_DOT_OUTER_FILL_STYLE = "rgba(133, 52, 122, .75)",
        this.HOVERED_DOT_INNER_FILL_STYLE = "rgba(255, 131, 247, .9)",
        this.SELECTED_DOT_OUTER_FILL_STYLE = "rgba(20, 119, 65, .9)",
        this.SELECTED_DOT_INNER_FILL_STYLE = "rgba(178, 241, 130, .75)",
        this.__drawer = new Drawer
}
PointDrawer.prototype.drawPointScaled = function (t, e, n, i, r, o) {
        var s = this.IDLED_DOT_OUTER_FILL_STYLE,
            a = this.IDLED_DOT_INNER_FILL_STYLE;
        i && (s = this.HOVERED_DOT_OUTER_FILL_STYLE,
                a = this.HOVERED_DOT_INNER_FILL_STYLE),
            r && (s = this.SELECTED_DOT_OUTER_FILL_STYLE,
                a = this.SELECTED_DOT_INNER_FILL_STYLE),
            this.__drawer.context = t,
            this.__drawer.drawConcentricCircles(e, n, this.OUTER_DOT_RADIUS * o, this.INNER_DOT_RADIUS * o, {
                fillStyle: s
            }, {
                fillStyle: a
            })
    },
    PointDrawer.prototype.drawPoint = function (t, e, n, i, r) {
        var o = this.IDLED_DOT_OUTER_FILL_STYLE,
            s = this.IDLED_DOT_INNER_FILL_STYLE;
        i && (o = this.HOVERED_DOT_OUTER_FILL_STYLE,
                s = this.HOVERED_DOT_INNER_FILL_STYLE),
            r && (o = this.SELECTED_DOT_OUTER_FILL_STYLE,
                s = this.SELECTED_DOT_INNER_FILL_STYLE),
            this.__drawer.context = t,
            this.__drawer.drawConcentricCircles(e, n, this.OUTER_DOT_RADIUS, this.INNER_DOT_RADIUS, {
                fillStyle: o
            }, {
                fillStyle: s
            })
    };
var PolyDrawer = function () {
    this.IDLED_OUTER_STROKE_STYLE = "rgba(0, 124, 189, 1)"
    this.IDLED_INNER_STROKE_STYLE = "rgba(131, 211, 255, 1)"
    this.HOVERED_OUTER_STROKE_STYLE = "rgba(133, 52, 122, 1)"
    this.HOVERED_INNER_STROKE_STYLE = "rgba(255, 131, 247, 1)"
    this.SELECTED_OUTER_STROKE_STYLE = "rgba(20, 119, 65, 1)"
    this.SELECTED_INNER_STROKE_STYLE = "rgba(178, 241, 130, 1)"
    this.OUTER_LINE_WIDTH = 3
    this.INNER_LINE_WIDTH = 1
    this.IDLED_OUTER_LINE_STYLE = {
        strokeStyle: this.IDLED_OUTER_STROKE_STYLE,
        lineWidth: this.OUTER_LINE_WIDTH,
        lineCap: "square"
    }
    this.IDLED_INNER_LINE_STYLE = {
        strokeStyle: this.IDLED_INNER_STROKE_STYLE,
        lineWidth: this.INNER_LINE_WIDTH,
        lineCap: "square"
    }
    this.HOVERED_OUTER_LINE_STYLE = {
        strokeStyle: this.HOVERED_OUTER_STROKE_STYLE,
        lineWidth: this.OUTER_LINE_WIDTH,
        lineCap: "square"
    }
    this.HOVERED_INNER_LINE_STYLE = {
        strokeStyle: this.HOVERED_INNER_STROKE_STYLE,
        lineWidth: this.INNER_LINE_WIDTH,
        lineCap: "square"
    }
    this.SELECTED_OUTER_LINE_STYLE = {
        strokeStyle: this.SELECTED_OUTER_STROKE_STYLE,
        lineWidth: this.OUTER_LINE_WIDTH,
        lineCap: "square"
    }
    this.SELECTED_INNER_LINE_STYLE = {
        strokeStyle: this.SELECTED_INNER_STROKE_STYLE,
        lineWidth: this.INNER_LINE_WIDTH,
        lineCap: "square"
    }
    this.IDLED_LINE_COLOR = "black"
    this.HOVERED_LINE_COLOR = "rgb(133, 52, 122)"
    this.SELECTED_LINE_COLOR = "rgb(178, 241, 130)"
    this.VERTEX_OUTER_RADIUS = 5
    this.VERTEX_INNER_RADIUS = .6 * this.VERTEX_OUTER_RADIUS
    this.IDLED_VERTEX_OUTER_FILL_STYLE = "rgba(0, 124, 189, .75)"
    this.IDLED_VERTEX_INNER_FILL_STYLE = "rgba(131, 211, 255, .9)"
    this.HOVERED_VERTEX_OUTER_FILL_STYLE = "rgba(133, 52, 122, .75)"
    this.HOVERED_VERTEX_INNER_FILL_STYLE = "rgba(255, 131, 247, .9)"
    this.SELECTED_VERTEX_OUTER_FILL_STYLE = "rgba(20, 119, 65, .9)"
    this.SELECTED_VERTEX_INNER_FILL_STYLE = "rgba(178, 241, 130, .75)"
    this.FIRST_VERTEX_SCALE = 2
    this.X_WIDTH = this.X_HEIGHT = 10
    this.X_STROKE_STYLE = "red"
    this.X_LINE_WIDTH = 2
    this.__drawer = new Drawer
};
PolyDrawer.prototype.drawVertex = function (t, e, n, i, r, o, s) {
    var a = this.IDLED_VERTEX_OUTER_FILL_STYLE,
        l = this.IDLED_VERTEX_INNER_FILL_STYLE;
    (i || o) && (a = this.HOVERED_VERTEX_OUTER_FILL_STYLE,
        l = this.HOVERED_VERTEX_INNER_FILL_STYLE),
    (r || s) && (a = this.SELECTED_VERTEX_OUTER_FILL_STYLE,
        l = this.SELECTED_VERTEX_INNER_FILL_STYLE),
    this.__drawer.context = t
    this.__drawer.drawConcentricCircles(e, n, this.VERTEX_OUTER_RADIUS, this.VERTEX_INNER_RADIUS, {
        fillStyle: a
    }, {
        fillStyle: l
    })
}
PolyDrawer.prototype.drawFirstVertex = function (t, e, n) {
    this.drawVertex(t, e, n, !1, !0, !1, !1)
}
PolyDrawer.prototype.drawLineSegment = function (t, e, n, i, r) {
    var o = this.IDLED_LINE_COLOR;
    this.IDLED_OUTER_STROKE_STYLE,
        this.IDLED_INNER_STROKE_STYLE;
    i && (o = this.HOVERED_LINE_COLOR),
        r && (o = this.SELECTED_LINE_COLOR),
        this.__drawer.context = t,
        this.__drawer.drawLineSegment(e, n, {
            strokeStyle: o,
            lineWidth: 1
        })
}
PolyDrawer.prototype.drawIntersection = function (t, e) {
    this.__drawer.context = t,
        this.__drawer.drawX(e.x, e.y, this.X_WIDTH, this.X_HEIGHT, {
            lineWidth: this.X_LINE_WIDTH,
            strokeStyle: this.X_STROKE_STYLE
        })
}
PolyDrawer.prototype.drawPoly = function (t, e, n, i, r, o) {
    this.__drawer.context = t;
    var s = this.IDLED_OUTER_LINE_STYLE,
        a = this.IDLED_INNER_LINE_STYLE;
    n && (s = this.HOVERED_OUTER_LINE_STYLE,
            a = this.HOVERED_INNER_LINE_STYLE),
        i && (s = this.SELECTED_OUTER_LINE_STYLE,
            a = this.SELECTED_INNER_LINE_STYLE),
        this.__drawer.drawDoublePoly(e, s, a),
        this.drawVertices(t, e, n, i, r, o)
}
PolyDrawer.prototype.__drawLines = function (t, e, n, i) {
    $.each(e, function (r, o) {
                if (e.length > 1 && r != e.length - 1) {
                    var s = e[r + 1];
                    this.drawLineSegment(t, o, s, n, i)
                }
            }
            .bind(this)),
        this.drawLineSegment(t, e[e.length - 1], e[0], n, i)
}
PolyDrawer.prototype.drawVertices = function (t, e, n, i, r, o) {
    $.each(e, function (e, s) {
            this.drawVertex(t, s.x, s.y, n, i, e == r, e == o)
        }
        .bind(this))
}
PolyDrawer.prototype.drawSlopeIntercept = function (t, e, n) {
    var i = {
            x: 0,
            y: e.b
        },
        r = {
            x: 500,
            y: 500 * e.m + e.b
        },
        o = ii.imageToCanvasCoords(i.x, i.y),
        s = ii.imageToCanvasCoords(r.x, r.y);
    this.drawLineSegment(t, o, s, !1, !1)
}
var Annotation = function (t, e, n) {
    this.pos = new Vector(t, e),
        this.text = n,
        this.isHovered = !1,
        this.isSelected = !1,
        this.isDragging = !1,
        this.type = "DEFAULT"
};
Annotation.prototype.setPosition = function (t, e) {
    this.pos.x = t,
        this.pos.y = e
}
Annotation.prototype.addPosition = function (t, e) {
    this.pos.x += t,
        this.pos.y += e
}
Annotation.prototype.setText = function (t) {
    this.text = t,
        $(this).triggerHandler("change")
}
Annotation.prototype.serialize = function () {}
Annotation.prototype.draw = function (t, e, n) {}
Annotation.prototype.onCanvasMouseDown = function (t) {}
Annotation.prototype.onDocumentMouseUp = function (t) {}
Annotation.prototype.onImageMouseMove = function (t, e) {}
Annotation.prototype.startDrag = function () {
    this.isDragging || (this.isDragging = !0,
        $(this).triggerHandler("change"))
}
Annotation.prototype.stopDrag = function () {
    this.isDragging && (this.isDragging = !1,
        $(this).triggerHandler("change"))
}
Annotation.prototype.onDrag = function (t) {}
Annotation.prototype.getBB = function () {}
Annotation.prototype.select = function () {
    this.isSelected || (this.isSelected = !0,
        $(this).triggerHandler("change"))
}
Annotation.prototype.deselect = function () {
    this.isSelected && (this.isSelected = !1,
        $(this).triggerHandler("change"))
}
Annotation.prototype.pointWithinObj = function (t) {}
Annotation.prototype.hover = function () {
    this.isHovered || (this.isHovered = !0,
        $(this).triggerHandler("change"))
}
Annotation.prototype.dehover = function () {
    this.isHovered && (this.isHovered = !1,
        $(this).triggerHandler("change"))
}
Annotation.prototype.delete = function () {
    $(this).triggerHandler("delete")
}
var PointAnnotation = function (t, e, n) {
    Annotation.call(this, t, e, n),
        this.__pointDrawer = new PointDrawer,
        this.radius = this.__pointDrawer.OUTER_DOT_RADIUS,
        this.type = "DOT"
};
PointAnnotation.prototype = Object.create(Annotation.prototype)
PointAnnotation.prototype.constructor = Annotation
PointAnnotation.prototype.draw = function (t, e, n) {
    Annotation.prototype.draw.call(this, t, e),
        this.__pointDrawer.drawPoint(t, e.x, e.y, this.isHovered, this.isSelected)
}
PointAnnotation.prototype.pointWithinObj = function (t) {
    var e = this.radius;
    return /Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent) && (e *= 2),
        this.pos.vectorWithinDist(t, e)
}
PointAnnotation.prototype.getBB = function () {
    return {
        x: this.pos.x,
        y: this.pos.y,
        width: 2 * this.radius,
        height: 2 * this.radius
    }
}
PointAnnotation.prototype.serialize = function (t) {
    return {
        x: this.pos.x / t,
        y: this.pos.y / t,
        text: this.text,
        type: this.type
    }
}
var pd, PolyAnnotation = function (t, e) {
    Annotation.call(this, 0, 0, e),
        this.__polyDrawer = new PolyDrawer,
        pd = this.__polyDrawer;
    var n = [];
    $.each(t, function (t, e) {
            n.push(new Vector2(e.x, e.y))
        }),
        this.polygon = new Polygon(n),
        this.type = "POLY",
        this.hoveredPoint = null,
        this.draggedPoint = null
};
PolyAnnotation.prototype = Object.create(Annotation.prototype)
PolyAnnotation.prototype.constructor = Annotation
PolyAnnotation.prototype.zoom = function (t) {
    $.each(this.polygon.points, function (e, n) {
            n.x *= t,
                n.y *= t
        }
        .bind(this))
}
PolyAnnotation.prototype.addPosition = function (t, e) {
    0 == t && 0 == e || ($.each(this.polygon.points, function (n, i) {
                i.x += t,
                    i.y += e
            }
            .bind(this)),
        $(this).triggerHandler("change"))
}
PolyAnnotation.prototype.setPosition = function (t, e) {
    var n = t - this.pos.x,
        i = e - this.pos.y;
    $.each(this.polygon.points, function (t, e) {
                e.x += n,
                    e.y += i
            }
            .bind(this)),
        $(this).triggerHandler("change")
}
PolyAnnotation.prototype.onDrag = function (t) {
    if (this.isDragging)
        this.pos.x,
        t.x,
        this.pos.y,
        t.y;
    $(this).triggerHandler("change")
}
PolyAnnotation.prototype.getBB = function () {
    var t = 99999999,
        e = t,
        n = -t,
        i = -t;
    $.each(this.polygon.points, function (r, o) {
        t = Math.min(t, o.x),
            n = Math.max(n, o.x),
            e = Math.min(e, o.y),
            i = Math.max(i, o.y)
    });
    var r = n - t,
        o = i - e,
        s = {
            x: t + r / 2,
            y: e + o / 2,
            width: r,
            height: o
        },
        a = this.__polyDrawer.VERTEX_OUTER_RADIUS;
    return s.width += 2 * a,
        s.height += 2 * a,
        s
}
PolyAnnotation.prototype.setHoveredPoint = function (t) {
    this.hoveredPoint != t && (this.hoveredPointIndex = this.polygon.points.indexOf(t),
        this.hoveredPoint = t,
        $(this).triggerHandler("change"))
}
PolyAnnotation.prototype.setDraggedPoint = function (t) {
    this.draggedPoint != t && (this.draggedPointIndex = this.polygon.points.indexOf(t),
        this.draggedPoint = t,
        $(this).triggerHandler("change"))
}
PolyAnnotation.prototype.draw = function (t, e, n) {
    Annotation.prototype.draw.call(this, t, e);
    this.__polyDrawer.LINE_COLOR;
    this.isHovered && this.__polyDrawer.HOVERED_LINE_COLOR,
        this.isSelected && this.__polyDrawer.SELECTED_LINE_COLOR;
    var i = [];
    $.each(this.polygon.points, function (t, e) {
                var r = n.imageToCanvasCoords(e.x, e.y);
                i.push(new Vector(r.x, r.y))
            }
            .bind(this)),
        this.__polyDrawer.drawPoly(t, i, this.isHovered, this.isSelected, this.hoveredPointIndex, this.draggedPointIndex)
}
PolyAnnotation.prototype.pointWithinObj = function (t) {
    var e = [],
        n = !1;
    return $.each(this.polygon.points, function (i, r) {
                if (e.push([r.x, r.y]),
                    r.vectorIsWithinDist(t, this.__polyDrawer.VERTEX_OUTER_RADIUS))
                    return n = !0, !1
            }
            .bind(this)),
        n || pointInPolygon([t.x, t.y], e)
}
PolyAnnotation.prototype.serialize = function (t) {
    var e = _.clone(this.polygon.points);
    return $.each(e, function (e, n) {
        n.x /= t,
            n.y /= t
    }), {
        x: this.pos.x,
        y: this.pos.y,
        points: e,
        text: this.text,
        type: this.type
    }
}
var CircleAnnotation = function (t, e, n, i) {
    Annotation.call(this, t, e, i),
        this.radius = n,
        this.type = "CIRCLE",
        this.__drawer = new Drawer
};
CircleAnnotation.prototype = Object.create(Annotation.prototype)
CircleAnnotation.prototype.constructor = Annotation,
    CircleAnnotation.prototype.draw = function (t, e, n) {
        Annotation.prototype.draw.call(this, t, e);
        var i, r;
        this.isSelected ? (i = "rgba(20, 119, 65, 1)",
                r = "rgba(178, 241, 130, 1)") : this.isHovered ? (i = "rgba(133, 52, 122, 1)",
                r = "rgba(255, 131, 247, 1)") : (i = "rgba(0, 124, 189, 1)",
                r = "rgba(131, 211, 255, 1)"),
            this.__drawer.context = t,
            this.__drawer.drawDoubleCircle(e.x, e.y, this.radius, {
                strokeStyle: i,
                lineWidth: 3
            }, {
                strokeStyle: r,
                lineWidth: 1
            })
    }
CircleAnnotation.prototype.zoom = function (t) {
    this.setPosition(this.pos.x * t, this.pos.y * t),
        this.radius *= t
}
CircleAnnotation.prototype.pointWithinObj = function (t) {
    return this.pos.vectorWithinDist(t, this.radius)
}
CircleAnnotation.prototype.getBB = function () {
    return {
        x: this.pos.x,
        y: this.pos.y,
        width: 2 * this.radius,
        height: 2 * this.radius
    }
}
CircleAnnotation.prototype.serialize = function (t) {
    return {
        x: this.pos.x / t,
        y: this.pos.y / t,
        radius: this.radius / t,
        text: this.text,
        type: this.type
    }
}
var Tool = function (t, e, n, i, r) {
    this.name = t,
        this.selector = e,
        this.annotator = n,
        this.interactiveImage = i,
        this.hotkey = r
};
Tool.prototype.activate = function () {
    $(this).trigger("change")
}
Tool.prototype.deactivate = function () {
    $(this).trigger("change")
}
Tool.prototype.draw = function (t) {}
Tool.prototype.onMouseOut = function (t) {}
Tool.prototype.onCanvasDblClick = function (t) {}
Tool.prototype.onCanvasMouseDown = function (t) {}
Tool.prototype.onDocumentMouseUp = function (t) {}
Tool.prototype.onImageMouseMove = function (t, e) {}
Tool.prototype.onDocumentKeyPress = function (t, e) {}
var Toolbox = function (t) {
    this.interactiveImage = t,
        this.canvas = this.interactiveImage.canvas,
        this.context = this.canvas.getContext("2d"),
        this.activeTool = null,
        this.tools = {},
        this.hotkeys = {
            99: "c",
            67: "c",
            68: "d",
            98: "b",
            66: "b",
            114: "r",
            82: "r",
            118: "v",
            86: "v"
        },
        this.tooltip = new Tooltip,
        t.addToolbox(this),
        $("body").mouseout(this.__onMouseOut.bind(this)),
        $(document).on("mousemove", this.__onDocumentMouseMove.bind(this)),
        $(this.interactiveImage.canvas).on("mousedown", this.__onCanvasMouseDown.bind(this)),
        $(document).on("mouseup", this.__onDocumentMouseUp.bind(this)),
        $(this.interactiveImage.canvas).on("dblclick", this.__onCanvasDblClick.bind(this)),
        $(document).on("keydown", this.__onDocumentKeyDown.bind(this)),
        $(document).on("keypress", this.__onDocumentKeyPress.bind(this))
};
Toolbox.prototype.draw = function (t) {
    $.each(this.tools, function (e, n) {
            if (n != this.activeTool)
                return !0;
            n.draw(t, null, this.interactiveImage)
        }
        .bind(this))
}
Toolbox.prototype.addTool = function (t) {
    this.tools[t.name] = t,
        this.activeTool || this.selectTool(t.name);
    var e = $(this.tools[t.name].selector);
    e.on("click", this.toolSelectorClick.bind(this)),
        e.hover(this.showToolTip.bind(this), this.hideToolTip.bind(this)),
        $(t).on("change", this.__onToolChange.bind(this))
}
Toolbox.prototype.showToolTip = function (t) {
    var e = $(t.target).position().left,
        n = $(t.target).position().top,
        i = $(t.target).width(),
        r = $(t.target).height(),
        o = "#" + t.target.id,
        s = null;
    $.each(this.tools, function (t, e) {
        e.selector == o && (s = e)
    });
    var a = s.name;
    "DOT" == a && (a = "POINT"),
        a = (a = a.toLowerCase()).charAt(0).toUpperCase() + a.slice(1),
        hotkey = this.hotkeys[s.hotkey[0]],
        this.tooltip.show(e + i / 2, n + r, "<b>" + a + "</b> (" + hotkey + ")")
}
Toolbox.prototype.hideToolTip = function (t) {
    this.tooltip.hide()
}
Toolbox.prototype.getTool = function (t) {
    return this.tools[t]
}
Toolbox.prototype.__onToolChange = function (t) {
    $(this).triggerHandler("change")
}
Toolbox.prototype.selectTool = function (t) {
    this.activeTool && ($(this.activeTool.selector).removeClass("selected"),
            this.activeTool.deactivate()),
        this.activeTool = this.tools[t],
        $(this.activeTool.selector).addClass("selected"),
        this.activeTool.activate()
}
Toolbox.prototype.toolSelectorClick = function (t) {
    var e = "#" + t.target.id,
        n = null;
    $.each(this.tools, function (t, i) {
            i.selector == e && (n = i)
        }),
        this.selectTool(n.name)
}
Toolbox.prototype.release = function () {
    $.each(this.tools, function (t, e) {
            $(this.tools[e.name].selector).off("click")
        }
        .bind(this))
}
Toolbox.prototype.__onMouseOut = function (t) {
    null == t.toElement && null == t.relatedTarget && $.each(this.tools, function (e, n) {
            if (n != this.activeTool)
                return !0;
            n.onMouseOut(t)
        }
        .bind(this))
}
Toolbox.prototype.__onDocumentKeyDown = function (t) {
    this.__onDocumentKeyPress(t)
}
Toolbox.prototype.__onDocumentKeyPress = function (t) {
    document.activeElement == document.body && $.each(this.tools, function (e, n) {
            return n.hotkey.includes(t.keyCode) ? (this.selectTool(n.name), !1) : n != this.activeTool || void n.onDocumentKeyPress(t)
        }
        .bind(this))
}
Toolbox.prototype.__onDocumentMouseMove = function (t) {
    var e = this.interactiveImage.pageToImageCoords(t.pageX, t.pageY),
        n = this.interactiveImage.getSize();
    $.each(this.tools, function (t, i) {
            if (i != this.activeTool)
                return !0;
            i.onImageMouseMove(new Vector(e.x, e.y), n, this.interactiveImage)
        }
        .bind(this))
}
Toolbox.prototype.__onCanvasMouseDown = function (t) {
    var e = this.interactiveImage.pageToImageCoords(t.pageX, t.pageY);
    $.each(this.tools, function (n, i) {
            if (i != this.activeTool)
                return !0;
            i.onCanvasMouseDown(t, new Vector(e.x, e.y))
        }
        .bind(this))
}
Toolbox.prototype.__onDocumentMouseUp = function (t) {
    var e = this.interactiveImage.pageToImageCoords(t.pageX, t.pageY);
    $.each(this.tools, function (t, n) {
            if (n != this.activeTool)
                return !0;
            n.onDocumentMouseUp(new Vector(e.x, e.y))
        }
        .bind(this))
}
Toolbox.prototype.__onCanvasDblClick = function (t) {
    var e = this.interactiveImage.pageToImageCoords(t.pageX, t.pageY);
    $.each(this.tools, function (t, n) {
            if (n != this.activeTool)
                return !0;
            n.onCanvasDblClick(e)
        }
        .bind(this))
}
var ii, SelectTool = function (t, e, n, i) {
    ii = i,
        Tool.call(this, t, e, n, i, [118, 86]),
        this.hoveredAnnotation = null,
        this.selectedAnnotation = null,
        this.selectedBBDrawer = new SelectedBBDrawer,
        this.__deleteIsHovered = !1,
        this.__isDragging = !1,
        this.layerManager = new LayerManager,
        shortcut.add("Ctrl+Shift+A", function () {
                this.selectedAnnotation && this.__deselectAnnotation(this.selectedAnnotation),
                    this.selectedAnnotation = null
            }
            .bind(this))
};
SelectTool.prototype = Object.create(Tool.prototype),
    SelectTool.prototype.constructor = Tool
SelectTool.prototype.deactivate = function () {
    this.selectedAnnotation && this.__deselectAnnotation(this.selectedAnnotation),
        this.hoveredAnnotation && this.hoveredAnnotation.dehover(),
        this.selectedAnnotation = null,
        this.hoveredAnnotation = null,
        this.__deleteIsHovered = !1,
        this.__isDragging = !1,
        Tool.prototype.deactivate.call(this)
}
SelectTool.prototype.onDocumentKeyPress = function (t) {
    if ((127 == t.keyCode || 46 == t.keyCode) && this.selectedAnnotation) {
        var e = this.selectedAnnotation;
        this.__deselectAnnotation(this.selectedAnnotation),
            this.annotator.deleteAnnotation(e),
            this.hoveredAnnotation = null,
            $("body").css("cursor", "default")
    }
}
SelectTool.prototype.draw = function (t) {
        if ($("body").css("cursor", "default"),
            (this.hoveredAnnotation || this.__isDragging) && $("body").css("cursor", "move"),
            this.selectedAnnotation) {
            var e = this.selectedAnnotation.getBB(),
                n = this.interactiveImage.imageToCanvasCoords(e.x, e.y);
            e.x = n.x,
                e.y = n.y,
                this.selectedBBDrawer.drawBB(t, e, this.__deleteIsHovered)
        }
        this.__deleteIsHovered && $("body").css("cursor", "pointer")
    },
    SelectTool.prototype.__hoverAnnotation = function (t) {
        this.hoveredAnnotation != t && (this.hoveredAnnotation = t,
            t.hover(),
            $(this).trigger("change"))
    }
SelectTool.prototype.__dehoverAnnotation = function (t) {
    t.isHovered && this.hoveredAnnotation && (this.hoveredAnnotation = null,
        t.dehover(),
        $(this).trigger("change"))
}
SelectTool.prototype.__selectAnnotation = function (t) {
    this.selectedAnnotation != t && (this.selectedAnnotation && this.__deselectAnnotation(this.selectedAnnotation, !0),
        this.selectedAnnotation = t,
        t.select(),
        this.annotator.deleteAnnotation(t),
        this.annotator.addAnnotation(t, !0),
        $(this).trigger("change"),
        $(this).trigger("ACTIVE_ANNOTATION_CHANGE", t))
}
SelectTool.prototype.__deselectAnnotation = function (t, e) {
    t && t.isSelected && (t.deselect(),
        this.selectedAnnotation = null,
        $(this).trigger("change"),
        e || $(this).trigger("ACTIVE_ANNOTATION_CHANGE", !1))
}
SelectTool.prototype.__startAnnotationDrag = function (t) {
    var e = this.__isDragging;
    t.startDrag(),
        this.__isDragging = !0,
        this.__isDragging != e && $(this).trigger("change")
}
SelectTool.prototype.__handleAnnotationDrag = function (t, e, n, i) {
    if (this.__isDragging) {
        _.clamp(t.x, 0, n.width),
            _.clamp(t.y, 0, n.height);
        var r = t.x - e.x,
            o = t.y - e.y;
        "DOT" == this.selectedAnnotation.type || this.selectedAnnotation.type,
            this.selectedAnnotation.addPosition(r, o),
            $(this).triggerHandler("change")
    }
}
SelectTool.prototype.onCanvasMouseDown = function (t, e) {
    var n, i = !1,
        r = null,
        o = this.selectedAnnotation;
    $.each(this.annotator.annotations, function (t, e) {
                e && (this.__deleteIsHovered ? (n = o,
                    this.__deselectAnnotation(o)) : r || e != this.hoveredAnnotation ? r != e && this.__deselectAnnotation(e) : (this.__selectAnnotation(e),
                    r = e,
                    this.__startAnnotationDrag(e),
                    i = !0))
            }
            .bind(this)),
        n && (this.annotator.deleteAnnotation(n),
            $("body").css("cursor", "default")),
        this.selectedAnnotation = r,
        $(this).trigger("change"),
        i && t.stopImmediatePropagation()
}
SelectTool.prototype.onImageMouseMove = function (t, e, n) {
    this.oldImageMousePos || (this.oldImageMousePos = {
        x: 0,
        y: 0
    });
    var i = null;
    if (!this.__isDragging) {
        var r = _.clone(this.annotator.annotations);
        r.reverse(),
            this.layerManager.sort(r),
            $.each(r, function (e, n) {
                    n.pointWithinObj(t) ? i = n : this.__dehoverAnnotation(n)
                }
                .bind(this)),
            i && this.__hoverAnnotation(i)
    }
    var o = this.__deleteIsHovered;
    this.__deleteIsHovered = this.__checkIfDeleteIsHovered(t),
        o != this.__deleteIsHovered && $(this).trigger("change"),
        this.__handleAnnotationDrag(t, this.oldImageMousePos, e, n),
        this.oldImageMousePos = t
}
SelectTool.prototype.onDocumentMouseUp = function (t) {
    this.__isDragging = !1
}
SelectTool.prototype.__checkIfDeleteIsHovered = function (t) {
    if (null == this.selectedAnnotation)
        return !1;
    var e = this.selectedAnnotation.getBB(),
        n = this.selectedBBDrawer.getDeleteButtonPos(e);
    return !!t.vectorWithinDist(n, this.selectedBBDrawer.DELETE_RADIUS)
}
var DotTool = function (t, e, n, i) {
    Tool.call(this, t, e, n, i, [68]),
        this.imageX = null,
        this.imageY = null,
        this.__pointDrawer = new PointDrawer
}
DotTool.prototype = Object.create(Tool.prototype)
DotTool.prototype.constructor = Tool
DotTool.prototype.draw = function (t) {
    if ($("body").css("cursor", "crosshair"),
        null != this.imageX) {
        var e = this.interactiveImage.imageToCanvasCoords(this.imageX, this.imageY);
        this.__pointDrawer.drawPoint(t, e.x, e.y, !1, !0)
    }
}
DotTool.prototype.onImageMouseMove = function (t, e) {
    this.imageX = t.x,
        this.imageY = t.y,
        $(this).trigger("change")
}
DotTool.prototype.onCanvasMouseDown = function (t, e) {
    t.stopImmediatePropagation();
    var n = new PointAnnotation(e.x, e.y, "");
    this.annotator.addAnnotation(n)
}
var DEBUG_DRAW, DEBUG_CONTEXT, DEBUG_TRANSFORM_FUNCTION, DEBUG_DRAWER, POLY_TOOL_DEBUG = !1,
    transformFunction, PolyTool = function (t, e, n, i) {
        DEBUG_DRAW = !0,
            DEBUG_CONTEXT = i.context,
            DEBUG_DRAWER = new Drawer(DEBUG_CONTEXT),
            this.transformFunction = function (t) {
                var e = i.imageToCanvasCoords(t.x, t.y);
                return new Vector2(e.x, e.y)
            },
            DEBUG_TRANSFORM_FUNCTION = transformFunction,
            Tool.call(this, t, e, n, i, [98, 66]),
            this.pointRadius = 5,
            this.snapRadius = 30,
            polyResetVars(this),
            this.__polyDrawer = new PolyDrawer,
            this.__drawer = new Drawer
    };
PolyTool.prototype = Object.create(Tool.prototype)
PolyTool.prototype.constructor = Tool
PolyTool.prototype.deactivate = function () {
    polyResetVars(this),
        $(this).trigger("change")
}
PolyTool.prototype.addShape = function (t) {
    var e = new PolyAnnotation(t, "");
    this.annotator.addAnnotation(e)
}
PolyTool.prototype.draw = function (t, e, n) {
    if ($("body").css("cursor", "crosshair"),
        null == this.hoveredPoint && null == this.draggedPoint) {
        if (!this.isDrawing && null == this.draggedPoint) {
            var e = n.imageToCanvasCoords(this.imageMouseX, this.imageMouseY);
            this.__polyDrawer.drawFirstVertex(t, e.x, e.y, "black")
        }
        this.isColliding = !1;
        var i = _.clone(this.__pointsBeingDrawn);
        if (this.isDrawing) {
            var r = this.__pointsBeingDrawn[this.__pointsBeingDrawn.length - 1],
                o = new Vector2(this.imageMouseX, this.imageMouseY),
                s = this.__pointsBeingDrawn[0],
                a = this.__attemptSnapPoint(o, s, this.snapRadius);
            this.isSnapped = !1,
                _.isEqual(a, s) && (this.isSnapped = !0,
                    this.snapPoint = s);
            var l = new LineSegment(r, a),
                c = this.__calculateLinesFromPoints(this.__pointsBeingDrawn),
                u = this.__calculateIntersectionsOfLineWithLines(l, c),
                h = [s, r];
            (u = this.__cleanPointsWithinDistance(u, h, .1)).length > 0 && (this.isColliding = !0);
            this.isColliding && "red",
                i.push(a)
        }
        this.__drawLinesBetweenPoints(t, i, this.transformFunction),
            this.isDrawing && $.each(u, function (e, n) {
                    this.__polyDrawer.drawIntersection(t, this.transformFunction(n))
                }
                .bind(this)),
            $.each(this.currentPoly, function (t, e) {
                    n.imageToCanvasCoords(e.x, e.y);
                    if (this.currentPoly.length > 1 && t != this.currentPoly.length - 1) {
                        var i = this.currentPoly[t + 1];
                        n.imageToCanvasCoords(i.x, i.y)
                    }
                }
                .bind(this)),
            $.each(this.currentPoly, function (e, i) {
                    var r = n.imageToCanvasCoords(i.x, i.y);
                    0 == e ? this.__polyDrawer.drawFirstVertex(t, r.x, r.y) : this.__polyDrawer.drawVertex(t, r.x, r.y, !1, !0)
                }
                .bind(this))
    } else
        $("body").css("cursor", "move")
}
PolyTool.prototype.__checkPointsHover = function (t) {
    var e = null,
        n = null;
    $.each(this.annotator.annotations, function (i, r) {
                "POLY" == r.type && (r.setHoveredPoint(null),
                    $.each(r.polygon.points, function (i, o) {
                            o.vectorIsWithinDist(t, 2 * this.__polyDrawer.VERTEX_OUTER_RADIUS) && (e = o,
                                n = r)
                        }
                        .bind(this)))
            }
            .bind(this)),
        this.hoveredPoint = e,
        this.hoveredAnnotation = n,
        this.hoveredAnnotation && this.hoveredAnnotation.setHoveredPoint(this.hoveredPoint)
}
PolyTool.prototype.drawIntersections = function (t, e) {
    $.each(e, function (e, n) {
            this.__polyDrawer.drawIntersection(t, this.transformFunction(n))
        }
        .bind(this))
}
PolyTool.prototype.__checkIfDragAllowed = function () {
    if (null != this.draggedAnnotation && null != this.draggedPoint) {
        this.canReleaseDrag = !0;
        var t = this.draggedAnnotation.polygon.calculateLines(this.draggedAnnotation.polygon.points);
        $.each(this.draggedAnnotation.polygon.points, function (e, n) {
                if (n.x == this.draggedPoint.x && n.y == this.draggedPoint.y) {
                    if (0 == e)
                        var i = [n, this.draggedAnnotation.polygon.points[e + 1]],
                            r = [n, this.draggedAnnotation.polygon.points[this.draggedAnnotation.polygon.points.length - 1]];
                    else if (e == this.draggedAnnotation.polygon.points.length - 1)
                        var i = [n, this.draggedAnnotation.polygon.points[0]],
                            r = [n, this.draggedAnnotation.polygon.points[e - 1]];
                    else
                        var i = [n, this.draggedAnnotation.polygon.points[e - 1]],
                            r = [n, this.draggedAnnotation.polygon.points[e + 1]];
                    i = new LineSegment(i[0], i[1]),
                        r = new LineSegment(r[0], r[1]);
                    var o = this.__calculateIntersectionsOfLineWithLines(i, t),
                        s = this.__calculateIntersectionsOfLineWithLines(r, t),
                        a = [i.startPoint, i.endPoint, r.startPoint, r.endPoint];
                    o = this.__cleanPointsWithinDistance(o, a, .1),
                        s = this.__cleanPointsWithinDistance(s, a, .1),
                        (o.length > 0 || s.length > 0) && (this.canReleaseDrag = !1),
                        this.drawIntersections(this.interactiveImage.context, o),
                        this.drawIntersections(this.interactiveImage.context, s)
                }
            }
            .bind(this))
    }
}
PolyTool.prototype.onImageMouseMove = function (t, e) {
    this.imageMouseX = t.x,
        this.imageMouseY = t.y,
        this.isDrawing || this.__checkPointsHover(t),
        null != this.draggedPoint && (this.draggedPoint.x = this.imageMouseX,
            this.draggedPoint.y = this.imageMouseY),
        $(this).trigger("change"),
        null != this.draggedPoint && this.__checkIfDragAllowed()
}
PolyTool.prototype.onDocumentKeyPress = function (t) {
    127 != t.keyCode && 27 != t.keyCode || this.stopDraw(!0)
}
PolyTool.prototype.stopDraw = function (t) {
    this.__pointsBeingDrawn = [],
        this.isSnapped = !1,
        this.snapPoint = null,
        this.isDrawing = !1,
        this.isColliding = !1,
        this.lastPoint = null,
        t || this.addShape(this.currentPoly),
        this.currentPoly = [],
        $(this).trigger("change")
}
PolyTool.prototype.__attemptSnapPoint = function (t, e, n) {
    return this.__pointsBeingDrawn.length <= 2 ? t : t.vectorIsWithinDist(e, n) ? e : t
}
PolyTool.prototype.onDocumentMouseUp = function (t, e) {
    this.canReleaseDrag && (this.draggedPoint && this.draggedAnnotation && this.draggedAnnotation.setDraggedPoint(null),
        this.draggedPoint = null,
        this.draggedAnnotation = null)
}
PolyTool.prototype.onCanvasMouseDown = function (t, e) {
    if (null == this.draggedPoint && (t.stopImmediatePropagation(), !this.isColliding)) {
        if (null != this.hoveredPoint)
            return this.draggedPoint = this.hoveredPoint,
                this.draggedAnnotation = this.hoveredAnnotation,
                this.draggedAnnotation.setDraggedPoint(this.draggedPoint),
                void t.stopImmediatePropagation();
        if (!this.isDrawing && !this.hoveredPoint) {
            if (this.hoverShapes.length > 0)
                return this.activeShape = this.hoverShapes[0],
                    void $(this).trigger("change");
            this.isDrawing = !0
        }
        if (this.activeShape = null,
            this.isSnapped)
            return e = this.snapPoint,
                void this.stopDraw();
        this.__startDraw(e.x, e.y),
            this.currentPoly.push(e),
            this.lastPoint = {
                x: e.x,
                y: e.y
            },
            $(this).trigger("change")
    }
}
PolyTool.prototype.__startDraw = function (t, e) {
    var n = new Vector2(t, e);
    this.__pointsBeingDrawn.push(n)
}
PolyTool.prototype.__calculateLinesFromPoints = function (t) {
    var e = [];
    return $.each(t, function (n, i) {
                var r = t.length > 1,
                    o = n == t.length - 1;
                if (r && !o) {
                    var s = new LineSegment(i, this.__pointsBeingDrawn[n + 1]);
                    e.push(s)
                }
            }
            .bind(this)),
        e
}
PolyTool.prototype.__drawLinesBetweenPoints = function (t, e, n) {
    var i = [];
    $.each(e, function (t, e) {
            n && (e = n(e)),
                i.push(e)
        }),
        this.__drawer.context = t,
        this.__drawer.drawDoubleConnectedPoints(i, {
            lineWidth: 3,
            strokeStyle: "rgba(20, 119, 65, 1)"
        }, {
            lineWidth: 1,
            strokeStyle: "rgba(178, 241, 130, 1)"
        })
}
PolyTool.prototype.__calculateIntersectionsOfLineWithLines = function (t, e) {
    var n = [];
    return $.each(e, function (e, i) {
                var r = t.calculateIntersectionWithLineSegment(i);
                r && n.push(r)
            }
            .bind(this)),
        n
}
PolyTool.prototype.__cleanPointsWithinDistance = function (t, e, n) {
    var i = [];
    return $.each(t, function (t, r) {
            var o = !1;
            $.each(e, function (t, e) {
                    if (r.vectorIsWithinDist(e, n))
                        return o = !0, !1
                }),
                o || i.push(r)
        }),
        i
}
var RectTool = function (t, e, n, i) {
    Tool.call(this, t, e, n, i, [114, 82]),
        this.imageMousePos = null,
        this.startRectPos = null,
        this.__polyDrawer = new PolyDrawer
};
RectTool.prototype = Object.create(Tool.prototype),
    RectTool.prototype.constructor = Tool
RectTool.prototype.draw = function (t, e, n) {
    if ($("body").css("cursor", "crosshair"),
        null != this.startRectPos && null != this.imageMousePos) {
        var i = this.getPoly(),
            r = [];
        $.each(i, function (t, e) {
                var i = n.imageToCanvasCoords(e.x, e.y);
                r.push(new Vector(i.x, i.y))
            }),
            this.__polyDrawer.drawPoly(t, r, !1, !0)
    }
}
RectTool.prototype.getPoly = function () {
    var t = this.imageMousePos.x - this.startRectPos.x,
        e = this.imageMousePos.y - this.startRectPos.y,
        n = [];
    return n.push(new Vector(this.startRectPos.x, this.startRectPos.y)),
        n.push(new Vector(this.startRectPos.x, this.startRectPos.y + e)),
        n.push(new Vector(this.startRectPos.x + t, this.startRectPos.y + e)),
        n.push(new Vector(this.startRectPos.x + t, this.startRectPos.y)),
        n
}
RectTool.prototype.onImageMouseMove = function (t, e) {
    this.imageMousePos = t,
        null != this.startRectPos && $(this).trigger("change")
}
RectTool.prototype.onCanvasMouseDown = function (t, e) {
    t.stopImmediatePropagation(),
        this.startRectPos = e
}
RectTool.prototype.deactivate = function () {
    this.stopDraw()
}
RectTool.prototype.stopDraw = function () {
    null != this.startRectPos && null != this.imageMousePos && (this.startRectPos = null,
        this.imageMousePos = null,
        $(this).trigger("change"))
}
RectTool.prototype.onDocumentKeyPress = function (t) {
    127 != t.keyCode && 27 != t.keyCode || this.stopDraw()
}
RectTool.prototype.onDocumentMouseUp = function (t, e) {
    if (null != this.startRectPos && null != this.imageMousePos) {
        var n = this.getPoly(),
            i = new PolyAnnotation(n, "");
        this.annotator.addAnnotation(i),
            this.startRectPos = null,
            this.imageMousePos = null,
            $(this).trigger("change")
    }
}
var CircleTool = function (t, e, n, i) {
    Tool.call(this, t, e, n, i, [99, 67]),
        this.isDrawing = !1,
        this.imageX = null,
        this.imageY = null,
        this.startDrawX = null,
        this.startDrawY = null,
        this.__drawer = new Drawer,
        this.__pointDrawer = new PointDrawer,
        this.SELECTED_STROKE_STYLE = "rgb(178, 241, 130)"
};
CircleTool.prototype = Object.create(Tool.prototype),
    CircleTool.prototype.constructor = Tool
CircleTool.prototype.draw = function (t) {
    $("body").css("cursor", "crosshair");
    var e = this.interactiveImage.imageToCanvasCoords(this.imageX, this.imageY);
    if (this.isDrawing) {
        var n = this.interactiveImage.imageToCanvasCoords(this.startDrawX, this.startDrawY),
            i = new Vector2(n.x, n.y),
            r = new Vector2(e.x, e.y),
            o = i.distance(r),
            s = r.subtract(i);
        this.__drawer.context = this.interactiveImage.context,
            this.__drawer.drawLineSegment(i, r, {
                strokeStyle: this.SELECTED_STROKE_STYLE,
                lineWidth: 3
            });
        this.__drawer.drawDoubleCircle(e.x - s.x, e.y - s.y, o, {
                strokeStyle: "rgba(20, 119, 65, 1)",
                lineWidth: 3
            }, {
                strokeStyle: "rgba(178, 241, 130, 1)",
                lineWidth: 1
            }),
            this.__pointDrawer.drawPointScaled(t, i.x, i.y, !1, !0, .75),
            this.__pointDrawer.drawPointScaled(t, e.x, e.y, !1, !0, .75)
    } else
        this.imageX
}
CircleTool.prototype.deactivate = function () {
    this.stopDraw()
}
CircleTool.prototype.stopDraw = function () {
    null != this.startDrawX && (this.startDrawX = null,
        this.startDrawY = null,
        this.isDrawing = !1,
        $(this).trigger("change"))
}
CircleTool.prototype.onDocumentKeyPress = function (t) {
    127 != t.keyCode && 27 != t.keyCode || this.stopDraw()
}
CircleTool.prototype.onImageMouseMove = function (t, e) {
    this.imageX = t.x
    this.imageY = t.y
    this.isDrawing && $(this).trigger("change")
}
CircleTool.prototype.onCanvasMouseDown = function (t, e) {
    this.startDrawX = e.x,
        this.startDrawY = e.y,
        this.isDrawing = !0,
        t.stopImmediatePropagation()
}
CircleTool.prototype.onDocumentMouseUp = function (t, e) {
    if (null != this.startDrawX) {
        var n = new Vector2(this.startDrawX, this.startDrawY),
            i = new Vector2(this.imageX, this.imageY),
            r = n.distance(i),
            o = new CircleAnnotation(n.x, n.y, r, "");
        this.annotator.addAnnotation(o),
            this.startDrawX = null,
            this.startDrawY = null,
            this.isDrawing = !1,
            $(this).trigger("change")
    }
}
var PlaylistManager = function () {
        this.request = null;
        var t = function (t) {
                this.request && this.request.abort(),
                    this.request = $.ajax(t)
            },
            e = {
                initialState: "uninitialized",
                states: {
                    uninitialized: {
                        INIT: "inactive"
                    },
                    inactive: {
                        _onEnter: function () {},
                        FETCH: function () {
                            this.transition("fetching");
                            var e = this;
                            t({
                                url: "/py/fetch_playlist.py",
                                type: "GET",
                                dataType: "json",
                                success: function (t, n) {
                                    e.handle(t.status, t)
                                }
                            })
                        },
                        FETCH_PUBLIC: function () {
                            this.transition("fetching");
                            var e = this;
                            t({
                                url: "/py/fetch_public.py",
                                type: "GET",
                                dataType: "json",
                                success: function (t, n) {
                                    e.handle(t.status, t)
                                }
                            })
                        }
                    },
                    fetching: {
                        _onEnter: function () {},
                        FETCH_SUCCESSFUL: function (t) {
                            this.tables = t.tables,
                                this.image_extensions = t.image_extensions,
                                this.transition("fetch_successful")
                        },
                        BAD_FETCH: "fetch_unsuccessful",
                        INACTIVATE: "inactive",
                        UPDATE: "inactive"
                    },
                    fetch_successful: {
                        _onEnter: function () {},
                        INACTIVATE: "inactive",
                        UPDATE: function (e) {
                            this.transition("updating");
                            var n = this;
                            t({
                                url: "/py/update_playlists.py",
                                type: "POST",
                                data: {
                                    data: JSON.stringify(e)
                                },
                                dataType: "json",
                                success: function (t, e) {
                                    n.handle(t.status, t)
                                },
                                error: function (t) {
                                    document.write(t.responseText)
                                }
                            })
                        }
                    },
                    updating: {
                        _onEnter: function () {},
                        UPDATE_SUCCESSFUL: function (t) {
                            this.transition("inactive")
                        },
                        BAD_UPDATE: function (t) {
                            this.transition("inactive")
                        }
                    },
                    fetch_unsuccessful: {
                        _onEnter: function () {},
                        INACTIVATE: "inactive",
                        UPDATE: "inactivate"
                    }
                },
                init: function () {
                    this.handle("INIT")
                },
                fetch: function () {
                    this.handle("FETCH")
                },
                fetchPublic: function () {
                    this.handle("FETCH_PUBLIC")
                },
                fetchSuccessful: function () {
                    this.handle("FETCH_SUCCESSFUL")
                },
                badFetch: function () {
                    this.handle("BAD_FETCH")
                },
                inactivate: function () {
                    this.handle("INACTIVATE")
                },
                update: function (t) {
                    this.handle("UPDATE", t)
                }
            };
        return new machina.Fsm(e)
    },
    crud = function (t, e, n) {
        Array.isArray(n) || $.error("crud: You must supply a list of primary keys, and each must be a string."),
            $.each(n, function (t, e) {
                "string" != typeof e && $.error("crud: You must supply a list of primary keys, and each must be a string.")
            });
        var i = function (t) {
            return "object" == typeof t && t.constructor == Object
        };
        i(t) && i(e) || $.error("crud: The parameters passed to crud must be objects.");
        var r = _.keys(t),
            o = _.keys(e);
        _.isEqual(r, o) || $.error("crud: The two objects must have the same keys (representing the same tables).");
        var s = r,
            a = {};
        return $.each(s, function (r, o) {
                a[o] = {};
                var s = n[r],
                    l = t[o],
                    c = e[o];
                if (0 != l.length || 0 != c.length) {
                    Array.isArray(l) && Array.isArray(c) || $.error("crud: Each object passed to crud must have a single value that is an Array (representing multiple rows)."),
                        $.each(l, function (t, e) {
                            i(e) || $.error("crud: Each row must be an object (representing column/value pairs)."),
                                $.each(c, function (t, e) {
                                    i(e) || $.error("crud: Each row must be an object (representing column/value pairs).")
                                })
                        });
                    var u = function (t, e) {
                            return t.filter(function (t) {
                                return s in t
                            }).map(function (t) {
                                return t[s]
                            })
                        },
                        h = u(l),
                        d = u(c),
                        f = c.filter(function (t) {
                            if (!(s in t))
                                return !0;
                            var e = t[s];
                            return -1 == h.indexOf(e) && $.error("crud: Insertion in obj2 contains a primaryKey field."), !1
                        }),
                        p = l.filter(function (t) {
                            var e = t[s];
                            return !!(-1 == d.indexOf(e)) && (s in t || $.error("crud: Deletion in obj1 has no primaryKey field."), !0)
                        }),
                        g = _.clone(c);
                    $.each(f, function (t, e) {
                        g.splice(g.indexOf(e), 1)
                    });
                    var y = [];
                    $.each(g, function (t, e) {
                            var n = e[s],
                                i = h.indexOf(n),
                                r = l[i];
                            !_.isEqual(r, e) && y.push(e)
                        }),
                        a[o].insertions = f,
                        a[o].deletions = p,
                        a[o].updates = y
                }
            }),
            a
    },
    LocusImagePositioner = function (t) {
        this.locusImage = t,
            this.canvas = this.locusImage.canvas,
            this.position(),
            $(window).resize(function () {
                    this.position()
                }
                .bind(this))
    };
LocusImagePositioner.prototype.position = function (t) {
    var e = this.__getWorkAreaSize(),
        n = 1;
    this.locusImage.zoomer && (n = this.locusImage.zoomer.zoom);
    var i = Math.min(this.locusImage.img.width * n, e.width),
        r = Math.min(this.locusImage.img.height * n, e.height);
    this.locusImage.setSize(i, r);
    var o, s = this.__getCanvasSize();
    o = e.width < s.width ? 0 : (e.width - s.width) / 2;
    var a = $("#work_area").position().top;
    e.height >= s.height && (a += (e.height - s.height) / 2),
        $(this.canvas).css({
            position: "absolute",
            top: a,
            left: o
        }),
        t || this.locusImage.draw(),
        $(this).triggerHandler("position"),
        $(this.locusImage).triggerHandler("change")
}
LocusImagePositioner.prototype.__getWorkAreaSize = function () {
    $(this.canvas).hide();
    var t = $(window).width(),
        e = $("footer").position().top - $("#work_area").position().top;
    return $(this.canvas).show(), {
        width: t,
        height: e
    }
}
LocusImagePositioner.prototype.__getCanvasSize = function (t, e) {
    $(this.canvas);
    return {
        width: this.locusImage.width,
        height: this.locusImage.height
    }
}
var Model = function () {
    this.session = session,
        this.playlistManager = new PlaylistManager,
        this.imageManager = new ImageManager
};
Model.prototype.init = function () {
    this.session.init()
    this.playlistManager.init()
    this.imageManager.init()
};
var ImageManager = function () {
        var t = function (t) {
                var e = this;
                this.transition("image_loading");
                var n = {
                    locus_id: t.locusId,
                    locus_name: t.locusName
                };
                $.ajax({
                    url: "/py/load_locus.py",
                    type: "POST",
                    data: n,
                    dataType: "json",
                    success: function (t, n) {
                        e.handle(t.status, t)
                    }
                })
            },
            e = function () {
                return this.dots
            },
            n = function (t) {
                return this.dots[t]
            },
            i = function (t, e, n) {
                n || (n = "Enter the dot's message here."),
                    this.dots.push({
                        x: t,
                        y: e,
                        text: n
                    })
            },
            r = function (t, e, n, i) {
                var r = this.dots[t];
                r.x = e,
                    r.y = n,
                    i && (r.text = i)
            },
            o = function (t) {
                this.dots.splice(t, 1)
            };
        this.lastStateWithImage = "editing_new_locus";
        var s = {
            imageUploadUrl: "/py/image_upload.py",
            initialState: "uninitialized",
            states: {
                uninitialized: {
                    INIT: "no_image_loaded"
                },
                no_image_loaded: {
                    _onEnter: function () {},
                    UPLOAD: function (t) {
                        this.transition("image_uploading"),
                            t.submit()
                    },
                    OPEN: t
                },
                image_uploading: {
                    _onEnter: function () {},
                    BAD_UPLOAD: "no_image_loaded",
                    INVALID_FILE_TYPE: function () {
                        this.transition("no_image_loaded")
                    },
                    INVALID_FILE_SIZE: function () {
                        this.transition("no_image_loaded")
                    },
                    UPLOAD_SUCCESSFUL: function (t) {
                        this.locusId = null,
                            this.imagePath = t.filename,
                            this.transition("editing_new_locus")
                    }
                },
                image_loading: {
                    _onEnter: function () {},
                    BAD_OPEN: "no_image_loaded",
                    OPEN_SUCCESSFUL: function (t) {
                        var e = JSON.parse(t.locus_json),
                            n = e.id,
                            i = e.name;
                        this.locusId = n,
                            this.locusName = i;
                        e.owner_id;
                        var r = e.image,
                            o = JSON.parse(e.dots);
                        this.imagePath = r,
                            this.dots = o,
                            this.scale = e.scale,
                            this.transition("editing_old_locus")
                    }
                },
                editing_new_locus: {
                    _onEnter: function () {
                        this.dots = [],
                            this.scale = 1,
                            this.lastStateWithImage = "editing_new_locus"
                    },
                    GET_DOTS: e,
                    GET_DOT: n,
                    CREATE_DOT: i,
                    UPDATE_DOT: r,
                    DELETE_DOT: o,
                    PROMPT_SAVE_AS: "awaiting_save_as_info",
                    DELETE: "no_image_loaded",
                    OPEN: t,
                    NEW: "no_image_loaded"
                },
                editing_old_locus: {
                    _onEnter: function () {
                        this.lastStateWithImage = "editing_old_locus"
                    },
                    GET_DOTS: e,
                    GET_DOT: n,
                    CREATE_DOT: i,
                    UPDATE_DOT: r,
                    DELETE_DOT: o,
                    SAVE: function (t) {
                        this.transition("saving_locus");
                        var e = JSON.stringify(canvasControllerGlobal.interactiveImage.serialize(t)),
                            n = {
                                locus_id: this.locusId,
                                locus_name: this.locusName,
                                dots: e,
                                scale: t,
                                image: this.imagePath
                            },
                            i = this;
                        $.ajax({
                            url: "/py/save.py",
                            type: "POST",
                            data: n,
                            dataType: "json",
                            success: function (t, e) {
                                i.handle(t.status, t)
                            },
                            error: function (t) {}
                        })
                    },
                    VIEW: function () {
                        window.open("/viewer.html?id=" + this.locusId)
                    },
                    PROMPT_SAVE_AS: "awaiting_save_as_info",
                    DELETE: function () {
                        this.transition("deleting");
                        var t = {
                                locus_id: this.locusId
                            },
                            e = this;
                        $.ajax({
                            url: "/py/delete.py",
                            type: "POST",
                            data: t,
                            dataType: "json",
                            success: function (t, n) {
                                e.handle(t.status, t)
                            }
                        })
                    },
                    OPEN: t,
                    NEW: "no_image_loaded"
                },
                deleting: {
                    _onEnter: function () {},
                    DELETE_SUCCESSFUL: "no_image_loaded",
                    BAD_DELETE: "no_image_loaded"
                },
                awaiting_save_as_info: {
                    _onEnter: function () {},
                    SAVE_AS: function (t) {
                        this.transition("saving_locus_as"),
                            this.scale = t.scale;
                        var e = JSON.stringify(canvasControllerGlobal.interactiveImage.serialize(this.scale)),
                            t = {
                                locus_name: t.name,
                                dots: e,
                                scale: t.scale,
                                image: t.image_path,
                                playlist_id: t.playlist_id
                            },
                            n = this;
                        $.ajax({
                            url: "/py/save_as.py",
                            type: "POST",
                            data: t,
                            dataType: "json",
                            success: function (t, e) {
                                n.handle(t.status, t)
                            },
                            error: function (t, e, n) {}
                        })
                    },
                    CANCEL: function () {
                        this.transition(this.lastStateWithImage)
                    }
                },
                saving_locus_as: {
                    _onEnter: function () {},
                    SAVE_AS_SUCCESSFUL: function (t) {
                        var e = ii.serialize();
                        this.locusName = t.locus_name,
                            this.scale = t.scale,
                            this.locusId = t.locus_id,
                            $.each(e, function (e, n) {
                                "POLY" == n.type && $.each(n.points, function (e, n) {
                                    n.x *= t.scale,
                                        n.y *= t.scale
                                })
                            }),
                            this.dots = e,
                            this.transition("editing_old_locus")
                    },
                    BAD_SAVE_AS: this.lastStateWithImage
                },
                saving_locus: {
                    _onEnter: function () {},
                    SAVE_SUCCESSFUL: function (t) {
                        var e = ii.serialize();
                        this.scale = t.scale,
                            $.each(e, function (e, n) {
                                "POLY" == n.type && $.each(n.points, function (e, n) {
                                    n.x *= t.scale,
                                        n.y *= t.scale
                                })
                            }),
                            this.dots = e,
                            this.transition("editing_old_locus")
                    },
                    BAD_SAVE: "editing_old_locus"
                }
            },
            init: function () {
                this.handle("INIT")
            },
            upload: function () {
                this.handle("UPLOAD")
            },
            open: function (t) {
                this.handle("OPEN", t)
            },
            badUpload: function () {
                this.handle("BAD_UPLOAD")
            },
            uploadSuccessful: function () {
                this.handle("UPLOAD_SUCCESSFUL")
            },
            delete: function () {
                this.handle("DELETE")
            },
            badOpen: function () {
                this.handle("BAD_OPEN")
            },
            openSuccessful: function () {
                this.handle("OPEN_SUCCESSFUL")
            },
            promptSaveAs: function () {
                this.handle("PROMPT_SAVE_AS")
            },
            saveAs: function (t) {
                this.handle("SAVE_AS", t)
            },
            new: function () {
                this.handle("NEW")
            },
            save: function (t) {
                this.handle("SAVE", t)
            },
            view: function () {
                this.handle("VIEW")
            },
            cancel: function () {
                this.handle("CANCEL")
            },
            getDots: e,
            getDot: function (t) {
                return this.handle("GET_DOT", t)
            },
            createDot: function (t, e, n) {
                this.handle("CREATE_DOT", t, e, n)
            },
            updateDot: function (t, e, n, i) {
                this.handle("UPDATE_DOT", t, e, n, i)
            },
            deleteDot: function (t) {
                this.handle("DELETE_DOT", t)
            },
            doRender: function () {
                return "editing_old_locus" == this.compositeState() || "editing_new_locus" == this.compositeState()
            },
            uploadStart: function (t) {
                this.handle("UPLOAD", t)
            },
            uploadDone: function (t) {
                this.handle(t.result.status, t.result)
            }
        };
        return new machina.Fsm(s)
    },
    CanvasView = function () {
        this.__init()
    };
CanvasView.prototype.__init = function () {
    this.DELETE_KEYCODE = 46
    this.CANVAS_ID = "canvas"
}
CanvasView.prototype.showLoading = function (t) {
    $("#canvas_area").html("");
    var e = "";
    e += '<img src="./img/loading.svg" />',
        $("#work_area").html(e)
}
CanvasView.prototype.showUploadWidget = function (t) {
    $("#canvas_area").html("");
    var e = "";
    e += '<div id="upload_text">',
        e += "<span>Upload a new image:&nbsp;</span>",
        e += '<input id="image_upload" type="file" name="image_file" accept="image/*" />',
        e += "</div>",
        $("#work_area").html(e);
    $("#image_upload").attr("data-url", t);
    $("#image_upload").fileupload({
        dataType: "json",
        add: function (t, e) {
                $(this).trigger("IMAGE_UPLOAD_STARTED", e)
            }
            .bind(this),
        done: function (t, e) {
                $(this).trigger("IMAGE_UPLOAD_DONE", e)
            }
            .bind(this),
        error: function (t, e, n) {
            document.write(t.responseText)
        }
    })
}
CanvasView.prototype.createCanvas = function () {
    $("#work_area").html("")
    $("#canvas_area").html('<canvas id="' + this.CANVAS_ID + '"></canvas>')
    $("#canvas").hide();
    var t = $("#" + this.CANVAS_ID)[0];
    this.context = t.getContext("2d")
    this.createListeners()
}
CanvasView.prototype.createListeners = function () {
    var t = this;
    $("#" + this.CANVAS_ID).on("mousedown touchstart", function (e) {
            if ($(this).trigger("CANVAS_MOUSE_DOWN", e),
                "touchstart" == e.type) {
                var n = e.timeStamp,
                    i = n - ($(this).data("lastTouch") || n),
                    r = e.originalEvent.touches.length;
                $(this).data("lastTouch", n);
                var o = e.originalEvent.touches[0],
                    s = new Vector(o.screenX, o.screenY),
                    a = $(this).data("lastTouchCoords");
                if ($(this).data("lastTouchCoords", s), !i || i > 500 || r > 1)
                    return;
                if (a) {
                    var l = s.distanceSquared(a);
                    if (l > 15625)
                        return
                }
                e.preventDefault(),
                    $(e.target).trigger("click"),
                    $(t).trigger("CANVAS_DOUBLE_CLICK", e),
                    $(this).data("lastTouchCoords", null)
            }
        }
        .bind(this)).on("dblclick", function (e) {
        $(t).trigger("CANVAS_DOUBLE_CLICK", e)
    })
    $(document).on("mousemove touchmove", function (e) {
        $(t).trigger("DOCUMENT_MOUSE_MOVE", e)
    }).on("mouseup touchend", function (e) {
        $(t).trigger("DOCUMENT_MOUSE_UP", e)
    })
    $(document).keydown(function (e) {
        e.keyCode == t.DELETE_KEYCODE && $(t).trigger("DOCUMENT_DELETE_KEY_DOWN", e)
    })
    $(window).resize(function () {
        $(t).trigger("WINDOW_RESIZE")
    })
    quill.on("text-change", function (e, n, i) {
        suppressQuillEvents || $(t).trigger("DOT_TEXT_CHANGE")
    })
    $("#dot_text").keyup(function (e) {
        suppressQuillEvents || $(t).trigger("DOT_TEXT_CHANGE", e)
    })
    $("#scale_slider").on("input", function (e) {
        $(t).trigger("CANVAS_SCALE_CHANGE", e)
    })
}
CanvasView.prototype.destroyListeners = function () {
    quill.off("text-change"),
        $("#" + this.CANVAS_ID).off("mousedown").off("touchstart").off("dblclick"),
        $(document).off("mousemove").off("touchmove").off("mouseup").off("touchend"),
        $(document).off("keydown"),
        $(window).off("resize"),
        $("#dot_text").off("keyup")
}
CanvasView.prototype.loadImageToCanvas = function (t, e) {
    var n = this;
    $("<img>", {
        src: t
    }).on("load", function () {
        n.image = this,
            n.sizeImage(e)
    })
}
CanvasView.prototype.updateSelectedDotTextarea = function (t) {
    quill.root.innerHTML = t
}
CanvasView.prototype.sizeImage = function (t) {
    this.scale = t,
        this.imageWidth = this.image.width * this.scale,
        this.imageHeight = this.image.height * this.scale;
    var e, n, i, r = $(window).width(),
        o = $("footer").position().top - $("#work_area").position().top,
        s = $("#work_area").position().top;
    r < this.imageWidth ? (e = r,
            i = 0) : (e = this.imageWidth,
            i = (r - this.imageWidth) / 2),
        o < this.imageHeight ? n = o : (n = this.imageHeight,
            s += (o - this.imageHeight) / 2),
        $("#canvas").attr("width", e),
        $("#canvas").attr("height", n),
        $("#canvas").css({
            position: "absolute",
            top: s,
            left: i
        }),
        $("#canvas").show(),
        this.canvasWidth = e,
        this.canvasHeight = n
}
CanvasView.prototype.draw = function (t, e, n, i, r, o) {
    return
}
CanvasView.prototype.drawDot = function (t, e, n, i) {
    return
}
CanvasView.prototype.imageUploadElement = function () {
    return $("#image_upload")
}
CanvasView.prototype.imageUploading = function () {
    $("#work_area").html("<span>Uploading...</span>")
}
CanvasView.prototype.imageLoading = function () {
    $("#work_area").html("<span>Loading...</span>")
}
CanvasView.prototype.badOpen = function () {
    this.sessionController.prompt(["There was a problem opening the file..."], null)
}
CanvasView.prototype.enableSaveAsButton = function () {
    $("#file_menu option[value=SAVE_AS]").prop("disabled", !1),
        $("#file_menu").niceSelect("update")
}
CanvasView.prototype.disableSaveAsButton = function () {
    $("#file_menu option[value=SAVE_AS]").prop("disabled", !0),
        $("#file_menu").niceSelect("update")
}
var CanvasController = function (t, e) {
    this.model = t
    this.canvasView = e
    this.image = null
    this.interactiveImage = null
    this.TIMESTEP = 100
    this.__init()
};
CanvasController.prototype.__init = function () {
    this.__createModelHandlers()
    this.__createViewHandlers()
}
CanvasController.prototype.__createModelHandlers = function () {
    this.model.imageManager.on("transitioned", function (t) {
                var e = this.model.imageManager.compositeState();
                this.__imageManagerStateChange(e, t),
                    "image_uploading.INVALID_FILE_TYPE" == t.action ? $.confirm(["<strong>Invalid Upload:</strong> You must upload a jpeg, png, or gif image."]) : "image_uploading.INVALID_FILE_SIZE" == t.action && $.confirm(["Invalid Upload: Your image must be < 10 mb in size."]),
                    "editing_new_locus" != t.fromState && "editing_old_locus" != t.fromState || this.removeRender()
            }
            .bind(this)),
        shortcut.add("Ctrl+Q", function () {
            document.activeElement == document.body && setTimeout(function () {
                quill.focus()
            }, 1)
        })
}
CanvasController.prototype.__createViewHandlers = function () {
    $(this.canvasView).on("IMAGE_UPLOAD_STARTED", this.__imageUploadStarted.bind(this))
    $(this.canvasView).on("IMAGE_UPLOAD_DONE", this.__imageUploadDone.bind(this))
    $(this.canvasView).on("CANVAS_MOUSE_DOWN", this.canvasMouseDown.bind(this))
    $(this.canvasView).on("CANVAS_DOUBLE_CLICK", this.canvasDoubleClick.bind(this))
    $(this.canvasView).on("DOCUMENT_MOUSE_MOVE", this.documentMouseMove.bind(this))
    $(this.canvasView).on("DOCUMENT_MOUSE_UP", this.documentMouseUp.bind(this))
    $(this.canvasView).on("DOCUMENT_DELETE_KEY_DOWN", this.documentDeleteKeyDown.bind(this))
    $(this.canvasView).on("WINDOW_RESIZE", this.windowResize.bind(this))
    $(this.canvasView).on("DOT_TEXT_CHANGE", this.dotTextChange.bind(this))
    $(this.canvasView).on("CANVAS_SCALE_CHANGE", this.canvasScaleChange.bind(this))
}
CanvasController.prototype.canvasScaleChange = function (t) {
    this.setScale(this.getScale()),
        this.resetScroll(),
        this.canvasView.sizeImage(this.scale)
}
CanvasController.prototype.getScale = function () {
    return Number(ii.zoomer.zoom)
}
CanvasController.prototype.setScale = function (t) {
    this.scale = t;
    var e = t < 1 ? 5 * (t - 1) / .8 : (t - 1) / .8,
        n = Math.round(e);
    $("#scale_slider").val(n)
}
CanvasController.prototype.resetUI = function () {
    quill.root.innerHTML = "";
    this.interactiveImage.toolbox;
    disableQuill()
}
var toolbox;
CanvasController.prototype.__ResetImage = function (t) {
    this.interactiveImage && this.interactiveImage.destroy()
}
CanvasController.prototype.__loadNewImage = function (t) {
    var e;
    this.interactiveImage && (e = toolbox.activeTool.name,
        this.interactiveImage.destroy());
    var n = t.scale ? t.scale : 1,
        i = this.model.imageManager.locusId ? "/uploads/img/" + this.model.imageManager.locusId : this.model.imageManager.imagePath,
        r = this.model.imageManager.dots,
        o = this;
    $("<img>", {
        src: i
    }).on("load", function () {
        var t = new InteractiveImage;
        t.setSize(250, 250),
            t.setImg(this);
        var i = new Zoomer(t);
        t.addZoomer(i),
            t.zoomer.setZoom(n);
        var s = new AnnotatorNew(r, t);
        t.addAnnotator(s),
            (toolbox = new Toolbox(t)).addTool(new SelectTool("SELECT", "#select_tool", s, t)),
            toolbox.addTool(new DotTool("DOT", "#dot_tool", s, t)),
            toolbox.addTool(new PolyTool("POLY", "#poly_tool", s, t)),
            toolbox.addTool(new RectTool("RECT", "#rect_tool", s, t)),
            toolbox.addTool(new CircleTool("CIRCLE", "#circle_tool", s, t)),
            toolbox.selectTool(e || "SELECT");
        var a = toolbox.getTool("SELECT");
        $(a).on("ACTIVE_ANNOTATION_CHANGE", o.activeAnnotationChange);
        var l = new Scroller;
        l.addBehavior(new DraggableScrollerBehavior(t.canvas));
        var c = new KeyboardScrollerBehavior;
        l.addBehavior(c),
            c.init(),
            t.addScroller(l);
        var u = new LocusImagePositioner(t);
        t.addPositioner(u);
        new OverlayUI(t);
        u.position(),
            $("#popups").append($(t.canvas)),
            o.interactiveImage = t,
            o.canvasView.createListeners(),
            o.resetUI()
    })
}
CanvasController.prototype.__imageManagerStateChange = function (t, e) {
    if ("no_image_loaded" == t)
        this.__ResetImage(),
        this.canvasView.showUploadWidget(this.model.imageManager.imageUploadUrl);
    else if ("editing_old_locus" == t || "editing_new_locus" == t) {
        if (this.model.imageManager.scale)
            this.model.imageManager.scale;
        else
            1;
        "awaiting_save_as_info" != e.fromState && this.__loadNewImage(this.model.imageManager)
    } else
        "image_loading" != t && "image_uploading" != t && "saving_locus" != t && "saving_locus_as" != t && "deleting" != t || this.canvasView.showLoading()
}
CanvasController.prototype.resetScroll = function () {
    this.scrollX = 0,
        this.scrollY = 0,
        this.dragOffsetX = 0,
        this.dragOffsetY = 0,
        this.mouseX = 0,
        this.mouseY = 0,
        this.lastMouseX = 0,
        this.lastMouseY = 0,
        this.hasProcessedTouchStart = !1
}
CanvasController.prototype.__setupNewImage = function (t, e) {
    this.isDraggingImage = !1,
        this.isDraggingDot = !1,
        this.activeDotIndex = -1,
        this.resetScroll(),
        this.setScale(e),
        this.canvasView.createCanvas(),
        this.canvasView.loadImageToCanvas(t, this.scale),
        this.renderInterval = setInterval(this.render.bind(this), this.TIMESTEP),
        this.render()
}
CanvasController.prototype.removeRender = function () {
    clearInterval(this.renderInterval)
}
CanvasController.prototype.__imageUploadStarted = function (t, e) {
    this.model.imageManager.uploadStart(e)
}
CanvasController.prototype.__imageUploadDone = function (t, e) {
    this.model.imageManager.uploadDone(e)
};
var scaleDots = function (t, e) {
    return dotsModified = [],
        $.each(t, function (t, n) {
            var i = $.extend({}, n);
            i.x = n.x * e,
                i.y = n.y * e,
                dotsModified.push(i)
        }),
        dotsModified
};
CanvasController.prototype.render = function () {
    this.model.imageManager.doRender() && this.canvasView.draw(this.scrollX, this.scrollY, scaleDots(this.model.imageManager.getDots(), this.scale), this.getHoverDotIndex(), this.activeDotIndex, this.isHoveringDelete)
}
CanvasController.prototype.getHoverDotIndex = function (t) {
    return
}
CanvasController.prototype.selectDot = function (t) {
    this.activeDotIndex = t;
    var e = this.model.imageManager.getDot(t).text;
    this.canvasView.updateSelectedDotTextarea(e)
}
CanvasController.prototype.canvasMouseDown = function (t, e) {
    var n, i;
    if ("mousedown" == e.type)
        n = e.pageX,
        i = e.pageY;
    else if ("touchstart" == e.type) {
        var r = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
        n = r.pageX,
            i = r.pageY
    }
    this.mouseX = n,
        this.mouseY = i;
    var o = !1;
    if (this.isHoveringDelete && (this.model.imageManager.deleteDot(this.activeDotIndex),
            this.isHoveringDelete = !1,
            o = !0), !o) {
        var s = this.getHoverDotIndex("touchstart" == e.type); -
        1 != s ? (this.selectDot(s),
            this.isDraggingDot = !0) : this.isDraggingImage = !0
    }
    this.hasProcessedTouchStart = !1
}
CanvasController.prototype.canvasDoubleClick = function (t, e) {
    var n, i, r = this.getHoverDotIndex();
    if ("touchstart" == e.type) {
        var o = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
        n = o.pageX,
            i = o.pageY
    } else
        n = e.pageX,
        i = e.pageY;
    if (-1 == r) {
        var s = this.pageToImageCoords(n, i);
        this.model.imageManager.createDot(s.x, s.y),
            this.selectDot(this.model.imageManager.getDots().length - 1)
    } else
        this.model.imageManager.deleteDot(r)
}
CanvasController.prototype.documentMouseMove = function (t, e) {
    var n, i;
    if ("mousemove" == e.type)
        n = e.pageX,
        i = e.pageY;
    else if ("touchmove" == e.type) {
        var r = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
        n = r.pageX,
            i = r.pageY
    }
    if (this.mouseX = n,
        this.mouseY = i, !this.hasProcessedTouchStart && (this.lastMouseX = this.mouseX,
            this.lastMouseY = this.mouseY,
            this.hasProcessedTouchStart = !0,
            this.isDraggingDot)) {
        var o = this.pageToImageCoords(this.mouseX, this.mouseY),
            s = this.model.imageManager.getDots()[this.activeDotIndex];
        this.dragOffsetX = s.x - o.x,
            this.dragOffsetY = s.y - o.y
    }
    this.canvasView.image && this.handleDrag(),
        this.lastMouseX = n,
        this.lastMouseY = i
}
CanvasController.prototype.documentMouseUp = function (t, e) {
    this.isDraggingImage = !1,
        this.isDraggingDot = !1
}
CanvasController.prototype.documentDeleteKeyDown = function (t, e) {
    -1 != this.activeDotIndex && this.model.imageManager.deleteDot(this.activeDotIndex)
}
CanvasController.prototype.windowResize = function () {
    this.canvasView.sizeImage(),
        this.scrollX = 0,
        this.scrollY = 0,
        this.render()
};
var suppressQuillEvents;
CanvasController.prototype.activeAnnotationChange = function (t, e) {
    e ? (enableQuill(),
        "string" == typeof e.text ? quill.setText(e.text) : quill.setContents(e.text)) : disableQuill()
}
CanvasController.prototype.dotTextChange = function () {
    var t = this.interactiveImage.toolbox.activeTool;
    if ("SELECT" != !t.name && t.selectedAnnotation) {
        var e = quill.getContents();
        t.selectedAnnotation.setText(e)
    }
}
CanvasController.prototype.handleDrag = function () {
    if (this.isDraggingImage) {
        var t = $("#canvas").width(),
            e = $("#canvas").height();
        if (this.canvasView.imageWidth > t) {
            var n = this.mouseX - this.lastMouseX;
            this.scrollX += n,
                this.scrollX = Math.min(0, this.scrollX),
                this.scrollX = Math.max(-(this.canvasView.imageWidth - t), this.scrollX)
        }
        if (this.canvasView.imageHeight > e) {
            var i = this.mouseY - this.lastMouseY;
            this.scrollY += i,
                this.scrollY = Math.min(0, this.scrollY),
                this.scrollY = Math.max(-(this.canvasView.imageHeight - e), this.scrollY)
        }
    } else if (this.isDraggingDot) {
        this.model.imageManager.getDots()[this.activeDotIndex];
        mousePointRelImage = this.pageToImageCoords(this.mouseX, this.mouseY),
            image_abs_x = Math.max(0, mousePointRelImage.x),
            image_abs_y = Math.max(0, mousePointRelImage.y),
            image_abs_x = Math.min(this.canvasView.imageWidth, mousePointRelImage.x),
            image_abs_y = Math.min(this.canvasView.imageHeight, mousePointRelImage.y);
        var r = mousePointRelImage.x + this.dragOffsetX,
            o = mousePointRelImage.y + this.dragOffsetY;
        r = Math.max(0, r),
            o = Math.max(0, o),
            r = Math.min(this.canvasView.imageWidth / this.scale, r),
            o = Math.min(this.canvasView.imageHeight / this.scale, o),
            this.model.imageManager.updateDot(this.activeDotIndex, r, o)
    }
    this.render()
}
CanvasController.prototype.pageToImageCoords = function (t, e) {
    var n = t - $("#canvas").position().left - this.scrollX,
        i = e - $("#canvas").position().top - this.scrollY;
    return {
        x: n / this.scale,
        y: i / this.scale
    }
}
CanvasController.prototype.imageToPageCoords = function (t, e) {
    return {
        x: t + $("#canvas").position().left + this.scrollX,
        y: e + $("#canvas").position().top + this.scrollY
    }
}
var InstructionsPopupView = function () {
    this.__init()
};
InstructionsPopupView.prototype.__init = function () {
    $("#instructions_popup").popup()
}
InstructionsPopupView.prototype.show = function () {
    $("#instructions_popup").popup({
        autoopen: !0
    })
}
InstructionsPopupView.prototype.hide = function () {
    $("#instructions_popup").popup("hide")
}
var InstructionsPopupController = function (t, e) {
    this.model = t,
        this.instructionsPopupView = e,
        this.__init()
};
InstructionsPopupController.prototype.__init = function () {
    $.cookie("has_seen_instructions") || ($.cookie("has_seen_instructions", !0, {
            expires: 999
        }),
        this.instructionsPopupView.show())
};
var SaveAsPopupView = function () {
    this.__init()
};
SaveAsPopupView.prototype.__init = function () {
    $("#save_as_playlist").selectric({
            inheritOriginalWidth: !0
        }),
        this.__createHandlers()
}
SaveAsPopupView.prototype.__createHandlers = function () {
    this.setCanSave(!1),
        $("#save_as_popup").popup({
            onclose: function () {
                    $(this).trigger("SAVE_AS_POPUP_CLOSE")
                }
                .bind(this),
            focuselement: "#save_as_popup input:first"
        });
    var t = function (t) {
            t.preventDefault(),
                this.canSave && $(this).trigger("SAVE_AS_POPUP_SAVE_AS_CLICK")
        }
        .bind(this);
    $("#save_as_popup_save_as_button").click(t),
        $("#save_as_popup_form").submit(t)
}
SaveAsPopupView.prototype.showFetchingState = function () {}
SaveAsPopupView.prototype.showFetchSuccessfulState = function (t) {
    this.setCanSave(!0),
        $("#save_as_playlist").find("option").remove().end(),
        $.each(t, function (t, e) {
                $("#save_as_playlist").find("option").end().append('<option value="' + e.playlist_id + '">' + e.name + "</option>")
            }
            .bind(this)),
        $("#save_as_playlist").css("width", $("input#save_as_popup_name").outerWidth() + 2 + "px"),
        $("#save_as_playlist").selectric({
            inheritOriginalWidth: !0
        })
}
SaveAsPopupView.prototype.showFetchUnsuccessfulState = function () {}
SaveAsPopupView.prototype.show = function () {
    $("#save_as_popup").popup("show")
}
SaveAsPopupView.prototype.hide = function () {
    $("#save_as_popup").popup("hide")
}
SaveAsPopupView.prototype.setCanSave = function (t) {
    this.canSave = t,
        this.canSave ? $("#save_as_popup_save_as_button").removeClass("popup_button_disabled") : $("#save_as_popup_save_as_button").addClass("popup_button_disabled")
}
var SaveAsPopupController = function (t, e) {
    this.model = t,
        this.saveAsPopupView = e,
        this.__init()
};
SaveAsPopupController.prototype.__init = function () {
    this.__createModelHandlers(),
        this.__createViewHandlers()
}
SaveAsPopupController.prototype.__createModelHandlers = function () {
    this.model.imageManager.on("transitioned", function (t) {
                this.__modelStateChanged()
            }
            .bind(this)),
        this.model.playlistManager.on("transitioned", function (t) {
                "SaveAs" == this.model.playlistManager.prompter && ("updating.UPDATE_SUCCESSFUL" == t.action && this.model.playlistManager.fetch(),
                    "fetching" == t.toState ? this.saveAsPopupView.showFetchingState() : "fetch_successful" == t.toState ? this.saveAsPopupView.showFetchSuccessfulState(this.model.playlistManager.tables.Playlist) : "fetch_unsuccessful" == t.toState && this.saveAsPopupView.showFetchUnsuccessfulState())
            }
            .bind(this))
}
SaveAsPopupController.prototype.__createViewHandlers = function () {
    $(this.saveAsPopupView).on("SAVE_AS_POPUP_SAVE_AS_CLICK", this.__saveAsPopupSaveAsClick.bind(this)),
        $(this.saveAsPopupView).on("SAVE_AS_POPUP_CLOSE", this.__saveAsPopupClose.bind(this))
}
SaveAsPopupController.prototype.__modelStateChanged = function () {
    "awaiting_save_as_info" == this.model.imageManager.compositeState() ? this.saveAsPopupView.show() : this.saveAsPopupView.hide()
}
SaveAsPopupController.prototype.__saveAsPopupSaveAsClick = function () {
    var t = $("#save_as_playlist").val(),
        e = canvasControllerGlobal.getScale(),
        n = {
            name: $("#save_as_popup_name").val(),
            dots: this.model.imageManager.getDots(),
            image_path: this.model.imageManager.imagePath,
            playlist_id: t,
            scale: e
        };
    this.model.imageManager.saveAs(n)
}
SaveAsPopupController.prototype.__saveAsPopupClose = function () {
    this.model.imageManager.cancel(),
        this.model.playlistManager.inactivate()
};
var PlaylistPopupView = function () {
    this.__init()
};
PlaylistPopupView.prototype.__init = function () {
        this.state = "closed",
            this.can_close = !1,
            this.checkboxTooltip = new Tooltip;
        var t = function (t) {
                t.preventDefault(),
                    $(this).trigger("NEW_PLAYLIST_POPUP_CREATE_CLICK")
            }
            .bind(this);
        $("#new_playlist_popup_create_button").click(t),
            $("#new_playlist_popup_form").submit(t),
            $("#playlist_popup_new_button").click(function (t) {
                    $(this).trigger("PLAYLIST_POPUP_CREATE_CLICK", t)
                }
                .bind(this)),
            $("#playlist_popup_open_button").click(function (t) {
                    $(this).trigger("PLAYLIST_POPUP_OPEN_CLICK", t)
                }
                .bind(this)),
            $("#playlist_popup_delete_button").click(function (t) {
                    $(this).trigger("PLAYLIST_POPUP_DELETE_CLICK", t)
                }
                .bind(this));
        var e = function (t) {
                playlistClicked = !1;
                var e = $("#playlist_popup")[0].getBoundingClientRect();
                t.pageX >= e.left && t.pageX <= e.left + e.width && t.pageY >= e.top && t.pageY <= e.top + e.height && (playlistClicked = !0),
                    playlistClicked || i()
            },
            n = function (t) {
                27 == t.keyCode && i()
            },
            i = function (t) {
                $(this).trigger("PLAYLIST_POPUP_CLOSE"),
                    $(document).off("click", null, e),
                    $(document).off("keydown", null, n)
            }
            .bind(this);
        $("#playlist_popup").popup({
                opentransitionend: function () {
                    $(document).on("click", null, e),
                        $(document).on("keydown", null, n)
                },
                closetransitionend: i.bind(this),
                blur: !1,
                escape: !1
            }),
            $("#playlist_popup_cancel_button").click(i.bind(this));
        var r = function (t) {
                $(this).trigger("NEW_PLAYLIST_POPUP_CLOSE")
            }
            .bind(this);
        $("#new_playlist_popup").popup({
                onclose: r.bind(this),
                focuselement: "#new_playlist_popup_form input:first"
            }),
            $("#new_playlist_popup_cancel_button").click(r.bind(this))
    },
    PlaylistPopupView.prototype.showFetchingState = function () {
        $("#playlist_tree").html("Loading...")
    },
    PlaylistPopupView.prototype.showUpdatingState = function () {
        $("#playlist_tree").html("Saving changes..."),
            this.show()
    },
    PlaylistPopupView.prototype.showFetchUnsuccessfulState = function () {
        $("#playlist_tree").html("Unable to load at this time.")
    },
    PlaylistPopupView.prototype.showFetchSuccessfulState = function (t, e) {
        var n = {},
            i = {};
        $.each(e, function (t, e) {
            locus_id_str = e.playlist_id.toString(),
                n[locus_id_str] || (n[locus_id_str] = []),
                n[locus_id_str].push({
                    text: e.name,
                    type: "locus",
                    li_attr: {
                        rel: "locus",
                        locus_id: e.locus_id
                    }
                }),
                i[e.locus_id] = {
                    locus_id: e.locus_id,
                    owner_id: e.owner_id,
                    playlist_id: e.playlist_id,
                    playlist_index: e.playlist_index,
                    name: e.name,
                    timestamp: e.timestamp
                }
        });
        var r = [],
            o = {};
        $.each(t, function (t, e) {
                r.push({
                        text: e.name,
                        type: "playlist",
                        children: n[e.playlist_id],
                        li_attr: {
                            rel: "playlist",
                            playlist_id: e.playlist_id
                        },
                        state: {
                            checked: !!e.is_public
                        }
                    }),
                    o[e.playlist_id] = {
                        playlist_id: e.playlist_id,
                        owner_id: e.owner_id,
                        name: e.name,
                        index: e.index,
                        is_public: e.is_public,
                        is_default: e.is_default
                    }
            }),
            this.setPlaylistData(r, o, i)
    },
    PlaylistPopupView.prototype.getPlaylistData = function (t) {
        var e = $("#playlist_tree").jstree(!0).get_json("#", {
                flat: !0
            }),
            n = [],
            i = [];
        return $.each(e, function (e, r) {
            if ("playlist" == r.type) {
                var o = $("#playlist_tree").jstree(!0).get_node(r.parent),
                    s = r.text,
                    a = r.state.checked ? 1 : 0,
                    l = {};
                r.data.db_data && (l.playlist_id = r.data.db_data.playlist_id),
                    l.owner_id = t.user_id,
                    l.name = s,
                    l.index = $.inArray(r.id, o.children),
                    l.is_public = a,
                    n.push(l)
            } else if ("locus" == r.type) {
                var c, o = $("#playlist_tree").jstree(!0).get_node(r.parent),
                    u = $("#playlist_tree").jstree(!0).get_node("#");
                c = void 0 != o.data ? o.data.db_data.playlist_id : "new_" + $.inArray(o.id, u.children);
                var s = r.text,
                    h = c,
                    d = {};
                r.data.db_data && (d.locus_id = r.data.db_data.locus_id),
                    d.name = s,
                    d.playlist_id = h,
                    d.playlist_index = $.inArray(r.id, o.children),
                    i.push(d)
            }
        }), {
            Playlist: n,
            Locus: i
        }
    };
var canDeleteNode = !1;
PlaylistPopupView.prototype.setPlaylistData = function (t, e, n) {
    $("#playlist_tree").jstree("destroy").empty(),
        $("#playlist_tree").jstree({
            core: {
                data: t,
                check_callback: function (t, e, n, i) {
                    if ("delete_node" == t) {
                        if (!canDeleteNode)
                            return $.confirm(["Are you sure you want to delete?", "This action cannot be undone."], function () {
                                var t = $("#playlist_tree").jstree(!0);
                                canDeleteNode = !0,
                                    t.delete_node(e)
                            }), !1;
                        canDeleteNode = !1
                    }
                    return ("move_node" !== t || "#" != n.id || 0 != i) && "j1_1" != e.id
                }
            },
            types: {
                "#": {
                    valid_children: ["playlist"]
                },
                playlist: {
                    valid_children: ["locus"],
                    icon: "/img/icons/playlist.svg"
                },
                locus: {
                    max_children: 0,
                    icon: "/img/icons/arrow.svg"
                }
            },
            contextmenu: {
                items: function (t) {
                    var e = $("#playlist_tree").jstree(!0),
                        n = {
                            renameItem: {
                                label: "Rename",
                                action: function (n) {
                                    e.edit(t)
                                }
                            },
                            deleteItem: {
                                label: "Delete",
                                action: function (n) {
                                    e.delete_node(t)
                                }
                            }
                        };
                    return "j1_1" == t.id ? {} : ("playlist" === t.type || t.type,
                        n)
                }
            },
            dnd: {
                check_while_dragging: !0
            },
            checkbox: {
                three_state: !1,
                whole_node: !1,
                tie_selection: !1
            },
            plugins: ["types", "contextmenu", "dnd", "checkbox"]
        }),
        db_data_key_from_i = Object.keys(e),
        db_data_loci_key_from_i = Object.keys(n),
        $("#playlist_tree").on("loaded.jstree", function () {
                var t = $("#playlist_tree").jstree(!0).get_json("#", {
                        flat: !0
                    }),
                    i = 0,
                    r = 0;
                $(t).each(function (t, o) {
                        var s = $("#playlist_tree").jstree(!0).get_node(o.id);
                        if ("playlist" == s.type) {
                            var a = s.li_attr.playlist_id;
                            db_data_piece = e[a],
                                i++
                        } else if ("locus" == s.type) {
                            var l = s.li_attr.locus_id;
                            db_data_piece = n[l],
                                r++
                        }
                        s.data || (s.data = {}),
                            s.data.db_data = db_data_piece
                    }),
                    this.data_orig = this.getPlaylistData(this.session);
                var o = $(".jstree-checkbox");
                o.mouseover(function (t) {
                            var e = $(t.target),
                                n = e.offset(),
                                i = e.outerWidth(),
                                r = e.outerHeight(),
                                o = n.left - i / 2,
                                s = n.top + r / 2;
                            this.checkboxTooltip.show(o, s, "Check to Make Playlist Public", "right")
                        }
                        .bind(this)),
                    o.mouseout(function (t) {
                            this.checkboxTooltip.hide()
                        }
                        .bind(this))
            }
            .bind(this)),
        $("#playlist_tree").delegate("a", "dblclick", function (t) {
                $(this).trigger("PLAYLIST_POPUP_OPEN_CLICK", t)
            }
            .bind(this))
}
PlaylistPopupView.prototype.addPlaylist = function () {
    var t = $("#playlist_tree").jstree(!0);
    node = t.create_node("#", {
            text: "New Playlist",
            type: "playlist"
        }, "last"),
        t.edit(node)
}
PlaylistPopupView.prototype.removeSelected = function () {
    var t = this.__getSelectedNode();
    $("#playlist_tree").jstree(!0).delete_node(t)
}
PlaylistPopupView.prototype.getSelectedLocus = function () {
    var t = this.__getSelectedNode();
    return "locus" == t.type && {
        locusId: t.data.db_data.locus_id,
        locusName: t.text
    }
}
PlaylistPopupView.prototype.__getSelectedNode = function () {
    var t = $("#playlist_tree").jstree(!0);
    return node = t.get_node(t.get_selected()[0]),
        node
}
PlaylistPopupView.prototype.show = function () {
    this.state = "open",
        $("#playlist_popup").popup("show")
}
PlaylistPopupView.prototype.hide = function () {
    this.state = "closed",
        $("#playlist_popup").popup("hide")
}
PlaylistPopupView.prototype.showNewPlaylistModal = function () {
    $("#new_playlist_popup").popup("show")
}
PlaylistPopupView.prototype.hideNewPlaylistModal = function () {
    $("#new_playlist_popup").popup("hide")
}
var PlaylistPopupController = function (t, e) {
    this.model = t,
        this.playlistPopupView = e,
        this.playlistPopupView.session = this.model.session,
        this.__init()
};
PlaylistPopupController.prototype.__init = function () {
    this.__createModelHandlers(),
        this.__createViewHandlers()
}
PlaylistPopupController.prototype.__createModelHandlers = function () {
    this.model.playlistManager.on("transitioned", function (t) {
            "Open" == this.model.playlistManager.prompter && ("inactive" == t.toState && this.playlistPopupView.hide(),
                "updating" == t.toState && this.playlistPopupView.showUpdatingState(),
                "inactive" == t.fromState && this.playlistPopupView.show(),
                "fetching" == t.toState ? this.playlistPopupView.showFetchingState() : "fetch_successful" == t.toState ? (isOpening = !1,
                    this.playlistPopupView.showFetchSuccessfulState(this.model.playlistManager.tables.Playlist, this.model.playlistManager.tables.Locus)) : "fetch_unsuccessful" == t.toState && this.playlistPopupView.showFetchUnsuccessfulState())
        }
        .bind(this))
}
PlaylistPopupController.prototype.__createViewHandlers = function () {
    $(this.playlistPopupView).on("PLAYLIST_POPUP_BLUR", this.__playlistPopupBlur.bind(this)),
        $(this.playlistPopupView).on("PLAYLIST_POPUP_OPEN_CLICK", this.__playlistPopupOpenClick.bind(this)),
        $(this.playlistPopupView).on("PLAYLIST_POPUP_CREATE_CLICK", this.__playlistPopupCreateClick.bind(this)),
        $(this.playlistPopupView).on("PLAYLIST_POPUP_DELETE_CLICK", this.__playlistPopupDeleteClick.bind(this)),
        $(this.playlistPopupView).on("PLAYLIST_POPUP_CLOSE", this.__playlistPopupClose.bind(this)),
        $(this.playlistPopupView).on("NEW_PLAYLIST_POPUP_CREATE_CLICK", this.__newPlaylistPopupCreateClick.bind(this)),
        $(this.playlistPopupView).on("NEW_PLAYLIST_POPUP_CLOSE", this.__newPlaylistPopupClose.bind(this))
}
PlaylistPopupController.prototype.__playlistPopupBlur = function () {
    "fetching" != this.model.playlistManager.state && "updating" != this.model.playlistManager.state && this.playlistPopupView.hide()
}
var isOpening = !1;
PlaylistPopupController.prototype.__playlistPopupOpenClick = function () {
    var t = this.playlistPopupView.getSelectedLocus();
    if (t) {
        isOpening = !0;
        var e = function () {
                t.locusId,
                    t.locusName;
                var e = this.playlistPopupView.getPlaylistData(this.model.session);
                if (!isEquivalent(this.playlistPopupView.data_orig, e)) {
                    var n = crud(this.playlistPopupView.data_orig, e, ["playlist_id", "locus_id"]);
                    $.each(e.Locus, function (t, i) {
                            if (-1 != String(i.playlist_id).indexOf("new_")) {
                                var r = String(i.playlist_id).slice(4),
                                    o = e.Playlist[r],
                                    s = n.Playlist.insertions.indexOf(o);
                                i.playlist_id = "new_" + s
                            }
                        }),
                        n = crud(this.playlistPopupView.data_orig, e, ["playlist_id", "locus_id"]),
                        this.model.playlistManager.transition("FETCH_SUCCESSFUL"),
                        this.model.playlistManager.update(n)
                }
                this.playlistPopupView.hide(),
                    this.model.imageManager.open(t)
            }
            .bind(this),
            n = this.model.imageManager.compositeState();
        "editing_old_locus" == n || "editing_new_locus" == n ? (this.playlistPopupView.hide(),
            $.confirm(["Are you sure you want to navigate away from this page?", "You will lose any unsaved changes."], function () {
                    e()
                }
                .bind(this))) : e()
    }
}
PlaylistPopupController.prototype.__playlistPopupCreateClick = function () {
    this.playlistPopupView.addPlaylist()
}
PlaylistPopupController.prototype.__playlistPopupDeleteClick = function () {
    this.playlistPopupView.removeSelected()
}
PlaylistPopupController.prototype.__playlistPopupClose = function () {
    if (!isOpening && "fetching" != this.model.playlistManager.state && "updating" != this.model.playlistManager.state) {
        var t = this.playlistPopupView.getPlaylistData(this.model.session);
        if (isEquivalent(this.playlistPopupView.data_orig, t))
            this.model.playlistManager.inactivate();
        else {
            var e = crud(this.playlistPopupView.data_orig, t, ["playlist_id", "locus_id"]);
            $.each(t.Locus, function (n, i) {
                    if (-1 != String(i.playlist_id).indexOf("new_")) {
                        var r = String(i.playlist_id).slice(4),
                            o = t.Playlist[r],
                            s = e.Playlist.insertions.indexOf(o);
                        i.playlist_id = "new_" + s
                    }
                }),
                e = crud(this.playlistPopupView.data_orig, t, ["playlist_id", "locus_id"]),
                this.model.playlistManager.update(e)
        }
    }
}
PlaylistPopupController.prototype.__newPlaylistPopupCreateClick = function () {
    var t = $("#playlist_name").val();
    this.playlistPopupView.addPlaylist(t),
        this.playlistPopupView.hideNewPlaylistModal()
}
PlaylistPopupController.prototype.__newPlaylistPopupClose = function () {
    this.playlistPopupView.hideNewPlaylistModal()
}
var MenuBarView = function () {
    this.__init()
};
MenuBarView.prototype.__init = function () {
    this.__setupFileMenu()
    this.__createHandlers()
}
MenuBarView.prototype.__setupFileMenu = function () {
    $("#file_menu").niceSelect()
}
MenuBarView.prototype.__createHandlers = function () {
    $("#file_menu").change(function () {
                var t = $("#file_menu")[0].value + "_CLICK";
                $(this).trigger(t)
            }
            .bind(this)),
        $("#view_button").click(function () {
                $(this).trigger("VIEW_CLICK")
            }
            .bind(this)),
        $("#login_button").click(function () {
                $(this).trigger("LOGIN_CLICK")
            }
            .bind(this)),
        $("#logout_button").click(function () {
                $(this).trigger("LOGOUT_CLICK")
            }
            .bind(this)),
        $("#register_button").click(function () {
                $(this).trigger("REGISTER_CLICK")
            }
            .bind(this)),
        $("#help_button").click(function () {
                $(this).trigger("HELP_CLICK")
            }
            .bind(this))
}
MenuBarView.prototype.showLoginButton = function () {
    $("#login_button").show()
}
MenuBarView.prototype.hideLoginButton = function () {
    $("#login_button").hide()
}
MenuBarView.prototype.showLogoutButton = function () {
    $("#logout_button").show()
}
MenuBarView.prototype.hideLogoutButton = function () {
    $("#logout_button").hide()
}
MenuBarView.prototype.showRegisterButton = function () {
    $("#register_button").show()
}
MenuBarView.prototype.hideRegisterButton = function () {
    $("#register_button").hide()
}
MenuBarView.prototype.showViewButton = function () {
    $("#view_button").show()
}
MenuBarView.prototype.hideViewButton = function () {
    $("#view_button").hide()
}
MenuBarView.prototype.setStatusText = function (t) {
    $("#status_text").html(t)
}
MenuBarView.prototype.fileOptionIsEnabled = function (t) {
    return !$("#file_menu option[value=" + t + "]").prop("disabled")
}
MenuBarView.prototype.enableFileOption = function (t) {
    $("#file_menu option[value=" + t + "]").prop("disabled", !1),
        $("#file_menu").niceSelect("update")
}
MenuBarView.prototype.disableFileOption = function (t) {
    $("#file_menu option[value=" + t + "]").prop("disabled", !0),
        $("#file_menu").niceSelect("update")
}
var MenuBarController = function (t, e) {
    this.model = t,
        this.menuBarView = e,
        this.__init()
};
MenuBarController.prototype.__init = function () {
    this.__createModelHandlers()
    this.__createViewHandlers()
}
MenuBarController.prototype.__createModelHandlers = function () {
    this.model.session.on("transitioned", function (t) {
                this.__modelStateChanged()
            }
            .bind(this)),
        this.model.imageManager.on("transitioned", function (t) {
                this.__modelStateChanged()
            }
            .bind(this))
}
MenuBarController.prototype.__createViewHandlers = function () {
    $(this.menuBarView).on("NEW_CLICK", this.__newClick.bind(this)),
        $(this.menuBarView).on("OPEN_CLICK", this.__openClick.bind(this)),
        $(this.menuBarView).on("SAVE_CLICK", this.__saveClick.bind(this)),
        $(this.menuBarView).on("SAVE_AS_CLICK", this.__saveAsClick.bind(this)),
        $(this.menuBarView).on("DELETE_CLICK", this.__deleteClick.bind(this)),
        $(this.menuBarView).on("VIEW_CLICK", this.__viewClick.bind(this)),
        $(this.menuBarView).on("LOGIN_CLICK", this.__loginClick.bind(this)),
        $(this.menuBarView).on("LOGOUT_CLICK", this.__logoutClick.bind(this)),
        $(this.menuBarView).on("REGISTER_CLICK", this.__registerClick.bind(this)),
        $(this.menuBarView).on("HELP_CLICK", this.__helpClick.bind(this)),
        shortcut.add("Ctrl+S", function () {
                this.menuBarView.fileOptionIsEnabled("SAVE") && this.__saveClick()
            }
            .bind(this)),
        shortcut.add("Ctrl+Shift+S", function () {
                this.menuBarView.fileOptionIsEnabled("SAVE_AS") && this.__saveAsClick()
            }
            .bind(this)),
        shortcut.add("Ctrl+O", function () {
                this.menuBarView.fileOptionIsEnabled("OPEN") && this.__openClick()
            }
            .bind(this)),
        shortcut.add("Ctrl+Shift+V", function () {
                this.menuBarView.fileOptionIsEnabled("VIEW") && this.__viewClick()
            }
            .bind(this))
}
MenuBarController.prototype.__modelStateChanged = function () {
    var t = this.model.session.compositeState(),
        e = this.model.imageManager.compositeState();
    this.menuBarView.disableFileOption("SAVE"),
        this.menuBarView.disableFileOption("SAVE_AS"),
        this.menuBarView.disableFileOption("DELETE"),
        this.menuBarView.disableFileOption("NEW"),
        "editing_old_locus" != e && "editing_new_locus" != e || this.menuBarView.enableFileOption("NEW"),
        this.menuBarView.hideViewButton(),
        "logged_out" == t ? (this.menuBarView.setStatusText(""),
            this.menuBarView.showLoginButton(),
            this.menuBarView.showRegisterButton(),
            this.menuBarView.hideLogoutButton(),
            this.menuBarView.disableFileOption("OPEN"),
            this.menuBarView.disableFileOption("SAVE"),
            this.menuBarView.disableFileOption("SAVE_AS"),
            this.menuBarView.disableFileOption("DELETE")) : "awaiting_login_info" == t ? (this.menuBarView.setStatusText(""),
            this.menuBarView.hideLogoutButton(),
            this.menuBarView.hideLoginButton(),
            this.menuBarView.hideRegisterButton(),
            this.menuBarView.disableFileOption("OPEN"),
            this.menuBarView.disableFileOption("SAVE"),
            this.menuBarView.disableFileOption("SAVE_AS"),
            this.menuBarView.disableFileOption("DELETE")) : "awaiting_registration_info" == t ? (this.menuBarView.setStatusText(""),
            this.menuBarView.hideLogoutButton(),
            this.menuBarView.hideLoginButton(),
            this.menuBarView.hideRegisterButton(),
            this.menuBarView.disableFileOption("OPEN"),
            this.menuBarView.disableFileOption("SAVE"),
            this.menuBarView.disableFileOption("SAVE_AS"),
            this.menuBarView.disableFileOption("DELETE")) : "authenticating" == t ? (this.menuBarView.setStatusText("Authenticating"),
            this.menuBarView.hideLogoutButton(),
            this.menuBarView.hideLoginButton(),
            this.menuBarView.hideRegisterButton(),
            this.menuBarView.disableFileOption("OPEN"),
            this.menuBarView.disableFileOption("SAVE"),
            this.menuBarView.disableFileOption("SAVE_AS"),
            this.menuBarView.disableFileOption("DELETE")) : "registering" == t ? (this.menuBarView.setStatusText("Registering"),
            this.menuBarView.hideLogoutButton(),
            this.menuBarView.hideLoginButton(),
            this.menuBarView.hideRegisterButton(),
            this.menuBarView.disableFileOption("OPEN"),
            this.menuBarView.disableFileOption("SAVE"),
            this.menuBarView.disableFileOption("SAVE_AS"),
            this.menuBarView.disableFileOption("DELETE")) : "logged_in" == t && (this.menuBarView.setStatusText(this.model.session.username),
            this.menuBarView.showLogoutButton(),
            this.menuBarView.hideLoginButton(),
            this.menuBarView.hideRegisterButton(),
            this.menuBarView.enableFileOption("OPEN"),
            "editing_old_locus" != e && "editing_new_locus" != e || this.menuBarView.enableFileOption("SAVE_AS"),
            "editing_old_locus" == e ? (this.menuBarView.enableFileOption("SAVE"),
                this.menuBarView.enableFileOption("DELETE"),
                this.menuBarView.showViewButton()) : (this.menuBarView.disableFileOption("SAVE"),
                this.menuBarView.disableFileOption("DELETE")))
}
MenuBarController.prototype.__newClick = function () {
    $.confirm(["Are you sure you want to navigate away from this page?", "You will lose any unsaved changes."], function () {
            this.model.imageManager.new()
        }
        .bind(this))
}
MenuBarController.prototype.__openClick = function () {
    this.model.playlistManager.prompter = "Open",
        this.model.playlistManager.fetch()
}
MenuBarController.prototype.__saveClick = function () {
    var t = canvasControllerGlobal.getScale();
    this.model.imageManager.save(t)
}
MenuBarController.prototype.__saveAsClick = function () {
    this.model.playlistManager.prompter = "SaveAs",
        this.model.playlistManager.fetch(),
        this.model.imageManager.promptSaveAs()
}
MenuBarController.prototype.__deleteClick = function () {
    $.confirm(["Are you sure?", "This action cannot be undone."], function () {
            this.model.imageManager.delete()
        }
        .bind(this))
}
MenuBarController.prototype.__viewClick = function () {
    this.model.imageManager.view()
}
MenuBarController.prototype.__loginClick = function () {
    this.model.session.promptLogin()
}
MenuBarController.prototype.__logoutClick = function () {
    this.model.session.logout()
}
MenuBarController.prototype.__registerClick = function () {
    this.model.session.promptRegistration()
}
MenuBarController.prototype.__helpClick = function () {
    $("#instructions_popup").popup({
        autoopen: !0
    })
}
var DEBUG = !1,
    canvasControllerGlobal, quill;
$(document).ready(function () {
    if (/Mobi|Tablet|iPad|iPhone/.test(navigator.userAgent)) {
        var t = "";
        throw t += '<img id="pixorize_logo" src="/images/logo_with_text.svg">',
            t += "<h1>We're sorry, but the Pixorize Editor does not currently support mobile devices.</h1>",
            t += '<a href="/">Back to Home</a>',
            document.write(t),
            $("body").css("display", "flex"),
            $("body").css("flex-flow", "row wrap"),
            $("body").css("justify-content", "center"),
            $("body").css("align-content", "center"),
            $("body").css("font-family", "Arial"),
            $("body").css("padding", "1rem"),
            $("a").css("font-size", "2rem"),
            $("a").css("color", "#7b369e"),
            $("a").css("font-weight", "bold"),
            document.close(),
            new Error("Mobile Not Allowed")
    }
    var e = new Model;
    model_global = e;
    var n = new MenuBarView,
        i = (new MenuBarController(e, n),
            new InstructionsPopupView),
        r = (new InstructionsPopupController(e, i),
            new SaveAsPopupView),
        o = (new SaveAsPopupController(e, r),
            new CanvasView),
        s = new CanvasController(e, o);
    canvasControllerGlobal = s;
    var a = new PlaylistPopupView;
    new PlaylistPopupController(e, a);
    quill = new Quill("#editor-container", {
            modules: {
                toolbar: [
                    ["bold", "italic", "underline"]
                ]
            },
            placeholder: "Enter text for the selected annotation here",
            theme: "snow",
            formats: ["bold", "underline", "italic"]
        }),
        disableQuill(),
        e.init(),
        $(document).bind("touchmove", function (t) {
            t.preventDefault()
        })
});